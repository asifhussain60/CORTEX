# ============================================================================
# CORTEX Universal Operations Registry
# ============================================================================
# 
# This YAML file defines ALL CORTEX operations and their modular composition.
# 
# Every CORTEX command (setup, refresh story, cleanup, etc.) is an "operation"
# composed of reusable modules executed in a defined order.
#
# Version: 2.0 (Universal Modular Architecture)
# Author: Asif Hussain
# ============================================================================

# ============================================================================
# OPERATIONS
# ============================================================================
# Each operation represents a CORTEX command that can be invoked via:
#   - Natural language: "setup environment", "refresh the story"
#   - Slash commands: "/setup", "/CORTEX, refresh cortex story"
#   - Programmatic API: execute_operation("environment_setup")

operations:
  
  # --------------------------------------------------------------------------
  # ENVIRONMENT SETUP
  # --------------------------------------------------------------------------
  environment_setup:
    name: "Environment Setup"
    description: "Configure CORTEX development environment on Mac/Windows/Linux"
    natural_language:
      - "setup"
      - "setup environment"
      - "configure"
      - "configure cortex"
      - "initialize environment"
      - "get started"
    slash_command: "/setup"
    category: "environment"
    modules:
      - project_validation
      - platform_detection
      - git_sync
      - virtual_environment
      - python_dependencies
      - vision_api
      - conversation_tracking
      - brain_initialization
      - brain_tests
      - tooling_verification
      - setup_completion
    profiles:
      minimal:
        description: "Minimal setup - core functionality only"
        modules:
          - project_validation
          - platform_detection
          - virtual_environment
          - python_dependencies
          - brain_initialization
          - setup_completion
      standard:
        description: "Standard setup - recommended for most users"
        modules:
          - project_validation
          - platform_detection
          - git_sync
          - virtual_environment
          - python_dependencies
          - vision_api
          - brain_initialization
          - brain_tests
          - setup_completion
      full:
        description: "Full setup - everything enabled"
        modules:
          - project_validation
          - platform_detection
          - git_sync
          - virtual_environment
          - python_dependencies
          - vision_api
          - conversation_tracking
          - brain_initialization
          - brain_tests
          - tooling_verification
          - setup_completion
  
  # --------------------------------------------------------------------------
  # STORY REFRESH
  # --------------------------------------------------------------------------
  refresh_cortex_story:
    name: "Refresh CORTEX Story"
    description: "Update CORTEX story documentation with narrator voice transformation"
    natural_language:
      - "refresh story"
      - "refresh cortex story"
      - "update story"
      - "regenerate story"
      - "update cortex story"
      - "transform story"
    slash_command: "/CORTEX, refresh cortex story"
    category: "documentation"
    modules:
      - load_story_template
      - apply_narrator_voice
      - validate_story_structure
      - save_story_markdown
      - update_mkdocs_index
      - build_story_preview
    profiles:
      quick:
        description: "Quick refresh - narrator voice only"
        modules:
          - load_story_template
          - apply_narrator_voice
          - save_story_markdown
      standard:
        description: "Standard refresh - narrator voice + validation"
        modules:
          - load_story_template
          - apply_narrator_voice
          - validate_story_structure
          - save_story_markdown
          - update_mkdocs_index
      full:
        description: "Full refresh - everything including preview"
        modules:
          - load_story_template
          - apply_narrator_voice
          - validate_story_structure
          - save_story_markdown
          - update_mkdocs_index
          - build_story_preview
  
  # --------------------------------------------------------------------------
  # WORKSPACE CLEANUP
  # --------------------------------------------------------------------------
  workspace_cleanup:
    name: "Workspace Cleanup"
    description: "Clean temporary files, old logs, and optimize databases"
    natural_language:
      - "cleanup"
      - "clean workspace"
      - "clean up"
      - "tidy up"
      - "remove temporary files"
      - "vacuum database"
    slash_command: "/CORTEX, cleanup"
    category: "maintenance"
    modules:
      - scan_temporary_files
      - remove_old_logs
      - clear_python_cache
      - vacuum_sqlite_databases
      - remove_orphaned_files
      - generate_cleanup_report
    profiles:
      safe:
        description: "Safe cleanup - only obviously temporary files"
        modules:
          - scan_temporary_files
          - remove_old_logs
          - generate_cleanup_report
      standard:
        description: "Standard cleanup - recommended for regular maintenance"
        modules:
          - scan_temporary_files
          - remove_old_logs
          - clear_python_cache
          - vacuum_sqlite_databases
          - generate_cleanup_report
      aggressive:
        description: "Aggressive cleanup - remove everything including orphans"
        modules:
          - scan_temporary_files
          - remove_old_logs
          - clear_python_cache
          - vacuum_sqlite_databases
          - remove_orphaned_files
          - generate_cleanup_report
  
  # --------------------------------------------------------------------------
  # DOCUMENTATION UPDATE
  # --------------------------------------------------------------------------
  update_documentation:
    name: "Update Documentation"
    description: "Refresh and build CORTEX documentation site"
    natural_language:
      - "update docs"
      - "update documentation"
      - "refresh docs"
      - "refresh documentation"
      - "build docs"
      - "generate documentation"
    slash_command: "/CORTEX, generate documentation"
    category: "documentation"
    modules:
      - scan_docstrings
      - generate_api_docs
      - refresh_design_docs
      - build_mkdocs_site
      - validate_doc_links
      - deploy_docs_preview
    profiles:
      local:
        description: "Local build - no deployment"
        modules:
          - scan_docstrings
          - generate_api_docs
          - refresh_design_docs
          - build_mkdocs_site
          - validate_doc_links
      preview:
        description: "Build with local preview"
        modules:
          - scan_docstrings
          - generate_api_docs
          - refresh_design_docs
          - build_mkdocs_site
          - validate_doc_links
          - deploy_docs_preview
      full:
        description: "Full build with deployment"
        modules:
          - scan_docstrings
          - generate_api_docs
          - refresh_design_docs
          - build_mkdocs_site
          - validate_doc_links
          - deploy_docs_preview
  
  # --------------------------------------------------------------------------
  # BRAIN PROTECTION CHECK
  # --------------------------------------------------------------------------
  brain_protection_check:
    name: "Brain Protection Validation"
    description: "Validate CORTEX brain protection rules and integrity"
    natural_language:
      - "check brain"
      - "validate brain"
      - "brain protection"
      - "check brain protection"
      - "verify brain integrity"
    slash_command: "/CORTEX, run brain protection"
    category: "validation"
    modules:
      - load_protection_rules
      - validate_tier0_immutability
      - validate_tier1_structure
      - validate_tier2_schema
      - check_brain_integrity
      - generate_protection_report
  
  # --------------------------------------------------------------------------
  # COMPREHENSIVE SELF-REVIEW
  # --------------------------------------------------------------------------
  comprehensive_self_review:
    name: "Comprehensive Self-Review"
    description: "Validate all brain protection layers, coding standards, and architecture integrity"
    natural_language:
      - "run self-review"
      - "comprehensive review"
      - "validate everything"
      - "check all protections"
      - "full validation"
      - "health check"
    slash_command: "/CORTEX, run self-review"
    category: "validation"
    modules:
      - load_self_review_checklist
      - validate_brain_protection_coverage
      - validate_layer1_tests
      - validate_layer2_tests
      - validate_layer3_tests
      - validate_layer4_tests
      - validate_layer5_tests
      - validate_layer6_tests
      - validate_integration_tests
      - check_tdd_compliance
      - check_solid_principles
      - check_code_quality
      - check_documentation_completeness
      - check_version_control_hygiene
      - validate_tier_architecture
      - validate_agent_system
      - validate_plugin_architecture
      - check_machine_configuration
      - check_machine_work_plan
      - generate_self_review_report
    profiles:
      quick:
        description: "Quick review - critical checks only"
        modules:
          - load_self_review_checklist
          - validate_brain_protection_coverage
          - check_tdd_compliance
          - validate_tier_architecture
          - generate_self_review_report
      standard:
        description: "Standard review - critical + high priority"
        modules:
          - load_self_review_checklist
          - validate_brain_protection_coverage
          - validate_layer1_tests
          - validate_layer2_tests
          - validate_layer3_tests
          - validate_layer4_tests
          - validate_layer5_tests
          - validate_layer6_tests
          - check_tdd_compliance
          - check_solid_principles
          - validate_tier_architecture
          - validate_agent_system
          - generate_self_review_report
      comprehensive:
        description: "Comprehensive review - all checks"
        modules:
          - load_self_review_checklist
          - validate_brain_protection_coverage
          - validate_layer1_tests
          - validate_layer2_tests
          - validate_layer3_tests
          - validate_layer4_tests
          - validate_layer5_tests
          - validate_layer6_tests
          - validate_integration_tests
          - check_tdd_compliance
          - check_solid_principles
          - check_code_quality
          - check_documentation_completeness
          - check_version_control_hygiene
          - validate_tier_architecture
          - validate_agent_system
          - validate_plugin_architecture
          - check_machine_configuration
          - check_machine_work_plan
          - generate_self_review_report
  
  # --------------------------------------------------------------------------
  # TEST EXECUTION
  # --------------------------------------------------------------------------
  run_tests:
    name: "Test Suite Execution"
    description: "Run CORTEX test suite with coverage reporting"
    natural_language:
      - "run tests"
      - "test this"
      - "execute tests"
      - "run test suite"
      - "check tests"
    slash_command: "/CORTEX, run tests"
    category: "testing"
    modules:
      - discover_tests
      - run_unit_tests
      - run_integration_tests
      - generate_coverage_report
      - validate_test_quality
    profiles:
      quick:
        description: "Quick test - unit tests only"
        modules:
          - discover_tests
          - run_unit_tests
      standard:
        description: "Standard test - unit + integration"
        modules:
          - discover_tests
          - run_unit_tests
          - run_integration_tests
      full:
        description: "Full test - everything with coverage"
        modules:
          - discover_tests
          - run_unit_tests
          - run_integration_tests
          - generate_coverage_report
          - validate_test_quality
  
  # --------------------------------------------------------------------------
  # INTERACTIVE PLANNING (CORTEX 2.1)
  # --------------------------------------------------------------------------
  interactive_planning:
    name: "Interactive Feature Planning"
    description: "Collaborative planning with clarifying questions (CORTEX 2.1)"
    natural_language:
      - "let's plan a feature"
      - "plan feature"
      - "I want to plan"
      - "plan this"
      - "help me plan"
      - "collaborative planning"
    slash_command: "/CORTEX, let's plan a feature"
    category: "planning"
    status: "pending"  # CORTEX 2.1 - to be implemented
    modules:
      - detect_planning_ambiguity
      - generate_clarifying_questions
      - parse_user_answers
      - filter_redundant_questions
      - extract_implied_context
      - synthesize_planning_context
      - generate_implementation_plan
      - present_plan_for_approval
    profiles:
      quick:
        description: "Quick planning - minimal questions (max 3)"
        modules:
          - detect_planning_ambiguity
          - generate_clarifying_questions
          - synthesize_planning_context
          - generate_implementation_plan
      standard:
        description: "Standard planning - balanced questions (max 5)"
        modules:
          - detect_planning_ambiguity
          - generate_clarifying_questions
          - parse_user_answers
          - filter_redundant_questions
          - extract_implied_context
          - synthesize_planning_context
          - generate_implementation_plan
          - present_plan_for_approval
      collaborative:
        description: "Collaborative planning - thorough exploration"
        modules:
          - detect_planning_ambiguity
          - generate_clarifying_questions
          - parse_user_answers
          - filter_redundant_questions
          - extract_implied_context
          - synthesize_planning_context
          - generate_implementation_plan
          - present_plan_for_approval
  
  # --------------------------------------------------------------------------
  # ARCHITECTURE PLANNING (CORTEX 2.1)
  # --------------------------------------------------------------------------
  architecture_planning:
    name: "Architecture Solution Planning"
    description: "Collaborative architecture design with guided questions"
    natural_language:
      - "architect a solution"
      - "design architecture"
      - "plan architecture"
      - "system design"
    slash_command: "/CORTEX, architect a solution"
    category: "planning"
    status: "pending"  # CORTEX 2.1 - to be implemented
    modules:
      - detect_planning_ambiguity
      - generate_clarifying_questions
      - parse_user_answers
      - filter_redundant_questions
      - synthesize_planning_context
      - generate_architecture_plan
      - present_plan_for_approval
  
  # --------------------------------------------------------------------------
  # REFACTORING PLANNING (CORTEX 2.1)
  # --------------------------------------------------------------------------
  refactoring_planning:
    name: "Refactoring Module Planning"
    description: "Interactive refactoring with clarification questions"
    natural_language:
      - "refactor this module"
      - "refactor code"
      - "improve code quality"
      - "clean up this"
    slash_command: "/CORTEX, refactor this module"
    category: "planning"
    status: "pending"  # CORTEX 2.1 - to be implemented
    modules:
      - detect_planning_ambiguity
      - generate_clarifying_questions
      - parse_user_answers
      - synthesize_planning_context
      - generate_refactoring_plan
      - present_plan_for_approval
  
  # --------------------------------------------------------------------------
  # COMMAND HELP (CORTEX 2.1)
  # --------------------------------------------------------------------------
  command_help:
    name: "Command Discovery & Help"
    description: "Discover CORTEX commands with context-aware suggestions"
    natural_language:
      - "help"
      - "show commands"
      - "what can you do"
      - "available commands"
      - "how do I"
    slash_command: "/help"
    category: "discovery"
    status: "pending"  # CORTEX 2.1 - to be implemented
    modules:
      - analyze_user_context
      - filter_relevant_commands
      - categorize_commands
      - generate_help_output
      - suggest_next_actions
    profiles:
      basic:
        description: "Basic help - most relevant commands only"
        modules:
          - analyze_user_context
          - filter_relevant_commands
          - generate_help_output
      detailed:
        description: "Detailed help - all commands with categories"
        modules:
          - analyze_user_context
          - categorize_commands
          - generate_help_output
      contextual:
        description: "Context-aware help - suggestions based on work"
        modules:
          - analyze_user_context
          - filter_relevant_commands
          - categorize_commands
          - generate_help_output
          - suggest_next_actions
  
  # --------------------------------------------------------------------------
  # COMMAND SEARCH (CORTEX 2.1)
  # --------------------------------------------------------------------------
  command_search:
    name: "Command Search"
    description: "Search for specific CORTEX commands by keyword"
    natural_language:
      - "help search"
      - "find command"
      - "search commands"
    slash_command: "/help search <keyword>"
    category: "discovery"
    status: "pending"  # CORTEX 2.1 - to be implemented
    modules:
      - parse_search_query
      - search_command_index
      - rank_search_results
      - generate_search_output

# ============================================================================
# MODULES
# ============================================================================
# Shared module definitions used across operations.
# 
# Each module:
#   - Has a unique ID
#   - Belongs to a phase (determines execution order)
#   - Has a priority (within phase)
#   - May have dependencies (must execute after other modules)
#   - Maps to a Python class implementing BaseOperationModule

modules:
  
  # --------------------------------------------------------------------------
  # ENVIRONMENT SETUP MODULES
  # --------------------------------------------------------------------------
  
  project_validation:
    name: "Project Validation"
    description: "Validate CORTEX project structure"
    phase: PRE_VALIDATION
    priority: 10
    class: "ProjectValidationModule"
    file: "project_validation_module.py"
    dependencies: []
    optional: false
    tags: ["setup", "validation", "required"]
  
  platform_detection:
    name: "Platform Detection"
    description: "Detect operating system (Mac/Windows/Linux)"
    phase: ENVIRONMENT
    priority: 10
    class: "PlatformDetectionModule"
    file: "platform_detection_module.py"
    dependencies: ["project_validation"]
    optional: false
    tags: ["setup", "environment", "required"]
  
  git_sync:
    name: "Git Synchronization"
    description: "Sync with git repository"
    phase: ENVIRONMENT
    priority: 20
    class: "GitSyncModule"
    file: "git_sync_module.py"
    dependencies: ["platform_detection"]
    optional: true
    tags: ["setup", "git"]
  
  virtual_environment:
    name: "Virtual Environment"
    description: "Create/activate Python virtual environment"
    phase: DEPENDENCIES
    priority: 10
    class: "VirtualEnvironmentModule"
    file: "virtual_environment_module.py"
    dependencies: ["platform_detection"]
    optional: false
    tags: ["setup", "python", "required"]
  
  python_dependencies:
    name: "Python Dependencies"
    description: "Install Python packages from requirements.txt"
    phase: DEPENDENCIES
    priority: 20
    class: "PythonDependenciesModule"
    file: "python_dependencies_module.py"
    dependencies: ["virtual_environment"]
    optional: false
    tags: ["setup", "python", "required"]
  
  vision_api:
    name: "Vision API"
    description: "Enable GitHub Copilot Vision API"
    phase: FEATURES
    priority: 10
    class: "VisionAPIModule"
    file: "vision_api_module.py"
    dependencies: ["python_dependencies"]
    optional: true
    tags: ["setup", "features", "vision"]
  
  conversation_tracking:
    name: "Conversation Tracking"
    description: "Enable ambient conversation capture"
    phase: FEATURES
    priority: 20
    class: "ConversationTrackingModule"
    file: "conversation_tracking_module.py"
    dependencies: ["brain_initialization"]
    optional: true
    tags: ["setup", "features", "conversation"]
  
  brain_initialization:
    name: "Brain Initialization"
    description: "Initialize CORTEX brain (Tier 1/2/3 databases)"
    phase: PROCESSING
    priority: 10
    class: "BrainInitializationModule"
    file: "brain_initialization_module.py"
    dependencies: ["python_dependencies"]
    optional: false
    tags: ["setup", "brain", "required"]
  
  brain_tests:
    name: "Brain Tests"
    description: "Validate brain initialization"
    phase: VALIDATION
    priority: 10
    class: "BrainTestsModule"
    file: "brain_tests_module.py"
    dependencies: ["brain_initialization"]
    optional: true
    tags: ["setup", "testing", "brain"]
  
  tooling_verification:
    name: "Tooling Verification"
    description: "Verify development tools (git, python, etc.)"
    phase: VALIDATION
    priority: 20
    class: "ToolingVerificationModule"
    file: "tooling_verification_module.py"
    dependencies: []
    optional: true
    tags: ["setup", "validation", "tools"]
  
  setup_completion:
    name: "Setup Completion"
    description: "Generate setup summary report"
    phase: FINALIZATION
    priority: 100
    class: "SetupCompletionModule"
    file: "setup_completion_module.py"
    dependencies: []
    optional: false
    tags: ["setup", "reporting", "required"]
  
  # --------------------------------------------------------------------------
  # STORY REFRESH MODULES
  # --------------------------------------------------------------------------
  
  load_story_template:
    name: "Load Story Template"
    description: "Load CORTEX story from prompts/shared/story.md"
    phase: PREPARATION
    priority: 10
    class: "LoadStoryTemplateModule"
    file: "load_story_template_module.py"
    dependencies: []
    optional: false
    tags: ["story", "required"]
  
  apply_narrator_voice:
    name: "Apply Narrator Voice"
    description: "Transform story to narrator voice"
    phase: PROCESSING
    priority: 10
    class: "ApplyNarratorVoiceModule"
    file: "apply_narrator_voice_module.py"
    dependencies: ["load_story_template"]
    optional: false
    tags: ["story", "transformation", "required"]
  
  validate_story_structure:
    name: "Validate Story Structure"
    description: "Ensure story has proper Markdown structure"
    phase: VALIDATION
    priority: 10
    class: "ValidateStoryStructureModule"
    file: "validate_story_structure_module.py"
    dependencies: ["apply_narrator_voice"]
    optional: true
    tags: ["story", "validation"]
  
  save_story_markdown:
    name: "Save Story Markdown"
    description: "Write transformed story to file"
    phase: FINALIZATION
    priority: 10
    class: "SaveStoryMarkdownModule"
    file: "save_story_markdown_module.py"
    dependencies: ["apply_narrator_voice"]
    optional: false
    tags: ["story", "required"]
  
  update_mkdocs_index:
    name: "Update MkDocs Index"
    description: "Update MkDocs navigation with story"
    phase: FINALIZATION
    priority: 20
    class: "UpdateMkDocsIndexModule"
    file: "update_mkdocs_index_module.py"
    dependencies: ["save_story_markdown"]
    optional: true
    tags: ["story", "documentation"]
  
  build_story_preview:
    name: "Build Story Preview"
    description: "Generate HTML preview of story"
    phase: FINALIZATION
    priority: 30
    class: "BuildStoryPreviewModule"
    file: "build_story_preview_module.py"
    dependencies: ["save_story_markdown"]
    optional: true
    tags: ["story", "preview"]
  
  # --------------------------------------------------------------------------
  # CLEANUP MODULES
  # --------------------------------------------------------------------------
  
  scan_temporary_files:
    name: "Scan Temporary Files"
    description: "Find temporary files to remove"
    phase: PREPARATION
    priority: 10
    class: "ScanTemporaryFilesModule"
    file: "scan_temporary_files_module.py"
    dependencies: []
    optional: false
    tags: ["cleanup", "required"]
  
  remove_old_logs:
    name: "Remove Old Logs"
    description: "Delete log files older than 30 days"
    phase: PROCESSING
    priority: 10
    class: "RemoveOldLogsModule"
    file: "remove_old_logs_module.py"
    dependencies: ["scan_temporary_files"]
    optional: false
    tags: ["cleanup", "logs"]
  
  clear_python_cache:
    name: "Clear Python Cache"
    description: "Remove __pycache__ directories"
    phase: PROCESSING
    priority: 20
    class: "ClearPythonCacheModule"
    file: "clear_python_cache_module.py"
    dependencies: ["scan_temporary_files"]
    optional: false
    tags: ["cleanup", "python"]
  
  vacuum_sqlite_databases:
    name: "Vacuum SQLite Databases"
    description: "Optimize SQLite databases"
    phase: PROCESSING
    priority: 30
    class: "VacuumSQLiteDatabasesModule"
    file: "vacuum_sqlite_databases_module.py"
    dependencies: []
    optional: true
    tags: ["cleanup", "database"]
  
  remove_orphaned_files:
    name: "Remove Orphaned Files"
    description: "Remove files not referenced by git"
    phase: PROCESSING
    priority: 40
    class: "RemoveOrphanedFilesModule"
    file: "remove_orphaned_files_module.py"
    dependencies: ["scan_temporary_files"]
    optional: true
    tags: ["cleanup", "aggressive"]
  
  generate_cleanup_report:
    name: "Generate Cleanup Report"
    description: "Create summary of cleanup actions"
    phase: FINALIZATION
    priority: 10
    class: "GenerateCleanupReportModule"
    file: "generate_cleanup_report_module.py"
    dependencies: []
    optional: false
    tags: ["cleanup", "reporting", "required"]
  
  # --------------------------------------------------------------------------
  # DOCUMENTATION MODULES
  # --------------------------------------------------------------------------
  
  scan_docstrings:
    name: "Scan Docstrings"
    description: "Extract docstrings from Python files"
    phase: PREPARATION
    priority: 10
    class: "ScanDocstringsModule"
    file: "scan_docstrings_module.py"
    dependencies: []
    optional: false
    tags: ["documentation", "required"]
  
  generate_api_docs:
    name: "Generate API Documentation"
    description: "Create API reference from docstrings"
    phase: PROCESSING
    priority: 10
    class: "GenerateAPIDocsModule"
    file: "generate_api_docs_module.py"
    dependencies: ["scan_docstrings"]
    optional: false
    tags: ["documentation", "api"]
  
  refresh_design_docs:
    name: "Refresh Design Documentation"
    description: "Update design documentation"
    phase: PROCESSING
    priority: 20
    class: "RefreshDesignDocsModule"
    file: "refresh_design_docs_module.py"
    dependencies: []
    optional: true
    tags: ["documentation", "design"]
  
  build_mkdocs_site:
    name: "Build MkDocs Site"
    description: "Build documentation site with MkDocs"
    phase: PROCESSING
    priority: 30
    class: "BuildMkDocsSiteModule"
    file: "build_mkdocs_site_module.py"
    dependencies: ["generate_api_docs"]
    optional: false
    tags: ["documentation", "mkdocs", "required"]
  
  validate_doc_links:
    name: "Validate Documentation Links"
    description: "Check for broken links in documentation"
    phase: VALIDATION
    priority: 10
    class: "ValidateDocLinksModule"
    file: "validate_doc_links_module.py"
    dependencies: ["build_mkdocs_site"]
    optional: true
    tags: ["documentation", "validation"]
  
  deploy_docs_preview:
    name: "Deploy Documentation Preview"
    description: "Deploy documentation to preview server"
    phase: FINALIZATION
    priority: 10
    class: "DeployDocsPreviewModule"
    file: "deploy_docs_preview_module.py"
    dependencies: ["build_mkdocs_site"]
    optional: true
    tags: ["documentation", "deployment"]
  
  # --------------------------------------------------------------------------
  # BRAIN PROTECTION MODULES
  # --------------------------------------------------------------------------
  
  load_protection_rules:
    name: "Load Protection Rules"
    description: "Load brain-protection-rules.yaml"
    phase: PREPARATION
    priority: 10
    class: "LoadProtectionRulesModule"
    file: "load_protection_rules_module.py"
    dependencies: []
    optional: false
    tags: ["brain", "protection", "required"]
  
  validate_tier0_immutability:
    name: "Validate Tier 0 Immutability"
    description: "Ensure Tier 0 rules are immutable"
    phase: VALIDATION
    priority: 10
    class: "ValidateTier0ImmutabilityModule"
    file: "validate_tier0_immutability_module.py"
    dependencies: ["load_protection_rules"]
    optional: false
    tags: ["brain", "tier0", "required"]
  
  validate_tier1_structure:
    name: "Validate Tier 1 Structure"
    description: "Validate Tier 1 database schema"
    phase: VALIDATION
    priority: 20
    class: "ValidateTier1StructureModule"
    file: "validate_tier1_structure_module.py"
    dependencies: ["load_protection_rules"]
    optional: false
    tags: ["brain", "tier1", "required"]
  
  validate_tier2_schema:
    name: "Validate Tier 2 Schema"
    description: "Validate Tier 2 YAML schema"
    phase: VALIDATION
    priority: 30
    class: "ValidateTier2SchemaModule"
    file: "validate_tier2_schema_module.py"
    dependencies: ["load_protection_rules"]
    optional: false
    tags: ["brain", "tier2", "required"]
  
  check_brain_integrity:
    name: "Check Brain Integrity"
    description: "Comprehensive brain health check"
    phase: VALIDATION
    priority: 40
    class: "CheckBrainIntegrityModule"
    file: "check_brain_integrity_module.py"
    dependencies:
      - "validate_tier0_immutability"
      - "validate_tier1_structure"
      - "validate_tier2_schema"
    optional: false
    tags: ["brain", "integrity", "required"]
  
  generate_protection_report:
    name: "Generate Protection Report"
    description: "Create brain protection summary"
    phase: FINALIZATION
    priority: 10
    class: "GenerateProtectionReportModule"
    file: "generate_protection_report_module.py"
    dependencies: ["check_brain_integrity"]
    optional: false
    tags: ["brain", "reporting", "required"]
  
  # --------------------------------------------------------------------------
  # TEST EXECUTION MODULES
  # --------------------------------------------------------------------------
  
  discover_tests:
    name: "Discover Tests"
    description: "Find all test files"
    phase: PREPARATION
    priority: 10
    class: "DiscoverTestsModule"
    file: "discover_tests_module.py"
    dependencies: []
    optional: false
    tags: ["testing", "required"]
  
  run_unit_tests:
    name: "Run Unit Tests"
    description: "Execute unit test suite"
    phase: PROCESSING
    priority: 10
    class: "RunUnitTestsModule"
    file: "run_unit_tests_module.py"
    dependencies: ["discover_tests"]
    optional: false
    tags: ["testing", "unit", "required"]
  
  run_integration_tests:
    name: "Run Integration Tests"
    description: "Execute integration test suite"
    phase: PROCESSING
    priority: 20
    class: "RunIntegrationTestsModule"
    file: "run_integration_tests_module.py"
    dependencies: ["discover_tests"]
    optional: true
    tags: ["testing", "integration"]
  
  generate_coverage_report:
    name: "Generate Coverage Report"
    description: "Create test coverage report"
    phase: FINALIZATION
    priority: 10
    class: "GenerateCoverageReportModule"
    file: "generate_coverage_report_module.py"
    dependencies:
      - "run_unit_tests"
      - "run_integration_tests"
    optional: true
    tags: ["testing", "coverage"]
  
  validate_test_quality:
    name: "Validate Test Quality"
    description: "Check test quality metrics"
    phase: VALIDATION
    priority: 10
    class: "ValidateTestQualityModule"
    file: "validate_test_quality_module.py"
    dependencies: ["generate_coverage_report"]
    optional: true
    tags: ["testing", "quality"]
  
  # --------------------------------------------------------------------------
  # INTERACTIVE PLANNING MODULES (CORTEX 2.1)
  # --------------------------------------------------------------------------
  
  detect_planning_ambiguity:
    name: "Detect Planning Ambiguity"
    description: "Analyze user request for unclear requirements"
    phase: PREPARATION
    priority: 10
    class: "DetectPlanningAmbiguityModule"
    file: "detect_planning_ambiguity_module.py"
    dependencies: []
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  generate_clarifying_questions:
    name: "Generate Clarifying Questions"
    description: "Create targeted questions to resolve ambiguity"
    phase: PROCESSING
    priority: 10
    class: "GenerateClarifyingQuestionsModule"
    file: "generate_clarifying_questions_module.py"
    dependencies: ["detect_planning_ambiguity"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  parse_user_answers:
    name: "Parse User Answers"
    description: "Extract direct answers and implied context from responses"
    phase: PROCESSING
    priority: 20
    class: "ParseUserAnswersModule"
    file: "parse_user_answers_module.py"
    dependencies: ["generate_clarifying_questions"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  filter_redundant_questions:
    name: "Filter Redundant Questions"
    description: "Skip questions already answered via context"
    phase: PROCESSING
    priority: 30
    class: "FilterRedundantQuestionsModule"
    file: "filter_redundant_questions_module.py"
    dependencies: ["parse_user_answers"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  extract_implied_context:
    name: "Extract Implied Context"
    description: "Identify additional context from natural language"
    phase: PROCESSING
    priority: 40
    class: "ExtractImpliedContextModule"
    file: "extract_implied_context_module.py"
    dependencies: ["parse_user_answers"]
    optional: true
    tags: ["planning", "cortex-2.1"]
    status: "pending"
  
  synthesize_planning_context:
    name: "Synthesize Planning Context"
    description: "Combine all answers and context into cohesive requirements"
    phase: PROCESSING
    priority: 50
    class: "SynthesizePlanningContextModule"
    file: "synthesize_planning_context_module.py"
    dependencies: ["filter_redundant_questions", "extract_implied_context"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  generate_implementation_plan:
    name: "Generate Implementation Plan"
    description: "Create detailed implementation plan from synthesized context"
    phase: PROCESSING
    priority: 60
    class: "GenerateImplementationPlanModule"
    file: "generate_implementation_plan_module.py"
    dependencies: ["synthesize_planning_context"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  generate_architecture_plan:
    name: "Generate Architecture Plan"
    description: "Create architecture design from requirements"
    phase: PROCESSING
    priority: 60
    class: "GenerateArchitecturePlanModule"
    file: "generate_architecture_plan_module.py"
    dependencies: ["synthesize_planning_context"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  generate_refactoring_plan:
    name: "Generate Refactoring Plan"
    description: "Create refactoring plan with SOLID principles"
    phase: PROCESSING
    priority: 60
    class: "GenerateRefactoringPlanModule"
    file: "generate_refactoring_plan_module.py"
    dependencies: ["synthesize_planning_context"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  present_plan_for_approval:
    name: "Present Plan for Approval"
    description: "Show plan to user and handle modifications"
    phase: FINALIZATION
    priority: 10
    class: "PresentPlanForApprovalModule"
    file: "present_plan_for_approval_module.py"
    dependencies: ["generate_implementation_plan"]
    optional: false
    tags: ["planning", "cortex-2.1", "required"]
    status: "pending"
  
  # --------------------------------------------------------------------------
  # COMMAND DISCOVERY MODULES (CORTEX 2.1)
  # --------------------------------------------------------------------------
  
  analyze_user_context:
    name: "Analyze User Context"
    description: "Analyze current work context for relevant commands"
    phase: PREPARATION
    priority: 10
    class: "AnalyzeUserContextModule"
    file: "analyze_user_context_module.py"
    dependencies: []
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  filter_relevant_commands:
    name: "Filter Relevant Commands"
    description: "Select commands relevant to current context"
    phase: PROCESSING
    priority: 10
    class: "FilterRelevantCommandsModule"
    file: "filter_relevant_commands_module.py"
    dependencies: ["analyze_user_context"]
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  categorize_commands:
    name: "Categorize Commands"
    description: "Group commands by category and usage"
    phase: PROCESSING
    priority: 20
    class: "CategorizeCommandsModule"
    file: "categorize_commands_module.py"
    dependencies: []
    optional: true
    tags: ["discovery", "cortex-2.1"]
    status: "pending"
  
  generate_help_output:
    name: "Generate Help Output"
    description: "Create formatted help text with examples"
    phase: FINALIZATION
    priority: 10
    class: "GenerateHelpOutputModule"
    file: "generate_help_output_module.py"
    dependencies: ["filter_relevant_commands"]
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  suggest_next_actions:
    name: "Suggest Next Actions"
    description: "Proactively suggest relevant commands based on work"
    phase: FINALIZATION
    priority: 20
    class: "SuggestNextActionsModule"
    file: "suggest_next_actions_module.py"
    dependencies: ["analyze_user_context"]
    optional: true
    tags: ["discovery", "cortex-2.1"]
    status: "pending"
  
  parse_search_query:
    name: "Parse Search Query"
    description: "Extract keywords and intent from search query"
    phase: PREPARATION
    priority: 10
    class: "ParseSearchQueryModule"
    file: "parse_search_query_module.py"
    dependencies: []
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  search_command_index:
    name: "Search Command Index"
    description: "Search commands by keywords and synonyms"
    phase: PROCESSING
    priority: 10
    class: "SearchCommandIndexModule"
    file: "search_command_index_module.py"
    dependencies: ["parse_search_query"]
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  rank_search_results:
    name: "Rank Search Results"
    description: "Rank search results by relevance"
    phase: PROCESSING
    priority: 20
    class: "RankSearchResultsModule"
    file: "rank_search_results_module.py"
    dependencies: ["search_command_index"]
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"
  
  generate_search_output:
    name: "Generate Search Output"
    description: "Format search results with details and examples"
    phase: FINALIZATION
    priority: 10
    class: "GenerateSearchOutputModule"
    file: "generate_search_output_module.py"
    dependencies: ["rank_search_results"]
    optional: false
    tags: ["discovery", "cortex-2.1", "required"]
    status: "pending"

# ============================================================================
# METADATA
# ============================================================================

metadata:
  version: "2.1"
  schema_version: "1.0"
  author: "Asif Hussain"
  last_updated: "2025-11-09"
  description: "Universal operations registry for CORTEX 2.0 + 2.1"
  
  changelog:
    - version: "2.1"
      date: "2025-11-09"
      changes:
        - "Added CORTEX 2.1 interactive planning operations"
        - "Added CORTEX 2.1 command discovery operations"
        - "Added 5 new planning-focused operations"
        - "Added 2 new discovery-focused operations"
        - "Added 22 new modules for 2.1 features"
        - "All 2.1 operations marked as 'pending' implementation"
    - version: "2.0"
      date: "2025-11-08"
      changes:
        - "Initial universal operations architecture"
        - "Migrated setup operation (4 modules functional)"
        - "Defined 6 operations with 48 modules total"
  
statistics:
  total_operations: 13
  total_modules: 70
  total_phases: 8
  cortex_2_0_operations: 7
  cortex_2_1_operations: 6
  cortex_2_0_modules: 48
  cortex_2_1_modules: 22
