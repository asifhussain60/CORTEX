agent_intent_router:
  name: "Intent Router"
  role: "Analyze user requests and route to appropriate specialist agents"
  version: "5.0"
  hemisphere: "right_brain"
  
  purpose:
    primary_responsibility: "Intelligent dispatcher for CORTEX"
    single_responsibility_principle:
      - "Analyze what user wants (intent detection)"
      - "Route to appropriate specialist agent" 
      - "Pass context to specialist"
      - "Handle multi-intent requests"
    not_responsible_for:
      - "execution"
      - "planning" 
      - "testing"
      - "validation"

  intent_classification:
    primary_intents:
      PLAN:
        description: "User wants to start new feature work"
        patterns:
          - "I want to [add|create|build|implement]..."
          - "Add a [feature]..."
          - "Create a [component]..."
          - "Build a [service]..."
          - "Implement [functionality]..."
        route_to: "work_planner"
        examples:
          - "I want to add a FAB button pulse animation"
          - "Create a PDF export feature"
          - "Build a dark mode toggle"
          - "Implement session sharing"
        
      EXECUTE:
        description: "User wants to continue active work"
        patterns:
          - "continue"
          - "next"
          - "next task"
          - "keep going"
          - "proceed"
          - "execute"
        route_to: "code_executor"
        examples:
          - "continue"
          - "next task"
          - "keep going"
          - "proceed with the plan"
          
      RESUME:
        description: "User wants to see progress or pickup after break"
        patterns:
          - "resume"
          - "where was I"
          - "where am I"
          - "show progress"
          - "left off"
          - "status"
          - "current status"
          - "what's next"
        route_to: "session_resumer"
        examples:
          - "Show me where I left off"
          - "What's the current status?"
          - "Resume work"
          - "Where was I?"
          
      CORRECT:
        description: "User needs to fix Copilot's mistake/misunderstanding"
        patterns:
          - "wrong [file|approach|assumption]"
          - "not [that|what I meant]"
          - "actually..."
          - "correction..."
          - "that's not right"
          - "you misunderstood"
        route_to: "error_corrector"
        examples:
          - "Wrong file - should be AuthService.cs"
          - "Not what I meant, I want login functionality"
          - "Actually, that's not the right approach"
          
      VALIDATE:
        description: "User wants to check work quality or run tests"
        patterns:
          - "validate"
          - "check"
          - "test"
          - "verify"
          - "run tests"
          - "quality check"
        route_to: "health_validator"
        examples:
          - "Validate the implementation"
          - "Run tests to check everything works"
          - "Quality check the code"
          
      ASK:
        description: "User has questions about implementation or design"
        patterns:
          - "how [does|do|to]"
          - "what [is|are|does]"
          - "why [is|are|does]"
          - "can you explain"
          - "show me"
          - "help with"
        route_to: "question_answerer"
        examples:
          - "How does authentication work?"
          - "What is the difference between..."
          - "Can you explain the architecture?"
          
      ANALYZE_SCREENSHOT:
        description: "User uploads screenshot/image with requirements"
        patterns:
          - "analyze [this|the] screenshot"
          - "extract requirements from [image|screenshot]"
          - "what does this [mockup|design|wireframe] show"
          - "read [the|these] annotations"
          - "implement what's shown in [this|the] image"
          - "convert this design to code"
        route_to: "screenshot_analyzer"
        triggers:
          - "image_attachment_detected"
        examples:
          - "Analyze this screenshot and extract requirements"
          - "What does this mockup show?"
          - "Extract requirements from this annotated image"
          
      COMMIT:
        description: "User wants to commit changes to git"
        patterns:
          - "commit changes"
          - "commit [my|the] work"
          - "git commit"
          - "save [to|changes to] git"
          - "create [a|] commit[s]"
        route_to: "commit_handler"
        examples:
          - "commit changes"
          - "commit my work"
          - "git commit with proper messages"
          
      AMNESIA:
        description: "User wants to reset brain for new application"
        patterns:
          - "reset brain [for|to] [new|different] application"
          - "brain amnesia"
          - "clear application data from brain"
          - "start fresh with new project"
          - "wipe application context"
        route_to: "brain_amnesia"
        examples:
          - "Reset BRAIN for new application"
          - "Brain amnesia - starting new project"
          - "Clear all application data from BRAIN"

  routing_logic:
    confidence_threshold: 0.7
    multi_intent_handling:
      enabled: true
      max_intents: 3
      priority_order: ["CORRECT", "VALIDATE", "PLAN", "EXECUTE", "ASK"]
      
    ambiguity_resolution:
      threshold: 0.5
      action: "ask_clarifying_question"
      fallback: "question_answerer"
      
    context_passing:
      required_fields:
        - "user_request"
        - "detected_intent"
        - "confidence_score"
        - "session_context"
      optional_fields:
        - "preventive_actions"
        - "brain_warnings"
        - "recent_activity"

  proactive_analysis:
    enabled_for_intents: ["PLAN", "EXECUTE"]
    disabled_for_intents: ["RESUME", "ASK", "VALIDATE"]
    
    prediction_types:
      file_hotspot:
        description: "High churn rate files"
        confidence_threshold: 0.65
        severity_levels: ["high", "medium", "low"]
        
      complexity_warning:
        description: "Feature complexity estimates"
        confidence_threshold: 0.70
        
      velocity_drop:
        description: "Development velocity patterns"
        confidence_threshold: 0.75
        
      test_coverage:
        description: "Test coverage predictions"
        confidence_threshold: 0.65
        
      success_pattern:
        description: "Historical success patterns"
        confidence_threshold: 0.80

    warning_format:
      severity_icons:
        high: "üî¥"
        medium: "üü°" 
        low: "üü¢"
        info: "‚ö†Ô∏è"
      sections:
        - "brain_analysis_header"
        - "warning_message"
        - "suggestion"
        - "impact_assessment"

  response_format:
    routing_decision:
      template: |
        üß† **Intent Detected:** {intent_type} (confidence: {confidence}%)
        üéØ **Routing to:** {target_agent}
        üìù **Context:** {context_summary}
        {proactive_warnings}
        
        Proceeding to {target_agent}...
      
    multi_intent:
      template: |
        üß† **Multiple Intents Detected:**
        {intent_list}
        
        **Execution Order:** {execution_order}
        
        Starting with {first_agent}...
        
    ambiguous_request:
      template: |
        ü§î **Request Unclear** (confidence: {confidence}%)
        
        Could you clarify what you'd like me to do?
        
        **Possible interpretations:**
        {interpretation_options}

  performance:
    targets:
      intent_classification: "<100ms"
      proactive_analysis: "<500ms"
      total_routing_time: "<1000ms"
      
    optimizations:
      pattern_caching: true
      parallel_prediction: true
      confidence_early_exit: true

  learning:
    feedback_loop: true
    pattern_reinforcement: true
    confidence_adjustment: true
    success_tracking: true
    
  validation:
    required_patterns: "all_intents_have_patterns"
    route_availability: "all_agents_accessible" 
    confidence_calibration: "accuracy_>85%"
    response_time: "<1000ms_p95"