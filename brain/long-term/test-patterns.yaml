# TIER 2: LONG-TERM MEMORY - Test Patterns
# Version: 1.0 (migrated from kds-brain/knowledge-graph.yaml)
# Last Updated: 2025-11-03
# Purpose: Reusable test patterns and validation insights
# Auto-updated by: brain-updater.md

test_patterns:
  playwright_e2e:
    framework: "playwright"
    description: "End-to-end testing with Playwright using canonical test data"
    canonical_test_data: "session-212"
    used_in:
      - "hcp-fab-button"
    confidence: 1.0
    reusable: true
  
  id_based_playwright_selectors:
    framework: "playwright"
    description: "Use semantic element IDs for reliable test selectors instead of text-based selectors"
    confidence: 1.0
    reusable: true
    naming_convention: "[component]-[section]-[element]"
    examples:
      - "hcp-content-fab-share-btn"
      - "content-qa-toggle-btn"
      - "content-transcript-container"
    benefits:
      - "Resilient to UI text changes"
      - "More maintainable"
      - "Better for visual regression testing"
    used_in:
      - "hcp-fab-button-testing"
  
  dashboard_refresh_automation:
    framework: "playwright"
    description: "Automated testing of dashboard refresh functionality with API integration"
    confidence: 1.0
    reusable: true
    test_pattern: "api_connectivity_validation"
    checks:
      - "API server responds on localhost:8765"
      - "Health check endpoint returns valid JSON"
      - "Dashboard loads and renders"
      - "Refresh button triggers API call"
      - "UI updates with health check results"
    used_in:
      - "kds-dashboard-testing"

validation_insights:
  common_failures: []
  
  successful_patterns:
    - pattern: "Use semantic IDs for element selection"
      success_rate: 1.0
      reason: "Resilient to text changes"
    
    - pattern: "Test against canonical data (session-212)"
      success_rate: 1.0
      reason: "Consistent test environment"
    
    - pattern: "Include visual regression tests with Percy"
      success_rate: 1.0
      reason: "Catches UI regressions automatically"

feature_test_coverage:
  fab_button:
    status: "complete"
    completion_date: "2025-11-01"
    files:
      - "SPA/NoorCanvas/Pages/HostControlPanel.razor"
      - "SPA/NoorCanvas/Services/ShareButtonInjectionService.cs"
      - "SPA/NoorCanvas/wwwroot/css/noor-canvas.css"
      - "Tests/UI/hcp-fab-button-injection-test.spec.ts"
      - "Tests/UI/hcp-fab-button-click-test.spec.ts"
    test_approach: "playwright_e2e_session_212"
    workflow_used: "service_layer_ui_injection"
  
  kds_health_dashboard:
    status: "complete"
    completion_date: "2025-11-03"
    files:
      - "KDS/kds-dashboard.html"
      - "KDS/scripts/run-health-checks.ps1"
      - "KDS/scripts/dashboard-api-server.ps1"
      - "KDS/scripts/launch-dashboard.ps1"
      - "KDS/scripts/open-dashboard.ps1"
      - "KDS/tests/test-dashboard-refresh.ps1"
      - "KDS/dashboard/README.md"
      - "KDS/dashboard/QUICK-START.md"
      - "KDS/dashboard/HEALTHCHECK-INTEGRATION.md"
      - "KDS/dashboard/IMPLEMENTATION-SUMMARY.md"
      - "KDS/dashboard/QUICK-REFERENCE.md"
      - ".vscode/tasks.json"
    test_approach: "playwright_automation"
    workflow_used: "single_file_spa_creation"
    patterns_applied:
      - "single_file_spa_creation"
      - "kds_health_monitoring"
      - "powershell_http_server"
      - "unified_launcher_pattern"
    source: "copilot_chat"

metadata:
  total_test_patterns: 3
  total_features_tested: 2
  last_updated: "2025-11-03T19:00:00Z"
  version: "1.0"
  source: "kds-brain/knowledge-graph.yaml"
  migration_date: "2025-11-04"
  tier: 2
  purpose: "Test patterns and validation insights - reusable testing strategies"
  auto_managed: true
  housekeeping_service: "consolidation-service"
