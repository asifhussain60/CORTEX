%% CORTEX Dual-Hemisphere Agent System
%% Shows LEFT (tactical) and RIGHT (strategic) brain agents

graph LR
    subgraph right["ğŸ¯ RIGHT HEMISPHERE<br/>(Strategic Planning)"]
        R1["ğŸ§­ Intent Router<br/>Parse & Route Requests"]
        R2["ğŸ“‹ Work Planner<br/>Multi-Phase Strategies"]
        R3["ğŸ“¸ Screenshot Analyzer<br/>Extract UI Requirements"]
        R4["ğŸ›¡ï¸ Change Governor<br/>Protect Architecture"]
        R5["ğŸ” Brain Protector<br/>Enforce Rule #22"]
    end

    subgraph corpus["ğŸŒ‰ CORPUS CALLOSUM<br/>(Coordination Layer)"]
        CC_QUEUE["Message Queue<br/>coordination-queue.jsonl"]
        CC_SYNC["State Sync<br/>Alignment Check"]
    end

    subgraph left["âš™ï¸ LEFT HEMISPHERE<br/>(Tactical Execution)"]
        L1["ğŸ’» Code Executor<br/>Implement with TDD"]
        L2["âœ… Test Generator<br/>Create Test Suites"]
        L3["ğŸ”§ Error Corrector<br/>Fix Wrong Files"]
        L4["â¤ï¸ Health Validator<br/>Enforce DoD"]
        L5["ğŸŒ¿ Commit Handler<br/>Semantic Commits"]
    end

    right -->|"Plan"| corpus
    corpus -->|"Tasks"| left
    left -->|"Results"| corpus
    corpus -->|"Learn"| right

    R1 -.->|"Route"| R2
    R2 -->|"Strategy"| CC_QUEUE
    CC_QUEUE -->|"Execute"| L1
    L1 -->|"Code"| L2
    L2 -->|"Tests"| L4
    L4 -->|"Validate"| CC_SYNC
    CC_SYNC -->|"Update KG"| R2

    style right fill:#F59E0B,stroke:#92400E,color:#fff
    style left fill:#3B82F6,stroke:#1E3A8A,color:#fff
    style corpus fill:#10B981,stroke:#065F46,color:#fff
