# CORTEX 3.0 - Smart Hint Response Template
#
# Purpose: Template for Smart Hint prompts in conversation capture system
# Usage: Loaded by SmartHintGenerator when valuable conversation detected
#
# Author: Asif Hussain
# Copyright: ¬© 2024-2025 Asif Hussain. All rights reserved.
# License: Proprietary - See LICENSE file for terms

templates:
  smart_hint_base:
    trigger: "quality_threshold_met"
    display_condition: "quality >= GOOD AND hint_not_shown"
    
    content: |
      ---
      
      > ### üí° CORTEX Learning Opportunity
      > 
      > **This conversation has strategic value:**
      {value_items}
      > 
      > **Quality Score: {display_score}/10 ({quality_level})**
      > 
      > üìÅ **Two-step capture:**  
      > 1. Say "/CORTEX Capture this conversation" to create empty file
      > 2. Paste conversation into file and save
      > 3. Say "/CORTEX Import this conversation" to import to brain
      > 
      > *Or dismiss: Say "skip" and I won't suggest this again*
      
      ---
    
    variables:
      value_items: "List of strategic elements detected (bullet points)"
      display_score: "Quality score on /10 scale (7-10 for GOOD/EXCELLENT)"
      quality_level: "EXCELLENT, GOOD, FAIR, or LOW"
  
  smart_hint_excellent:
    trigger: "quality >= EXCELLENT"
    
    content: |
      ---
      
      > ### üí° CORTEX Learning Opportunity
      > 
      > **This conversation has EXCEPTIONAL strategic value:**
      {value_items}
      > 
      > **Quality Score: {display_score}/10 (EXCELLENT)**
      > 
      > üìÅ **Two-step capture:**  
      > 1. Say "/CORTEX Capture this conversation" to create empty file
      > 2. Paste conversation into file and save
      > 3. Say "/CORTEX Import this conversation" to import to brain
      > 
      > *This type of conversation is rare and valuable for CORTEX learning.*
      > 
      > *Or dismiss: Say "skip" and I won't suggest this again*
      
      ---
  
  dismissal_response:
    trigger: "user_says_skip"
    
    content: |
      Noted. I won't suggest saving this conversation again. 
      
      You can always manually capture conversations by saying "/CORTEX Capture this conversation" anytime.
  
  hint_position:
    location: "AFTER Response section, BEFORE Next Steps section"
    format: "Optional section - only appears when quality threshold met"
    
    example_flow: |
      üß† **CORTEX [Operation]**
      
      üéØ **My Understanding:**
      ...
      
      ‚ö†Ô∏è **Challenge:**
      ...
      
      üí¨ **Response:**
      ...
      
      ---   <-- Smart Hint appears here (if threshold met)
      
      üìù **Your Request:**
      ...
      
      üîç **Next Steps:**
      ...

# Hint Display Rules
display_rules:
  master_switch: true  # Global enable/disable
  
  quality_thresholds:
    EXCELLENT: 19  # Internal score ‚â•19 points
    GOOD: 10       # Internal score ‚â•10 points
    FAIR: 2        # Internal score ‚â•2 points
    LOW: 0         # Internal score 0-1 points
  
  display_conditions:
    - "quality_level >= configured_threshold (default: GOOD)"
    - "hint_not_shown_in_current_session"
    - "master_switch_enabled"
  
  frequency:
    max_per_session: 1
    max_per_conversation: 1
  
  dismissal_handling:
    user_responses:
      skip: "Mark hint_shown=true, record user_response='rejected'"
      ignore: "Mark hint_shown=true, record user_response='ignored'"
      accept: "Mark hint_shown=true, record user_response='accepted', trigger capture"

# Strategic Value Indicators
value_indicators:
  multi_phase_planning:
    points: 3_per_phase
    detection: "Phase 1, Phase 2, ‚òê Milestone 1, etc."
    message: "Multi-phase planning ({phase_count} phases)"
  
  challenge_accept_flow:
    points: 3
    detection: "‚ö†Ô∏è **Challenge:** ‚úì **Accept** or ‚ö° **Challenge**"
    message: "Challenge/Accept reasoning documented"
  
  design_decisions:
    points: 2
    detection: "trade-off, alternative, approach, strategy, architecture"
    message: "Design decisions and trade-offs discussed"
  
  code_implementation:
    points: 2
    detection: "```python, ```typescript, code blocks"
    message: "Code implementation included"
  
  architectural_discussion:
    points: 2
    detection: "tier, plugin, module, component, layer, interface, API"
    message: "Architectural patterns discussed"
  
  file_references:
    points: 1_per_file
    max_points: 3
    detection: "`file.py`, `src/config.json`, etc."
    message: "{count} file reference(s)"
  
  next_steps:
    points: 2
    detection: "üîç Next Steps:"
    message: "Clear next steps provided"

# Quality Score Mapping
score_mapping:
  internal_to_display:
    description: "Map internal scores (0-30+) to user-friendly /10 scale"
    
    EXCELLENT:
      internal_range: "19-30+"
      display_range: "9-10"
      formula: "min(10, 9 + (score - 19) // 6)"
    
    GOOD:
      internal_range: "10-18"
      display_range: "7-8"
      formula: "7 if score < 14 else 8"
    
    FAIR:
      internal_range: "2-9"
      display_range: "4-6"
      formula: "min(6, 4 + (score - 2) // 3)"
    
    LOW:
      internal_range: "0-1"
      display_range: "1-3"
      formula: "max(1, score + 1)"

# Integration Points
integration:
  quality_monitor:
    provides: "quality_score, quality_level, should_show_hint"
    triggers: "SmartHintGenerator.generate_hint()"
  
  intent_router:
    captures:
      - "/CORTEX Capture this conversation"
      - "/CORTEX Import this conversation"
      - "skip" (dismissal)
  
  tier_2_learning:
    tracks:
      - "user_acceptance_patterns"
      - "quality_score_correlations"
      - "threshold_adjustments"

# Examples
examples:
  excellent_conversation:
    scenario: "Multi-phase roadmap planning with design decisions"
    internal_score: 22
    display_score: 10
    quality_level: "EXCELLENT"
    hint_shown: true
    
    value_items:
      - "Multi-phase planning (5 phases)"
      - "Challenge/Accept reasoning documented"
      - "Design decisions and trade-offs discussed"
      - "Architectural patterns discussed"
      - "3 file reference(s)"
      - "Clear next steps provided"
  
  good_conversation:
    scenario: "Feature implementation with code and tests"
    internal_score: 14
    display_score: 8
    quality_level: "GOOD"
    hint_shown: true
    
    value_items:
      - "Multi-phase planning (3 phases)"
      - "Code implementation included"
      - "2 file reference(s)"
      - "Clear next steps provided"
  
  fair_conversation:
    scenario: "Normal Q&A with some technical content"
    internal_score: 5
    display_score: 5
    quality_level: "FAIR"
    hint_shown: false  # Below GOOD threshold
  
  low_conversation:
    scenario: "Simple greeting or single-word response"
    internal_score: 1
    display_score: 2
    quality_level: "LOW"
    hint_shown: false

# Metadata
metadata:
  version: "1.0.0"
  feature: "Feature 5 Phase 3: Intelligent Auto-Detection"
  status: "PRODUCTION_READY"
  created: "2025-11-16"
  author: "Asif Hussain"
  copyright: "¬© 2024-2025 Asif Hussain. All rights reserved."
  license: "Proprietary - See LICENSE file for terms"
