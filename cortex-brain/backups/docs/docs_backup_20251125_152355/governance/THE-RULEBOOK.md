<div class="rulebook-hero">

# THE CORTEX RULEBOOK

<p class="subtitle">The Primary Bible of CORTEX</p>

<p class="metadata">
<strong>Author:</strong> Asif Hussain | Â© 2024-2025<br>
<strong>Last Updated:</strong> November 19, 2025<br>
<strong>Version:</strong> 2.1
</p>

</div>

<div class="rulebook-toc">

## ðŸ“– Table of Contents

- [About This Document](#about-this-document)
- [I. Core Principles (Tier 0 Instinct)](#i-core-principles-tier-0-instinct)
- [II. Test-Driven Development (TDD)](#ii-test-driven-development-tdd)
- [III. Brain Protection System (SKULL Rules)](#iii-brain-protection-system-skull-rules)

</div>

## About This Document

This is **THE** authoritative source of truth for all CORTEX governance, rules, standards, and principles. Every rule, constraint, and best practice is derived from live brain sources - no placeholders, no mock data.

**Brain Sources (Live Data):**

- `cortex-brain/brain-protection-rules.yaml` - 27 protection rules across 10 layers
- `cortex-brain/documents/implementation-guides/test-strategy.yaml` - TDD philosophy, test categories
- `cortex-brain/documents/analysis/optimization-principles.yaml` - Pragmatic MVP approach, validated patterns

**Wired Into CORTEX Operations:**  
This rulebook is not documentation for documentation's sake. Every rule here is enforced by:

- Brain Protector agent (automated architectural protection)
- Test suite (SKULL rules validation)
- Design Sync orchestrator (commit-time validation)
- Health monitoring (continuous governance checks)

<div class="section-tier0">

## I. Core Principles (Tier 0 Instinct)

This section provides information about i. core principles (tier 0 instinct). See related documentation in the navigation menu for detailed guides.


### Philosophy: Pragmatic MVP Approach

Balance aspirational goals with shipping reality. Block on critical issues,
warn on future optimizations. Ship working software incrementally.

</div>

<div class="rule-box rule-immutable">

### <i class="fa fa-lock"></i> Tier 0 Immutable Instincts

**These instincts CANNOT be bypassed.** They are hardwired into CORTEX's brain and enforced automatically.

1. **INCREMENTAL_PLAN_GENERATION**
2. **TDD_ENFORCEMENT**
3. **DEFINITION_OF_READY**
4. **DEFINITION_OF_DONE**
5. **SOLID_PRINCIPLES**
6. **CODE_STYLE_CONSISTENCY**
7. **LOCAL_FIRST**
8. **BRAIN_PROTECTION_TESTS_MANDATORY**
9. **MACHINE_READABLE_FORMATS**
10. **SKULL_TEST_BEFORE_CLAIM**
11. **SKULL_INTEGRATION_VERIFICATION**
12. **SKULL_VISUAL_REGRESSION**
13. **SKULL_RETRY_WITHOUT_LEARNING**
14. **SKULL_TRANSFORMATION_VERIFICATION**
15. **SKULL_PRIVACY_PROTECTION**
16. **SKULL_FACULTY_INTEGRITY**
17. **GIT_ISOLATION_ENFORCEMENT**
18. **DISTRIBUTED_DATABASE_ARCHITECTURE**
19. **CORTEX_PROMPT_FILE_PROTECTION**

**Total Instincts:** 19

</div>

<div class="rule-box rule-guideline">

### <i class="fa fa-compass"></i> Core Development Principles

- Working software > perfect architecture
- Fail on blocking issues, warn on future work
- MVP thresholds > aspirational goals for Phase 0
- Incremental progress > all-or-nothing
- Backward compatibility > breaking changes

</div>

<div class="section-standards">

## II. Test-Driven Development (TDD)

This section provides information about ii. test-driven development (tdd). See related documentation in the navigation menu for detailed guides.


### Test Strategy Philosophy

</div>

### Performance Budgets

Phase 0 calibrated thresholds for realistic MVP expectations:

<div class="section-protection">

## III. Brain Protection System (SKULL Rules)

This section provides information about iii. brain protection system (skull rules). See related documentation in the navigation menu for detailed guides.


### Protection Architecture

The Brain Protection System implements **10 protection layers** with **27 automated rules** to prevent architectural degradation.

</div>

<div class="rule-box rule-immutable">

### <i class="fa fa-shield"></i> Critical System Paths

These paths trigger high-level protection:

- `CORTEX/src/tier0/`
- `prompts/internal/`
- `governance/rules.md`
- `cortex-brain/tier0/`

</div>

### Protection Layers

<div class="rule-box rule-standard">

#### Layer 1: Instinct Immutability

Tier 0 governance rules cannot be bypassed

</div>

**Rules:**

ðŸš« **INCREMENTAL_PLAN_GENERATION**: Incremental YAML Plan Generation
   - *When generating YAML planning documents, create file first then add phases incrementally to avoid response length limits*
   - Severity: `blocked`

ðŸš« **TDD_ENFORCEMENT**: Test-Driven Development Enforcement
   - *Attempt to bypass Test-Driven Development requirement*
   - Severity: `blocked`

ðŸš« **DEFINITION_OF_DONE**: Definition of Done
   - *Attempt to bypass Definition of Done (zero errors, zero warnings)*
   - Severity: `blocked`

ðŸš« **DEFINITION_OF_READY**: Definition of Ready
   - *Work item does not meet DoR criteria*
   - Severity: `blocked`

ðŸš« **BRAIN_PROTECTION_TESTS_MANDATORY**: Brain Protection Tests - 100% Pass Rate Mandatory
   - *Brain protection tests MUST pass - no exceptions*
   - Severity: `blocked`

âš ï¸ **MACHINE_READABLE_FORMATS**: Use Machine-Readable Formats for Efficiency
   - *Non-user files should use YAML/JSON, not Markdown*
   - Severity: `warning`

âš ï¸ **ACTIVE_NARRATOR_VOICE**: Active Narrator Voice (Not Passive Documentation)
   - *Story uses passive/clinical narrator voice instead of active storytelling*
   - Severity: `warning`

ðŸš« **CORTEX_PROMPT_FILE_PROTECTION**: CORTEX.prompt.md Protection (Never Rename, Safe Update)
   - *Prevent renaming CORTEX.prompt.md and enforce safe update procedure*
   - Severity: `blocked`

#### Layer 2: Tier Boundary Protection

Data stored in correct tier

**Rules:**

ðŸš« **TIER0_APPLICATION_DATA**: No Application Data in Tier 0
   - *Application-specific path in Tier 0 (immutable governance)*
   - Severity: `blocked`

âš ï¸ **TIER2_CONVERSATION_DATA**: No Conversation Data in Tier 2
   - *Conversation data should be in Tier 1, not Tier 2*
   - Severity: `warning`

#### Layer 3: SOLID Compliance

No God Objects, proper separation

**Rules:**

âš ï¸ **SINGLE_RESPONSIBILITY**: Single Responsibility Principle
   - *Potential God Object pattern detected (adding multiple responsibilities)*
   - Severity: `warning`

âš ï¸ **DEPENDENCY_INVERSION**: Dependency Inversion Principle
   - *Hardcoded dependency detected (violates DIP)*
   - Severity: `warning`

âš ï¸ **OPEN_CLOSED**: Open/Closed Principle
   - *Modifying existing behavior instead of extending*
   - Severity: `warning`

ðŸš« **CORTEX_WORKSPACE_ISOLATION**: CORTEX Workspace Isolation
   - *All CORTEX-generated documentation for application repos MUST be within CORTEX/Workspaces/ folder*
   - Severity: `blocked`

âš ï¸ **CODE_STYLE_CONSISTENCY**: Adopt User's Code Style
   - *Generated code should match existing codebase style conventions*
   - Severity: `warning`

âš ï¸ **NO_EMOJIS_IN_SCRIPTS**: No Emojis in Generated Scripts
   - *Scripts (Python, PowerShell, Bash, etc.) should not contain emojis*
   - Severity: `warning`

âš ï¸ **NO_ROOT_SUMMARY_DOCUMENTS**: No Summary Documents in Repository Root
   - *Summary/report documents should be in cortex-brain/documents/, not repository root*
   - Severity: `warning`

ðŸš« **YAML_ONLY_PLANNING**: YAML-Only Planning Documents (No Markdown Plans)
   - *ALL planning documents MUST be created in YAML format, NEVER Markdown - prevents documentation bloat and enforces machine-readable standards*
   - Severity: `blocked`

#### Layer 4: Hemisphere Specialization

Strategic vs tactical separation

**Rules:**

âš ï¸ **LEFT_BRAIN_TACTICAL**: Left Brain Tactical Only
   - *Strategic planning logic in tactical executor*
   - Severity: `warning`

âš ï¸ **RIGHT_BRAIN_STRATEGIC**: Right Brain Strategic Only
   - *Tactical execution logic in strategic planner*
   - Severity: `warning`

#### Layer 5: SKULL Protection Layer

Test validation and quality enforcement (prevents November 9th incident)

**Rules:**

ðŸš« **SKULL_TEST_BEFORE_CLAIM**: Test Before Claim (SKULL-001)
   - *Never claim a fix is complete without test validation*
   - Severity: `blocked`

ðŸš« **SKULL_INTEGRATION_VERIFICATION**: Integration Verification (SKULL-002)
   - *Integration must be tested end-to-end*
   - Severity: `blocked`

âš ï¸ **SKULL_VISUAL_REGRESSION**: Visual Regression (SKULL-003)
   - *CSS/UI changes require visual validation*
   - Severity: `warning`

âš ï¸ **SKULL_RETRY_WITHOUT_LEARNING**: Retry Without Learning (SKULL-004)
   - *Must diagnose failures before retrying same approach*
   - Severity: `warning`

ðŸš« **SKULL_TRANSFORMATION_VERIFICATION**: Transformation Verification (SKULL-005)
   - *Operations claiming transformation MUST produce measurable changes*
   - Severity: `blocked`

ðŸš« **SKULL_PRIVACY_PROTECTION**: Privacy Protection (SKULL-006)
   - *Publish operations MUST NOT include files with machine-specific paths or private data*
   - Severity: `blocked`

ðŸš« **SKULL_HEADER_FOOTER_IN_RESPONSE**: Faculty Integrity Check (SKULL-007)
   - *Publish package MUST contain ALL essential CORTEX faculties for full operation*
   - Severity: `blocked`

ðŸš« **SKULL_HEADER_FOOTER_IN_RESPONSE_LEGACY**: Header/Footer in Copilot Response (Legacy)
   - *Operation orchestrators MUST include formatted headers/footers in Copilot Chat response*
   - Severity: `blocked`

ðŸš« **SKULL_ALL_TESTS_MUST_PASS**: All Tests Must Pass (SKULL-007)
   - *Test suite MUST have 100% pass rate before claiming any work complete*
   - Severity: `blocked`

ðŸš« **SKULL_MULTI_TRACK_VALIDATION**: Multi-Track Configuration Validation (SKULL-008)
   - *Multi-track mode MUST have valid configuration with proper phase distribution*
   - Severity: `blocked`

ðŸš« **SKULL_TRACK_ISOLATION**: Track Work Isolation (SKULL-009)
   - *Work on Track A MUST NOT modify Track B's assigned modules*
   - Severity: `blocked`

ðŸš« **SKULL_CONSOLIDATION_INTEGRITY**: Track Consolidation Integrity (SKULL-010)
   - *Consolidation MUST merge all track progress accurately without data loss*
   - Severity: `blocked`

#### Layer 6: Knowledge Quality

Pattern validation and confidence thresholds

**Rules:**

âš ï¸ **MIN_OCCURRENCES**: Minimum Occurrences for High Confidence
   - *High confidence (>0.50) with single occurrence*
   - Severity: `warning`

âš ï¸ **PATTERN_VALIDATION**: Pattern Validation
   - *Pattern lacks validation evidence*
   - Severity: `warning`

#### Layer 7: Commit Integrity

Brain state files excluded from commits

**Rules:**

âš ï¸ **BRAIN_STATE_GITIGNORE**: Brain State Files Not Committed
   - *Brain state file should not be committed*
   - Severity: `warning`

âš ï¸ **TEMP_FILES_COMMIT**: Temporary Files Not Committed
   - *Temporary or generated files should not be committed*
   - Severity: `warning`

#### Layer 8: Git Isolation Enforcement

CORTEX code MUST NEVER be committed to user application repositories

**Rules:**

ðŸš« **GIT_ISOLATION_ENFORCEMENT**: CORTEX Code Isolation from User Repos
   - *CRITICAL: CORTEX source code, brain files, or internal components being committed to user application repository*
   - Severity: `blocked`

ðŸš« **GIT_HOOKS_INSTALLATION**: Git Hooks Must Be Installed During Setup
   - *Setup process must install git hooks to prevent accidental CORTEX code commits*
   - Severity: `blocked`

#### Layer 6: Knowledge Namespace Boundaries

Enforce separation between CORTEX framework and workspace knowledge

**Rules:**

ðŸš« **NAMESPACE-001**: Protected CORTEX Namespace
   - *Prevent user code from writing to cortex.* namespace*
   - Severity: `blocked`

âš ï¸ **NAMESPACE-002**: Workspace Isolation
   - *Isolate workspace patterns by owner/project*
   - Severity: `warning`

ðŸš« **NAMESPACE-003**: No Namespace Mixing
   - *Prevent patterns from spanning multiple namespaces*
   - Severity: `blocked`

#### Layer 9: Distributed Database Architecture

CORTEX uses tier-specific databases, never monolithic cortex-brain.db

**Rules:**

ðŸš« **DISTRIBUTED_DATABASE_ARCHITECTURE**: Use Tier-Specific Databases (Never Monolithic)
   - *Code referencing monolithic cortex-brain.db instead of tier-specific databases*
   - Severity: `blocked`

### Application Isolation

These application-specific paths don't belong in CORTEX core:

- `SPA/`
- `KSESSIONS/`
- `NOOR/`
- `blazor`
- `signalr`
- `canvas`

### Brain State Protection

These files contain ephemeral state and shouldn't be committed:

- `conversation-history.jsonl`
- `conversation-context.jsonl`
- `events.jsonl`
- `development-context.yaml`
- `protection-events.jsonl`

---

## IV. Optimization Principles

This section provides information about iv. optimization principles. See related documentation in the navigation menu for detailed guides.


### Pragmatic MVP Approach

### Test Optimization Patterns

#### Three-Tier Test Categorization

Classify tests as BLOCKING, WARNING, or PRAGMATIC

**Benefit:** Clear remediation strategy, no wasted effort on non-critical issues

**Evidence:** 18 failures â†’ 0 failures in 6 hours using this approach

#### Phase-Based Remediation

Fix tests in logical phases by category

**Benefit:** Clear progress, systematic approach, easier debugging

**Evidence:** 91.4% â†’ 92.1% â†’ 92.8% â†’ 93.0% pass rate progression

#### Reality-Based Performance Budgets

Set thresholds based on current architecture, not aspirational goals

**Benefit:** Tests guide optimization without blocking development

**Evidence:** 5 YAML performance tests fixed by threshold adjustment

### Architecture Optimization Patterns

#### Backward Compatibility Aliasing

Add aliases when refactoring/renaming APIs

**Benefit:** Avoid breaking existing code, smooth migration

**Evidence:** Fixed integration test without changing consuming code

#### Multiple Valid Sources Pattern

Allow definitions in both centralized and inline locations

**Benefit:** Self-contained operations + central registry coexist

**Evidence:** YAML consistency tests fixed by dual-source validation

#### Lazy Initialization with Defaults

Provide default empty structures, initialize on first use

**Benefit:** No initialization order dependencies, tests easier to write

**Evidence:** IntentRouter test fixed by adding default agent initialization

---

## V. Code Quality Standards

This section provides information about v. code quality standards. See related documentation in the navigation menu for detailed guides.


### SOLID Principles (Non-Negotiable)

All CORTEX code must adhere to SOLID principles:

1. **Single Responsibility Principle** - Each class has one reason to change
2. **Open/Closed Principle** - Open for extension, closed for modification
3. **Liskov Substitution Principle** - Subtypes must be substitutable for base types
4. **Interface Segregation Principle** - Many specific interfaces > one general interface
5. **Dependency Inversion Principle** - Depend on abstractions, not concretions

### Code Style Consistency

**SKULL Rule:** `CODE_STYLE_CONSISTENCY`

- Adopt user's coding style (naming conventions, formatting)
- BUT never compromise on SOLID principles, OOP best practices, security
- **Hierarchy:** Best practices > Style preferences

### Local-First Architecture

**SKULL Rule:** `LOCAL_FIRST`

- All CORTEX functionality works offline
- No mandatory cloud dependencies
- User data stays on user's machine
- Optional cloud integration for advanced features

### Machine-Readable Formats

**SKULL Rule:** `MACHINE_READABLE_FORMATS`

- YAML for configuration, metadata, governance
- JSON for data exchange, API contracts
- Markdown for documentation
- Python for logic, orchestration

### Git Isolation

**SKULL Rule:** `GIT_ISOLATION_ENFORCEMENT`

**CRITICAL:** CORTEX code is NEVER committed to user repositories.

- CORTEX lives in its own repository
- User projects reference CORTEX as dependency
- No mixing of CORTEX implementation with user code

---

## VI. Enforcement Mechanisms

This section provides information about vi. enforcement mechanisms. See related documentation in the navigation menu for detailed guides.


### Automated Enforcement

This rulebook is enforced through multiple automated systems:

1. **Brain Protector Agent** - Real-time architectural protection
   - Monitors file changes
   - Triggers protection layers
   - Blocks SKULL rule violations
   - Generates protection events

2. **Test Suite** - Continuous validation
   - 900+ tests validate governance
   - SKULL rules tested before every claim
   - Integration verification mandatory
   - Visual regression testing for UI changes

3. **Design Sync Orchestrator** - Commit-time validation
   - Validates YAML structure
   - Checks module consistency
   - Verifies documentation alignment
   - Enforces git isolation

4. **Health Monitoring** - Continuous governance checks
   - Documentation structure validation
   - Brain file integrity checks
   - Performance budget compliance
   - SKULL rule effectiveness tracking

### Manual Review

For changes to governance-critical files:
- `brain-protection-rules.yaml` - Requires architectural review
- `test-strategy.yaml` - Requires test lead approval
- `optimization-principles.yaml` - Requires evidence of success
- `THE-RULEBOOK.md` - Regenerated from brain sources (no manual edits)

---

## VII. Rulebook Maintenance

This section provides information about vii. rulebook maintenance. See related documentation in the navigation menu for detailed guides.


### Single Source of Truth

**This file is GENERATED.** Do not edit manually.

To update the rulebook:

1. Edit source brain files:
   - `cortex-brain/brain-protection-rules.yaml`
   - `cortex-brain/documents/implementation-guides/test-strategy.yaml`
   - `cortex-brain/documents/analysis/optimization-principles.yaml`

2. Regenerate rulebook:
   ```bash
   # Via EPM orchestrator
   /CORTEX Generate documentation
   
   # Or directly
   python src/operations/enterprise_documentation_orchestrator.py --component rulebook
   ```

3. Review changes in generated `THE-RULEBOOK.md`

4. Commit both brain sources and generated rulebook

### Version Control

- Rulebook version matches `brain-protection-rules.yaml` version
- Changes tracked through git history
- Major version bump for breaking changes to governance
- Minor version bump for additions/clarifications

---

## VIII. Conclusion

This rulebook represents the accumulated wisdom of CORTEX development. Every rule, principle, and pattern has been validated through real implementation experience.

**Zero Placeholders. Zero Mock Data. 100% Live Brain Sources.**

When in doubt, refer to this rulebook. When rules conflict, Tier 0 instincts win. When facing architectural decisions, prioritize brain protection over convenience.

**"The brain protects itself, even from me."** - Asif Codenstein

---

*This rulebook is automatically generated from brain sources and wired into CORTEX operations.*  
*Generated: November 19, 2025*  
*Total Rules: 27*  
*Protection Layers: 10*  
*Brain Sources: 3*
