# Conversation Capture Response Template
# 
# Trigger: User says "/CORTEX Capture this conversation" or "save this conversation"
# Purpose: Inform user that empty file has been created for them to paste conversation
# Handler: src/operations/modules/conversations/capture_handler.py
# Version: CORTEX 3.0 Feature 5 Phase 5.1

conversation_capture_initiated:
  trigger_patterns:
    - "/CORTEX Capture this conversation"
    - "/CORTEX Capture"
    - "capture this conversation"
    - "save this conversation"
    - "capture conversation"
  
  intent: "CAPTURE_CONVERSATION"
  agent: "capture_handler"
  priority: "high"
  
  response_format: |
    üß† **CORTEX Conversation Capture**
    Author: Asif Hussain | ¬© 2024-2025 | github.com/asifhussain60/CORTEX
    
    üéØ **My Understanding Of Your Request:**
       You want to save this conversation to CORTEX brain for future reference and pattern learning
    
    ‚ö†Ô∏è **Challenge:** ‚úì **Accept**
       This is the first step of the two-step capture workflow. I'll create an empty file for you to paste the conversation into.
    
    üí¨ **Response:**
    
    ## ‚úÖ Empty Conversation File Created
    
    **File:** `{{file_name}}`
    
    **Location:** `cortex-brain/documents/conversation-captures/`
    
    **Click to open:** [{{file_name}}]({{clickable_link}})
    
    ---
    
    ## üìã Next Steps
    
    ### Step 1: Open the file (click link above)
    
    ### Step 2: Copy this conversation
       - In GitHub Copilot Chat window
       - Select all messages (Ctrl+A / Cmd+A)
       - Copy (Ctrl+C / Cmd+C)
    
    ### Step 3: Paste into the empty file
       - Paste after the `<!-- PASTE CONVERSATION BELOW THIS LINE -->` marker
       - Save the file (Ctrl+S / Cmd+S)
    
    ### Step 4: Import to CORTEX brain
       - Say: `/CORTEX Import this conversation`
       - CORTEX will parse and import to Tier 1 SQLite database
    
    ---
    
    **What happens after import:**
    - ‚úÖ Conversation stored in Tier 1 working memory
    - ‚úÖ Entities extracted (files, classes, methods)
    - ‚úÖ Quality score calculated
    - ‚úÖ Patterns learned for Tier 2 knowledge graph
    - ‚úÖ Future conversations can reference this context
    
    üìù **Your Request:** Capture this conversation for CORTEX brain
    
    üîç **Next Steps:**
       1. Click the file link above to open
       2. Copy conversation from this chat window
       3. Paste into file after the marker line
       4. Save file (Ctrl+S / Cmd+S)
       5. Say `/CORTEX Import this conversation`
  
  placeholders:
    file_name:
      type: "string"
      description: "Generated filename with timestamp (e.g., 20251116-153045-conversation.md)"
    
    clickable_link:
      type: "string"
      description: "VS Code URI format (file:///absolute/path/to/file.md)"
  
  error_scenarios:
    permission_denied:
      response: "Failed to create capture file. Check directory permissions for cortex-brain/documents/conversation-captures/"
    
    disk_full:
      response: "Failed to create capture file. Check disk space availability."
    
    invalid_path:
      response: "Capture directory not found. Verify CORTEX workspace structure."
  
  success_metrics:
    - "File created: <5 seconds"
    - "User can click and open file immediately"
    - "Template instructions are clear"
  
  notes: |
    This is Method 1 (Manual Capture) from CORTEX 3.0 roadmap Feature 5.
    Two-step workflow intentional design: GitHub Copilot Chat API does not
    provide programmatic access to conversation content yet, so manual
    copy-paste is required.
