# Documentation Phase Implementation Plan

**Version:** 1.0.0  
**Created:** 2025-11-09  
**Status:** Ready for Implementation  
**Priority:** HIGH

---

## ğŸ¯ Overview

Transform CORTEX documentation from scattered technical files into a beautiful, engaging MkDocs site with:
- **95% Story / 5% Technical** ratio for accessibility
- **Visual separation** between story and technical content
- **Comic Sans font** for story sections (fun, narrative)
- **Light, subtle backgrounds** with Material theme
- **Local preview** and **GitHub Pages** deployment ready

---

## ğŸ“‹ Implementation Plan

### Phase 1: Rename `doc_refresh_plugin.py` â†’ `story_refresh_plugin.py`

**Purpose:** Focus plugin on story transformation and narrative voice

**Tasks:**
1. âœ… Rename file: `src/plugins/doc_refresh_plugin.py` â†’ `src/plugins/story_refresh_plugin.py`
2. âœ… Update plugin metadata:
   - plugin_id: `story_refresh_plugin`
   - name: "Story Refresh"
   - description: "Transforms story narrative voice and applies consistency rules"
3. âœ… Update hook registrations:
   - Keep: `ON_DOC_REFRESH` â†’ rename to `ON_STORY_REFRESH`
   - Keep: `ON_SELF_REVIEW`
4. âœ… Refactor responsibilities:
   - Keep: Story transformation methods
   - Keep: Narrative voice fixes
   - Keep: Progressive recaps
   - Keep: Read time validation
   - Remove: MkDocs generation (move to new plugin)
5. âœ… Update tests: `tests/plugins/test_doc_refresh_*.py` â†’ `test_story_refresh_*.py`
6. âœ… Update imports across codebase

**Output:** Story-focused plugin that handles narrative transformation only

**Time Estimate:** 2 hours

---

### Phase 2: Create `mkdocs_refresh_plugin.py`

**Purpose:** Flatten story-refreshed files and generate MkDocs site

**Tasks:**
1. âœ… Create plugin file: `src/plugins/mkdocs_refresh_plugin.py`
2. âœ… Implement plugin class:
   ```python
   class Plugin(BasePlugin):
       def _get_metadata(self) -> PluginMetadata:
           return PluginMetadata(
               plugin_id="mkdocs_refresh_plugin",
               name="MkDocs Refresh",
               version="1.0.0",
               category=PluginCategory.DOCUMENTATION,
               priority=PluginPriority.HIGH,
               description="Flattens story files and generates MkDocs site",
               hooks=[HookPoint.ON_STORY_REFRESH_COMPLETE.value]
           )
   ```
3. âœ… Implement core methods:
   - `_load_yaml_config()` - Load mkdocs-refresh-config.yaml
   - `_flatten_source_files()` - Combine files per template
   - `_apply_styling()` - Add story/technical CSS classes
   - `_place_images()` - Insert image placeholders contextually
   - `_validate_output()` - Check story/technical ratio, read time
   - `_generate_mkdocs_yml()` - Create mkdocs.yml from config
   - `_build_mkdocs()` - Run `mkdocs build`
   - `_serve_mkdocs()` - Optional `mkdocs serve`
4. âœ… Add validation rules:
   - Story/technical ratio enforcement (95%/5%)
   - Read time validation (60Â±10 minutes)
   - Image placement validation
   - Consistency checks
5. âœ… Create tests: `tests/plugins/test_mkdocs_refresh_plugin.py`

**Output:** Working mkdocs_refresh_plugin.py that generates full site

**Time Estimate:** 4-6 hours

---

### Phase 3: Configure MkDocs with Material Theme

**Purpose:** Setup MkDocs with custom styling for story/technical separation

**Tasks:**
1. âœ… Install dependencies:
   ```bash
   pip install mkdocs mkdocs-material pymdown-extensions mkdocs-minify-plugin mkdocs-git-revision-date-localized-plugin
   ```
2. âœ… Create `mkdocs.yml` (generated by plugin):
   - Material theme configuration
   - Custom CSS references
   - Navigation structure
   - Markdown extensions
   - Plugins configuration
3. âœ… Verify custom CSS files (already exist):
   - âœ… `docs/stylesheets/custom.css` - Base styling, light backgrounds
   - âœ… `docs/stylesheets/story.css` - Comic font for story sections
   - âœ… `docs/stylesheets/technical.css` - Professional technical styling
4. âœ… Create overrides directory: `docs/overrides/`
5. âœ… Test styling locally: `mkdocs serve`

**Output:** Configured MkDocs with custom Material theme

**Time Estimate:** 2 hours

---

### Phase 4: Generate Documentation Content

**Purpose:** Flatten and combine source files according to template

**Tasks:**
1. âœ… Run story_refresh_plugin first:
   - Transform narrative voice
   - Apply consistency rules
   - Generate progressive recaps
   - Output to `docs/story/CORTEX-STORY/`
2. âœ… Run mkdocs_refresh_plugin:
   - Load `cortex-brain/mkdocs-refresh-config.yaml`
   - Flatten files according to template:
     - Part 1: Story-driven (98% story)
     - Part 2: Story + Technical (70/30)
     - Part 3: Timeline
     - Part 4: Technical-heavy (30/70)
     - Part 5: Future vision
   - Apply CSS classes:
     - `<div class="story-section">` for story
     - `<div class="technical-section">` for technical
   - Insert image placeholders (Napkin.ai format)
   - Generate output to `docs/human-readable/THE-AWAKENING-OF-CORTEX.md`
3. âœ… Validate output:
   - Story/technical ratio check
   - Read time validation
   - Consistency checks
   - Image placement validation
4. âœ… Generate supporting docs:
   - CORTEX-RULEBOOK.md (already exists âœ…)
   - CORTEX-FEATURES.md
   - Navigation pages

**Output:** Complete flattened documentation ready for MkDocs

**Time Estimate:** 3-4 hours

---

### Phase 5: Test and Validate

**Purpose:** Ensure documentation looks beautiful and functions correctly

**Tasks:**
1. âœ… Local testing:
   ```bash
   mkdocs serve
   # Visit http://127.0.0.1:8000
   ```
2. âœ… Visual validation:
   - âœ… Story sections use Comic Sans font
   - âœ… Technical sections use Roboto font
   - âœ… Light, subtle backgrounds (cream for story, blue for technical)
   - âœ… Clear visual separation (borders, colors)
   - âœ… Images render correctly with captions
   - âœ… Navigation works
   - âœ… Search works
   - âœ… Mobile responsive
3. âœ… Content validation:
   - Read time â‰ˆ 60 minutes
   - Story/technical ratio â‰ˆ 95%/5%
   - No broken links
   - All images have placeholders
   - Consistent terminology
4. âœ… Build static site:
   ```bash
   mkdocs build
   # Output to site/
   ```
5. âœ… Test built site:
   ```bash
   cd site
   python -m http.server 8000
   ```

**Output:** Validated, working MkDocs site

**Time Estimate:** 2 hours

---

### Phase 6: Prepare for GitHub Pages Deployment

**Purpose:** Setup GitHub Pages configuration (deployment later)

**Tasks:**
1. âœ… Create `.github/workflows/deploy-docs.yml`:
   ```yaml
   name: Deploy Documentation
   
   on:
     push:
       branches:
         - main
       paths:
         - 'docs/**'
         - 'mkdocs.yml'
   
   jobs:
     deploy:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-python@v4
           with:
             python-version: 3.x
         - run: pip install mkdocs mkdocs-material pymdown-extensions
         - run: mkdocs gh-deploy --force
   ```
2. âœ… Update repo settings (manual step):
   - Enable GitHub Pages
   - Source: gh-pages branch
   - Configure custom domain (optional)
3. âœ… Test deployment:
   ```bash
   mkdocs gh-deploy
   ```
4. âœ… Verify live site: `https://asifhussain60.github.io/CORTEX/`

**Output:** GitHub Pages deployment ready

**Time Estimate:** 1 hour

---

## ğŸ“ File Structure After Implementation

```
CORTEX/
â”œâ”€â”€ cortex-brain/
â”‚   â””â”€â”€ mkdocs-refresh-config.yaml      # âœ… CREATED (Machine-readable config)
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ plugins/
â”‚       â”œâ”€â”€ story_refresh_plugin.py      # âœ… RENAMED (was doc_refresh_plugin.py)
â”‚       â””â”€â”€ mkdocs_refresh_plugin.py     # âœ… NEW (Flattens + generates MkDocs)
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ stylesheets/
â”‚   â”‚   â”œâ”€â”€ custom.css                   # âœ… EXISTS (Base styling)
â”‚   â”‚   â”œâ”€â”€ story.css                    # âœ… CREATED (Comic font, story styling)
â”‚   â”‚   â””â”€â”€ technical.css                # âœ… CREATED (Professional technical styling)
â”‚   â”‚
â”‚   â”œâ”€â”€ overrides/                       # NEW (Material theme overrides)
â”‚   â”‚
â”‚   â”œâ”€â”€ human-readable/
â”‚   â”‚   â”œâ”€â”€ THE-AWAKENING-OF-CORTEX.md  # GENERATED (Flattened story)
â”‚   â”‚   â”œâ”€â”€ CORTEX-RULEBOOK.md          # âœ… EXISTS
â”‚   â”‚   â”œâ”€â”€ CORTEX-FEATURES.md          # GENERATED
â”‚   â”‚   â””â”€â”€ images/                      # Image placeholders
â”‚   â”‚       â”œâ”€â”€ img-001-brain-architecture.png
â”‚   â”‚       â”œâ”€â”€ img-002-dual-hemisphere.png
â”‚   â”‚       â””â”€â”€ ... (more images)
â”‚   â”‚
â”‚   â””â”€â”€ story/
â”‚       â””â”€â”€ CORTEX-STORY/                # Source files (from story_refresh_plugin)
â”‚           â”œâ”€â”€ Awakening Of CORTEX.md
â”‚           â”œâ”€â”€ Technical-CORTEX.md
â”‚           â”œâ”€â”€ History.md
â”‚           â””â”€â”€ Image-Prompts.md
â”‚
â”œâ”€â”€ mkdocs.yml                           # GENERATED (By mkdocs_refresh_plugin)
â”œâ”€â”€ site/                                # GENERATED (Built static site)
â”‚
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ deploy-docs.yml              # NEW (GitHub Pages deployment)
```

---

## ğŸ¨ Visual Design Specifications

### Story Sections
- **Font:** Comic Sans MS (or Comic Neue fallback)
- **Background:** Warm cream (#fff9f0)
- **Border:** Amber (#ffe4b5)
- **Border Radius:** 12px (rounded corners)
- **Text Color:** Dark brown (#2c3e50)
- **Headers:** Purple gradient (#8b008b â†’ #ba55d3)
- **Shadow:** Light (0 2px 8px rgba(0,0,0,0.05))

### Technical Sections
- **Font:** Roboto (professional, clean)
- **Background:** Cool light blue (#f0f4ff)
- **Border:** Light blue (#b0c4de)
- **Border Radius:** 8px (sharp corners, boxed)
- **Text Color:** Dark slate (#1e293b)
- **Headers:** Blue gradient (#1e40af â†’ #60a5fa)
- **Shadow:** Medium (0 4px 12px rgba(0,0,0,0.08))

### Timeline Sections
- **Font:** Roboto
- **Background:** Light green (#f0fff4)
- **Border:** Light green (#90ee90)
- **Border Radius:** 8px
- **Text Color:** Dark gray
- **Shadow:** Light

### Code Blocks
- **Background:** Black (#000000)
- **Text Color:** White (#ffffff)
- **Font:** Roboto Mono (monospace)
- **Border:** Dark gray (#333333)

---

## âœ… Validation Criteria

### Story/Technical Ratio
- **Target:** 95% story / 5% technical (overall)
- **Tolerance:** Â±5%
- **Per-Part Override:**
  - Part 1: 98% story (very narrative-heavy)
  - Part 4: 60% story (more technical)

### Read Time
- **Target:** 60 minutes
- **Tolerance:** Â±10 minutes
- **Calculation:** 225 words per minute (average reading speed)

### Visual Separation
- âœ… Story sections clearly distinguishable (warm cream, comic font)
- âœ… Technical sections clearly distinguishable (cool blue, Roboto font)
- âœ… Borders and shadows provide depth
- âœ… Readers can visually scan and identify content type instantly

### Content Quality
- âœ… No broken links
- âœ… All images have captions
- âœ… Consistent terminology
- âœ… Progressive disclosure (simple â†’ complex)
- âœ… Narrative flow maintained

---

## ğŸš€ Execution Summary

### Total Time Estimate: 14-17 hours

**Phase 1:** Rename plugin (2 hours)  
**Phase 2:** Create mkdocs_refresh_plugin (4-6 hours)  
**Phase 3:** Configure MkDocs (2 hours)  
**Phase 4:** Generate content (3-4 hours)  
**Phase 5:** Test and validate (2 hours)  
**Phase 6:** Prepare GitHub Pages (1 hour)

### Dependencies
- âœ… YAML config file created (`mkdocs-refresh-config.yaml`)
- âœ… Custom CSS files created (story.css, technical.css)
- â³ story_refresh_plugin.py (rename from doc_refresh_plugin.py)
- â³ mkdocs_refresh_plugin.py (new plugin)
- â³ mkdocs.yml (generated by plugin)
- â³ Python dependencies (mkdocs, mkdocs-material, extensions)

### Next Steps
1. âœ… Confirm plan with user
2. â³ Install MkDocs dependencies
3. â³ Rename doc_refresh_plugin â†’ story_refresh_plugin
4. â³ Create mkdocs_refresh_plugin
5. â³ Test locally with `mkdocs serve`
6. â³ Validate styling and content
7. â³ Prepare GitHub Pages deployment

---

## ğŸ“ Notes

### YAML Configuration Approach
- **Machine-readable:** No human documentation needed
- **Version-controlled:** Track changes via Git
- **Extensible:** Easy to add new parts, sections, images
- **Testable:** Can validate configuration syntax

### Plugin Separation Benefits
- **story_refresh_plugin:** Focuses on narrative transformation
- **mkdocs_refresh_plugin:** Focuses on documentation generation
- **Single responsibility:** Each plugin does one thing well
- **Independent testing:** Can test each plugin in isolation
- **Maintainability:** Changes to one don't affect the other

### Visual Scanning Strategy
Readers can instantly distinguish content type by:
1. **Font:** Comic = Story, Roboto = Technical
2. **Color:** Warm cream = Story, Cool blue = Technical
3. **Shape:** Rounded corners = Story, Sharp corners = Technical
4. **Border:** Amber = Story, Blue = Technical

This visual hierarchy ensures readers never get confused about whether they're reading narrative or technical content.

---

*Last Updated: 2025-11-09*  
*Status: Ready for Implementation*  
*Next: User confirmation â†’ Begin Phase 1*
