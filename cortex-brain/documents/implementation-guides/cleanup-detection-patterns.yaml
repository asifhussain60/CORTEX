# CORTEX Temporary File Detection Patterns
# Configuration for automatic cleanup system
# Version: 1.0
# Last Updated: 2025-11-13

# File extensions that indicate temporary/cleanup candidates
temporary_extensions:
  - ".bak"
  - ".backup"
  - ".old"
  - ".orig"
  - ".tmp"
  - ".temp"
  - ".swp"
  - ".swo"
  - "~"

# Script extensions (context-dependent - check git status)
script_extensions:
  - ".py"
  - ".ps1"
  - ".sh"
  - ".bat"
  - ".cmd"

# Temporal keywords in filenames (case-insensitive)
temporal_keywords:
  # Temporary/draft indicators
  - temp
  - tmp
  - draft
  - wip
  - scratch
  
  # Backup/versioning indicators
  - backup
  - old
  - archive
  - copy
  
  # Session/analysis indicators
  - summary
  - session
  - report
  - analysis
  - review
  
  # Completion/status indicators
  - complete
  - done
  - finished
  - final
  
  # Maintenance indicators
  - cleanup
  - fix
  - update
  - migrate
  - migration
  - check
  - test
  
  # CORTEX-specific patterns (discovered from workspace)
  - phase
  - implementation
  - status
  - design
  - refactoring
  - optimization
  - transformation
  - diagnosis
  - validation
  - comparison
  - strategy
  - execution
  - orchestrator
  - tracking

# Regex patterns for file detection
regex_patterns:
  # Dated files (YYYY-MM-DD)
  dated_files: '\d{4}-\d{2}-\d{2}'
  
  # Versioned files (v1, v2, -1, -2, etc.)
  versioned_files: '[-_](v?\d+)\.(md|py|ps1|json|yaml|yml)'
  
  # Timestamp suffixes (20251113_143022)
  timestamped_files: '\d{8}[_-]\d{6}'
  
  # UPPERCASE documentation files
  uppercase_docs: '^[A-Z][A-Z0-9-]+\.(md|json|yaml|yml)$'
  
  # Numbered duplicates (file-1.txt, file-2.txt)
  numbered_duplicates: '[-_](\d+)\.[a-z]+$'
  
  # Backup manifest patterns
  backup_manifests: 'backup-manifest-\d+'

# Directory patterns to ALWAYS exclude (never cleanup)
protected_directories:
  - .git
  - .venv
  - node_modules
  - __pycache__
  - .pytest_cache
  - dist
  - build
  - src
  - tests
  - docs/api  # Auto-generated API docs
  - prompts   # CORTEX prompt system
  - workflows # GitHub workflows
  - cortex-extension  # VS Code extension
  - examples  # Example code
  - publish   # Published CORTEX packages (CRITICAL - never delete)
  - cortex-brain/artifacts  # Crawler outputs and system artifacts (PROTECTED)

# Directory patterns that MAY contain temp files
candidate_directories:
  - scripts
  - cortex-brain
  - .backup-archive
  - logs
  - workflow_checkpoints
  - cortex-brain/archives  # Archived phase reports
  - cortex-brain/health-reports  # Health check reports
  - cortex-brain/deletion-logs  # Cleanup logs (keep recent)
  # NOTE: publish/ moved to protected_directories - packages are critical!

# File patterns to NEVER delete (safeguards)
protected_files:
  # Core configuration
  - cortex.config.json
  - cortex.config.template.json
  - cortex.config.example.json
  - requirements.txt
  - package.json
  - pytest.ini
  - setup.py
  - mkdocs.yml
  
  # Documentation entry points
  - README.md
  - CHANGELOG.md
  - LICENSE
  
  # CORTEX brain files (knowledge preservation)
  - knowledge-graph.yaml
  - brain-protection-rules.yaml
  - development-context.yaml
  - response-templates.yaml
  - interaction-design.yaml
  - capabilities.yaml
  - architectural-patterns.yaml
  - industry-standards.yaml
  - module-definitions.yaml
  - operations-config.yaml
  - cleanup-rules.yaml
  - file-relationships.yaml
  - lessons-learned.yaml
  - anomalies.yaml
  - CORTEX-UNIFIED-ARCHITECTURE.yaml
  
  # Active development tracking
  - conversation-context.jsonl
  - conversation-history.jsonl
  
  # Important status documents (keep recent ones)
  - CORTEX-2.0-IMPLEMENTATION-STATUS.md
  - CORTEX-2.1-IMPLEMENTATION-PROGRESS.md
  - NEXT-SESSION-PHASE-5.1.md
  - NEXT-SESSION-PHASE-5.1-MEDIUM.md

# Patterns for specific file types

# Markdown files - additional temporal patterns
markdown_temporal_patterns:
  - STATUS
  - PROGRESS
  - TODO
  - NOTES
  - PLAN
  - DESIGN
  - IMPLEMENTATION
  - ARCHIVE

# JSON/YAML files - report/analysis patterns
data_file_patterns:
  - REPORT
  - DRY-RUN
  - MANIFEST
  - ANALYSIS
  - RESULTS

# Age-based cleanup thresholds (days)
age_thresholds:
  session_summaries: 30   # Session/summary docs older than 30 days
  reports: 14             # Analysis/report files older than 14 days
  logs: 7                 # Log files older than 7 days
  backup_manifests: 90    # Backup manifests older than 90 days
  health_reports: 30      # Health check reports older than 30 days (CORTEX-specific)
  phase_docs: 60          # Phase documentation older than 60 days (keep recent milestones)
  implementation_complete: 90  # *-COMPLETE.md files older than 90 days
  toolkit_completion_reports: 30  # Admin toolkit completion reports older than 30 days

# Git status filters
git_filters:
  # Only consider untracked files for cleanup
  include_untracked: true
  
  # Never cleanup tracked files
  exclude_tracked: true
  
  # Exclude modified files (even if untracked)
  exclude_modified: true
  
  # Exclude staged files
  exclude_staged: true

# Safety settings
safety:
  # Require confirmation before deletion
  require_confirmation: true
  
  # Create deletion log for rollback
  create_deletion_log: true
  
  # Deletion log location
  deletion_log_path: cortex-brain/deletion-logs
  
  # Dry-run by default
  dry_run_default: true
  
  # Maximum files to delete in one operation
  max_files_per_operation: 100

# Custom exclusion patterns (user-defined)
custom_exclusions:
  # Protect active cleanup system files (meta!)
  - "cleanup-detection-patterns\\.yaml"
  - "TEMP-FILE-CLEANUP-SYSTEM\\.md"
  - "CLEANUP-QUICK-START\\.md"
  - "PATTERN-CUSTOMIZATION-REPORT\\.md"
  - "analyze_temp_patterns\\.py"
  - "cleanup_temp_files\\.py"
  - "audit_cleanup_safety\\.py"
  
  # Protect scanner output files (can regenerate but useful for comparison)
  - "temp_file_scan\\.json"
  - "pattern_analysis\\.json"
  
  # CORTEX-specific important docs (even with temporal keywords)
  - "CORTEX-2\\.0-.*\\.md"  # All CORTEX 2.0 design docs
  - "CORTEX-2\\.1-.*\\.md"  # All CORTEX 2.1 design docs
  - "PHASE-5\\..*\\.md"     # Current phase documentation
  - "SKULL-.*\\.md"          # SKULL protection layer docs
  - ".*-IMPLEMENTATION-COMPLETE\\.md"  # Completion records
  - ".*-VERIFIED\\.md"       # Verification records
  - "ADMIN-OPTIMIZATION-TOOLKIT-COMPLETE\\.md"  # Admin toolkit completion report (30-day retention)
  
  # Protect CORTEX system files (critical infrastructure)
  - "session_manager\\.py"   # Session management is core feature
  - ".*strategy\\.py"        # Error correction strategies
  - ".*test_generator.*\\.py"  # Test generation system
  - ".*test_validator.*\\.py"  # Test validation system
  - "template_manager\\.py"  # Template system (not temp files!)
  
  # Artifact protection (crawler outputs and data products)
  - ".*artifacts/.*"         # All files in artifacts directory
  - ".*crawler-outputs/.*"   # Crawler data products
  
  # Active work-in-progress (adjust as needed)
  # - "WIP-feature-X.md"
  # - "experimental_analysis.py"
