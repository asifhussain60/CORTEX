{
  "questionFlows": {
    "authentication": {
      "entry": "clarify-priority",
      "nodes": {
        "clarify-priority": {
          "type": "multiple-choice",
          "question": "What matters most to you for authentication?",
          "options": [
            { "id": "security", "label": "Maximum security", "next": "security-depth" },
            { "id": "ux", "label": "Best user experience", "next": "ux-preferences" },
            { "id": "compliance", "label": "Compliance requirements", "next": "compliance-standards" },
            { "id": "cost", "label": "Low implementation cost", "next": "cost-constraints" }
          ]
        },
        "security-depth": {
          "type": "single-choice",
          "question": "What's your current authentication setup?",
          "options": [
            { "id": "basic", "label": "Basic username/password", "next": "recommend-mfa" },
            { "id": "has-mfa", "label": "Already have MFA", "next": "recommend-advanced" },
            { "id": "none", "label": "No authentication", "next": "recommend-urgent" }
          ]
        },
        "ux-preferences": {
          "type": "multiple-choice",
          "question": "Which UX features are important?",
          "options": [
            { "id": "social", "label": "Social login (Google, Facebook)", "next": "recommend-oauth" },
            { "id": "biometric", "label": "Biometric (Face ID, fingerprint)", "next": "recommend-webauthn" },
            { "id": "passwordless", "label": "No passwords at all", "next": "recommend-passwordless" },
            { "id": "simple", "label": "Keep it simple", "next": "recommend-basic-plus" }
          ]
        },
        "compliance-standards": {
          "type": "multiple-choice",
          "question": "Which compliance standards do you need?",
          "options": [
            { "id": "soc2", "label": "SOC 2", "next": "recommend-soc2-path" },
            { "id": "pci", "label": "PCI-DSS", "next": "recommend-pci-path" },
            { "id": "hipaa", "label": "HIPAA", "next": "recommend-hipaa-path" },
            { "id": "gdpr", "label": "GDPR", "next": "recommend-gdpr-path" }
          ]
        },
        "cost-constraints": {
          "type": "single-choice",
          "question": "What's your budget range?",
          "options": [
            { "id": "minimal", "label": "< $5K (DIY approach)", "next": "recommend-open-source" },
            { "id": "moderate", "label": "$5K - $20K (managed service)", "next": "recommend-auth0" },
            { "id": "enterprise", "label": "> $20K (enterprise solution)", "next": "recommend-enterprise" }
          ]
        },
        "recommend-mfa": {
          "type": "recommendation",
          "title": "Recommended: Start with Multi-Factor Authentication",
          "reasoning": "You have basic auth and security is a priority. MFA gives you the biggest security improvement for moderate effort.",
          "options": [
            {
              "name": "TOTP (Google Authenticator)",
              "pros": ["Free", "Industry standard", "Works offline"],
              "cons": ["User needs app", "Recovery codes needed"],
              "effort": "3-5 days",
              "cost": "$0"
            },
            {
              "name": "SMS-based OTP",
              "pros": ["Familiar to users", "No app needed"],
              "cons": ["SMS costs", "Less secure (SIM swap)", "Requires phone"],
              "effort": "2-3 days",
              "cost": "$0.01/SMS"
            },
            {
              "name": "Email OTP",
              "pros": ["Free", "No setup", "Universal"],
              "cons": ["Less secure", "Email delays possible"],
              "effort": "1-2 days",
              "cost": "$0"
            }
          ],
          "nextSteps": ["Show implementation guide", "See code example", "Compare costs"]
        },
        "recommend-oauth": {
          "type": "recommendation",
          "title": "Recommended: OAuth 2.0 with Social Providers",
          "reasoning": "Users want social login for convenience. OAuth gives great UX with solid security.",
          "options": [
            {
              "name": "Auth0 (managed service)",
              "pros": ["Quick setup", "Many providers", "Support included"],
              "cons": ["Monthly cost", "Vendor lock-in"],
              "effort": "2-3 days",
              "cost": "$23/month (starts)"
            },
            {
              "name": "IdentityServer (self-hosted)",
              "pros": ["Free (open source)", "Full control", "No vendor lock-in"],
              "cons": ["More maintenance", "Longer setup"],
              "effort": "1-2 weeks",
              "cost": "$0 (hosting only)"
            },
            {
              "name": "Firebase Auth",
              "pros": ["Easy integration", "Google ecosystem", "Free tier"],
              "cons": ["Google dependency", "Limited customization"],
              "effort": "1-3 days",
              "cost": "$0 (generous free tier)"
            }
          ],
          "nextSteps": ["Show OAuth flow", "Provider comparison", "Cost calculator"]
        }
      }
    },
    "performance": {
      "entry": "identify-bottleneck",
      "nodes": {
        "identify-bottleneck": {
          "type": "single-choice",
          "question": "Where is the performance issue?",
          "options": [
            { "id": "api", "label": "API endpoints are slow", "next": "api-analysis" },
            { "id": "database", "label": "Database queries are slow", "next": "database-analysis" },
            { "id": "frontend", "label": "Frontend is sluggish", "next": "frontend-analysis" },
            { "id": "all", "label": "Everything feels slow", "next": "holistic-analysis" }
          ]
        },
        "api-analysis": {
          "type": "range",
          "question": "What's your current average API response time?",
          "min": 0,
          "max": 5000,
          "unit": "ms",
          "options": [
            { "range": [0, 200], "next": "recommend-micro-optimizations" },
            { "range": [200, 1000], "next": "recommend-caching" },
            { "range": [1000, 3000], "next": "recommend-async" },
            { "range": [3000, 999999], "next": "recommend-architecture-review" }
          ]
        },
        "database-analysis": {
          "type": "multiple-choice",
          "question": "What database issues are you seeing?",
          "options": [
            { "id": "slow-queries", "label": "Queries take too long", "next": "recommend-query-optimization" },
            { "id": "timeouts", "label": "Connection timeouts", "next": "recommend-connection-pooling" },
            { "id": "deadlocks", "label": "Frequent deadlocks", "next": "recommend-transaction-design" },
            { "id": "scaling", "label": "Can't handle load", "next": "recommend-scaling-strategy" }
          ]
        },
        "recommend-caching": {
          "type": "recommendation",
          "title": "Recommended: Implement Multi-Layer Caching",
          "reasoning": "Your API is in the 200-1000ms range. Caching can drop this to <100ms for repeated requests.",
          "options": [
            {
              "name": "Redis (in-memory cache)",
              "impact": "-60% latency",
              "effort": "3-5 days",
              "cost": "$10-50/month",
              "bestFor": "Frequently accessed data, session storage"
            },
            {
              "name": "HTTP caching (CDN)",
              "impact": "-80% server load",
              "effort": "1-2 days",
              "cost": "$20-100/month",
              "bestFor": "Static content, API responses"
            },
            {
              "name": "Application-level cache",
              "impact": "-40% database queries",
              "effort": "2-3 days",
              "cost": "$0",
              "bestFor": "Computed values, lookup tables"
            }
          ],
          "nextSteps": ["Show caching architecture", "Calculate ROI", "Implementation guide"]
        }
      }
    },
    "security": {
      "entry": "assess-current-state",
      "nodes": {
        "assess-current-state": {
          "type": "single-choice",
          "question": "Have you had a security audit before?",
          "options": [
            { "id": "yes-recent", "label": "Yes, within last year", "next": "review-findings" },
            { "id": "yes-old", "label": "Yes, but over a year ago", "next": "suggest-update" },
            { "id": "no", "label": "Never had one", "next": "recommend-baseline" }
          ]
        },
        "recommend-baseline": {
          "type": "recommendation",
          "title": "Recommended: Establish Security Baseline",
          "reasoning": "Without an audit, you don't know your current security posture. Start with baseline assessment.",
          "options": [
            {
              "name": "Automated Security Scan",
              "pros": ["Fast (< 1 hour)", "Free tools available", "Immediate results"],
              "cons": ["Surface-level only", "Many false positives"],
              "effort": "1 day",
              "cost": "$0 (OWASP ZAP, Snyk)"
            },
            {
              "name": "Professional Penetration Test",
              "pros": ["Thorough", "Expert analysis", "Compliance-ready"],
              "cons": ["Expensive", "Takes time", "Requires planning"],
              "effort": "2-3 weeks",
              "cost": "$5K-20K"
            },
            {
              "name": "Internal Security Review",
              "pros": ["Moderate cost", "Team learning", "Ongoing improvement"],
              "cons": ["Requires expertise", "Time commitment"],
              "effort": "1-2 weeks",
              "cost": "$2K-5K (training)"
            }
          ],
          "nextSteps": ["Show assessment checklist", "Tool recommendations", "Find security partner"]
        }
      }
    }
  },
  "defaultFlow": {
    "entry": "understand-goals",
    "nodes": {
      "understand-goals": {
        "type": "open-ended",
        "question": "What are you trying to achieve with this enhancement?",
        "hints": [
          "Improve user experience?",
          "Increase security?",
          "Better performance?",
          "Reduce costs?",
          "Compliance requirements?",
          "Scale to more users?"
        ],
        "next": "prioritize-concerns"
      },
      "prioritize-concerns": {
        "type": "ranking",
        "question": "Rank these concerns by importance (drag to reorder):",
        "items": [
          { "id": "speed", "label": "Speed / Performance" },
          { "id": "security", "label": "Security / Compliance" },
          { "id": "cost", "label": "Cost / Budget" },
          { "id": "ux", "label": "User Experience" },
          { "id": "maintainability", "label": "Code Quality / Maintainability" },
          { "id": "scalability", "label": "Scalability / Growth" }
        ],
        "next": "recommend-holistic"
      },
      "recommend-holistic": {
        "type": "recommendation",
        "title": "Personalized Enhancement Roadmap",
        "reasoning": "Based on your priorities, here's a phased approach:",
        "dynamic": true,
        "phases": [
          {
            "number": 1,
            "title": "Quick Wins",
            "duration": "1-2 weeks",
            "tasks": "dynamically-generated"
          },
          {
            "number": 2,
            "title": "Foundation",
            "duration": "3-4 weeks",
            "tasks": "dynamically-generated"
          },
          {
            "number": 3,
            "title": "Transformation",
            "duration": "2-3 months",
            "tasks": "dynamically-generated"
          }
        ],
        "nextSteps": ["Export roadmap", "Estimate costs", "Assign team"]
      }
    }
  }
}
