{
  "metadata": {
    "projectName": "CORTEX",
    "timestamp": "2025-11-26T10:30:00Z",
    "fileCount": 247,
    "lineCount": 45623,
    "language": "Python",
    "version": "3.2.0",
    "analysisVersion": "1.0.0",
    "duration": 8.5
  },
  "scores": {
    "overall": 72,
    "quality": 68,
    "performance": 75,
    "security": 70,
    "architecture": 74,
    "maintainability": 71,
    "testCoverage": 65
  },
  "summary": {
    "text": "Analysis complete. Your codebase shows moderate quality with strong architecture but opportunities exist for improvement in code organization, test coverage, and security hardening. The system demonstrates good separation of concerns but could benefit from reducing complexity in key modules.",
    "quickWins": [
      "Remove 23 unused imports across 12 files (Est. 30 min)",
      "Extract 5 long methods into smaller functions (Est. 2 hours)",
      "Add type hints to 34 public methods (Est. 3 hours)",
      "Fix 8 duplicate code blocks with utility functions (Est. 1.5 hours)",
      "Rename 12 unclear variable names for clarity (Est. 45 min)"
    ],
    "criticalIssues": [
      "3 God classes detected with complexity > 40 (UserManager, DataProcessor, OrchestrationEngine)",
      "Test coverage at 65% - below 80% target (missing integration tests)",
      "12 security vulnerabilities identified (2 critical, 4 high priority)",
      "Circular dependency between API and Core modules",
      "Missing input validation in 8 public endpoints"
    ]
  },
  "architecture": {
    "components": [
      {
        "id": "tier0",
        "name": "Tier 0 Governance",
        "size": 20,
        "color": "#ef4444",
        "description": "Core governance rules and SKULL protection",
        "complexity": 15,
        "files": 8
      },
      {
        "id": "tier1",
        "name": "Tier 1 Memory",
        "size": 25,
        "color": "#3b82f6",
        "description": "Working memory and conversation tracking",
        "complexity": 22,
        "files": 12
      },
      {
        "id": "tier2",
        "name": "Tier 2 Knowledge",
        "size": 30,
        "color": "#10b981",
        "description": "Knowledge graph and pattern storage",
        "complexity": 28,
        "files": 15
      },
      {
        "id": "tier3",
        "name": "Tier 3 Context",
        "size": 22,
        "color": "#f59e0b",
        "description": "Development context and metrics",
        "complexity": 18,
        "files": 10
      },
      {
        "id": "agents",
        "name": "Agent System",
        "size": 35,
        "color": "#8b5cf6",
        "description": "Specialist agents and orchestration",
        "complexity": 42,
        "files": 24
      },
      {
        "id": "orchestrators",
        "name": "Orchestrators",
        "size": 28,
        "color": "#ec4899",
        "description": "High-level workflow management",
        "complexity": 35,
        "files": 18
      }
    ],
    "relationships": [
      { "source": "agents", "target": "tier1" },
      { "source": "agents", "target": "tier2" },
      { "source": "agents", "target": "tier3" },
      { "source": "orchestrators", "target": "agents" },
      { "source": "orchestrators", "target": "tier0" },
      { "source": "tier1", "target": "tier2" },
      { "source": "tier2", "target": "tier3" },
      { "source": "agents", "target": "tier0" }
    ],
    "issues": [
      {
        "type": "God Class",
        "file": "src/orchestrators/ux_enhancement_orchestrator.py",
        "complexity": 45,
        "severity": "high",
        "recommendation": "Split into AnalysisOrchestrator, ValidationOrchestrator, and ReportGenerator"
      },
      {
        "type": "Circular Dependency",
        "file": "src/cortex_agents/intent_router.py",
        "severity": "high",
        "recommendation": "Introduce dependency injection to break circular reference"
      },
      {
        "type": "Tight Coupling",
        "file": "src/tier1/working_memory.py",
        "severity": "medium",
        "recommendation": "Use interfaces/protocols to reduce direct dependencies"
      },
      {
        "type": "Long Parameter List",
        "file": "src/orchestrators/planning_orchestrator.py",
        "severity": "low",
        "recommendation": "Group related parameters into configuration objects"
      }
    ],
    "metrics": {
      "modularity": 78,
      "coupling": 65,
      "cohesion": 82,
      "abstractionLevel": 71
    }
  },
  "quality": {
    "codeSmells": [
      { "file": "ux_enhancement_orchestrator.py", "type": "Long Method", "count": 5 },
      { "file": "intent_router.py", "type": "Complex Conditional", "count": 8 },
      { "file": "working_memory.py", "type": "Duplicate Code", "count": 3 },
      { "file": "planning_orchestrator.py", "type": "Long Parameter List", "count": 4 },
      { "file": "base_agent.py", "type": "Feature Envy", "count": 2 },
      { "file": "response_template.py", "type": "Data Clumps", "count": 6 },
      { "file": "knowledge_graph.py", "type": "Primitive Obsession", "count": 4 },
      { "file": "git_checkpoint.py", "type": "Shotgun Surgery", "count": 2 }
    ],
    "complexity": [
      { "name": "UXEnhancementOrchestrator.analyze", "complexity": 25, "lines": 120, "file": "ux_enhancement_orchestrator.py" },
      { "name": "IntentRouter.route_request", "complexity": 18, "lines": 85, "file": "intent_router.py" },
      { "name": "WorkingMemory.store_conversation", "complexity": 15, "lines": 95, "file": "working_memory.py" },
      { "name": "PlanningOrchestrator.create_plan", "complexity": 22, "lines": 110, "file": "planning_orchestrator.py" },
      { "name": "KnowledgeGraph.extract_patterns", "complexity": 20, "lines": 105, "file": "knowledge_graph.py" },
      { "name": "BaseAgent.execute", "complexity": 12, "lines": 60, "file": "base_agent.py" }
    ],
    "maintainability": [
      { "metric": "Code Coverage", "value": 65, "target": 80, "unit": "%" },
      { "metric": "Documentation", "value": 72, "target": 85, "unit": "%" },
      { "metric": "Type Safety", "value": 68, "target": 90, "unit": "%" },
      { "metric": "Code Duplication", "value": 12, "target": 5, "unit": "%" },
      { "metric": "Cyclomatic Complexity", "value": 18, "target": 10, "unit": "avg" },
      { "metric": "Comment Ratio", "value": 22, "target": 20, "unit": "%" }
    ],
    "trends": {
      "qualityScoreChange": 5,
      "complexityTrend": "improving",
      "testCoverageDelta": 8
    }
  },
  "roadmap": {
    "tasks": [
      {
        "id": 1,
        "name": "Fix Critical Security Issues",
        "start": 0,
        "duration": 3,
        "priority": "critical",
        "impact": 9,
        "effort": 3,
        "category": "security",
        "assignee": null
      },
      {
        "id": 2,
        "name": "Refactor God Classes",
        "start": 3,
        "duration": 5,
        "priority": "high",
        "impact": 8,
        "effort": 5,
        "category": "architecture",
        "assignee": null
      },
      {
        "id": 3,
        "name": "Improve Test Coverage",
        "start": 5,
        "duration": 7,
        "priority": "high",
        "impact": 7,
        "effort": 7,
        "category": "quality",
        "assignee": null
      },
      {
        "id": 4,
        "name": "Add Type Hints",
        "start": 8,
        "duration": 4,
        "priority": "medium",
        "impact": 6,
        "effort": 4,
        "category": "quality",
        "assignee": null
      },
      {
        "id": 5,
        "name": "Documentation Updates",
        "start": 12,
        "duration": 3,
        "priority": "medium",
        "impact": 5,
        "effort": 3,
        "category": "documentation",
        "assignee": null
      },
      {
        "id": 6,
        "name": "Performance Optimization",
        "start": 15,
        "duration": 6,
        "priority": "high",
        "impact": 8,
        "effort": 6,
        "category": "performance",
        "assignee": null
      },
      {
        "id": 7,
        "name": "Remove Code Duplication",
        "start": 16,
        "duration": 2,
        "priority": "low",
        "impact": 4,
        "effort": 2,
        "category": "refactoring",
        "assignee": null
      }
    ],
    "dependencies": [
      { "source": 1, "target": 2 },
      { "source": 2, "target": 3 },
      { "source": 4, "target": 5 }
    ],
    "milestones": [
      { "name": "Security Hardened", "day": 3 },
      { "name": "Architecture Improved", "day": 8 },
      { "name": "Quality Standards Met", "day": 15 }
    ]
  },
  "performance": {
    "bottlenecks": [
      { "function": "KnowledgeGraph.extract_patterns", "time": 2500, "calls": 1200, "category": "computation" },
      { "function": "WorkingMemory.query_history", "time": 1800, "calls": 450, "category": "database" },
      { "function": "ResponseTemplate.render", "time": 1200, "calls": 3200, "category": "rendering" },
      { "function": "IntentRouter.analyze_intent", "time": 800, "calls": 5000, "category": "analysis" },
      { "function": "Tier3Context.calculate_metrics", "time": 650, "calls": 800, "category": "computation" }
    ],
    "dataFlow": [
      { "source": "User Input", "target": "Intent Router", "value": 10000 },
      { "source": "Intent Router", "target": "Agent System", "value": 10000 },
      { "source": "Agent System", "target": "Tier 1", "value": 8500 },
      { "source": "Agent System", "target": "Tier 2", "value": 6000 },
      { "source": "Tier 1", "target": "Tier 2", "value": 3000 },
      { "source": "Tier 2", "target": "Tier 3", "value": 2500 },
      { "source": "Agent System", "target": "Response", "value": 10000 }
    ],
    "metrics": {
      "avgResponseTime": 145,
      "p95ResponseTime": 280,
      "p99ResponseTime": 450,
      "errorRate": 0.2
    }
  },
  "security": {
    "vulnerabilities": {
      "critical": 2,
      "high": 4,
      "medium": 6,
      "low": 8
    },
    "issues": [
      {
        "id": "CWE-89",
        "type": "SQL Injection",
        "severity": "critical",
        "file": "src/tier1/working_memory.py",
        "line": 145,
        "description": "Unsanitized user input in SQL query",
        "recommendation": "Use parameterized queries with placeholders"
      },
      {
        "id": "CWE-798",
        "type": "Hardcoded Credentials",
        "severity": "critical",
        "file": "cortex.config.json",
        "line": 12,
        "description": "Database password in configuration file",
        "recommendation": "Use environment variables or secure vault"
      },
      {
        "id": "CWE-79",
        "type": "XSS",
        "severity": "high",
        "file": "src/response_templates/template_renderer.py",
        "line": 120,
        "description": "Unescaped user input in template rendering",
        "recommendation": "Sanitize all user input before rendering"
      },
      {
        "id": "CWE-327",
        "type": "Weak Crypto",
        "severity": "high",
        "file": "src/tier1/session_manager.py",
        "line": 78,
        "description": "Using deprecated MD5 hashing algorithm",
        "recommendation": "Migrate to SHA-256 or bcrypt"
      }
    ],
    "owasp": [
      { "category": "A01:2021 - Broken Access Control", "score": 65, "findings": 3 },
      { "category": "A02:2021 - Cryptographic Failures", "score": 70, "findings": 2 },
      { "category": "A03:2021 - Injection", "score": 60, "findings": 4 },
      { "category": "A04:2021 - Insecure Design", "score": 75, "findings": 1 },
      { "category": "A05:2021 - Security Misconfiguration", "score": 68, "findings": 5 }
    ],
    "riskScore": 72,
    "complianceStatus": {
      "OWASP_ASVS": "partial",
      "CWE_Top25": "incomplete",
      "GDPR": "compliant",
      "SOC2": "in_progress"
    }
  },
  "discoveries": [
    {
      "id": "disc-001",
      "type": "quick-win",
      "title": "Unused Imports Detection",
      "description": "Found 23 unused imports across 12 files. Removing these will improve code clarity and reduce maintenance burden.",
      "impact": "low",
      "effort": "low",
      "estimatedTime": "30 minutes",
      "files": [
        "src/orchestrators/ux_enhancement_orchestrator.py",
        "src/tier1/working_memory.py",
        "src/cortex_agents/intent_router.py"
      ]
    },
    {
      "id": "disc-002",
      "type": "critical",
      "title": "God Class Detected - UXEnhancementOrchestrator",
      "description": "UXEnhancementOrchestrator.py has cyclomatic complexity of 45 (target: <10). Consider splitting into AnalysisOrchestrator, ValidationOrchestrator, and ReportGenerator.",
      "impact": "high",
      "effort": "high",
      "estimatedTime": "8 hours",
      "files": ["src/orchestrators/ux_enhancement_orchestrator.py"]
    },
    {
      "id": "disc-003",
      "type": "pattern",
      "title": "Consistent Agent Pattern Detected",
      "description": "All agents inherit from BaseAgent and follow the same request/response pattern. This is excellent architecture!",
      "impact": "positive",
      "effort": "none",
      "estimatedTime": "0 hours"
    },
    {
      "id": "disc-004",
      "type": "opportunity",
      "title": "Test Coverage Gap in Orchestrators",
      "description": "Orchestrators have only 45% test coverage compared to 82% in agents. Adding integration tests would improve confidence.",
      "impact": "medium",
      "effort": "medium",
      "estimatedTime": "6 hours",
      "files": ["tests/test_orchestrators/"]
    }
  ],
  "testCoverage": {
    "overall": 65,
    "byModule": {
      "tier0": 85,
      "tier1": 78,
      "tier2": 72,
      "tier3": 68,
      "agents": 82,
      "orchestrators": 45
    },
    "untested": [
      "src/orchestrators/upgrade_orchestrator.py",
      "src/tier3/code_metrics.py",
      "src/cortex_agents/discovery_agent.py"
    ]
  }
}
