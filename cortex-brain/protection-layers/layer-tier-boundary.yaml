# CORTEX Protection Layer: Tier Boundary
# Extracted from brain-protection-rules.yaml for token optimization
# Version: 2.1
# Part of: CORTEX 3.0 Track B (Token Optimization)

version: "2.1"
type: "protection_layer"
layer_id: "tier_boundary"
parent_file: "brain-protection-rules.yaml"

# Layer definition (normalized indentation)
- layer_id: "tier_boundary"
  name: "Tier Boundary Protection"
  description: "Data stored in correct tier"
  priority: 2

  rules:
    - rule_id: "TIER0_APPLICATION_DATA"
      name: "No Application Data in Tier 0"
      severity: "blocked"
      description: "Application-specific path in Tier 0 (immutable governance)"

      detection:
        path_patterns:
          - "tier0/**"
          - "governance/**"
        contains_any: "{{application_paths}}"

      alternatives:
        - "Store in Tier 2 with scope='application'"
        - "Keep generic principles in Tier 0"
        - "Create application-specific tier"

      evidence: "Tier 0 is for generic CORTEX principles only"

    - rule_id: "TIER2_CONVERSATION_DATA"
      name: "No Conversation Data in Tier 2"
      severity: "warning"
      description: "Conversation data should be in Tier 1, not Tier 2"

      detection:
        path_patterns:
          - "tier2/**"
        contains: "conversation"

      alternatives:
        - "Move to Tier 1 (conversation-history.jsonl)"
        - "Store aggregated patterns in Tier 2"
        - "Keep raw data in Tier 1, patterns in Tier 2"

      evidence: "Tier 2 is for aggregated patterns, not raw conversations"

# Layer 3: SOLID Compliance
