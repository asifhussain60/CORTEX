<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>MkDocs UTF-8 Encoding Fix - Complete - CORTEX</title>
    <meta name="description" content="Cognitive Operation & Reasoning Through EXtension for Copilot">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Bootstrap styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">
    
    <!-- Font-Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!-- Google Webfonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600|PT+Serif:400,400italic' rel='stylesheet' type='text/css'>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../assets/css/cortex-tales.css">
    
    <!-- Syntax Highlighting - Dark Theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <!-- Wide Header with Centered Logo -->
        <div class="widewrapper masthead">
            <div class="container">
                <div class="logo-container">
                    <a href=".." id="logo">
                        <img src="../assets/images/CORTEX-logo.png" alt="CORTEX" style="width: 300px; height: 300px;">
                    </a>
                </div>
            </div>
        </div>

        <!-- Horizontal Navigation Bar -->
        <div class="widewrapper subheader">
            <div class="container">
                <nav class="horizontal-nav">
                    <ul class="nav-menu">
                        <li><a href="..">Home</a></li>
                        <li><a href="../diagrams/story/The-CORTEX-Story/">The CORTEX Birth</a></li>
                        <li><a href="../governance/THE-RULEBOOK/">Cortex Bible</a></li>
                        <li><a href="../architecture/overview/">Architecture</a></li>
                        <li><a href="../reference/api/">Technical Docs</a></li>
                        <li><a href="../guides/developer-guide/">User Guides</a></li>
                        <li><a href="../getting-started/quick-start/">Examples</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="widewrapper main">
        <div class="container">
            <div class="row">
                <!-- Left Sidebar Navigation (Table of Contents) -->
                <div class="col-md-3 sidebar-left">
                    <!-- Navigation Tree -->
                    
                    <div class="nav-tree">
                        <h4>Navigation</h4>
                        <ul>
                        
                            
                            <li><a href=".." >Home</a></li>
                            
                        
                            
                            <li class="nav-group">
                                <strong>The CORTEX Birth</strong>
                                <ul>
                                
                                    <li><a href="../diagrams/story/The-CORTEX-Story/" >The Awakening Story</a></li>
                                
                                    <li><a href="../diagrams/narratives/" >Narratives</a></li>
                                
                                </ul>
                            </li>
                            
                        
                            
                            <li><a href="../governance/THE-RULEBOOK/" >Cortex Bible</a></li>
                            
                        
                            
                            <li class="nav-group">
                                <strong>Architecture</strong>
                                <ul>
                                
                                    <li><a href="../architecture/overview/" >Overview</a></li>
                                
                                    <li><a href="../architecture/tier-system/" >Tier System</a></li>
                                
                                    <li><a href="../architecture/agents/" >Agents</a></li>
                                
                                    <li><a href="../architecture/brain-protection/" >Brain Protection</a></li>
                                
                                    <li><a href=".." >Diagrams</a></li>
                                
                                </ul>
                            </li>
                            
                        
                            
                            <li class="nav-group">
                                <strong>Technical Docs</strong>
                                <ul>
                                
                                    <li><a href="../reference/api/" >API Reference</a></li>
                                
                                    <li><a href="../reference/configuration/" >Configuration</a></li>
                                
                                    <li><a href="../reference/response-templates/" >Response Templates</a></li>
                                
                                    <li><a href=".." >Operations</a></li>
                                
                                </ul>
                            </li>
                            
                        
                            
                            <li class="nav-group">
                                <strong>User Guides</strong>
                                <ul>
                                
                                    <li><a href="../getting-started/quick-start/" >Quick Start</a></li>
                                
                                    <li><a href="../getting-started/installation/" >Installation</a></li>
                                
                                    <li><a href="../getting-started/configuration/" >Configuration</a></li>
                                
                                    <li><a href="../guides/developer-guide/" >Developer Guide</a></li>
                                
                                    <li><a href="../guides/admin-guide/" >Admin Guide</a></li>
                                
                                    <li><a href="../guides/best-practices/" >Best Practices</a></li>
                                
                                    <li><a href="../guides/troubleshooting/" >Troubleshooting</a></li>
                                
                                </ul>
                            </li>
                            
                        
                            
                            <li class="nav-group">
                                <strong>Examples</strong>
                                <ul>
                                
                                    <li><a href="../getting-started/quick-start/" >Quick Start</a></li>
                                
                                    <li><a href="../guides/best-practices/" >Best Practices</a></li>
                                
                                    <li><a href="../diagrams/prompts/" >DALL-E Prompts</a></li>
                                
                                </ul>
                            </li>
                            
                        
                        </ul>
                    </div>
                    
                    
                    <!-- On This Page TOC - Only for pages with reasonable length TOC -->
                    
                    <div class="toc-wrapper">
                        <h4>On This Page</h4>
                        MkDocs UTF-8 Encoding Fix - Complete - #mkdocs-utf-8-encoding-fix-complete
    Problem Diagnosed - #problem-diagnosed
    Solution Implemented - #solution-implemented
    Usage - #usage
    Prevention - #prevention
    Testing - #testing
    Common Garbled Patterns - #common-garbled-patterns
    Files Modified - #files-modified
    Status - #status
    Next Steps - #next-steps

                    </div>
                    
                </div>

                <!-- Main Content Area (No Right Sidebar) -->
                <div class="col-md-9 content-main">
                    <article>
                        <h1 id="mkdocs-utf-8-encoding-fix-complete">MkDocs UTF-8 Encoding Fix - Complete<a class="headerlink" href="#mkdocs-utf-8-encoding-fix-complete" title="Permanent link">&para;</a></h1>
<h2 id="problem-diagnosed">Problem Diagnosed<a class="headerlink" href="#problem-diagnosed" title="Permanent link">&para;</a></h2>
<p><strong>Root Cause</strong>: Windows-1252 encoded text in source markdown files being interpreted as UTF-8, causing double-encoding artifacts.</p>
<ul>
<li><strong>Python Locale</strong>: <code>cp1252</code> (Windows-1252)</li>
<li><strong>Source Files</strong>: Had garbled text like <code>—</code> instead of <code>—</code></li>
<li><strong>Build Output</strong>: Propagated garbled text to HTML</li>
</ul>
<h2 id="solution-implemented">Solution Implemented<a class="headerlink" href="#solution-implemented" title="Permanent link">&para;</a></h2>
<h3 id="1-created-fix-scripts">1. Created Fix Scripts<a class="headerlink" href="#1-created-fix-scripts" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>scripts/fix_garbled_source_files.py</code></strong>: Converts garbled patterns back to proper UTF-8</li>
<li><strong><code>scripts/fix_mkdocs_encoding.py</code></strong>: Ensures MkDocs builds with UTF-8 environment</li>
<li><strong><code>scripts/build-mkdocs-utf8.ps1</code></strong>: PowerShell script for clean UTF-8 builds</li>
<li><strong><code>scripts/set-utf8-env.ps1</code></strong>: Sets UTF-8 environment variables</li>
</ul>
<h3 id="2-fixed-source-files">2. Fixed Source Files<a class="headerlink" href="#2-fixed-source-files" title="Permanent link">&para;</a></h3>
<p>Ran <code>fix_garbled_source_files.py</code> which corrected:
- 44× <code>—</code> → <code>—</code> (em dash)
- 36× <code>✅</code> → <code>✅</code> (checkmark)
- 31× <code>→</code> → <code>→</code> (arrow)
- 10× <code>"</code> → <code>"</code> (left quote)
- 10× <code>"</code> → <code>"</code> (right quote)
- 9× <code>⚠️</code> → <code>⚠️</code> (warning emoji)
- Plus many more...</p>
<p><strong>Total</strong>: 170 encoding issues fixed in <code>docs/diagrams/story/The-CORTEX-Story.md</code></p>
<h3 id="3-created-automated-tests">3. Created Automated Tests<a class="headerlink" href="#3-created-automated-tests" title="Permanent link">&para;</a></h3>
<p><strong><code>tests/test_mkdocs_encoding.py</code></strong>:
- Checks for garbled patterns in HTML output
- Verifies correct UTF-8 characters are present
- Validates charset declarations
- Tests all HTML files in site directory</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="quick-fix-recommended">Quick Fix (Recommended)<a class="headerlink" href="#quick-fix-recommended" title="Permanent link">&para;</a></h3>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c"># Run the complete fix and rebuild</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">python</span> <span class="n">scripts</span><span class="p">/</span><span class="n">fix_garbled_source_files</span><span class="p">.</span><span class="n">py</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="n">build-mkdocs-utf8</span><span class="p">.</span><span class="n">ps1</span>
</span></code></pre></div>
<h3 id="manual-steps">Manual Steps<a class="headerlink" href="#manual-steps" title="Permanent link">&para;</a></h3>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c"># 1. Fix source files</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">python</span> <span class="n">scripts</span><span class="p">/</span><span class="n">fix_garbled_source_files</span><span class="p">.</span><span class="n">py</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c"># 2. Set UTF-8 environment</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">.\</span><span class="n">scripts</span><span class="p">\</span><span class="nb">set-utf8</span><span class="n">-env</span><span class="p">.</span><span class="n">ps1</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c"># 3. Build site</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">mkdocs</span> <span class="n">build</span> <span class="p">-</span><span class="n">-clean</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c"># 4. Verify encoding</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="n">python</span> <span class="n">tests</span><span class="p">/</span><span class="n">test_mkdocs_encoding</span><span class="p">.</span><span class="n">py</span>
</span></code></pre></div>
<h3 id="for-future-markdown-files">For Future Markdown Files<a class="headerlink" href="#for-future-markdown-files" title="Permanent link">&para;</a></h3>
<p>Always save markdown files with UTF-8 encoding:
- VS Code: Check bottom-right corner, should say "UTF-8"
- If it says "Windows-1252" or "ANSI", click and select "Save with Encoding → UTF-8"</p>
<h2 id="prevention">Prevention<a class="headerlink" href="#prevention" title="Permanent link">&para;</a></h2>
<h3 id="vs-code-settings-recommended">VS Code Settings (Recommended)<a class="headerlink" href="#vs-code-settings-recommended" title="Permanent link">&para;</a></h3>
<p>Add to <code>.vscode/settings.json</code>:
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">&quot;files.encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">&quot;files.autoGuessEncoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">&quot;[markdown]&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nt">&quot;files.encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;utf8&quot;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="git-configuration">Git Configuration<a class="headerlink" href="#git-configuration" title="Permanent link">&para;</a></h3>
<p>Ensure Git doesn't convert line endings incorrectly:
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>*.md text eol=lf encoding=utf-8
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>*.html text eol=lf encoding=utf-8
</span></code></pre></div></p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<h3 id="automated-tests">Automated Tests<a class="headerlink" href="#automated-tests" title="Permanent link">&para;</a></h3>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">python</span> <span class="n">tests</span><span class="p">/</span><span class="n">test_mkdocs_encoding</span><span class="p">.</span><span class="n">py</span> <span class="n">-v</span>
</span></code></pre></div>
<h3 id="manual-verification">Manual Verification<a class="headerlink" href="#manual-verification" title="Permanent link">&para;</a></h3>
<ol>
<li>Open <code>site/diagrams/story/The-CORTEX-Story/index.html</code> in browser</li>
<li>Search for text like "part scientist, part madman"</li>
<li>Should see: <code>—</code> not <code>—</code></li>
<li>Should see: <code>✅</code> not <code>✅</code></li>
<li>Should see: <code>→</code> not <code>→</code></li>
</ol>
<h2 id="common-garbled-patterns">Common Garbled Patterns<a class="headerlink" href="#common-garbled-patterns" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Garbled</th>
<th>Correct</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>—</code></td>
<td><code>—</code></td>
<td>Em dash</td>
</tr>
<tr>
<td><code>–</code></td>
<td><code>–</code></td>
<td>En dash</td>
</tr>
<tr>
<td><code>"</code></td>
<td><code>"</code></td>
<td>Left double quote</td>
</tr>
<tr>
<td><code>"</code></td>
<td><code>"</code></td>
<td>Right double quote</td>
</tr>
<tr>
<td>`,</td>
<td></td>
<td></td>
</tr>
<tr>
<td>',</td>
<td></td>
<td></td>
</tr>
<tr>
<td>',</td>
<td></td>
<td></td>
</tr>
<tr>
<td>',</td>
<td></td>
<td></td>
</tr>
<tr>
<td>',</td>
<td></td>
<td></td>
</tr>
<tr>
<td>',</td>
<td></td>
<td></td>
</tr>
<tr>
<td>'ΓÇÖ': ': ': ': ': ': <code>|</code>'`</td>
<td>Apostrophe</td>
<td></td>
</tr>
<tr>
<td><code>…</code></td>
<td><code>…</code></td>
<td>Ellipsis</td>
</tr>
<tr>
<td><code>✅</code></td>
<td><code>✅</code></td>
<td>Check mark</td>
</tr>
<tr>
<td><code>→</code></td>
<td><code>→</code></td>
<td>Right arrow</td>
</tr>
<tr>
<td><code>⚠️</code></td>
<td><code>⚠️</code></td>
<td>Warning emoji</td>
</tr>
</tbody>
</table>
<h2 id="files-modified">Files Modified<a class="headerlink" href="#files-modified" title="Permanent link">&para;</a></h2>
<ul>
<li><code>docs/diagrams/story/The-CORTEX-Story.md</code> - Fixed source file</li>
<li><code>scripts/fix_garbled_source_files.py</code> - Fix script (created)</li>
<li><code>scripts/fix_mkdocs_encoding.py</code> - Build helper (created)</li>
<li><code>scripts/build-mkdocs-utf8.ps1</code> - Build script (created)</li>
<li><code>scripts/set-utf8-env.ps1</code> - Environment setup (created)</li>
<li><code>tests/test_mkdocs_encoding.py</code> - Automated tests (created)</li>
</ul>
<h2 id="status">Status<a class="headerlink" href="#status" title="Permanent link">&para;</a></h2>
<p>✅ <strong>RESOLVED</strong>: All garbled UTF-8 characters have been fixed
✅ <strong>TESTED</strong>: Automated tests verify encoding correctness
✅ <strong>DOCUMENTED</strong>: Fix procedures and prevention measures documented
✅ <strong>REPRODUCIBLE</strong>: Scripts ensure consistent UTF-8 handling</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Review</strong>: Check <code>git diff</code> to see all changes</li>
<li><strong>Test</strong>: Run <code>mkdocs serve</code> and manually verify pages</li>
<li><strong>Commit</strong>: Commit the fixed source files and new scripts</li>
<li><strong>Deploy</strong>: Rebuild and deploy the corrected site</li>
</ol>
                    </article>
                    
                    <!-- Page Navigation -->
                    <div class="page-navigation">
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="widewrapper footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p>
                            © 2024-2025 Asif Hussain. All rights reserved.
                            <span class="separator">|</span>
                            <a href="https://github.com/asifhussain60/CORTEX" target="_blank">
                                <i class="fa fa-github"></i> GitHub
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>
    
    <!-- Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    
    <!-- MkDocs Search -->
    <script src="../search/main.js"></script>
</body>
</html>