# CORTEX Protection Layer: Solid Compliance

# Condensed for token optimization - full docs in protection-layers-docs/

  rules:
    - rule_id: "SINGLE_RESPONSIBILITY"
      name: "Single Responsibility Principle"
      severity: "warning"
      description: "Potential God Object pattern detected (adding multiple responsibilities)"

      detection:
        keywords:
          - "add mode"
          - "add switch"
          - "handle all"
          - "do everything"

        - "Create dedicated agent for new responsibility"
        - "Use composition instead of adding modes"
        - "Extract to separate module"

    - rule_id: "DEPENDENCY_INVERSION"
      name: "Dependency Inversion Principle"
      severity: "warning"
      description: "Hardcoded dependency detected (violates DIP)"

      detection:
        keywords:
          - "hardcode path"
          - "fixed path"
          - "absolute path"
          - "inline config"

        - "Use dependency injection"
        - "Load from configuration file"
        - "Pass as parameter"

    - rule_id: "OPEN_CLOSED"
      name: "Open/Closed Principle"
      severity: "warning"
      description: "Modifying existing behavior instead of extending"

      detection:
        keywords:
          - "change behavior"
          - "modify existing"
          - "alter functionality"

        - "Create new implementation via extension"
        - "Use strategy pattern"
        - "Add decorator or wrapper"

    - rule_id: "CODE_STYLE_CONSISTENCY"
      name: "Adopt User's Code Style"
      severity: "warning"
      description: "Generated code should match existing codebase style conventions"

      detection:
        combined_keywords:
            - "generate code"
            - "create file"
            - "implement"
            - "write function"
            - "add class"
            - "different style"
            - "inconsistent formatting"
            - "foreign conventions"

        - "Match bracket style (K&R, Allman, etc.)"
        - "Match quote style (single vs double quotes)"
        - "Match comment style and documentation format"
