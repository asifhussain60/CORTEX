schema_version: '3.0'
last_updated: '2025-11-20'
optimization:
  type: aggressive_minimal_with_orchestration
  original_templates: 107
  enhanced_templates: 29
  orchestration_enabled: true
  reduction_strategy: Core essentials + multi-template composition

# Orchestration Configuration
orchestration_config:
  enabled: true
  default_max_templates: 3
  default_min_relevance_score: 0.3
  composition_rules:
    section_priority:
      'üß† **CORTEX': 100
      'üéØ **My Understanding': 90
      '‚ö†Ô∏è **Challenge:': 80
      'üí¨ **Response:': 70
      'üìù **Your Request:': 60
      'üîç **Next Steps:': 50

templates:
  help_table:
    name: Help Table
    trigger:
      - help_table
      - help
      - /help
      - what can cortex do
    response_type: table
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n[CONTEXT_SUMMARY]\n\n\U0001F4DD **Your Request:**\
      \  [Echo refined request]\n\n\U0001F50D **Next Steps:**\n   [Context-appropriate\
      \ format]"
    context_summary_template: "\n<details>\n<summary>\U0001F9E0 <b>Context Memory\
      \ ({conversation_count} conversations loaded, Quality: {quality_score}/10 {quality_emoji})</b></summary>\n\
      \n**Freshness:** {freshness_label} ({hours_since_last}h ago)  \n**Entity Coverage:**\
      \ {entity_coverage}%  \n**Relevance Score:** {avg_relevance_score}/1.0 ({relevance_label})\
      \  \n**Memory Health:** {memory_health}\n\n**Performance Metrics:**\n- Average\
      \ query time: {avg_query_time}ms\n- Token usage: {token_usage}/{token_budget}\
      \ ({token_percentage}%)\n- Storage health: {storage_health}\n\n*Use `show context`\
      \ for detailed view*\n</details>\n"
    # NEW: Orchestration metadata
    orchestration:
      relevance_keywords:
        - help
        - commands
        - guide
        - documentation
        - how to
        - what can
        - capabilities
      priority: 50
      category: help
      composability:
        level: high
        compatible_with:
          - status_check
          - quick_start
          - confidence_high
          - confidence_medium
        conflicts_with:
          - error_general
          - executor_error
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: concise

  help_detailed:
    name: Help Detailed
    trigger:
      - help_detailed
      - detailed help
      - show me everything
    response_type: detailed
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - detailed
        - comprehensive
        - full
        - complete
        - everything
        - thorough
      priority: 50
      category: help
      composability:
        level: medium
        compatible_with:
          - help_table
          - admin_help
        conflicts_with:
          - quick_start
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: detailed

  quick_start:
    name: Quick Start
    trigger:
      - quick_start
      - quick start
      - get started
      - getting started
      - first time
    response_type: narrative
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - start
        - begin
        - getting started
        - first time
        - new user
        - onboarding
        - setup
      priority: 60
      category: help
      composability:
        level: high
        compatible_with:
          - help_table
          - status_check
          - confidence_none
        conflicts_with:
          - help_detailed
        section_merge_rules:
          Response: merge
          Next Steps: replace
          Challenge: keep_first
      verbosity: concise

  status_check:
    name: Status Check
    trigger:
      - status_check
      - status
      - where are we
      - progress
      - current state
    response_type: table
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - status
        - progress
        - where
        - current
        - state
        - position
        - checkpoint
      priority: 55
      category: status
      composability:
        level: high
        compatible_with:
          - help_table
          - operation_progress
          - ado_resumed
          - confidence_medium
        conflicts_with:
          - error_general
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: concise

  success_general:
    name: Success General
    trigger:
      - success_general
      - success
      - completed
      - done
    response_type: narrative
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - success
        - completed
        - finished
        - done
        - accomplished
        - achieved
      priority: 40
      category: general
      composability:
        level: high
        compatible_with:
          - operation_complete
          - executor_success
          - tester_success
          - confidence_high
        conflicts_with:
          - error_general
          - executor_error
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: concise

  error_general:
    name: Error General
    trigger:
      - error_general
      - error
      - failed
      - failure
    response_type: narrative
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - error
        - failed
        - failure
        - exception
        - crash
        - bug
        - issue
      priority: 100  # Errors highest priority
      category: error
      composability:
        level: low  # Errors should be standalone
        compatible_with: []
        conflicts_with:
          - success_general
          - executor_success
          - tester_success
          - operation_complete
        section_merge_rules:
          Response: keep_first
          Next Steps: keep_first
          Challenge: keep_first
      verbosity: detailed

  executor_success:
    name: Executor Success
    trigger:
      - executor_success
      - implementation complete
      - code complete
    response_type: detailed
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - implementation
        - code
        - execute
        - develop
        - build
        - create
        - complete
      priority: 60
      category: execution
      composability:
        level: medium
        compatible_with:
          - tester_success
          - operation_complete
          - confidence_medium
        conflicts_with:
          - executor_error
          - error_general
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: detailed

  tester_success:
    name: Tester Success
    trigger:
      - tester_success
      - tests passing
      - tests complete
      - validation complete
    response_type: detailed
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - test
        - validation
        - verify
        - check
        - passing
        - coverage
        - quality
      priority: 60
      category: execution
      composability:
        level: medium
        compatible_with:
          - executor_success
          - operation_complete
          - confidence_high
        conflicts_with:
          - executor_error
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: detailed

  operation_started:
    name: Operation Started
    trigger:
      - operation_started
      - starting
      - beginning
    response_type: narrative
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - start
        - begin
        - initiate
        - commence
        - launch
      priority: 45
      category: status
      composability:
        level: high
        compatible_with:
          - operation_progress
          - status_check
        conflicts_with: []
        section_merge_rules:
          Response: keep_first
          Next Steps: replace
          Challenge: keep_first
      verbosity: concise

  operation_progress:
    name: Operation Progress
    trigger:
      - operation_progress
      - progressing
      - in progress
    response_type: narrative
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - progress
        - ongoing
        - continuing
        - working
        - updating
      priority: 45
      category: status
      composability:
        level: high
        compatible_with:
          - operation_started
          - operation_complete
          - status_check
        conflicts_with: []
        section_merge_rules:
          Response: merge
          Next Steps: replace
          Challenge: keep_first
      verbosity: concise

  operation_complete:
    name: Operation Complete
    trigger:
      - operation_complete
      - finished
      - complete
    response_type: detailed
    content: "\U0001F9E0 **CORTEX [Operation Type]**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State understanding]\n\n‚ö†Ô∏è **Challenge:** [‚úì Accept with rationale\
      \ OR ‚ö° Challenge with alternatives]\n\n\U0001F4AC **Response:**\n   [Natural\
      \ language explanation]\n\n\U0001F4DD **Your Request:** [Echo refined request]\n\
      \n\U0001F50D **Next Steps:**\n   [Context-appropriate format]"
    orchestration:
      relevance_keywords:
        - complete
        - finished
        - done
        - accomplished
        - finalized
      priority: 50
      category: status
      composability:
        level: medium
        compatible_with:
          - operation_progress
          - success_general
          - executor_success
          - tester_success
        conflicts_with:
          - error_general
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: detailed

  fallback:
    name: Fallback Response
    trigger:
      - '*'
    response_type: structured
    content: "\U0001F9E0 **CORTEX Response**\nAuthor: Asif Hussain | ¬© 2024-2025\
      \ | github.com/asifhussain60/CORTEX\n\n\U0001F3AF **My Understanding Of Your\
      \ Request:**\n   [State what you understand they want to achieve]\n\n‚ö†Ô∏è **Challenge:**\
      \ [Validate assumptions, then Accept OR Challenge]\n\n\U0001F4AC **Response:**\n\
      \   [Provide helpful response]\n\n\U0001F4DD **Your Request:** [Echo user request]\n\
      \n\U0001F50D **Next Steps:**\n   1. [First recommendation]\n   2. [Second recommendation]\n\
      \   3. [Third recommendation]"
    orchestration:
      relevance_keywords: []  # Universal fallback
      priority: 10  # Lowest priority
      category: general
      composability:
        level: high  # Can combine with any template
        compatible_with: []  # Universal compatibility
        conflicts_with: []
        section_merge_rules:
          Response: merge
          Next Steps: merge
          Challenge: keep_first
      verbosity: concise

  # Confidence Indicators (System Templates)
  confidence_high:
    name: "Confidence Display - High"
    trigger: []  # System-generated, not user-triggered
    response_type: "confidence_indicator"
    content: "\U0001F3AF **Pattern Match Confidence:** {confidence_display}\n\nI'm\
      \ applying learned patterns from {pattern_count} similar conversations.\n{detailed_explanation}"
    placeholders:
      - confidence_display
      - pattern_count
      - detailed_explanation
    orchestration:
      relevance_keywords: []  # System template
      priority: 200  # Always inject if applicable
      category: metadata
      composability:
        level: high
        compatible_with: []  # Compatible with ALL templates
        conflicts_with: 
          - confidence_medium
          - confidence_low
          - confidence_none
        section_merge_rules:
          Response: inject_after_challenge
      verbosity: concise

  confidence_medium:
    name: "Confidence Display - Medium"
    trigger: []
    response_type: "confidence_indicator"
    content: "\U0001F7E1 **Pattern Match Confidence:** {confidence_display}\n\nI\
      \ found {pattern_count} related patterns, applying with moderate confidence.\n\
      {detailed_explanation}"
    placeholders:
      - confidence_display
      - pattern_count
      - detailed_explanation
    orchestration:
      relevance_keywords: []
      priority: 200
      category: metadata
      composability:
        level: high
        compatible_with: []
        conflicts_with:
          - confidence_high
          - confidence_low
          - confidence_none
        section_merge_rules:
          Response: inject_after_challenge
      verbosity: concise

  confidence_low:
    name: "Confidence Display - Low"
    trigger: []
    response_type: "confidence_indicator"
    content: "\U0001F7E0 **Pattern Match Confidence:** {confidence_display}\n\nLimited\
      \ pattern history available. Response based on {pattern_count} patterns.\n{detailed_explanation}"
    placeholders:
      - confidence_display
      - pattern_count
      - detailed_explanation
    orchestration:
      relevance_keywords: []
      priority: 200
      category: metadata
      composability:
        level: high
        compatible_with: []
        conflicts_with:
          - confidence_high
          - confidence_medium
          - confidence_none
        section_merge_rules:
          Response: inject_after_challenge
      verbosity: concise

  confidence_none:
    name: "Confidence Display - No Patterns"
    trigger: []
    response_type: "confidence_indicator"
    content: "\u2139\uFE0F **New Territory:** No learned patterns available for this\
      \ request.\n\nGenerating fresh response using CORTEX capabilities."
    placeholders: []
    orchestration:
      relevance_keywords: []
      priority: 200
      category: metadata
      composability:
        level: high
        compatible_with: []
        conflicts_with:
          - confidence_high
          - confidence_medium
          - confidence_low
        section_merge_rules:
          Response: inject_after_challenge
      verbosity: concise

routing:
  default: fallback
  help_triggers:
    - help
    - /help
    - what can cortex do
  status_triggers:
    - status
    - where are we
  quick_start_triggers:
    - quick start
    - get started
  # ... (remaining routing unchanged)

formatting:
  mandatory_sections:
    - understanding
    - challenge
    - response
    - request_echo
    - next_steps
