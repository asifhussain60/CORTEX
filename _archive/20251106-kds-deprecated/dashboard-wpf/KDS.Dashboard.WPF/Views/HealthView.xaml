<UserControl x:Class="KDS.Dashboard.WPF.Views.HealthView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:viewmodels="clr-namespace:KDS.Dashboard.WPF.ViewModels">
    
    <UserControl.DataContext>
        <viewmodels:HealthViewModel/>
    </UserControl.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" 
                      Text="Brain Health Status" 
                      FontSize="20" 
                      FontWeight="SemiBold"
                      Foreground="{StaticResource TextBrush}"/>

            <Border Grid.Column="1" 
                    Background="#E8F5E9" 
                    CornerRadius="4" 
                    Padding="12,6">
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="CheckCircle" 
                                            Width="16" Height="16" 
                                            Foreground="#2E7D32" 
                                            Margin="0,0,8,0"/>
                    <TextBlock Text="{Binding HealthStatus}" 
                              FontSize="14" 
                              FontWeight="Bold"
                              Foreground="#2E7D32"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Health Cards -->
        <UniformGrid Grid.Row="1" Rows="2" Columns="2">
            <!-- Event Backlog -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="FileDocumentMultiple" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource PrimaryBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Event Backlog" 
                              FontSize="16" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock Text="{Binding EventBacklog}" 
                              FontSize="42" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource PrimaryBrush}"/>
                    <TextBlock Text="unprocessed events" 
                              FontSize="12" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,4,0,0"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Knowledge Entries -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="Brain" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Knowledge Entries" 
                              FontSize="16" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock Text="{Binding KnowledgeEntries}" 
                              FontSize="42" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource SecondaryBrush}"/>
                    <TextBlock Text="patterns learned" 
                              FontSize="12" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,4,0,0"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Conversation Count -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="MessageText" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource AccentBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Active Conversations" 
                              FontSize="16" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock FontSize="42" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource AccentBrush}">
                        <Run Text="{Binding ConversationCount, Mode=OneWay}"/>
                        <Run Text="/" FontSize="24"/>
                        <Run Text="20" FontSize="24"/>
                    </TextBlock>
                    <TextBlock Text="capacity used" 
                              FontSize="12" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,4,0,0"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Last Update -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="Update" 
                                            Width="48" Height="48"
                                            Foreground="#9C27B0"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Last BRAIN Update" 
                              FontSize="16" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock Text="{Binding LastBrainUpdate, StringFormat='HH:mm:ss'}" 
                              FontSize="32" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="#9C27B0"/>
                    <TextBlock Text="{Binding LastBrainUpdate, StringFormat='MMM dd, yyyy'}" 
                              FontSize="12" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,4,0,0"/>
                </StackPanel>
            </materialDesign:Card>
        </UniformGrid>
    </Grid>
</UserControl>
