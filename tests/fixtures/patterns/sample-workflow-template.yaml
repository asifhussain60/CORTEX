template_id: export_feature_workflow
pattern_id: export_feature
workflow_name: "Export Feature Workflow"
description: "Standard workflow for implementing export functionality"
tdd_required: true

phases:
  - phase_id: phase_0
    phase_name: "Architectural Discovery"
    duration_estimate_hours: 0.5
    tasks:
      - task_id: task_0_1
        description: "Review existing export implementations"
        deliverable: "List of similar exports in codebase"
      
      - task_id: task_0_2
        description: "Identify export library to use"
        deliverable: "Library selection (e.g., iTextSharp, EPPlus)"
      
      - task_id: task_0_3
        description: "Plan file organization"
        deliverable: "File structure plan"
  
  - phase_id: phase_1
    phase_name: "Test Infrastructure (RED)"
    duration_estimate_hours: 2.0
    tdd_phase: "RED"
    tasks:
      - task_id: task_1_1
        description: "Create export service unit tests"
        deliverable: "ExportServiceTests.cs (failing tests)"
      
      - task_id: task_1_2
        description: "Create export API integration tests"
        deliverable: "ExportControllerTests.cs (failing tests)"
      
      - task_id: task_1_3
        description: "Create export button UI tests"
        deliverable: "export-button.spec.ts (failing tests)"
  
  - phase_id: phase_2
    phase_name: "Service Layer (GREEN)"
    duration_estimate_hours: 3.0
    tdd_phase: "GREEN"
    tasks:
      - task_id: task_2_1
        description: "Implement export service"
        deliverable: "ExportService.cs (tests passing)"
      
      - task_id: task_2_2
        description: "Register service in DI"
        deliverable: "Program.cs updated"
      
      - task_id: task_2_3
        description: "Refactor service code"
        tdd_phase: "REFACTOR"
        deliverable: "Optimized ExportService.cs (tests still passing)"
  
  - phase_id: phase_3
    phase_name: "API Endpoint (GREEN)"
    duration_estimate_hours: 2.0
    tdd_phase: "GREEN"
    tasks:
      - task_id: task_3_1
        description: "Implement export controller"
        deliverable: "ExportController.cs (tests passing)"
      
      - task_id: task_3_2
        description: "Add authentication"
        deliverable: "Secured endpoint"
      
      - task_id: task_3_3
        description: "Refactor API code"
        tdd_phase: "REFACTOR"
        deliverable: "Optimized controller (tests still passing)"
  
  - phase_id: phase_4
    phase_name: "UI Component (GREEN)"
    duration_estimate_hours: 2.0
    tdd_phase: "GREEN"
    tasks:
      - task_id: task_4_1
        description: "Implement export button component"
        deliverable: "ExportButton.razor (tests passing)"
      
      - task_id: task_4_2
        description: "Add visual feedback (loading state)"
        deliverable: "Enhanced component with UX"
      
      - task_id: task_4_3
        description: "Refactor component code"
        tdd_phase: "REFACTOR"
        deliverable: "Optimized component (tests still passing)"
  
  - phase_id: phase_5
    phase_name: "Integration & Validation"
    duration_estimate_hours: 1.5
    tasks:
      - task_id: task_5_1
        description: "End-to-end testing"
        deliverable: "E2E test passing"
      
      - task_id: task_5_2
        description: "Performance validation"
        deliverable: "Performance metrics acceptable"
      
      - task_id: task_5_3
        description: "Security review"
        deliverable: "Security checklist complete"

risk_assessment:
  - risk: "File generation timeout"
    likelihood: "MEDIUM"
    impact: "HIGH"
    mitigation: "Use async generation with progress updates"
  
  - risk: "Memory issues with large files"
    likelihood: "MEDIUM"
    impact: "HIGH"
    mitigation: "Implement streaming for large datasets"
  
  - risk: "Export format incompatibility"
    likelihood: "LOW"
    impact: "MEDIUM"
    mitigation: "Use well-tested libraries"

architectural_guidance:
  - "Place ExportService.cs in Services/ directory"
  - "Place ExportController.cs in Controllers/API/"
  - "Place ExportButton.razor in Components/"
  - "Follow existing DI patterns in Program.cs"
  - "Use async/await for file generation"
  - "Add proper error handling at each layer"
  - "Include logging for troubleshooting"

acceptance_criteria:
  - "All tests passing (unit, integration, E2E)"
  - "Export generates correct file format"
  - "File downloads successfully"
  - "Loading state shown during generation"
  - "Error states handled gracefully"
  - "Performance acceptable (<5s for typical export)"
  - "Security: only authenticated users can export"

total_duration_estimate_hours: 11.0
confidence_level: 0.95
