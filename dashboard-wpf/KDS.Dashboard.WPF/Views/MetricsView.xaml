<UserControl x:Class="KDS.Dashboard.WPF.Views.MetricsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:viewmodels="clr-namespace:KDS.Dashboard.WPF.ViewModels">
    
    <UserControl.DataContext>
        <viewmodels:MetricsViewModel/>
    </UserControl.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0"
                      Text="Development Metrics" 
                      FontSize="20" 
                      FontWeight="SemiBold"
                      Foreground="{StaticResource TextBrush}"
                      VerticalAlignment="Center"/>
            
            <Button Grid.Column="1"
                    Command="{Binding RefreshMetricsCommand}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    materialDesign:ButtonAssist.CornerRadius="4"
                    Background="{StaticResource PrimaryBrush}"
                    Foreground="White"
                    Padding="16,8">
                <StackPanel Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Refresh" 
                                            Width="20" Height="20"
                                            Margin="0,0,8,0"/>
                    <TextBlock Text="Refresh Metrics" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- Metric Cards -->
        <UniformGrid Grid.Row="1" Rows="1" Columns="3" Margin="0,0,0,16">
            <!-- Commits This Week -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="SourceCommit" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource PrimaryBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Commits This Week" 
                              FontSize="14" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock Text="{Binding CommitsThisWeek}" 
                              FontSize="36" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource PrimaryBrush}"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Lines Added -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="CodeBraces" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Lines Added This Week" 
                              FontSize="14" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock Text="{Binding LinesAddedThisWeek}" 
                              FontSize="36" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource SecondaryBrush}"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Test Pass Rate -->
            <materialDesign:Card Style="{StaticResource ModernCard}">
                <StackPanel>
                    <materialDesign:PackIcon Kind="CheckCircle" 
                                            Width="48" Height="48"
                                            Foreground="{StaticResource AccentBrush}"
                                            HorizontalAlignment="Center"/>
                    <TextBlock Text="Test Pass Rate" 
                              FontSize="14" 
                              TextAlignment="Center"
                              Foreground="{StaticResource TextSecondaryBrush}"
                              Margin="0,16,0,8"/>
                    <TextBlock FontSize="36" 
                              FontWeight="Bold"
                              TextAlignment="Center"
                              Foreground="{StaticResource AccentBrush}">
                        <Run Text="{Binding TestPassRate, StringFormat=N1}"/>
                        <Run Text="%" FontSize="24"/>
                    </TextBlock>
                </StackPanel>
            </materialDesign:Card>
        </UniformGrid>

        <!-- Chart Placeholder -->
        <materialDesign:Card Grid.Row="2" Style="{StaticResource ModernCard}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <materialDesign:PackIcon Kind="ChartLine" 
                                        Width="64" Height="64"
                                        Foreground="{StaticResource TextSecondaryBrush}"/>
                <TextBlock Text="Velocity Chart" 
                          FontSize="16" 
                          FontWeight="SemiBold"
                          Foreground="{StaticResource TextBrush}"
                          Margin="0,16,0,0"/>
                <TextBlock Text="Charts will be implemented in Phase 1" 
                          FontSize="12" 
                          Foreground="{StaticResource TextSecondaryBrush}"
                          Margin="0,8,0,0"/>
            </StackPanel>
        </materialDesign:Card>
    </Grid>
</UserControl>
