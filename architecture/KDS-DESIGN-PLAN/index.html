
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cognitive Operating System for AI Development">
      
      
        <meta name="author" content="CORTEX Team">
      
      
        <link rel="canonical" href="https://asifhussain60.github.io/CORTEX/architecture/KDS-DESIGN-PLAN/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>KDS System Redesign Plan - Complete Overhaul - CORTEX Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kds-system-redesign-plan-complete-overhaul" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CORTEX Documentation" class="md-header__button md-logo" aria-label="CORTEX Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CORTEX Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              KDS System Redesign Plan - Complete Overhaul
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/asifhussain60/CORTEX" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    asifhussain60/CORTEX
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Mind-Palace/2025-11-06/The-Awakening-of-CORTEX/" class="md-tabs__link">
        
  
  
    
  
  ğŸ“– The Awakening of CORTEX

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/quick-start/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Mind-Palace/" class="md-tabs__link">
          
  
  
  ğŸ›ï¸ Mind Palace

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../overview.md" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tiers/tier0-governance/" class="md-tabs__link">
          
  
  
  Tiers

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../agents/overview.md" class="md-tabs__link">
          
  
  
  Agents

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/governance-engine.md" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/contributing.md" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/governance-rules.md" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../technical-styling-examples/" class="md-tabs__link">
          
  
  
  ğŸ¨ Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/github-pages/" class="md-tabs__link">
          
  
  
  ğŸš€ Deployment

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CORTEX Documentation" class="md-nav__button md-logo" aria-label="CORTEX Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CORTEX Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/asifhussain60/CORTEX" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    asifhussain60/CORTEX
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-06/The-Awakening-of-CORTEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ğŸ“– The Awakening of CORTEX
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/configuration.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ğŸ›ï¸ Mind Palace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ğŸ›ï¸ Mind Palace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-06/The-Awakening-of-CORTEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ğŸ“– The Awakening of CORTEX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/QUICK-REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/INTEGRATION-SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/BRAIN-INTEGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Brain Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Legacy - Dr. Asifor Chronicle (Nov 4)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Legacy - Dr. Asifor Chronicle (Nov 4)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-04/Story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Story
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-04/Quick-Start-Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-04/Technical-Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mind-Palace/2025-11-04/Image-Prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../three-tier-brain.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Three-Tier Brain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dual-hemispheres.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dual Hemispheres
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agents.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tiers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tiers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tiers/tier0-governance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 0 - Governance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tiers/tier1-working-memory.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 1 - Working Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tiers/tier2-knowledge-graph.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 2 - Knowledge Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tiers/tier3-context.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 3 - Context Intelligence
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Agents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/overview.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/intent-router.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intent Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/work-planner.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Work Planner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/code-executor.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Executor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/test-generator.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agents/error-corrector.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Corrector
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/governance-engine.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance Engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tier1-api.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 1 API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tier2-api.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 2 API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tier3-api.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tier 3 API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/contributing.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/testing.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ci-cd.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CI/CD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/governance-rules.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance Rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/configuration.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/glossary.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ğŸ¨ Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            ğŸ¨ Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical-styling-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Styling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ğŸš€ Deployment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            ğŸš€ Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/github-pages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Pages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="kds-system-redesign-plan-complete-overhaul">KDS System Redesign Plan - Complete Overhaul<a class="headerlink" href="#kds-system-redesign-plan-complete-overhaul" title="Permanent link">&para;</a></h1>
<p><strong>Version:</strong> 3.0.0<br />
<strong>Date:</strong> 2025-11-02<br />
<strong>Status:</strong> ğŸ¯ DESIGN PHASE<br />
<strong>Author:</strong> System Architect</p>
<hr />
<h2 id="executive-summary">ğŸ“‹ Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">&para;</a></h2>
<h3 id="what-this-plan-does">What This Plan Does<a class="headerlink" href="#what-this-plan-does" title="Permanent link">&para;</a></h3>
<p>This document outlines a <strong>complete redesign</strong> of the Key Data Streams (KDS) system from the ground up. The current system (v2.1.0) has accumulated complexity, rule duplication, and architectural debt. This redesign eliminates all legacy patterns and creates a streamlined, efficient system focused on the core objectives:</p>
<ol>
<li><strong>Context Management</strong> - Efficiently manage Copilot context to build applications</li>
<li><strong>Task Orchestration</strong> - Break features into planned phases/tasks with auto-execution</li>
<li><strong>Test Standardization</strong> - Standardize test orchestration and design patterns</li>
<li><strong>User Feedback Control</strong> - All user responses follow templates (customizable)</li>
<li><strong>Portability</strong> - KDS system portable to ANY application (zero hard-coded dependencies)</li>
</ol>
<h3 id="key-changes-from-v210">Key Changes from v2.1.0<a class="headerlink" href="#key-changes-from-v210" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Old System</th>
<th>New System</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Rule Count</strong></td>
<td>20+ rules across 2 files</td>
<td>12 core rules in single source</td>
</tr>
<tr>
<td><strong>Prompt Files</strong></td>
<td>14 prompts with overlapping logic</td>
<td>6 specialized prompts (zero duplication)</td>
</tr>
<tr>
<td><strong>Governance</strong></td>
<td>Scattered across MANDATORY.md, rulebook.md, handoff-protocol.md</td>
<td>Single governance.md file</td>
</tr>
<tr>
<td><strong>Templates</strong></td>
<td>Embedded in prompts</td>
<td>Centralized /templates folder</td>
</tr>
<tr>
<td><strong>Test Registry</strong></td>
<td>KDS/test-registry/ with complex KDTR</td>
<td>Simplified KDS/tests/index.json</td>
</tr>
<tr>
<td><strong>Handoff Protocol</strong></td>
<td>Complex JSON schemas with 10+ fields</td>
<td>Simplified 5-field schema</td>
</tr>
<tr>
<td><strong>Documentation</strong></td>
<td>50+ instruction files</td>
<td>10 essential references</td>
</tr>
</tbody>
</table>
<h3 id="design-philosophy">Design Philosophy<a class="headerlink" href="#design-philosophy" title="Permanent link">&para;</a></h3>
<p><strong>Portability First</strong>
- ZERO hard-coded paths, URLs, or application-specific logic in core prompts
- Configuration-driven design (kds.config.json defines all app-specific details)
- Database-agnostic patterns (SQL Server, PostgreSQL, SQLite via config)
- Test framework abstraction (Playwright, Cypress, Selenium via config)
- Framework-agnostic (Blazor, React, Vue, Angular via config)</p>
<p><strong>Simplicity Over Completeness</strong>
- Every rule must justify its existence (remove "nice to have" rules)
- Every prompt must have unique responsibility (no role overlap)
- Every file must be necessary (ruthless elimination)</p>
<p><strong>Template-Driven Output</strong>
- All user responses use markdown templates
- Templates stored in KDS/templates/
- Prompts load templates, fill variables, output to user
- User can customize templates without touching prompts</p>
<p><strong>Zero Duplication</strong>
- Shared logic extracted to /core modules
- Prompts reference core modules (never copy-paste)
- Single source of truth for each concept</p>
<p><strong>Test-First Always</strong>
- Every task generates test BEFORE implementation
- Test orchestration built into workflow (framework-agnostic)
- Test patterns reused automatically</p>
<hr />
<h2 id="new-directory-structure">ğŸ—ï¸ New Directory Structure<a class="headerlink" href="#new-directory-structure" title="Permanent link">&para;</a></h2>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>KDS/
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>â”œâ”€â”€ kds.config.json              # ğŸ”‘ PORTABILITY CONFIG (app-specific settings)
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>â”‚
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>â”œâ”€â”€ governance/
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>â”‚   â””â”€â”€ kds-rulebook.md          # SINGLE source of truth (12 rules)
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>â”‚
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>â”œâ”€â”€ prompts/
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>â”‚   â”œâ”€â”€ core/                    # Shared prompt logic (referenced, not duplicated)
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>â”‚   â”‚   â”œâ”€â”€ validation.md        # Validation patterns
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>â”‚   â”‚   â”œâ”€â”€ handoff.md           # Handoff workflow
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>â”‚   â”‚   â”œâ”€â”€ test-first.md        # TDD workflow
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>â”‚   â”‚   â””â”€â”€ config-loader.md     # ğŸ”‘ PORTABILITY: Load kds.config.json
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>â”‚   â”‚
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>â”‚   â”œâ”€â”€ route.prompt.md          # Entry point - routes to specialists
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>â”‚   â”œâ”€â”€ plan.prompt.md           # Planning orchestrator
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>â”‚   â”œâ”€â”€ execute.prompt.md        # Execution engine (replaces task/todo)
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>â”‚   â”œâ”€â”€ test.prompt.md           # Test generation &amp; orchestration
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>â”‚   â”œâ”€â”€ validate.prompt.md       # Healthcheck &amp; validation
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>â”‚   â””â”€â”€ govern.prompt.md         # Governance gatekeeper
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>â”‚
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>â”œâ”€â”€ schemas/                     # ğŸ”‘ PORTABILITY: Validation schemas
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>â”‚   â”œâ”€â”€ handoffs/                # Handoff JSON schemas
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>â”‚   â”‚   â”œâ”€â”€ handoff-schema.json  # Base handoff schema
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>â”‚   â”‚   â”œâ”€â”€ plan-handoff.json    # Plan-specific handoff
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>â”‚   â”‚   â”œâ”€â”€ execute-handoff.json # Execute-specific handoff
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>â”‚   â”‚   â”œâ”€â”€ test-handoff.json    # Test-specific handoff
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>â”‚   â”‚   â””â”€â”€ validate-handoff.json# Validate-specific handoff
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>â”‚   â”‚
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>â”‚   â””â”€â”€ outputs/                 # Output validation schemas
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>â”‚       â”œâ”€â”€ plan-output.xsd      # Plan output schema
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>â”‚       â”œâ”€â”€ task-output.xsd      # Task output schema
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>â”‚       â”œâ”€â”€ test-output.xsd      # Test output schema
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>â”‚       â””â”€â”€ validation-result.xsd# Validation result schema
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>â”‚
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>â”œâ”€â”€ templates/
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>â”‚   â”œâ”€â”€ user-output/             # Response templates
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>â”‚   â”‚   â”œâ”€â”€ plan-complete.md     # Plan approval output
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>â”‚   â”‚   â”œâ”€â”€ phase-complete.md    # Phase completion output
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>â”‚   â”‚   â”œâ”€â”€ task-complete.md     # Task completion output
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>â”‚   â”‚   â”œâ”€â”€ test-ready.md        # Test generation output
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>â”‚   â”‚   â””â”€â”€ error.md             # Error reporting output
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>â”‚   â”‚
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>â”‚   â””â”€â”€ handoffs/                # Handoff JSON templates
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>â”‚       â”œâ”€â”€ plan-to-execute.json
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>â”‚       â”œâ”€â”€ execute-to-test.json
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>â”‚       â””â”€â”€ test-to-validate.json
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>â”‚
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>â”œâ”€â”€ services/                    # ğŸ”‘ PORTABILITY: Abstraction services
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>â”‚   â”œâ”€â”€ schema-validator.cs      # JSON/XML schema validation service
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>â”‚   â”œâ”€â”€ template-engine.cs       # Mustache template rendering
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>â”‚   â”œâ”€â”€ test-orchestrator.cs     # Framework-agnostic test runner
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>â”‚   â””â”€â”€ config-service.cs        # kds.config.json loader
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>â”‚
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>â”œâ”€â”€ keys/
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>â”‚   â””â”€â”€ {key-name}/              # Work stream data
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>â”‚       â”œâ”€â”€ plan.md              # Current plan
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>â”‚       â”œâ”€â”€ work-log.md          # Append-only activity log
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>â”‚       â””â”€â”€ handoffs/            # Active handoff files
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>â”‚
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>â”œâ”€â”€ tests/
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>â”‚   â”œâ”€â”€ index.json               # Global test registry (simplified)
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>â”‚   â””â”€â”€ patterns/                # Reusable test patterns
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>â”‚       â””â”€â”€ {pattern-name}.json
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>â”‚
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>â”œâ”€â”€ docs/
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>â”‚   â”œâ”€â”€ architecture.md          # System architecture reference
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>â”‚   â”œâ”€â”€ database.md              # Database schema &amp; session data
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>â”‚   â”œâ”€â”€ api-contracts.md         # API endpoints &amp; contracts
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>â”‚   â”œâ”€â”€ testing-guide.md         # Test writing guide (framework-agnostic)
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>â”‚   â”œâ”€â”€ portability-guide.md     # ğŸ”‘ PORTABILITY: How to port KDS
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>â”‚   â””â”€â”€ quick-start.md           # Getting started guide
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>â”‚
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>â””â”€â”€ README.md                    # System overview &amp; invocation guide
</span></code></pre></div>
<p><strong>Total Files in KDS: ~40</strong> (down from 150+)</p>
<hr />
<h2 id="core-design-principles">ğŸ¯ Core Design Principles<a class="headerlink" href="#core-design-principles" title="Permanent link">&para;</a></h2>
<h3 id="principle-0-portability-through-configuration">Principle 0: Portability Through Configuration<a class="headerlink" href="#principle-0-portability-through-configuration" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Hard-coded paths, URLs, test commands make KDS unusable for other projects</p>
<p><strong>Solution:</strong> All app-specific details in kds.config.json</p>
<p><strong>Configuration Structure:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NoorCanvas&quot;</span><span class="p">,</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Blazor&quot;</span><span class="p">,</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.NET 8.0&quot;</span><span class="p">,</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nt">&quot;rootPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;D:\\PROJECTS\\NOOR CANVAS&quot;</span><span class="p">,</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">&quot;spaPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SPA/NoorCanvas&quot;</span><span class="p">,</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">&quot;testPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tests/UI&quot;</span><span class="p">,</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">&quot;buildCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dotnet build&quot;</span><span class="p">,</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">&quot;runCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dotnet run&quot;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">  </span><span class="nt">&quot;testing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Playwright&quot;</span><span class="p">,</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="nt">&quot;configPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;config/testing/playwright.config.cjs&quot;</span><span class="p">,</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="nt">&quot;orchestrationPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v3.0-direct-dotnet&quot;</span><span class="p">,</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="nt">&quot;orchestrationScript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Scripts/Start-NoorCanvasForTests.ps1&quot;</span><span class="p">,</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">    </span><span class="nt">&quot;healthCheckUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://localhost:9091&quot;</span><span class="p">,</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="nt">&quot;healthCheckTimeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="nt">&quot;testCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npx playwright test&quot;</span><span class="p">,</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="nt">&quot;headlessDefault&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">  </span><span class="nt">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">    </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SQL Server&quot;</span><span class="p">,</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="nt">&quot;connectionStringKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DefaultConnection&quot;</span><span class="p">,</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">    </span><span class="nt">&quot;testSessionId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">212</span><span class="p">,</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">    </span><span class="nt">&quot;testHostToken&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PQ9N5YWW&quot;</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">  </span><span class="nt">&quot;governance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">    </span><span class="nt">&quot;autoChainTasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">    </span><span class="nt">&quot;autoChainPhases&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">    </span><span class="nt">&quot;requireBuildValidation&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">    </span><span class="nt">&quot;requireGitValidation&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">    </span><span class="nt">&quot;testQualityThreshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Prompts Use Config:</strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>&lt;!-- execute.prompt.md --&gt;
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="gu">## Step 2: Load Configuration</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>&lt;!-- INCLUDE: core/config-loader.md --&gt;
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>Variables available:
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="k">-</span><span class="w"> </span>{{APP_ROOT}} = config.application.rootPath
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="k">-</span><span class="w"> </span>{{BUILD_CMD}} = config.application.buildCommand
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="k">-</span><span class="w"> </span>{{TEST_FRAMEWORK}} = config.testing.framework
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="k">-</span><span class="w"> </span>{{HEALTH_URL}} = config.testing.healthCheckUrl
</span></code></pre></div>
<p><strong>Portability Workflow:</strong></p>
<ol>
<li>Copy KDS folder to new project</li>
<li>Update kds.config.json (5 minutes)</li>
<li>KDS system fully operational</li>
</ol>
<p><strong>Zero Hard-Coding Examples:</strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>&lt;!-- BEFORE (v2.1.0): Hard-coded --&gt;
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>cd &quot;D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas&quot;
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>dotnet build
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>npx playwright test --config=config/testing/playwright.config.cjs
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>&lt;!-- AFTER (v3.0): Config-driven --&gt;
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>cd &quot;{{APP_ROOT}}/{{SPA_PATH}}&quot;
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>{{BUILD_CMD}}
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>{{TEST_CMD}} --config={{TEST_CONFIG_PATH}}
</span></code></pre></div>
<h3 id="principle-1-single-responsibility-prompts">Principle 1: Single Responsibility Prompts<a class="headerlink" href="#principle-1-single-responsibility-prompts" title="Permanent link">&para;</a></h3>
<p>Each prompt has ONE job:</p>
<table>
<thead>
<tr>
<th>Prompt</th>
<th>Responsibility</th>
<th>Never Does</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>route.prompt.md</strong></td>
<td>Analyze request â†’ route to specialist</td>
<td>Execute tasks, create plans</td>
</tr>
<tr>
<td><strong>plan.prompt.md</strong></td>
<td>Create phases/tasks â†’ generate handoffs</td>
<td>Execute code, run tests</td>
</tr>
<tr>
<td><strong>execute.prompt.md</strong></td>
<td>Implement code â†’ update files</td>
<td>Create plans, generate tests</td>
</tr>
<tr>
<td><strong>test.prompt.md</strong></td>
<td>Generate &amp; run tests â†’ validate</td>
<td>Implement features, create plans</td>
</tr>
<tr>
<td><strong>validate.prompt.md</strong></td>
<td>Check system health â†’ report issues</td>
<td>Fix issues, execute tasks</td>
</tr>
<tr>
<td><strong>govern.prompt.md</strong></td>
<td>Review KDS changes â†’ approve/reject</td>
<td>Modify code, create features</td>
</tr>
</tbody>
</table>
<h3 id="principle-2-template-driven-user-output">Principle 2: Template-Driven User Output<a class="headerlink" href="#principle-2-template-driven-user-output" title="Permanent link">&para;</a></h3>
<p><strong>Problem in v2.1.0:</strong> User-facing text embedded in prompts (hard to customize)</p>
<p><strong>Solution:</strong> All output uses templates</p>
<p><strong>Example Workflow:</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>User: @workspace /plan key=feature-x request=&quot;Add user dashboard&quot;
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>1. plan.prompt.md creates phases/tasks
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>2. Loads template: KDS/templates/user-output/plan-complete.md
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>3. Fills variables: {{key}}, {{phases}}, {{tasks}}, {{nextCommand}}
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>4. Outputs filled template to user
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>5. User can edit template later without touching prompt
</span></code></pre></div>
<p><strong>Template Structure:</strong></p>
<p><div class="language-markdown highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&lt;!-- KDS/templates/user-output/plan-complete.md --&gt;
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="gu">## âœ… Plan Complete | Key: `{{key}}`</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="gs">**Phases:**</span> {{phaseCount}}  
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="gs">**Tasks:**</span> {{taskCount}}  
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="gs">**Estimated Duration:**</span> {{estimatedDuration}}
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="gu">### Phase Breakdown</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>{{#phases}}
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="gs">**Phase {{number}}: {{title}}**</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Tasks:**</span> {{taskCount}}
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Tests:**</span> {{testCount}}
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Duration:**</span> {{duration}}
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>{{/phases}}
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="gu">### ğŸ“‹ Next Command</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>{{#autoChainEnabled}}
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="gs">**OPTION A: Execute All Phases (E2E Mode)**</span> âœ… RECOMMENDED
</span></code></pre></div>
@workspace /execute #file:KDS/keys/{{key}}/handoffs/phase-1.json
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Auto-continues through all phases. Ctrl+C to stop.
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>**OPTION B: Execute Phase-by-Phase**
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Start with Phase 1, manual approval after each phase.
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>{{/autoChainEnabled}}
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>---
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>**Handoff Created:** `KDS/keys/{{key}}/handoffs/phase-1.json`
</span></code></pre></div></p>
<h3 id="principle-3-core-modules-zero-duplication">Principle 3: Core Modules (Zero Duplication)<a class="headerlink" href="#principle-3-core-modules-zero-duplication" title="Permanent link">&para;</a></h3>
<p><strong>Problem in v2.1.0:</strong> Step 0, Step -1, validation logic copied across 14 prompts</p>
<p><strong>Solution:</strong> Extract to /core modules, prompts reference them</p>
<p><strong>Core Modules:</strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>&lt;!-- KDS/prompts/core/validation.md --&gt;
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="gh"># Validation Workflow</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="gu">## Pre-Execution Validation</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="k">1.</span> Check build status (must be clean)
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">2.</span> Check git status (no uncommitted critical changes)
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="k">3.</span> Check environment (database accessible, services running)
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="gu">## Post-Execution Validation</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="k">1.</span> Run build (must succeed with zero errors)
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="k">2.</span> Run tests (must pass all acceptance criteria)
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="k">3.</span> Update work-log.md (append session entry)
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="gs">**Usage in Prompts:**</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>Include this module: <span class="sb">`&lt;!-- INCLUDE: core/validation.md --&gt;`</span>
</span></code></pre></div>
<p><strong>Prompts Reference Core Modules:</strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>&lt;!-- plan.prompt.md --&gt;
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="gu">## Step 3: Validate Environment</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>&lt;!-- INCLUDE: core/validation.md#Pre-Execution-Validation --&gt;
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="gu">## Step 8: Validate Results</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>&lt;!-- INCLUDE: core/validation.md#Post-Execution-Validation --&gt;
</span></code></pre></div>
<h3 id="principle-4-simplified-handoff-protocol">Principle 4: Simplified Handoff Protocol<a class="headerlink" href="#principle-4-simplified-handoff-protocol" title="Permanent link">&para;</a></h3>
<p><strong>Problem in v2.1.0:</strong> Handoff JSONs have 15+ fields, confusing, hard to maintain</p>
<p><strong>Solution:</strong> 5-field schema, all prompts use same structure</p>
<p><strong>New Handoff Schema:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string - KDS key identifier&quot;</span><span class="p">,</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;plan | execute | test | validate | govern&quot;</span><span class="p">,</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="nt">&quot;phase&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number - current phase (optional)&quot;</span><span class="p">,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">  </span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string - task identifier (optional)&quot;</span><span class="p">,</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string - what this handoff accomplishes&quot;</span><span class="p">,</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;array - files to modify&quot;</span><span class="p">],</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="nt">&quot;tests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;array - tests to run&quot;</span><span class="p">],</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="nt">&quot;acceptance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;array - acceptance criteria&quot;</span><span class="p">],</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="nt">&quot;next&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string - next handoff file or &#39;complete&#39;&quot;</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Example:</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user-dashboard&quot;</span><span class="p">,</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;execute&quot;</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="nt">&quot;phase&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">  </span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1a&quot;</span><span class="p">,</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Create UserDashboard.razor component&quot;</span><span class="p">,</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;SPA/NoorCanvas/Components/UserDashboard.razor&quot;</span><span class="p">],</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="nt">&quot;tests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Tests/UI/user-dashboard.spec.ts&quot;</span><span class="p">],</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="nt">&quot;acceptance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">      </span><span class="s2">&quot;Component loads with valid session&quot;</span><span class="p">,</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">      </span><span class="s2">&quot;Displays user name and session data&quot;</span><span class="p">,</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">      </span><span class="s2">&quot;Handles invalid session gracefully&quot;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">    </span><span class="p">],</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="nt">&quot;next&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;KDS/keys/user-dashboard/handoffs/phase-1-task-2.json&quot;</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h2 id="governance-redesign-12-core-rules">ğŸ“œ Governance Redesign (12 Core Rules)<a class="headerlink" href="#governance-redesign-12-core-rules" title="Permanent link">&para;</a></h2>
<h3 id="all-20-kdsmd-rules-captured-consolidated">All 20 KDS.md Rules Captured &amp; Consolidated<a class="headerlink" href="#all-20-kdsmd-rules-captured-consolidated" title="Permanent link">&para;</a></h3>
<p><strong>Rule Mapping from KDS.md:</strong></p>
<table>
<thead>
<tr>
<th>KDS.md Rule</th>
<th>v3.0 Rule</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule #1: Concise Format</td>
<td>Rule #1: Template-Driven Output</td>
<td>âœ… Enhanced</td>
</tr>
<tr>
<td>Rule #2: Document First</td>
<td>Rule #2: Document First</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #2b: Test Metadata</td>
<td>Rule #3: Test-First Always</td>
<td>âœ… Merged</td>
</tr>
<tr>
<td>Rule #3: Playwright Orchestration</td>
<td>Rule #11: Test Orchestration</td>
<td>âœ… Enhanced</td>
</tr>
<tr>
<td>Rule #4: Per-Task Handoffs</td>
<td>Rule #4: Honest Handoffs</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #5: TDD</td>
<td>Rule #3: Test-First Always</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #6: Auto-Chain Defaults</td>
<td>Rule #12: Auto-Chain by Default</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #7: Central Test Index</td>
<td>Rule #10: Test Pattern Reuse</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #8: Holistic Regeneration</td>
<td>Rule #8: Holistic Regeneration</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #9: Plan Conflict Detection</td>
<td>Rule #2: Document First (Step -1)</td>
<td>âœ… Merged</td>
</tr>
<tr>
<td>Rule #10: KDS Gatekeeper</td>
<td>Rule #6: Governance Enforcement</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #11: Key Display</td>
<td>Rule #9: Key Visibility</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #12: Honest Handoffs</td>
<td>Rule #4: Honest Handoffs</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #13: Phase Chat Isolation</td>
<td>N/A</td>
<td>âŒ User preference</td>
</tr>
<tr>
<td>Rule #14: Build Validation</td>
<td>Rule #7: Zero Build Errors</td>
<td>âœ… Preserved</td>
</tr>
<tr>
<td>Rule #15: Git History Validation</td>
<td>Rule #2: Document First (pre-check)</td>
<td>âœ… Merged</td>
</tr>
<tr>
<td>Rule #16: Test Quality Gate</td>
<td>Rule #11: Test Orchestration</td>
<td>âœ… Merged</td>
</tr>
<tr>
<td>Rule #17: Screenshot Tests</td>
<td>Rule #11: Test Orchestration</td>
<td>âœ… Merged</td>
</tr>
<tr>
<td>Rule #18: Router Exemption</td>
<td>N/A</td>
<td>âŒ Implementation detail</td>
</tr>
<tr>
<td>Rule #19: Dual Rulebook Sync</td>
<td>N/A</td>
<td>âŒ Single governance file</td>
</tr>
<tr>
<td>Rule #20: KDTR Enforcement</td>
<td>Rule #10: Test Pattern Reuse</td>
<td>âœ… Simplified</td>
</tr>
<tr>
<td><strong>NEW</strong></td>
<td><strong>Rule #13: Documentation Organization</strong></td>
<td>âœ… <strong>NEW - Prevents root clutter</strong></td>
</tr>
</tbody>
</table>
<h3 id="new-13-core-rules-was-12">New 13 Core Rules (was 12)<a class="headerlink" href="#new-13-core-rules-was-12" title="Permanent link">&para;</a></h3>
<h4 id="rule-1-template-driven-output">Rule #1: Template-Driven Output<a class="headerlink" href="#rule-1-template-driven-output" title="Permanent link">&para;</a></h4>
<p>All user-facing responses MUST use templates from <code>KDS/templates/user-output/</code>.</p>
<p><strong>Captures KDS.md Rule #1:</strong> Concise Format (templates enforce 3-line bullets, CAPS options)</p>
<p><strong>Template Variables:</strong>
- <code>{{key}}</code> - Active KDS key
- <code>{{nextCommand}}</code> - Next invocation command
- <code>{{options}}</code> - CAPS OPTIONS (OPTION A, OPTION B)</p>
<h4 id="rule-2-document-first">Rule #2: Document First<a class="headerlink" href="#rule-2-document-first" title="Permanent link">&para;</a></h4>
<p>Update KDS files BEFORE code changes. Docs commit before implementation commit.</p>
<p><strong>Captures KDS.md Rules #2, #9, #15:</strong>
- Pre-flight validation: Check for plan conflicts (Rule #9)
- Git history analysis: Ensure doc updates precede code (Rule #15)
- Update plan.md, work-log.md BEFORE executing tasks</p>
<p><strong>Pre-Execution Checklist:</strong>
1. Load existing plan.md (detect conflicts)
2. Analyze git log (ensure no code-before-docs violations)
3. Update plan.md with new tasks
4. Commit plan changes
5. THEN execute implementation</p>
<h4 id="rule-3-test-first-always">Rule #3: Test-First Always<a class="headerlink" href="#rule-3-test-first-always" title="Permanent link">&para;</a></h4>
<p>Every task generates test BEFORE implementation (red-green-refactor).</p>
<p><strong>Captures KDS.md Rules #5, #2b:</strong>
- TDD workflow: Red (failing test) â†’ Green (implementation) â†’ Refactor
- Test metadata: All UI/API test files include PLAYWRIGHT TEST METADATA header
- Task 1a always = test generation
- Tasks 1b-n = implementation to make test pass</p>
<p><strong>Test Metadata Format:</strong>
<div class="language-typescript highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cm">/**</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="cm"> * PLAYWRIGHT TEST METADATA</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cm"> * Test Name: {name}</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cm"> * Feature: {feature}</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="cm"> * Session: {sessionId}</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cm"> * Orchestration: {scriptPath}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cm"> * Pattern: {patternId}</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="cm"> */</span>
</span></code></pre></div></p>
<h4 id="rule-4-honest-handoffs">Rule #4: Honest Handoffs<a class="headerlink" href="#rule-4-honest-handoffs" title="Permanent link">&para;</a></h4>
<p>Agents never auto-execute. All handoffs require user invocation (JSON + Next Command + HALT).</p>
<p><strong>Captures KDS.md Rules #4, #12:</strong>
- Per-task handoffs: Dedicated JSON per task (Rule #4)
- Honest handoffs: JSON + Next Command + HALT (Rule #12)
- Exception: Auto-chain within phases when governance.autoChainTasks = true</p>
<p><strong>Handoff Output:</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>âœ… Task 1a Complete
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="gs">**Next Command:**</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="ni">@workspace</span> /execute <span class="ni">#file:KDS/keys/</span>{key}/handoffs/phase-1-task-2.json
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="gs">**Auto-Chain:**</span> Enabled (5s countdown)
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>OPTION A: CONTINUE âœ… RECOMMENDED
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>OPTION B: HALT (Ctrl+C)
</span></code></pre></div></p>
<h4 id="rule-5-single-source-of-truth">Rule #5: Single Source of Truth<a class="headerlink" href="#rule-5-single-source-of-truth" title="Permanent link">&para;</a></h4>
<p>Core logic in <code>/core</code> modules. Prompts reference, never duplicate.</p>
<p><strong>Eliminates:</strong>
- ~180 lines of duplicate Step 0 / Step -1 logic across 14 prompts
- Validation patterns copied across plan/task/todo prompts
- Handoff protocol repeated in multiple files</p>
<p><strong>Core Modules:</strong>
- <code>core/validation.md</code> - Pre/post execution validation
- <code>core/handoff.md</code> - Handoff workflow
- <code>core/test-first.md</code> - TDD patterns
- <code>core/config-loader.md</code> - kds.config.json loading</p>
<h4 id="rule-6-governance-enforcement">Rule #6: Governance Enforcement<a class="headerlink" href="#rule-6-governance-enforcement" title="Permanent link">&para;</a></h4>
<p>All <code>KDS</code> changes go through govern.prompt.md for compatibility analysis.</p>
<p><strong>Captures KDS.md Rule #10:</strong> KDS Gatekeeper</p>
<p><strong>Governance Workflow:</strong>
1. User requests KDS modification
2. Router detects <code>KDS</code> in file path â†’ Route to govern.prompt.md
3. govern.prompt.md analyzes compatibility
4. APPROVED â†’ Generate implementation handoff
5. REJECTED â†’ Explain violation, suggest alternatives</p>
<h4 id="rule-7-zero-build-errors">Rule #7: Zero Build Errors<a class="headerlink" href="#rule-7-zero-build-errors" title="Permanent link">&para;</a></h4>
<p>Build must succeed with zero errors after task/phase completion.</p>
<p><strong>Captures KDS.md Rule #14:</strong> Build Validation</p>
<p><strong>Post-Task Validation:</strong>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c"># Execute build</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">{{</span><span class="n">BUILD_CMD</span><span class="p">}}</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c"># Check exit code</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="k">if</span> <span class="p">(</span><span class="nv">$LASTEXITCODE</span> <span class="o">-ne</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>  <span class="n">HALT</span> <span class="p">-</span> <span class="n">Build</span> <span class="n">failed</span> <span class="n">with</span> <span class="p">{{</span><span class="n">ERROR_COUNT</span><span class="p">}}</span> <span class="n">errors</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>  <span class="n">Analyze</span> <span class="n">errors</span> <span class="err">â†’</span> <span class="n">Create</span> <span class="n">fix</span> <span class="n">handoff</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="rule-8-holistic-regeneration">Rule #8: Holistic Regeneration<a class="headerlink" href="#rule-8-holistic-regeneration" title="Permanent link">&para;</a></h4>
<p>When updating plans, DELETE and RECREATE entire file (no partial edits).</p>
<p><strong>Captures KDS.md Rule #8:</strong> Holistic Regeneration</p>
<p><strong>Rationale:</strong> Prevents orphaned sections, ensures consistency</p>
<p><strong>Pattern:</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>&lt;!-- WRONG: Partial edit --&gt;
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>Add Task 1d to existing plan (risk of orphaned tasks)
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>&lt;!-- CORRECT: Full regeneration --&gt;
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="k">1.</span> Load plan.md
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">2.</span> Parse phases/tasks
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">3.</span> Add new task
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="k">4.</span> DELETE plan.md
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="k">5.</span> RECREATE plan.md from scratch
</span></code></pre></div></p>
<h4 id="rule-9-key-visibility">Rule #9: Key Visibility<a class="headerlink" href="#rule-9-key-visibility" title="Permanent link">&para;</a></h4>
<p>Display active key in all headers and output.</p>
<p><strong>Captures KDS.md Rule #11:</strong> Key Display</p>
<p><strong>Template Enforcement:</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>&lt;!-- All templates include --&gt;
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="gu">## âœ… {Action} Complete | Key: `{{key}}`</span>
</span></code></pre></div></p>
<p><strong>Command Output:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Next Command:
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>@workspace /execute key={{key}} #file:KDS/keys/{{key}}/handoffs/...
</span></code></pre></div></p>
<h4 id="rule-10-test-pattern-reuse">Rule #10: Test Pattern Reuse<a class="headerlink" href="#rule-10-test-pattern-reuse" title="Permanent link">&para;</a></h4>
<p>Check <code>KDS/tests/index.json</code> BEFORE creating new tests.</p>
<p><strong>Captures KDS.md Rules #7, #20:</strong> Central Test Index + KDTR Enforcement</p>
<p><strong>Test Generation Workflow:</strong>
1. Query test registry: "authentication flow"
2. IF pattern found â†’ Reuse (copy &amp; customize)
3. IF no pattern â†’ Generate new test
4. IF test PASSED â†’ Publish pattern to registry</p>
<p><strong>Simplified Registry (vs complex KDTR):</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nt">&quot;tests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;auth-flow&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authentication&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tests/UI/auth.spec.ts&quot;</span><span class="p">}</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="rule-11-test-orchestration">Rule #11: Test Orchestration<a class="headerlink" href="#rule-11-test-orchestration" title="Permanent link">&para;</a></h4>
<p>Tests use framework-agnostic orchestration (config-driven).</p>
<p><strong>Captures KDS.md Rules #3, #16, #17:</strong> Playwright Orchestration + Test Quality + Screenshot Tests</p>
<p><strong>Config-Driven Orchestration:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">// kds.config.json defines orchestration pattern</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="p">{</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="nt">&quot;testing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Playwright&quot;</span><span class="p">,</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="nt">&quot;orchestrationPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v3.0-direct-dotnet&quot;</span><span class="p">,</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="nt">&quot;orchestrationScript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ORCHESTRATION_SCRIPT}}&quot;</span><span class="p">,</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">    </span><span class="nt">&quot;testQualityThreshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Test Quality Gate (0-100 scoring):</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>Test Quality Score: 85/100
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">-</span><span class="w"> </span>Coverage: 90% âœ…
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">-</span><span class="w"> </span>Assertions: 80% âœ…
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">-</span><span class="w"> </span>Edge Cases: 70% âš ï¸
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">-</span><span class="w"> </span>Screenshot Tests: 95% âœ…
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>PASSED (threshold: 70)
</span></code></pre></div></p>
<p><strong>Screenshot Tests (Vision Analysis):</strong>
<div class="language-typescript highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// test.prompt.md generates vision analysis tests</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;#share-btn&#39;</span><span class="p">)).</span><span class="nx">toHaveScreenshot</span><span class="p">(</span><span class="s1">&#39;share-button.png&#39;</span><span class="p">);</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="c1">// Vision model analyzes: gradient, positioning, z-index</span>
</span></code></pre></div></p>
<h4 id="rule-12-auto-chain-by-default">Rule #12: Auto-Chain by Default<a class="headerlink" href="#rule-12-auto-chain-by-default" title="Permanent link">&para;</a></h4>
<p>Tasks auto-chain within phases. Phases require user approval unless E2E mode.</p>
<p><strong>Captures KDS.md Rule #6:</strong> Auto-Chain Defaults</p>
<p><strong>Configuration:</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="p">{</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nt">&quot;governance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&quot;autoChainTasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">   </span><span class="c1">// Tasks auto-continue (5s countdown)</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">&quot;autoChainPhases&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="c1">// Phases require approval</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>E2E Mode Override:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>@workspace /execute key=feature-x mode=e2e
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a># Auto-continues through ALL phases without approval
</span></code></pre></div></p>
<hr />
<h4 id="rule-13-documentation-organization-new">Rule #13: Documentation Organization (NEW)<a class="headerlink" href="#rule-13-documentation-organization-new" title="Permanent link">&para;</a></h4>
<p>NO *.md files allowed in <code>KDS/</code> root. All documentation MUST be organized under <code>KDS/docs/</code> hierarchy.</p>
<p><strong>Rationale:</strong> Prevents root folder clutter, enforces logical organization, ensures discoverability</p>
<p><strong>Allowed in Root:</strong>
- <code>kds.config.json</code> (configuration)
- <code>README.md</code> (ONLY exception - system entry point)</p>
<p><strong>Required Structure:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>KDS/
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>â”œâ”€â”€ README.md                    âœ… ONLY .md file in root
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>â”œâ”€â”€ kds.config.json              âœ… Config file
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>â”œâ”€â”€ docs/                        âœ… All other docs here
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>â”‚   â”œâ”€â”€ architecture/
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>â”‚   â”œâ”€â”€ database/
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>â”‚   â”œâ”€â”€ api/
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>â”‚   â”œâ”€â”€ testing/
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>â”‚   â””â”€â”€ guides/
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>â””â”€â”€ [other folders]
</span></code></pre></div></p>
<p><strong>Violations:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>âŒ KDS/KDS-DESIGN-PLAN.md          â†’ Move to docs/architecture/
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>âŒ KDS/QUICK-REFERENCE.md            â†’ Move to docs/guides/
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>âŒ KDS/PHASE-0-COMPLETE.md           â†’ Move to docs/guides/
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>âŒ KDS/KDS-V3-IMPLEMENTATION-PLAN.md â†’ Move to docs/architecture/
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>âŒ KDS/DIRECTORY-STRUCTURE.md        â†’ Already in docs/ âœ…
</span></code></pre></div></p>
<p><strong>Post-Request Cleanup (MANDATORY):</strong></p>
<p>Every request completion MUST include:</p>
<p><strong>Step 1: Scan for violations</strong>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nb">Get-ChildItem</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS\*.md&quot;</span> <span class="n">-Exclude</span> <span class="s2">&quot;README.md&quot;</span>
</span></code></pre></div></p>
<p><strong>Step 2: Move violations to docs/</strong>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c"># Example moves:</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nb">Move-Item</span> <span class="s2">&quot;KDS/KDS-DESIGN-PLAN.md&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;KDS/docs/architecture/&quot;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nb">Move-Item</span> <span class="s2">&quot;KDS/QUICK-REFERENCE.md&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;KDS/docs/guides/&quot;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="nb">Move-Item</span> <span class="s2">&quot;KDS/PHASE-0-COMPLETE.md&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;KDS/docs/guides/&quot;</span>
</span></code></pre></div></p>
<p><strong>Step 3: Update cross-references</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>&lt;!-- BEFORE --&gt;
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>See [<span class="nt">KDS-DESIGN-PLAN.md</span>](<span class="na">KDS-DESIGN-PLAN.md</span>)
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>&lt;!-- AFTER --&gt;
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>See [<span class="nt">KDS-DESIGN-PLAN.md</span>](<span class="na">docs/architecture/KDS-DESIGN-PLAN.md</span>)
</span></code></pre></div></p>
<p><strong>Step 4: Validate cleanup</strong>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nv">$violations</span> <span class="p">=</span> <span class="nb">Get-ChildItem</span> <span class="s2">&quot;KDS\*.md&quot;</span> <span class="n">-Exclude</span> <span class="s2">&quot;README.md&quot;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="k">if</span> <span class="p">(</span><span class="nv">$violations</span><span class="p">.</span><span class="n">Count</span> <span class="o">-gt</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>  <span class="nb">Write-Error</span> <span class="s2">&quot;Documentation organization violated - </span><span class="p">$(</span><span class="nv">$violations</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2"> files in root&quot;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>  <span class="n">HALT</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Integration with validate.prompt.md:</strong></p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="gu">## Step 5: Documentation Organization Check</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>Scan for .md files in KDS root (excluding README.md)
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>IF violations found:
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>  Generate violation report with suggested destinations
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>  Create cleanup handoff JSON
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>  HALT with error
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>ELSE:
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>  âœ… Documentation properly organized
</span></code></pre></div>
<hr />
<h3 id="eliminated-rules-merged-or-removed">Eliminated Rules (Merged or Removed)<a class="headerlink" href="#eliminated-rules-merged-or-removed" title="Permanent link">&para;</a></h3>
<p><strong>Removed:</strong>
- ~~Rule #13 (Phase Chat Isolation)~~ â†’ User preference, not enforceable by prompts
- ~~Rule #18 (Router Exemption)~~ â†’ Implementation detail, not governance rule
- ~~Rule #19 (Dual Rulebook Sync)~~ â†’ Single governance file eliminates need</p>
<p><strong>Merged:</strong>
- Rule #2b (Test Metadata) â†’ Merged into Rule #3 (Test-First)
- Rule #9 (Plan Conflict Detection) â†’ Merged into Rule #2 (Document First)
- Rule #15 (Git History Validation) â†’ Merged into Rule #2 (Document First)
- Rule #16 (Test Quality Gate) â†’ Merged into Rule #11 (Test Orchestration)
- Rule #17 (Screenshot Tests) â†’ Merged into Rule #11 (Test Orchestration)
- Rule #20 (KDTR Enforcement) â†’ Merged into Rule #10 (Test Pattern Reuse)</p>
<hr />
<h2 id="prompt-redesign-6-specialized-prompts">ğŸ¤– Prompt Redesign (6 Specialized Prompts)<a class="headerlink" href="#prompt-redesign-6-specialized-prompts" title="Permanent link">&para;</a></h2>
<h3 id="1-routepromptmd-entry-point">1. route.prompt.md (Entry Point)<a class="headerlink" href="#1-routepromptmd-entry-point" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Analyze user request â†’ route to appropriate specialist</p>
<p><strong>Workflow:</strong>
1. Parse user request
2. Detect request type (new feature, bug fix, test, healthcheck, governance)
3. Check for existing key (load context if found)
4. Route to specialist:
   - Multi-task or new feature â†’ <strong>plan.prompt.md</strong>
   - Single task with existing plan â†’ <strong>execute.prompt.md</strong>
   - Test generation/execution â†’ <strong>test.prompt.md</strong>
   - System health check â†’ <strong>validate.prompt.md</strong>
   - KDS changes â†’ <strong>govern.prompt.md</strong>
5. Generate handoff JSON
6. Output using template: <code>templates/user-output/routed.md</code></p>
<p><strong>Never Does:</strong> Execute tasks, create plans, run tests</p>
<p><strong>Key Decision Logic:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>IF request contains &quot;KDS&quot; modification:
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>  â†’ govern.prompt.md
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>ELSE IF request = &quot;healthcheck&quot; OR &quot;validate&quot;:
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>  â†’ validate.prompt.md
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>ELSE IF request = multiple tasks OR new key:
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>  â†’ plan.prompt.md
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>ELSE IF request = single task AND existing plan:
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>  â†’ execute.prompt.md
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>ELSE IF request contains &quot;test&quot;:
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>  â†’ test.prompt.md
</span></code></pre></div></p>
<hr />
<h3 id="2-planpromptmd-planning-orchestrator">2. plan.prompt.md (Planning Orchestrator)<a class="headerlink" href="#2-planpromptmd-planning-orchestrator" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Break features into phases/tasks â†’ generate handoffs</p>
<p><strong>Workflow:</strong>
1. Load existing plan (if key exists) - detect conflicts
2. Analyze user request
3. Break into phases (logical groupings)
4. Break phases into tasks (1a: test, 1b-n: implementation)
5. Generate handoff JSONs for all tasks
6. Create/update <code>KDS/keys/{key}/plan.md</code>
7. Output using template: <code>templates/user-output/plan-complete.md</code></p>
<p><strong>Output Format (Template-Driven):</strong>
- Plan summary (phases, tasks, duration)
- Phase breakdown
- Options: Execute All (E2E) vs Phase-by-Phase
- Next command with handoff file</p>
<p><strong>Never Does:</strong> Implement code, run tests, execute tasks</p>
<hr />
<h3 id="3-executepromptmd-execution-engine">3. execute.prompt.md (Execution Engine)<a class="headerlink" href="#3-executepromptmd-execution-engine" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Implement code â†’ update files â†’ validate results</p>
<p><strong>Replaces:</strong> task.prompt.md, todo.prompt.md (consolidates execution logic)</p>
<p><strong>Workflow:</strong>
1. Load handoff JSON (<code>KDS/keys/{key}/handoffs/{phase-task}.json</code>)
2. Pre-execution validation (build clean, git clean)
3. Implement changes per handoff data
4. Post-execution validation (build succeeds, tests pass)
5. Update work-log.md
6. Check autoChain flag:
   - <strong>true</strong> â†’ Load next handoff, continue (5s countdown)
   - <strong>false</strong> â†’ Output next command, HALT
7. Output using template: <code>templates/user-output/task-complete.md</code></p>
<p><strong>Never Does:</strong> Create plans, generate tests, modify KDS</p>
<hr />
<h3 id="4-testpromptmd-test-generation-orchestration">4. test.prompt.md (Test Generation &amp; Orchestration)<a class="headerlink" href="#4-testpromptmd-test-generation-orchestration" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Generate tests â†’ run tests â†’ orchestrate Playwright</p>
<p><strong>Workflow:</strong>
1. Load handoff JSON
2. Check test registry (<code>KDS/tests/index.json</code>) for reusable patterns
3. If pattern found â†’ Reuse (copy &amp; customize)
4. If no pattern â†’ Generate new test:
   - Load acceptance criteria from handoff
   - Generate Playwright test
   - Create orchestration script
5. Run test (dotnet orchestration)
6. If PASSED â†’ Update test registry with pattern
7. Update work-log.md
8. Output using template: <code>templates/user-output/test-complete.md</code></p>
<p><strong>Test Registry (Simplified):</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="p">{</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="nt">&quot;tests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user-auth-flow&quot;</span><span class="p">,</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">      </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;authentication&quot;</span><span class="p">,</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">      </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tests/UI/user-auth.spec.ts&quot;</span><span class="p">,</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">      </span><span class="nt">&quot;orchestrator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Scripts/run-user-auth-test.ps1&quot;</span><span class="p">,</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">      </span><span class="nt">&quot;reusable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">      </span><span class="nt">&quot;session&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">212</span><span class="p">,</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User authentication with Session 212 tokens&quot;</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">  </span><span class="nt">&quot;patterns&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="w">    </span><span class="nt">&quot;authentication&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a><span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Login flow with token validation&quot;</span><span class="p">,</span>
</span><span id="__span-31-16"><a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="w">      </span><span class="nt">&quot;template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;KDS/tests/patterns/auth-pattern.json&quot;</span>
</span><span id="__span-31-17"><a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-31-18"><a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-31-19"><a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Never Does:</strong> Implement features, create plans, modify KDS</p>
<hr />
<h3 id="5-validatepromptmd-healthcheck-validation">5. validate.prompt.md (Healthcheck &amp; Validation)<a class="headerlink" href="#5-validatepromptmd-healthcheck-validation" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Check system health â†’ report issues</p>
<p><strong>Workflow:</strong>
1. Scan codebase for issues:
   - Build errors
   - Missing tests for implemented features
   - Orphaned files
   - Rule violations
2. Generate health report
3. Output using template: <code>templates/user-output/healthcheck.md</code>
4. If issues found â†’ Suggest remediation commands</p>
<p><strong>Never Does:</strong> Fix issues, execute tasks, create plans</p>
<hr />
<h3 id="6-governpromptmd-governance-gatekeeper">6. govern.prompt.md (Governance Gatekeeper)<a class="headerlink" href="#6-governpromptmd-governance-gatekeeper" title="Permanent link">&para;</a></h3>
<p><strong>Role:</strong> Review KDS changes â†’ approve/reject</p>
<p><strong>Workflow:</strong>
1. Load governance rules (<code>KDS/governance/kds-rulebook.md</code>)
2. Analyze requested change
3. Detect conflicts with existing rules/prompts
4. Generate compatibility report:
   - <strong>APPROVED</strong> â†’ Create implementation handoff
   - <strong>REJECTED</strong> â†’ Explain violation, suggest alternatives
5. Output using template: <code>templates/user-output/governance-decision.md</code></p>
<p><strong>Never Does:</strong> Implement changes, execute code, create features</p>
<hr />
<h2 id="migration-strategy">ğŸ“Š Migration Strategy<a class="headerlink" href="#migration-strategy" title="Permanent link">&para;</a></h2>
<h3 id="phase-1-preparation-30-min">Phase 1: Preparation (30 min)<a class="headerlink" href="#phase-1-preparation-30-min" title="Permanent link">&para;</a></h3>
<p><strong>Actions:</strong>
1. âœ… Create this design document (<code>KDS/KDS-DESIGN-PLAN.md</code>)
2. âœ… Backup existing KDS to KDS_backup (DONE)
3. Delete all files from <code>KDS/</code> folder
4. Create new directory structure (empty folders)</p>
<p><strong>Commands:</strong>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c"># Delete all KDS contents (backup already exists)</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nb">Remove-Item</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS\*&quot;</span> <span class="n">-Recurse</span> <span class="n">-Force</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c"># Create new structure</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="nv">$folders</span> <span class="p">=</span> <span class="p">@(</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>  <span class="s1">&#39;KDS/governance&#39;</span><span class="p">,</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>  <span class="s1">&#39;KDS/prompts/core&#39;</span><span class="p">,</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>  <span class="s1">&#39;KDS/templates/user-output&#39;</span><span class="p">,</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>  <span class="s1">&#39;KDS/templates/handoffs&#39;</span><span class="p">,</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>  <span class="s1">&#39;KDS/keys&#39;</span><span class="p">,</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>  <span class="s1">&#39;KDS/tests/patterns&#39;</span><span class="p">,</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>  <span class="s1">&#39;KDS/docs&#39;</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="p">)</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="nv">$folders</span> <span class="p">|</span> <span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span> <span class="nb">New-Item</span> <span class="n">-ItemType</span> <span class="n">Directory</span> <span class="n">-Path</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\$_&quot;</span> <span class="n">-Force</span> <span class="p">}</span>
</span></code></pre></div></p>
<hr />
<h3 id="phase-2-core-files-1-hour">Phase 2: Core Files (1 hour)<a class="headerlink" href="#phase-2-core-files-1-hour" title="Permanent link">&para;</a></h3>
<p><strong>Create in order:</strong></p>
<ol>
<li><strong>kds.config.json</strong> (ğŸ”‘ PORTABILITY CONFIG)</li>
<li>Application settings (name, framework, paths, commands)</li>
<li>Testing configuration (framework, orchestration, health checks)</li>
<li>Database settings (provider, connection, test data)</li>
<li>
<p>Governance rules (auto-chain, validation requirements)</p>
</li>
<li>
<p><strong>governance/kds-rulebook.md</strong> (12 rules with KDS.md mappings)</p>
</li>
<li>
<p><strong>prompts/core/config-loader.md</strong> (ğŸ”‘ PORTABILITY: Config loading logic)</p>
</li>
<li>
<p><strong>prompts/core/validation.md</strong> (shared validation)</p>
</li>
<li>
<p><strong>prompts/core/handoff.md</strong> (handoff workflow)</p>
</li>
<li>
<p><strong>prompts/core/test-first.md</strong> (TDD workflow)</p>
</li>
<li>
<p><strong>schemas/handoffs/*.json</strong> (5 handoff schemas)</p>
</li>
<li>
<p><strong>schemas/outputs/*.xsd</strong> (4 output schemas)</p>
</li>
<li>
<p><strong>templates/user-output/*.md</strong> (5 templates)</p>
</li>
<li>
<p><strong>templates/handoffs/*.json</strong> (3 templates)</p>
</li>
</ol>
<hr />
<h3 id="phase-3-prompts-2-hours">Phase 3: Prompts (2 hours)<a class="headerlink" href="#phase-3-prompts-2-hours" title="Permanent link">&para;</a></h3>
<p><strong>Create in order:</strong></p>
<ol>
<li><strong>route.prompt.md</strong> (entry point)</li>
<li><strong>plan.prompt.md</strong> (planning)</li>
<li><strong>execute.prompt.md</strong> (execution)</li>
<li><strong>test.prompt.md</strong> (testing)</li>
<li><strong>validate.prompt.md</strong> (healthcheck)</li>
<li><strong>govern.prompt.md</strong> (governance)</li>
</ol>
<hr />
<h3 id="phase-4-documentation-1-hour">Phase 4: Documentation (1 hour)<a class="headerlink" href="#phase-4-documentation-1-hour" title="Permanent link">&para;</a></h3>
<p><strong>Create in order:</strong></p>
<ol>
<li><strong>docs/portability-guide.md</strong> (ğŸ”‘ PORTABILITY: How to port KDS to new app)</li>
<li><strong>docs/architecture.md</strong> (system overview)</li>
<li><strong>docs/database.md</strong> (schema, Session 212)</li>
<li><strong>docs/api-contracts.md</strong> (endpoints)</li>
<li><strong>docs/testing-guide.md</strong> (test patterns - framework-agnostic)</li>
<li><strong>docs/quick-start.md</strong> (getting started)</li>
<li><strong>README.md</strong> (system overview)</li>
</ol>
<hr />
<h3 id="phase-5-testing-1-hour">Phase 5: Testing (1 hour)<a class="headerlink" href="#phase-5-testing-1-hour" title="Permanent link">&para;</a></h3>
<p><strong>Actions:</strong>
1. Create test index (<code>KDS/tests/index.json</code>)
2. Migrate essential test patterns from KDS_backup
3. Create sample handoff JSON
4. Test route.prompt.md â†’ plan.prompt.md workflow
5. Validate template rendering</p>
<hr />
<h2 id="success-criteria">ğŸ¯ Success Criteria<a class="headerlink" href="#success-criteria" title="Permanent link">&para;</a></h2>
<h3 id="quantitative-goals">Quantitative Goals<a class="headerlink" href="#quantitative-goals" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>v2.1.0</th>
<th>v3.0.0 Target</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Rules</strong></td>
<td>20</td>
<td>13 (captures all 20 KDS.md rules + 1 new)</td>
</tr>
<tr>
<td><strong>Prompts</strong></td>
<td>14</td>
<td>6</td>
</tr>
<tr>
<td><strong>Total KDS Files</strong></td>
<td>150+</td>
<td>&lt;40</td>
</tr>
<tr>
<td><strong>Duplicate Logic Lines</strong></td>
<td>~180</td>
<td>0</td>
</tr>
<tr>
<td><strong>Template Files</strong></td>
<td>0</td>
<td>8</td>
</tr>
<tr>
<td><strong>Documentation Files</strong></td>
<td>50+</td>
<td>12</td>
</tr>
<tr>
<td><strong>Handoff Schema Fields</strong></td>
<td>15+</td>
<td>5</td>
</tr>
<tr>
<td><strong>Portability Setup Time</strong></td>
<td>N/A</td>
<td>&lt;5 minutes (update kds.config.json)</td>
</tr>
<tr>
<td><strong>Hard-Coded Paths</strong></td>
<td>50+</td>
<td>0 (all in config)</td>
</tr>
<tr>
<td><strong>Root .md Files</strong></td>
<td>Unlimited</td>
<td>1 (README.md only)</td>
</tr>
</tbody>
</table>
<h3 id="qualitative-goals">Qualitative Goals<a class="headerlink" href="#qualitative-goals" title="Permanent link">&para;</a></h3>
<ul>
<li>âœ… Zero rule duplication</li>
<li>âœ… Zero prompt overlap</li>
<li>âœ… Template-driven user output</li>
<li>âœ… Single governance file</li>
<li>âœ… Clear prompt responsibilities</li>
<li>âœ… Simplified test registry</li>
<li>âœ… User-customizable templates</li>
<li>âœ… <strong>PORTABLE</strong> - Works with ANY application (5-minute setup)</li>
<li>âœ… <strong>ALL 20 KDS.md rules captured</strong> (12 core rules + 8 merged)</li>
<li>âœ… Zero hard-coded dependencies</li>
</ul>
<hr />
<h2 id="invocation-examples">ğŸš€ Invocation Examples<a class="headerlink" href="#invocation-examples" title="Permanent link">&para;</a></h2>
<h3 id="example-1-new-feature-request">Example 1: New Feature Request<a class="headerlink" href="#example-1-new-feature-request" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>User: @workspace I need to add a user dashboard feature
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>System:
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>1. Invokes route.prompt.md
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>2. Detects: Multi-task, new feature
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>3. Routes to plan.prompt.md
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>4. Creates key: &quot;user-dashboard&quot;
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>5. Generates phases/tasks
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>6. Outputs using template: plan-complete.md
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>7. Shows next command: @workspace /execute #file:KDS/keys/user-dashboard/handoffs/phase-1.json
</span></code></pre></div>
<h3 id="example-2-single-task-existing-key">Example 2: Single Task (Existing Key)<a class="headerlink" href="#example-2-single-task-existing-key" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>User: @workspace /execute #file:KDS/keys/user-dashboard/handoffs/phase-1-task-2.json
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>System:
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>1. Invokes execute.prompt.md
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>2. Loads handoff JSON
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>3. Implements code changes
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>4. Validates build + tests
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>5. Updates work-log.md
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>6. Checks autoChain = true
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>7. Auto-loads next handoff (5s countdown)
</span></code></pre></div>
<h3 id="example-3-test-generation">Example 3: Test Generation<a class="headerlink" href="#example-3-test-generation" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>User: @workspace /test key=user-dashboard task=1a
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>System:
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>1. Invokes test.prompt.md
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>2. Checks test registry for &quot;authentication&quot; pattern
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>3. Finds reusable pattern
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>4. Copies &amp; customizes test
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>5. Runs Playwright test
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>6. Test PASSED
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>7. Updates test registry
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>8. Outputs using template: test-complete.md
</span></code></pre></div>
<h3 id="example-4-governance-change">Example 4: Governance Change<a class="headerlink" href="#example-4-governance-change" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>User: @workspace /govern request=&quot;Add new rule for database validation&quot;
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>System:
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>1. Invokes govern.prompt.md
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>2. Loads kds-rulebook.md
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>3. Analyzes compatibility
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>4. Detects: No conflicts
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>5. Approves change
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>6. Creates implementation handoff
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>7. Outputs using template: governance-decision.md
</span></code></pre></div>
<hr />
<h2 id="implementation-checklist">ğŸ“ Implementation Checklist<a class="headerlink" href="#implementation-checklist" title="Permanent link">&para;</a></h2>
<h3 id="pre-flight">Pre-Flight<a class="headerlink" href="#pre-flight" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Create this design document</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> Backup KDS to KDS_backup</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Review with user for approval</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Get confirmation to proceed</li>
</ul>
<h3 id="phase-1-cleanup-user-action">Phase 1: Cleanup (User Action)<a class="headerlink" href="#phase-1-cleanup-user-action" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Delete all files from KDS/</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create new directory structure</li>
</ul>
<h3 id="phase-2-core-files">Phase 2: Core Files<a class="headerlink" href="#phase-2-core-files" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create governance/kds-rulebook.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create prompts/core/validation.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create prompts/core/handoff.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create prompts/core/test-first.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create all templates (user-output + handoffs)</li>
</ul>
<h3 id="phase-3-prompts">Phase 3: Prompts<a class="headerlink" href="#phase-3-prompts" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create route.prompt.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create plan.prompt.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create execute.prompt.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create test.prompt.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create validate.prompt.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create govern.prompt.md</li>
</ul>
<h3 id="phase-4-documentation">Phase 4: Documentation<a class="headerlink" href="#phase-4-documentation" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create docs/architecture.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create docs/database.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create docs/api-contracts.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create docs/playwright-guide.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create docs/quick-start.md</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create README.md</li>
</ul>
<h3 id="phase-5-validation">Phase 5: Validation<a class="headerlink" href="#phase-5-validation" title="Permanent link">&para;</a></h3>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create test index</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Create sample handoff</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Test routing workflow</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Validate template rendering</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Commit to git</li>
</ul>
<hr />
<h2 id="rollback-plan">ğŸ”„ Rollback Plan<a class="headerlink" href="#rollback-plan" title="Permanent link">&para;</a></h2>
<p>If redesign fails or issues discovered:</p>
<ol>
<li>
<p><strong>Immediate Rollback:</strong>
   <div class="language-powershell highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nb">Remove-Item</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS\*&quot;</span> <span class="n">-Recurse</span> <span class="n">-Force</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="nb">Copy-Item</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS_backup\*&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS\&quot;</span> <span class="n">-Recurse</span>
</span></code></pre></div></p>
</li>
<li>
<p><strong>Git Rollback:</strong>
   <div class="language-powershell highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="n">git</span> <span class="n">checkout</span> <span class="n">HEAD</span> <span class="p">--</span> <span class="n">KDS</span><span class="p">/</span>
</span></code></pre></div></p>
</li>
<li>
<p><strong>Incremental Migration (if partial rollback needed):</strong></p>
</li>
<li>Keep new governance/kds-rulebook.md</li>
<li>Restore old prompts temporarily</li>
<li>Migrate prompts one-by-one</li>
</ol>
<hr />
<h2 id="expected-benefits">ğŸ“ˆ Expected Benefits<a class="headerlink" href="#expected-benefits" title="Permanent link">&para;</a></h2>
<h3 id="portability">Portability<a class="headerlink" href="#portability" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>5-minute setup</strong> - Copy KDS, update kds.config.json, operational</li>
<li><strong>Framework-agnostic</strong> - Works with Blazor, React, Vue, Angular, Next.js</li>
<li><strong>Database-agnostic</strong> - SQL Server, PostgreSQL, MySQL, SQLite via config</li>
<li><strong>Test framework flexibility</strong> - Playwright, Cypress, Selenium, Jest via config</li>
<li><strong>Zero hard-coding</strong> - All paths, URLs, commands in config</li>
</ul>
<h3 id="developer-experience">Developer Experience<a class="headerlink" href="#developer-experience" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Faster onboarding</strong> - 12 docs instead of 50+</li>
<li><strong>Clear responsibilities</strong> - Each prompt has single job</li>
<li><strong>Customizable output</strong> - Edit templates, not prompts</li>
<li><strong>Less confusion</strong> - No overlapping prompt roles</li>
</ul>
<h3 id="maintenance">Maintenance<a class="headerlink" href="#maintenance" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Zero duplication</strong> - Core modules prevent copy-paste</li>
<li><strong>Easier updates</strong> - Change core module once, all prompts benefit</li>
<li><strong>Simpler governance</strong> - 12 rules instead of 20 (captures all 20 KDS.md rules)</li>
<li><strong>Cleaner structure</strong> - 40 files instead of 150+</li>
</ul>
<h3 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Faster execution</strong> - Less file scanning, simpler logic</li>
<li><strong>Better context management</strong> - Smaller prompts, focused responsibilities</li>
<li><strong>Reduced token usage</strong> - Templates use variables, less repetition</li>
</ul>
<hr />
<h2 id="faq">â“ FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<h3 id="q-why-delete-everything-instead-of-incremental-migration">Q: Why delete everything instead of incremental migration?<a class="headerlink" href="#q-why-delete-everything-instead-of-incremental-migration" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> Clean slate prevents:
- Carrying forward architectural debt
- Attempting to integrate incompatible patterns
- Incremental complexity accumulation
- Rule conflicts between old/new systems</p>
<p>Backup exists in KDS_backup for reference.</p>
<h3 id="q-what-happens-to-existing-keys-in-kdskey-data-streams">Q: What happens to existing keys in KDS/key-data-streams/?<a class="headerlink" href="#q-what-happens-to-existing-keys-in-kdskey-data-streams" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> They move to <code>KDS/keys/{key-name}/</code> with same structure:
- plan.md (current plan)
- work-log.md (activity log)
- handoffs/ (active handoffs)</p>
<p>Content preserved, just reorganized.</p>
<h3 id="q-how-do-templates-handle-customization">Q: How do templates handle customization?<a class="headerlink" href="#q-how-do-templates-handle-customization" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> User edits template files directly. Example:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>&lt;!-- User edits: KDS/templates/user-output/plan-complete.md --&gt;
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="gu">## âœ… MY CUSTOM PLAN HEADER | Key: `{{key}}`</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>&lt;!-- Changed &quot;Plan Complete&quot; to &quot;MY CUSTOM PLAN HEADER&quot; --&gt;
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>&lt;!-- All plan.prompt.md outputs now use custom header --&gt;
</span></code></pre></div>
<h3 id="q-what-if-i-need-the-old-prompt-behavior">Q: What if I need the old prompt behavior?<a class="headerlink" href="#q-what-if-i-need-the-old-prompt-behavior" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> Restore from KDS_backup/ temporarily:
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nb">Copy-Item</span> <span class="s2">&quot;KDS_backup/prompts/old-prompt.md&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;KDS/prompts/legacy/&quot;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="c"># Use: @workspace /legacy/old-prompt</span>
</span></code></pre></div></p>
<h3 id="q-how-portable-is-kds-v30">Q: How portable is KDS v3.0?<a class="headerlink" href="#q-how-portable-is-kds-v30" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> Fully portable in 5 minutes:</p>
<ol>
<li><strong>Copy KDS folder</strong> to new project</li>
<li><strong>Update kds.config.json:</strong></li>
<li>Application name, framework, paths</li>
<li>Test framework, commands</li>
<li>Database provider</li>
<li><strong>Run setup verification:</strong>
   <div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>@workspace /validate key=setup-check
</span></code></pre></div></li>
<li><strong>Operational</strong> - Zero code changes required</li>
</ol>
<p><strong>Supported Frameworks:</strong>
- Frontend: Blazor, React, Vue, Angular, Next.js, Vite
- Backend: .NET, Node.js, Python, Java, Go
- Testing: Playwright, Cypress, Selenium, Jest, Mocha
- Database: SQL Server, PostgreSQL, MySQL, SQLite, MongoDB</p>
<h3 id="q-are-all-20-kdsmd-rules-included">Q: Are all 20 KDS.md rules included?<a class="headerlink" href="#q-are-all-20-kdsmd-rules-included" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> Yes, 100% captured:
- 12 core rules (6 preserved, 6 enhanced)
- 8 merged rules (functionality integrated into core rules)
- 0 eliminated (only user preferences removed)</p>
<p>See Rule Mapping Table in Governance section for complete traceability.</p>
<hr />
<h2 id="timeline">ğŸ“… Timeline<a class="headerlink" href="#timeline" title="Permanent link">&para;</a></h2>
<p><strong>Total Estimated Time:</strong> 6.5 hours</p>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Duration</th>
<th>Cumulative</th>
<th>Deliverables</th>
</tr>
</thead>
<tbody>
<tr>
<td>Preparation</td>
<td>30 min</td>
<td>0.5 hrs</td>
<td>Backup, cleanup, folder structure</td>
</tr>
<tr>
<td>Core Files</td>
<td>1.5 hours</td>
<td>2.0 hrs</td>
<td>Config, schemas, templates, core modules</td>
</tr>
<tr>
<td>Prompts</td>
<td>2 hours</td>
<td>4.0 hrs</td>
<td>6 specialized prompts</td>
</tr>
<tr>
<td>Documentation</td>
<td>1.5 hours</td>
<td>5.5 hrs</td>
<td>12 docs including portability guide</td>
</tr>
<tr>
<td>Testing</td>
<td>1 hour</td>
<td>6.5 hrs</td>
<td>Validation, test index, portability verification</td>
</tr>
</tbody>
</table>
<p><strong>Recommended Schedule:</strong>
- Session 1 (2 hrs): Preparation + Core Files
- Session 2 (2 hrs): Prompts (3 prompts per hour)
- Session 3 (2.5 hrs): Documentation + Testing + Portability Verification</p>
<hr />
<h2 id="portability-architecture">ğŸŒ Portability Architecture<a class="headerlink" href="#portability-architecture" title="Permanent link">&para;</a></h2>
<h3 id="design-philosophy_1">Design Philosophy<a class="headerlink" href="#design-philosophy_1" title="Permanent link">&para;</a></h3>
<p><strong>KDS v3.0 is application-agnostic by design.</strong> Every aspect that could be application-specific is externalized to <code>kds.config.json</code>. The core prompts, governance rules, and templates work identically across ANY codebase.</p>
<h3 id="zero-hard-coding-examples">Zero Hard-Coding Examples<a class="headerlink" href="#zero-hard-coding-examples" title="Permanent link">&para;</a></h3>
<p><strong>v2.1.0 (Hard-Coded):</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>&lt;!-- plan.prompt.md --&gt;
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>cd &quot;D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas&quot;
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>dotnet build
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>npx playwright test --config=config/testing/playwright.config.cjs
</span></code></pre></div></p>
<p><strong>v3.0 (Config-Driven):</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>&lt;!-- plan.prompt.md --&gt;
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>cd &quot;{{APP_ROOT}}/{{SPA_PATH}}&quot;
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>{{BUILD_CMD}}
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>{{TEST_CMD}} --config={{TEST_CONFIG_PATH}}
</span></code></pre></div></p>
<h3 id="configuration-layers">Configuration Layers<a class="headerlink" href="#configuration-layers" title="Permanent link">&para;</a></h3>
<p><strong>1. Application Layer (kds.config.json)</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">  </span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyApp&quot;</span><span class="p">,</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;React&quot;</span><span class="p">,</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">    </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TypeScript&quot;</span><span class="p">,</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">    </span><span class="nt">&quot;rootPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/home/user/projects/myapp&quot;</span><span class="p">,</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="w">    </span><span class="nt">&quot;spaPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src&quot;</span><span class="p">,</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">    </span><span class="nt">&quot;testPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span><span class="p">,</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="w">    </span><span class="nt">&quot;buildCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm run build&quot;</span><span class="p">,</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="w">    </span><span class="nt">&quot;runCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm run dev&quot;</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>2. Testing Layer (kds.config.json)</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">  </span><span class="nt">&quot;testing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cypress&quot;</span><span class="p">,</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">    </span><span class="nt">&quot;configPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cypress.config.ts&quot;</span><span class="p">,</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">    </span><span class="nt">&quot;orchestrationPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;custom&quot;</span><span class="p">,</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">    </span><span class="nt">&quot;orchestrationScript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;scripts/run-tests.sh&quot;</span><span class="p">,</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">    </span><span class="nt">&quot;healthCheckUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:3000&quot;</span><span class="p">,</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">    </span><span class="nt">&quot;healthCheckTimeout&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">    </span><span class="nt">&quot;testCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npx cypress run&quot;</span><span class="p">,</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">    </span><span class="nt">&quot;headlessDefault&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>3. Database Layer (kds.config.json)</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="p">{</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">  </span><span class="nt">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">    </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PostgreSQL&quot;</span><span class="p">,</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="nt">&quot;connectionStringKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DATABASE_URL&quot;</span><span class="p">,</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">    </span><span class="nt">&quot;testSessionId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">    </span><span class="nt">&quot;testHostToken&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test-token-123&quot;</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>4. Governance Layer (kds.config.json)</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="p">{</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">  </span><span class="nt">&quot;governance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="nt">&quot;autoChainTasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span><span class="nt">&quot;autoChainPhases&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">    </span><span class="nt">&quot;requireBuildValidation&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span><span class="nt">&quot;requireGitValidation&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">    </span><span class="nt">&quot;testQualityThreshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="abstraction-services">Abstraction Services<a class="headerlink" href="#abstraction-services" title="Permanent link">&para;</a></h3>
<p><strong>Located in:</strong> <code>KDS/services/</code></p>
<p><strong>Purpose:</strong> Abstract framework-specific operations</p>
<p><strong>Example: test-orchestrator.cs</strong>
<div class="language-csharp highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1">// Framework-agnostic test orchestration</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">TestOrchestrator</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">KdsConfig</span><span class="w"> </span><span class="n">_config</span><span class="p">;</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">TestResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">RunTest</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">testFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="w">    </span><span class="c1">// Load config</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_config</span><span class="p">.</span><span class="n">Testing</span><span class="p">.</span><span class="n">Framework</span><span class="p">;</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">orchestrationScript</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_config</span><span class="p">.</span><span class="n">Testing</span><span class="p">.</span><span class="n">OrchestrationScript</span><span class="p">;</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="w">    </span><span class="c1">// Execute framework-specific orchestration</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="k">switch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="w">      </span><span class="s">&quot;Playwright&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">RunPlaywrightTest</span><span class="p">(</span><span class="n">testFile</span><span class="p">,</span><span class="w"> </span><span class="n">orchestrationScript</span><span class="p">),</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a><span class="w">      </span><span class="s">&quot;Cypress&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">RunCypressTest</span><span class="p">(</span><span class="n">testFile</span><span class="p">,</span><span class="w"> </span><span class="n">orchestrationScript</span><span class="p">),</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="w">      </span><span class="s">&quot;Selenium&quot;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">RunSeleniumTest</span><span class="p">(</span><span class="n">testFile</span><span class="p">,</span><span class="w"> </span><span class="n">orchestrationScript</span><span class="p">),</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NotSupportedException</span><span class="p">(</span><span class="s">$&quot;Framework {framework} not supported&quot;</span><span class="p">)</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a><span class="p">}</span>
</span></code></pre></div></p>
<h3 id="porting-workflow-5-minutes">Porting Workflow (5 Minutes)<a class="headerlink" href="#porting-workflow-5-minutes" title="Permanent link">&para;</a></h3>
<p><strong>Step 1: Copy KDS folder</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># From NoorCanvas project</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>cp<span class="w"> </span>-r<span class="w"> </span>KDS<span class="w"> </span>/path/to/new/project/KDS
</span></code></pre></div></p>
<p><strong>Step 2: Update kds.config.json</strong>
<div class="language-json highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="nt">&quot;application&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NewProject&quot;</span><span class="p">,</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vue&quot;</span><span class="p">,</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="w">    </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TypeScript&quot;</span><span class="p">,</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">    </span><span class="nt">&quot;rootPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/path/to/new/project&quot;</span><span class="p">,</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">    </span><span class="nt">&quot;spaPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src&quot;</span><span class="p">,</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="w">    </span><span class="nt">&quot;testPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tests/e2e&quot;</span><span class="p">,</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="w">    </span><span class="nt">&quot;buildCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm run build&quot;</span><span class="p">,</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="w">    </span><span class="nt">&quot;runCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm run serve&quot;</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="w">  </span><span class="nt">&quot;testing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="w">    </span><span class="nt">&quot;framework&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Playwright&quot;</span><span class="p">,</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a><span class="w">    </span><span class="nt">&quot;configPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;playwright.config.ts&quot;</span><span class="p">,</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="w">    </span><span class="nt">&quot;orchestrationPattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm-scripts&quot;</span><span class="p">,</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a><span class="w">    </span><span class="nt">&quot;orchestrationScript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npm test&quot;</span><span class="p">,</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a><span class="w">    </span><span class="nt">&quot;healthCheckUrl&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">,</span>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a><span class="w">    </span><span class="nt">&quot;testCommand&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;npx playwright test&quot;</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a><span class="w">  </span><span class="nt">&quot;database&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="w">    </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MongoDB&quot;</span><span class="p">,</span>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="w">    </span><span class="nt">&quot;connectionStringKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MONGO_URI&quot;</span><span class="p">,</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a><span class="w">    </span><span class="nt">&quot;testSessionId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="w">    </span><span class="nt">&quot;testHostToken&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test-token&quot;</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a><span class="p">}</span>
</span></code></pre></div></p>
<p><strong>Step 3: Verify Setup</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>@workspace /validate key=setup-check
</span></code></pre></div></p>
<p><strong>Step 4: Operational</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>@workspace /plan key=first-feature request=&quot;Add homepage&quot;
</span></code></pre></div></p>
<h3 id="framework-support-matrix">Framework Support Matrix<a class="headerlink" href="#framework-support-matrix" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Framework</th>
<th>Frontend</th>
<th>Backend</th>
<th>Testing</th>
<th>Database</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Blazor</strong></td>
<td>âœ…</td>
<td>âœ… (.NET)</td>
<td>âœ… Playwright</td>
<td>âœ… SQL Server</td>
</tr>
<tr>
<td><strong>React</strong></td>
<td>âœ…</td>
<td>âœ… (Node.js)</td>
<td>âœ… Playwright, Cypress, Jest</td>
<td>âœ… PostgreSQL, MongoDB</td>
</tr>
<tr>
<td><strong>Vue</strong></td>
<td>âœ…</td>
<td>âœ… (Node.js)</td>
<td>âœ… Playwright, Cypress</td>
<td>âœ… PostgreSQL, MySQL</td>
</tr>
<tr>
<td><strong>Angular</strong></td>
<td>âœ…</td>
<td>âœ… (Node.js)</td>
<td>âœ… Playwright, Protractor</td>
<td>âœ… PostgreSQL, MongoDB</td>
</tr>
<tr>
<td><strong>Next.js</strong></td>
<td>âœ…</td>
<td>âœ… (Node.js)</td>
<td>âœ… Playwright, Cypress, Jest</td>
<td>âœ… PostgreSQL, MongoDB</td>
</tr>
<tr>
<td><strong>Vite</strong></td>
<td>âœ…</td>
<td>âœ… (Node.js)</td>
<td>âœ… Playwright, Vitest</td>
<td>âœ… Any</td>
</tr>
<tr>
<td><strong>Django</strong></td>
<td>N/A</td>
<td>âœ… (Python)</td>
<td>âœ… Selenium, Playwright</td>
<td>âœ… PostgreSQL, MySQL</td>
</tr>
<tr>
<td><strong>Spring</strong></td>
<td>N/A</td>
<td>âœ… (Java)</td>
<td>âœ… Selenium, Playwright</td>
<td>âœ… PostgreSQL, MySQL, Oracle</td>
</tr>
</tbody>
</table>
<h3 id="portability-validation">Portability Validation<a class="headerlink" href="#portability-validation" title="Permanent link">&para;</a></h3>
<p><strong>validate.prompt.md checks:</strong>
1. âœ… kds.config.json exists
2. âœ… All required fields populated
3. âœ… Paths exist (rootPath, spaPath, testPath)
4. âœ… Commands executable (buildCommand, runCommand, testCommand)
5. âœ… Health check URL accessible
6. âœ… Database connection valid
7. âœ… Test framework installed</p>
<p><strong>Output:</strong>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="gu">## âœ… Portability Validation | Status: READY</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="gs">**Configuration:**</span> Valid âœ…
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="gs">**Paths:**</span> All exist âœ…
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="gs">**Commands:**</span> All executable âœ…
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="gs">**Health Check:**</span> http://localhost:8080 accessible âœ…
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="gs">**Database:**</span> MongoDB connection successful âœ…
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="gs">**Test Framework:**</span> Playwright installed âœ…
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="gs">**KDS System:**</span> Fully operational
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="gs">**Next Command:**</span> <span class="ni">@workspace</span> /plan key=first-feature request=&quot;Your request&quot;
</span></code></pre></div></p>
<h3 id="migration-from-application-specific-kds">Migration from Application-Specific KDS<a class="headerlink" href="#migration-from-application-specific-kds" title="Permanent link">&para;</a></h3>
<p><strong>If you have existing KDS v2.x with hard-coded values:</strong></p>
<ol>
<li>
<p><strong>Extract hard-coded values to kds.config.json</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>@workspace<span class="w"> </span>/govern<span class="w"> </span><span class="nv">request</span><span class="o">=</span><span class="s2">&quot;Generate kds.config.json from existing prompts&quot;</span>
</span></code></pre></div></p>
</li>
<li>
<p><strong>Replace hard-coded values with config variables</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>@workspace<span class="w"> </span>/govern<span class="w"> </span><span class="nv">request</span><span class="o">=</span><span class="s2">&quot;Replace hard-coded paths with {{CONFIG_VARS}}&quot;</span>
</span></code></pre></div></p>
</li>
<li>
<p><strong>Validate portability</strong>
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>@workspace<span class="w"> </span>/validate<span class="w"> </span><span class="nv">key</span><span class="o">=</span>portability-check
</span></code></pre></div></p>
</li>
<li>
<p><strong>Test on new project</strong></p>
</li>
<li>Copy KDS to test project</li>
<li>Update kds.config.json</li>
<li>Run validation</li>
<li>Create test feature</li>
</ol>
<h3 id="benefits-recap">Benefits Recap<a class="headerlink" href="#benefits-recap" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>v2.1.0</th>
<th>v3.0.0</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Setup Time</strong></td>
<td>N/A (hard-coded)</td>
<td>5 minutes</td>
</tr>
<tr>
<td><strong>Hard-Coded Values</strong></td>
<td>50+</td>
<td>0</td>
</tr>
<tr>
<td><strong>Supported Frameworks</strong></td>
<td>Blazor only</td>
<td>10+ frameworks</td>
</tr>
<tr>
<td><strong>Config Changes Required</strong></td>
<td>Edit 14 prompts</td>
<td>Edit 1 JSON file</td>
</tr>
<tr>
<td><strong>Portability</strong></td>
<td>âŒ Not portable</td>
<td>âœ… Fully portable</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="approval-next-steps">âœ… Approval &amp; Next Steps<a class="headerlink" href="#approval-next-steps" title="Permanent link">&para;</a></h2>
<h3 id="user-decision-required">User Decision Required<a class="headerlink" href="#user-decision-required" title="Permanent link">&para;</a></h3>
<p><strong>OPTION A: PROCEED WITH FULL REDESIGN</strong> âœ… RECOMMENDED
- Delete KDS/ contents (backup exists)
- Implement new portable system from scratch
- Timeline: 6.5 hours total
- Risk: Medium (backup exists for rollback)
- <strong>Benefit:</strong> Fully portable to ANY application in 5 minutes</p>
<p><strong>OPTION B: INCREMENTAL MIGRATION</strong>
- Keep existing KDS/
- Create KDS_v3/ with new system
- Gradual cutover
- Timeline: 10+ hours
- Risk: Low (old system remains functional)</p>
<p><strong>OPTION C: REVIEW DESIGN FIRST</strong>
- Review this plan in detail
- Suggest modifications
- Approve revised plan
- Then proceed</p>
<hr />
<p><strong>Next Command (if approved):</strong></p>
<div class="language-powershell highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c"># Execute Phase 1: Cleanup</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="nb">Remove-Item</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\KDS\*&quot;</span> <span class="n">-Recurse</span> <span class="n">-Force</span> <span class="n">-Exclude</span> <span class="s2">&quot;KDS-DESIGN-PLAN.md&quot;</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="c"># Create new structure</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="nv">$folders</span> <span class="p">=</span> <span class="p">@(</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>  <span class="s1">&#39;KDS/governance&#39;</span><span class="p">,</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>  <span class="s1">&#39;KDS/prompts/core&#39;</span><span class="p">,</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>  <span class="s1">&#39;KDS/schemas/handoffs&#39;</span><span class="p">,</span>
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>  <span class="s1">&#39;KDS/schemas/outputs&#39;</span><span class="p">,</span>
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>  <span class="s1">&#39;KDS/templates/user-output&#39;</span><span class="p">,</span>
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>  <span class="s1">&#39;KDS/templates/handoffs&#39;</span><span class="p">,</span>
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>  <span class="s1">&#39;KDS/services&#39;</span><span class="p">,</span>
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>  <span class="s1">&#39;KDS/keys&#39;</span><span class="p">,</span>
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>  <span class="s1">&#39;KDS/tests/patterns&#39;</span><span class="p">,</span>
</span><span id="__span-57-15"><a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a>  <span class="s1">&#39;KDS/docs&#39;</span>
</span><span id="__span-57-16"><a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a><span class="p">)</span>
</span><span id="__span-57-17"><a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a><span class="nv">$folders</span> <span class="p">|</span> <span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span> 
</span><span id="__span-57-18"><a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>  <span class="nb">New-Item</span> <span class="n">-ItemType</span> <span class="n">Directory</span> <span class="n">-Path</span> <span class="s2">&quot;D:\PROJECTS\NOOR CANVAS\$_&quot;</span> <span class="n">-Force</span> 
</span><span id="__span-57-19"><a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<p><strong>Document Version:</strong> 3.0.0<br />
<strong>Status:</strong> Awaiting User Approval<br />
<strong>Last Updated:</strong> 2025-11-02</p>
<hr />
<h2 id="achievement-summary">ğŸ¯ Achievement Summary<a class="headerlink" href="#achievement-summary" title="Permanent link">&para;</a></h2>
<h3 id="what-makes-kds-v30-different">What Makes KDS v3.0 Different<a class="headerlink" href="#what-makes-kds-v30-different" title="Permanent link">&para;</a></h3>
<p><strong>v2.1.0:</strong> Application-specific context management system with hard-coded NoorCanvas dependencies</p>
<p><strong>v3.0:</strong> <strong>Fully portable AI orchestration framework</strong> that works with ANY codebase in 5 minutes</p>
<h3 id="key-achievements">Key Achievements<a class="headerlink" href="#key-achievements" title="Permanent link">&para;</a></h3>
<p>âœ… <strong>All 20 KDS.md rules captured</strong> (13 core: 12 consolidated + 1 new)<br />
âœ… <strong>Zero hard-coded dependencies</strong> (100% config-driven)<br />
âœ… <strong>Framework-agnostic</strong> (10+ frameworks supported)<br />
âœ… <strong>5-minute portability</strong> (copy + update config + operational)<br />
âœ… <strong>35% reduction in rules</strong> (20 â†’ 13 with ENHANCED functionality)<br />
âœ… <strong>57% reduction in prompts</strong> (14 â†’ 6 with clearer responsibilities)<br />
âœ… <strong>73% reduction in files</strong> (150+ â†’ &lt;40)<br />
âœ… <strong>100% elimination of duplication</strong> (~180 duplicate lines â†’ 0)<br />
âœ… <strong>Documentation organization enforced</strong> (Rule #13 - no root .md clutter)</p>
<h3 id="innovation-highlights">Innovation Highlights<a class="headerlink" href="#innovation-highlights" title="Permanent link">&para;</a></h3>
<p>ğŸ”‘ <strong>kds.config.json</strong> - Single source of truth for all app-specific settings<br />
ğŸ”‘ <strong>Abstraction Services</strong> - Framework-agnostic orchestration<br />
ğŸ”‘ <strong>Schema Validation</strong> - JSON/XML schemas enforce handoff contracts<br />
ğŸ”‘ <strong>Template Engine</strong> - User-customizable output without touching prompts<br />
ğŸ”‘ <strong>Portability Guide</strong> - Complete documentation for porting to new applications</p>
<h3 id="real-world-impact">Real-World Impact<a class="headerlink" href="#real-world-impact" title="Permanent link">&para;</a></h3>
<p><strong>Before (v2.1.0):</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>User wants to use KDS for React app
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>â†’ Edit 14 prompts to replace Blazor/dotnet/paths
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>â†’ Edit 20 rules to update framework references
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>â†’ Test extensively, fix broken logic
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>â†’ Timeline: 10+ hours
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>â†’ Risk: High (easy to miss hard-coded values)
</span></code></pre></div></p>
<p><strong>After (v3.0):</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>User wants to use KDS for React app
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>â†’ Copy KDS folder
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>â†’ Update kds.config.json (framework, paths, commands)
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>â†’ Run: @workspace /validate key=setup-check
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>â†’ Timeline: 5 minutes
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>â†’ Risk: Zero (config validation catches errors)
</span></code></pre></div></p>
<hr />
<p><strong>Ready to revolutionize AI-assisted development workflows across ANY codebase.</strong> ğŸš€</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 CORTEX Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/asifhussain60/CORTEX" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.expand", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tabs.link", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>